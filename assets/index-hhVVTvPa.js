(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function Kv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ud={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function QS(){if(c_)return yl;c_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:f,ref:l!==void 0?l:null,props:c}}return yl.Fragment=e,yl.jsx=i,yl.jsxs=i,yl}var h_;function KS(){return h_||(h_=1,ud.exports=QS()),ud.exports}var E=KS(),cd={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function YS(){if(f_)return Oe;f_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.iterator;function M(D){return D===null||typeof D!="object"?null:(D=R&&D[R]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,W={};function X(D,U,te){this.props=D,this.context=U,this.refs=W,this.updater=te||z}X.prototype.isReactComponent={},X.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},X.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Q(){}Q.prototype=X.prototype;function le(D,U,te){this.props=D,this.context=U,this.refs=W,this.updater=te||z}var ue=le.prototype=new Q;ue.constructor=le,J(ue,X.prototype),ue.isPureReactComponent=!0;var we=Array.isArray,he={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function N(D,U,te,ee,oe,ge){return te=ge.ref,{$$typeof:s,type:D,key:U,ref:te!==void 0?te:null,props:ge}}function A(D,U){return N(D.type,U,void 0,void 0,void 0,D.props)}function C(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function V(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(te){return U[te]})}var x=/\/+/g;function P(D,U){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):U.toString(36)}function w(){}function Ye(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(w,w):(D.status="pending",D.then(function(U){D.status==="pending"&&(D.status="fulfilled",D.value=U)},function(U){D.status==="pending"&&(D.status="rejected",D.reason=U)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Qe(D,U,te,ee,oe){var ge=typeof D;(ge==="undefined"||ge==="boolean")&&(D=null);var fe=!1;if(D===null)fe=!0;else switch(ge){case"bigint":case"string":case"number":fe=!0;break;case"object":switch(D.$$typeof){case s:case e:fe=!0;break;case S:return fe=D._init,Qe(fe(D._payload),U,te,ee,oe)}}if(fe)return oe=oe(D),fe=ee===""?"."+P(D,0):ee,we(oe)?(te="",fe!=null&&(te=fe.replace(x,"$&/")+"/"),Qe(oe,U,te,"",function(ft){return ft})):oe!=null&&(C(oe)&&(oe=A(oe,te+(oe.key==null||D&&D.key===oe.key?"":(""+oe.key).replace(x,"$&/")+"/")+fe)),U.push(oe)),1;fe=0;var $e=ee===""?".":ee+":";if(we(D))for(var Ve=0;Ve<D.length;Ve++)ee=D[Ve],ge=$e+P(ee,Ve),fe+=Qe(ee,U,te,ge,oe);else if(Ve=M(D),typeof Ve=="function")for(D=Ve.call(D),Ve=0;!(ee=D.next()).done;)ee=ee.value,ge=$e+P(ee,Ve++),fe+=Qe(ee,U,te,ge,oe);else if(ge==="object"){if(typeof D.then=="function")return Qe(Ye(D),U,te,ee,oe);throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return fe}function G(D,U,te){if(D==null)return D;var ee=[],oe=0;return Qe(D,ee,"","",function(ge){return U.call(te,ge,oe++)}),ee}function ce(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(te){(D._status===0||D._status===-1)&&(D._status=1,D._result=te)},function(te){(D._status===0||D._status===-1)&&(D._status=2,D._result=te)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var pe=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function xe(){}return Oe.Children={map:G,forEach:function(D,U,te){G(D,function(){U.apply(this,arguments)},te)},count:function(D){var U=0;return G(D,function(){U++}),U},toArray:function(D){return G(D,function(U){return U})||[]},only:function(D){if(!C(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Oe.Component=X,Oe.Fragment=i,Oe.Profiler=l,Oe.PureComponent=le,Oe.StrictMode=r,Oe.Suspense=y,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=he,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(D){return he.H.useMemoCache(D)}},Oe.cache=function(D){return function(){return D.apply(null,arguments)}},Oe.cloneElement=function(D,U,te){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ee=J({},D.props),oe=D.key,ge=void 0;if(U!=null)for(fe in U.ref!==void 0&&(ge=void 0),U.key!==void 0&&(oe=""+U.key),U)!se.call(U,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&U.ref===void 0||(ee[fe]=U[fe]);var fe=arguments.length-2;if(fe===1)ee.children=te;else if(1<fe){for(var $e=Array(fe),Ve=0;Ve<fe;Ve++)$e[Ve]=arguments[Ve+2];ee.children=$e}return N(D.type,oe,void 0,void 0,ge,ee)},Oe.createContext=function(D){return D={$$typeof:f,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Oe.createElement=function(D,U,te){var ee,oe={},ge=null;if(U!=null)for(ee in U.key!==void 0&&(ge=""+U.key),U)se.call(U,ee)&&ee!=="key"&&ee!=="__self"&&ee!=="__source"&&(oe[ee]=U[ee]);var fe=arguments.length-2;if(fe===1)oe.children=te;else if(1<fe){for(var $e=Array(fe),Ve=0;Ve<fe;Ve++)$e[Ve]=arguments[Ve+2];oe.children=$e}if(D&&D.defaultProps)for(ee in fe=D.defaultProps,fe)oe[ee]===void 0&&(oe[ee]=fe[ee]);return N(D,ge,void 0,void 0,null,oe)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(D){return{$$typeof:p,render:D}},Oe.isValidElement=C,Oe.lazy=function(D){return{$$typeof:S,_payload:{_status:-1,_result:D},_init:ce}},Oe.memo=function(D,U){return{$$typeof:g,type:D,compare:U===void 0?null:U}},Oe.startTransition=function(D){var U=he.T,te={};he.T=te;try{var ee=D(),oe=he.S;oe!==null&&oe(te,ee),typeof ee=="object"&&ee!==null&&typeof ee.then=="function"&&ee.then(xe,pe)}catch(ge){pe(ge)}finally{he.T=U}},Oe.unstable_useCacheRefresh=function(){return he.H.useCacheRefresh()},Oe.use=function(D){return he.H.use(D)},Oe.useActionState=function(D,U,te){return he.H.useActionState(D,U,te)},Oe.useCallback=function(D,U){return he.H.useCallback(D,U)},Oe.useContext=function(D){return he.H.useContext(D)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(D,U){return he.H.useDeferredValue(D,U)},Oe.useEffect=function(D,U,te){var ee=he.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ee.useEffect(D,U)},Oe.useId=function(){return he.H.useId()},Oe.useImperativeHandle=function(D,U,te){return he.H.useImperativeHandle(D,U,te)},Oe.useInsertionEffect=function(D,U){return he.H.useInsertionEffect(D,U)},Oe.useLayoutEffect=function(D,U){return he.H.useLayoutEffect(D,U)},Oe.useMemo=function(D,U){return he.H.useMemo(D,U)},Oe.useOptimistic=function(D,U){return he.H.useOptimistic(D,U)},Oe.useReducer=function(D,U,te){return he.H.useReducer(D,U,te)},Oe.useRef=function(D){return he.H.useRef(D)},Oe.useState=function(D){return he.H.useState(D)},Oe.useSyncExternalStore=function(D,U,te){return he.H.useSyncExternalStore(D,U,te)},Oe.useTransition=function(){return he.H.useTransition()},Oe.version="19.1.1",Oe}var d_;function sm(){return d_||(d_=1,cd.exports=YS()),cd.exports}var Se=sm();const fc=Kv(Se);var hd={exports:{}},_l={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function XS(){return m_||(m_=1,(function(s){function e(G,ce){var pe=G.length;G.push(ce);e:for(;0<pe;){var xe=pe-1>>>1,D=G[xe];if(0<l(D,ce))G[xe]=ce,G[pe]=D,pe=xe;else break e}}function i(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ce=G[0],pe=G.pop();if(pe!==ce){G[0]=pe;e:for(var xe=0,D=G.length,U=D>>>1;xe<U;){var te=2*(xe+1)-1,ee=G[te],oe=te+1,ge=G[oe];if(0>l(ee,pe))oe<D&&0>l(ge,ee)?(G[xe]=ge,G[oe]=pe,xe=oe):(G[xe]=ee,G[te]=pe,xe=te);else if(oe<D&&0>l(ge,pe))G[xe]=ge,G[oe]=pe,xe=oe;else break e}}return ce}function l(G,ce){var pe=G.sortIndex-ce.sortIndex;return pe!==0?pe:G.id-ce.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();s.unstable_now=function(){return f.now()-p}}var y=[],g=[],S=1,R=null,M=3,z=!1,J=!1,W=!1,X=!1,Q=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function we(G){for(var ce=i(g);ce!==null;){if(ce.callback===null)r(g);else if(ce.startTime<=G)r(g),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=i(g)}}function he(G){if(W=!1,we(G),!J)if(i(y)!==null)J=!0,se||(se=!0,P());else{var ce=i(g);ce!==null&&Qe(he,ce.startTime-G)}}var se=!1,N=-1,A=5,C=-1;function V(){return X?!0:!(s.unstable_now()-C<A)}function x(){if(X=!1,se){var G=s.unstable_now();C=G;var ce=!0;try{e:{J=!1,W&&(W=!1,le(N),N=-1),z=!0;var pe=M;try{t:{for(we(G),R=i(y);R!==null&&!(R.expirationTime>G&&V());){var xe=R.callback;if(typeof xe=="function"){R.callback=null,M=R.priorityLevel;var D=xe(R.expirationTime<=G);if(G=s.unstable_now(),typeof D=="function"){R.callback=D,we(G),ce=!0;break t}R===i(y)&&r(y),we(G)}else r(y);R=i(y)}if(R!==null)ce=!0;else{var U=i(g);U!==null&&Qe(he,U.startTime-G),ce=!1}}break e}finally{R=null,M=pe,z=!1}ce=void 0}}finally{ce?P():se=!1}}}var P;if(typeof ue=="function")P=function(){ue(x)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Ye=w.port2;w.port1.onmessage=x,P=function(){Ye.postMessage(null)}}else P=function(){Q(x,0)};function Qe(G,ce){N=Q(function(){G(s.unstable_now())},ce)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return M},s.unstable_next=function(G){switch(M){case 1:case 2:case 3:var ce=3;break;default:ce=M}var pe=M;M=ce;try{return G()}finally{M=pe}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(G,ce){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=M;M=G;try{return ce()}finally{M=pe}},s.unstable_scheduleCallback=function(G,ce,pe){var xe=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?xe+pe:xe):pe=xe,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=pe+D,G={id:S++,callback:ce,priorityLevel:G,startTime:pe,expirationTime:D,sortIndex:-1},pe>xe?(G.sortIndex=pe,e(g,G),i(y)===null&&G===i(g)&&(W?(le(N),N=-1):W=!0,Qe(he,pe-xe))):(G.sortIndex=D,e(y,G),J||z||(J=!0,se||(se=!0,P()))),G},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(G){var ce=M;return function(){var pe=M;M=ce;try{return G.apply(this,arguments)}finally{M=pe}}}})(dd)),dd}var p_;function $S(){return p_||(p_=1,fd.exports=XS()),fd.exports}var md={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function ZS(){if(g_)return sn;g_=1;var s=sm();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)g+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,g,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:y,containerInfo:g,implementation:S}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(y,g){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,S)},sn.flushSync=function(y){var g=f.T,S=r.p;try{if(f.T=null,r.p=2,y)return y()}finally{f.T=g,r.p=S,r.d.f()}},sn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},sn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},sn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var S=g.as,R=p(S,g.crossOrigin),M=typeof g.integrity=="string"?g.integrity:void 0,z=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;S==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:R,integrity:M,fetchPriority:z}):S==="script"&&r.d.X(y,{crossOrigin:R,integrity:M,fetchPriority:z,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},sn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var S=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},sn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var S=g.as,R=p(S,g.crossOrigin);r.d.L(y,S,{crossOrigin:R,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},sn.preloadModule=function(y,g){if(typeof y=="string")if(g){var S=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:S,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},sn.requestFormReset=function(y){r.d.r(y)},sn.unstable_batchedUpdates=function(y,g){return y(g)},sn.useFormState=function(y,g,S){return f.H.useFormState(y,g,S)},sn.useFormStatus=function(){return f.H.useHostTransitionStatus()},sn.version="19.1.1",sn}var y_;function JS(){if(y_)return md.exports;y_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),md.exports=ZS(),md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function WS(){if(__)return _l;__=1;var s=$S(),e=sm(),i=JS();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function y(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,o=n;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return p(h),t;if(d===o)return p(h),n;d=d.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=d;else{for(var v=!1,T=h.child;T;){if(T===a){v=!0,a=h,o=d;break}if(T===o){v=!0,o=h,a=d;break}T=T.sibling}if(!v){for(T=d.child;T;){if(T===a){v=!0,a=d,o=h;break}if(T===o){v=!0,o=d,a=h;break}T=T.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function g(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=g(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,R=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),z=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),le=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),we=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function Ye(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case X:return"Profiler";case W:return"StrictMode";case he:return"Suspense";case se:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case z:return"Portal";case ue:return(t.displayName||"Context")+".Provider";case le:return(t._context.displayName||"Context")+".Consumer";case we:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:Ye(t.type)||"Memo";case A:n=t._payload,t=t._init;try{return Ye(t(n))}catch{}}return null}var Qe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},xe=[],D=-1;function U(t){return{current:t}}function te(t){0>D||(t.current=xe[D],xe[D]=null,D--)}function ee(t,n){D++,xe[D]=t.current,t.current=n}var oe=U(null),ge=U(null),fe=U(null),$e=U(null);function Ve(t,n){switch(ee(fe,n),ee(ge,t),ee(oe,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Ly(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Ly(n),t=jy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(oe),ee(oe,t)}function ft(){te(oe),te(ge),te(fe)}function ns(t){t.memoizedState!==null&&ee($e,t);var n=oe.current,a=jy(n,t.type);n!==a&&(ee(ge,t),ee(oe,a))}function sr(t){ge.current===t&&(te(oe),te(ge)),$e.current===t&&(te($e),fl._currentValue=pe)}var Ni=Object.prototype.hasOwnProperty,ii=s.unstable_scheduleCallback,ar=s.unstable_cancelCallback,mo=s.unstable_shouldYield,is=s.unstable_requestPaint,tn=s.unstable_now,na=s.unstable_getCurrentPriorityLevel,Tt=s.unstable_ImmediatePriority,Ct=s.unstable_UserBlockingPriority,re=s.unstable_NormalPriority,ye=s.unstable_LowPriority,je=s.unstable_IdlePriority,et=s.log,Me=s.unstable_setDisableYieldValue,Tn=null,Mt=null;function Qt(t){if(typeof et=="function"&&Me(t),Mt&&typeof Mt.setStrictMode=="function")try{Mt.setStrictMode(Tn,t)}catch{}}var jt=Math.clz32?Math.clz32:ss,rs=Math.log,ia=Math.LN2;function ss(t){return t>>>=0,t===0?32:31-(rs(t)/ia|0)|0}var Dn=256,ri=4194304;function En(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function cn(t,n,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~d,o!==0?h=En(o):(v&=T,v!==0?h=En(v):a||(a=T&~t,a!==0&&(h=En(a))))):(T=o&~d,T!==0?h=En(T):v!==0?h=En(v):a||(a=o&~t,a!==0&&(h=En(a)))),h===0?0:n!==0&&n!==h&&(n&d)===0&&(d=h&-h,a=n&-n,d>=a||d===32&&(a&4194048)!==0)?n:h}function si(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function or(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function st(){var t=Dn;return Dn<<=1,(Dn&4194048)===0&&(Dn=256),t}function Et(){var t=ri;return ri<<=1,(ri&62914560)===0&&(ri=4194304),t}function pn(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function ut(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function as(t,n,a,o,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,B=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-jt(a),$=1<<K;T[K]=0,I[K]=-1;var q=B[K];if(q!==null)for(B[K]=null,K=0;K<q.length;K++){var H=q[K];H!==null&&(H.lane&=-536870913)}a&=~$}o!==0&&ai(t,o,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~n))}function ai(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-jt(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function lr(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var o=31-jt(a),h=1<<o;h&n|t[o]&n&&(t[o]|=n),a&=~h}}function po(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function go(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Di(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:r_(t.type))}function dh(t,n){var a=ce.p;try{return ce.p=t,n()}finally{ce.p=a}}var oi=Math.random().toString(36).slice(2),St="__reactFiber$"+oi,Kt="__reactProps$"+oi,xi="__reactContainer$"+oi,os="__reactEvents$"+oi,ls="__reactListeners$"+oi,mh="__reactHandles$"+oi,Fn="__reactResources$"+oi,ur="__reactMarker$"+oi;function ra(t){delete t[St],delete t[Kt],delete t[os],delete t[ls],delete t[mh]}function li(t){var n=t[St];if(n)return n;for(var a=t.parentNode;a;){if(n=a[xi]||a[St]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Hy(t);t!==null;){if(a=t[St])return a;t=Hy(t)}return n}t=a,a=t.parentNode}return null}function ui(t){if(t=t[St]||t[xi]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function cr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function hr(t){var n=t[Fn];return n||(n=t[Fn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function bt(t){t[ur]=!0}var Zl=new Set,us={};function ci(t,n){hi(t,n),hi(t+"Capture",n)}function hi(t,n){for(us[t]=n,t=0;t<n.length;t++)Zl.add(n[t])}var cs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fi={},sa={};function ph(t){return Ni.call(sa,t)?!0:Ni.call(fi,t)?!1:cs.test(t)?sa[t]=!0:(fi[t]=!0,!1)}function hs(t,n,a){if(ph(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function fs(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function xn(t,n,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+o)}}var ds,aa;function Oi(t){if(ds===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ds=n&&n[1]||"",aa=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ds+t+aa}var oa=!1;function la(t,n){if(!t||oa)return"";oa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(H){var q=H}Reflect.construct(t,[],$)}else{try{$.call()}catch(H){q=H}t.call($.prototype)}}else{try{throw Error()}catch(H){q=H}($=t())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=o.DetermineComponentFrameRoot(),v=d[0],T=d[1];if(v&&T){var I=v.split(`
`),B=T.split(`
`);for(h=o=0;o<I.length&&!I[o].includes("DetermineComponentFrameRoot");)o++;for(;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;if(o===I.length||h===B.length)for(o=I.length-1,h=B.length-1;1<=o&&0<=h&&I[o]!==B[h];)h--;for(;1<=o&&0<=h;o--,h--)if(I[o]!==B[h]){if(o!==1||h!==1)do if(o--,h--,0>h||I[o]!==B[h]){var K=`
`+I[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{oa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Oi(a):""}function gh(t){switch(t.tag){case 26:case 27:case 5:return Oi(t.type);case 16:return Oi("Lazy");case 13:return Oi("Suspense");case 19:return Oi("SuspenseList");case 0:case 15:return la(t.type,!1);case 11:return la(t.type.render,!1);case 1:return la(t.type,!0);case 31:return Oi("Activity");default:return""}}function Gn(t){try{var n="";do n+=gh(t),t=t.return;while(t);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ms(t){var n=fr(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,d.call(this,v)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function dr(t){t._valueTracker||(t._valueTracker=ms(t))}function tt(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return t&&(o=fr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(n.setValue(t),!0):!1}function Mi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ps=/[\n"\\]/g;function zt(t){return t.replace(ps,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function yo(t,n,a,o,h,d,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+mt(n)):t.value!==""+mt(n)&&(t.value=""+mt(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?vo(t,v,mt(n)):a!=null?vo(t,v,mt(a)):o!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+mt(T):t.removeAttribute("name")}function _o(t,n,a,o,h,d,v,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),n!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||n!=null))return;a=a!=null?""+mt(a):"",n=n!=null?""+mt(n):a,T||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function vo(t,n,a){n==="number"&&Mi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function mr(t,n,a,o){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+mt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Jl(t,n,a){if(n!=null&&(n=""+mt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+mt(a):""}function Wl(t,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if(Qe(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=mt(n),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function On(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var Vi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function To(t,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,a):typeof a!="number"||a===0||Vi.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Eo(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&To(t,h,o)}else for(var d in n)n.hasOwnProperty(d)&&To(t,d,n[d])}function ua(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qn(t){return tu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var So=null;function bo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var pr=null,hn=null;function nu(t){var n=ui(t);if(n&&(t=n.stateNode)){var a=t[Kt]||null;e:switch(t=n.stateNode,n.type){case"input":if(yo(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+zt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==t&&o.form===t.form){var h=o[Kt]||null;if(!h)throw Error(r(90));yo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===t.form&&tt(o)}break e;case"textarea":Jl(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&mr(t,!!a.multiple,n,!1)}}}var gs=!1;function ys(t,n,a){if(gs)return t(n,a);gs=!0;try{var o=t(n);return o}finally{if(gs=!1,(pr!==null||hn!==null)&&(Gu(),pr&&(n=pr,t=hn,hn=pr=null,nu(n),t)))for(n=0;n<t.length;n++)nu(t[n])}}function gr(t,n){var a=t.stateNode;if(a===null)return null;var o=a[Kt]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(fn)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{Pi=!1}var Mn=null,ot=null,ca=null;function iu(){if(ca)return ca;var t,n=ot,a=n.length,o,h="value"in Mn?Mn.value:Mn.textContent,d=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&n[a-o]===h[d-o];o++);return ca=h.slice(t,1<o?1-o:void 0)}function _s(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function vs(){return!0}function Ao(){return!1}function Vt(t){function n(a,o,h,d,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?vs:Ao,this.isPropagationStopped=Ao,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),n}var nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ts=Vt(nn),Es=S({},nn,{view:0,detail:0}),Ss=Vt(Es),ha,bs,di,As=S({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ma,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==di&&(di&&t.type==="mousemove"?(ha=t.screenX-di.screenX,bs=t.screenY-di.screenY):bs=ha=0,di=t),ha)},movementY:function(t){return"movementY"in t?t.movementY:bs}}),Rs=Vt(As),yh=S({},As,{dataTransfer:0}),ru=Vt(yh),ws=S({},Es,{relatedTarget:0}),fa=Vt(ws),su=S({},nn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ro=Vt(su),wo=S({},nn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),au=Vt(wo),da=S({},nn,{data:0}),Io=Vt(da),ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ki={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uu(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=lu[t])?!!n[t]:!1}function ma(){return uu}var cu=S({},Es,{key:function(t){if(t.key){var n=ou[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=_s(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ki[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ma,charCode:function(t){return t.type==="keypress"?_s(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_s(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pa=Vt(cu),dn=S({},As,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Co=Vt(dn),hu=S({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ma}),_r=Vt(hu),u=S({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Vt(u),_=S({},As,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b=Vt(_),j=S({},nn,{newState:0,oldState:0}),F=Vt(j),ae=[9,13,27,32],Ne=fn&&"CompositionEvent"in window,ct=null;fn&&"documentMode"in document&&(ct=document.documentMode);var Ze=fn&&"TextEvent"in window&&!ct,At=fn&&(!Ne||ct&&8<ct&&11>=ct),Sn=" ",mi=!1;function Kn(t,n){switch(t){case"keyup":return ae.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xn=!1;function No(t,n){switch(t){case"compositionend":return Yn(n);case"keypress":return n.which!==32?null:(mi=!0,Sn);case"textInput":return t=n.data,t===Sn&&mi?null:t;default:return null}}function vE(t,n){if(Xn)return t==="compositionend"||!Ne&&Kn(t,n)?(t=iu(),ca=ot=Mn=null,Xn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return At&&n.locale!=="ko"?null:n.data;default:return null}}var TE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!TE[t.type]:n==="textarea"}function Wm(t,n,a,o){pr?hn?hn.push(o):hn=[o]:pr=o,n=Zu(n,"onChange"),0<n.length&&(a=new Ts("onChange","change",null,a,o),t.push({event:a,listeners:n}))}var Do=null,xo=null;function EE(t){My(t,0)}function fu(t){var n=cr(t);if(tt(n))return t}function ep(t,n){if(t==="change")return n}var tp=!1;if(fn){var _h;if(fn){var vh="oninput"in document;if(!vh){var np=document.createElement("div");np.setAttribute("oninput","return;"),vh=typeof np.oninput=="function"}_h=vh}else _h=!1;tp=_h&&(!document.documentMode||9<document.documentMode)}function ip(){Do&&(Do.detachEvent("onpropertychange",rp),xo=Do=null)}function rp(t){if(t.propertyName==="value"&&fu(xo)){var n=[];Wm(n,xo,t,bo(t)),ys(EE,n)}}function SE(t,n,a){t==="focusin"?(ip(),Do=n,xo=a,Do.attachEvent("onpropertychange",rp)):t==="focusout"&&ip()}function bE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(xo)}function AE(t,n){if(t==="click")return fu(n)}function RE(t,n){if(t==="input"||t==="change")return fu(n)}function wE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var bn=typeof Object.is=="function"?Object.is:wE;function Oo(t,n){if(bn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!Ni.call(n,h)||!bn(t[h],n[h]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,n){var a=sp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=n&&o>=n)return{node:a,offset:n-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sp(a)}}function op(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?op(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function lp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Mi(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Mi(t.document)}return n}function Th(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var IE=fn&&"documentMode"in document&&11>=document.documentMode,ga=null,Eh=null,Mo=null,Sh=!1;function up(t,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Sh||ga==null||ga!==Mi(o)||(o=ga,"selectionStart"in o&&Th(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Mo&&Oo(Mo,o)||(Mo=o,o=Zu(Eh,"onSelect"),0<o.length&&(n=new Ts("onSelect","select",null,n,a),t.push({event:n,listeners:o}),n.target=ga)))}function Is(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var ya={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},bh={},cp={};fn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Cs(t){if(bh[t])return bh[t];if(!ya[t])return t;var n=ya[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in cp)return bh[t]=n[a];return t}var hp=Cs("animationend"),fp=Cs("animationiteration"),dp=Cs("animationstart"),CE=Cs("transitionrun"),NE=Cs("transitionstart"),DE=Cs("transitioncancel"),mp=Cs("transitionend"),pp=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function $n(t,n){pp.set(t,n),ci(n,[t])}var gp=new WeakMap;function Vn(t,n){if(typeof t=="object"&&t!==null){var a=gp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Gn(n)},gp.set(t,n),n)}return{value:t,source:n,stack:Gn(n)}}var Pn=[],_a=0,Rh=0;function du(){for(var t=_a,n=Rh=_a=0;n<t;){var a=Pn[n];Pn[n++]=null;var o=Pn[n];Pn[n++]=null;var h=Pn[n];Pn[n++]=null;var d=Pn[n];if(Pn[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}d!==0&&yp(a,h,d)}}function mu(t,n,a,o){Pn[_a++]=t,Pn[_a++]=n,Pn[_a++]=a,Pn[_a++]=o,Rh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wh(t,n,a,o){return mu(t,n,a,o),pu(t)}function va(t,n){return mu(t,null,null,n),pu(t)}function yp(t,n,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,o=d.alternate,o!==null&&(o.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&n!==null&&(h=31-jt(a),t=d.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=a|536870912),d):null}function pu(t){if(50<rl)throw rl=0,Mf=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ta={};function xE(t,n,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,n,a,o){return new xE(t,n,a,o)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ui(t,n){var a=t.alternate;return a===null?(a=An(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function _p(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function gu(t,n,a,o,h,d){var v=0;if(o=t,typeof t=="function")Ih(t)&&(v=1);else if(typeof t=="string")v=MS(t,a,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=An(31,a,n,h),t.elementType=C,t.lanes=d,t;case J:return Ns(a.children,h,d,n);case W:v=8,h|=24;break;case X:return t=An(12,a,n,h|2),t.elementType=X,t.lanes=d,t;case he:return t=An(13,a,n,h),t.elementType=he,t.lanes=d,t;case se:return t=An(19,a,n,h),t.elementType=se,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q:case ue:v=10;break e;case le:v=9;break e;case we:v=11;break e;case N:v=14;break e;case A:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return n=An(v,a,n,h),n.elementType=t,n.type=o,n.lanes=d,n}function Ns(t,n,a,o){return t=An(7,t,o,n),t.lanes=a,t}function Ch(t,n,a){return t=An(6,t,null,n),t.lanes=a,t}function Nh(t,n,a){return n=An(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Ea=[],Sa=0,yu=null,_u=0,kn=[],Un=0,Ds=null,Li=1,ji="";function xs(t,n){Ea[Sa++]=_u,Ea[Sa++]=yu,yu=t,_u=n}function vp(t,n,a){kn[Un++]=Li,kn[Un++]=ji,kn[Un++]=Ds,Ds=t;var o=Li;t=ji;var h=32-jt(o)-1;o&=~(1<<h),a+=1;var d=32-jt(n)+h;if(30<d){var v=h-h%5;d=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Li=1<<32-jt(n)+h|a<<h|o,ji=d+t}else Li=1<<d|a<<h|o,ji=t}function Dh(t){t.return!==null&&(xs(t,1),vp(t,1,0))}function xh(t){for(;t===yu;)yu=Ea[--Sa],Ea[Sa]=null,_u=Ea[--Sa],Ea[Sa]=null;for(;t===Ds;)Ds=kn[--Un],kn[Un]=null,ji=kn[--Un],kn[Un]=null,Li=kn[--Un],kn[Un]=null}var mn=null,_t=null,Ke=!1,Os=null,pi=!1,Oh=Error(r(519));function Ms(t){var n=Error(r(418,""));throw ko(Vn(n,t)),Oh}function Tp(t){var n=t.stateNode,a=t.type,o=t.memoizedProps;switch(n[St]=t,n[Kt]=o,a){case"dialog":Le("cancel",n),Le("close",n);break;case"iframe":case"object":case"embed":Le("load",n);break;case"video":case"audio":for(a=0;a<al.length;a++)Le(al[a],n);break;case"source":Le("error",n);break;case"img":case"image":case"link":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"input":Le("invalid",n),_o(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),dr(n);break;case"select":Le("invalid",n);break;case"textarea":Le("invalid",n),Wl(n,o.value,o.defaultValue,o.children),dr(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Uy(n.textContent,a)?(o.popover!=null&&(Le("beforetoggle",n),Le("toggle",n)),o.onScroll!=null&&Le("scroll",n),o.onScrollEnd!=null&&Le("scrollend",n),o.onClick!=null&&(n.onclick=Ju),n=!0):n=!1,n||Ms(t)}function Ep(t){for(mn=t.return;mn;)switch(mn.tag){case 5:case 13:pi=!1;return;case 27:case 3:pi=!0;return;default:mn=mn.return}}function Vo(t){if(t!==mn)return!1;if(!Ke)return Ep(t),Ke=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xf(t.type,t.memoizedProps)),a=!a),a&&_t&&Ms(t),Ep(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(n===0){_t=Jn(t.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;t=t.nextSibling}_t=null}}else n===27?(n=_t,Vr(t.type)?(t=Wf,Wf=null,_t=t):_t=n):_t=mn?Jn(t.stateNode.nextSibling):null;return!0}function Po(){_t=mn=null,Ke=!1}function Sp(){var t=Os;return t!==null&&(_n===null?_n=t:_n.push.apply(_n,t),Os=null),t}function ko(t){Os===null?Os=[t]:Os.push(t)}var Mh=U(null),Vs=null,zi=null;function vr(t,n,a){ee(Mh,n._currentValue),n._currentValue=a}function Bi(t){t._currentValue=Mh.current,te(Mh)}function Vh(t,n,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===a)break;t=t.return}}function Ph(t,n,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var T=d;d=h;for(var I=0;I<n.length;I++)if(T.context===n[I]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Vh(d.return,a,t),o||(v=null);break e}d=T.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Vh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function Uo(t,n,a,o){t=null;for(var h=n,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var T=h.type;bn(h.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(h===$e.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(fl):t=[fl])}h=h.return}t!==null&&Ph(n,t,a,o),n.flags|=262144}function vu(t){for(t=t.firstContext;t!==null;){if(!bn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ps(t){Vs=t,zi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function rn(t){return bp(Vs,t)}function Tu(t,n){return Vs===null&&Ps(t),bp(t,n)}function bp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},zi===null){if(t===null)throw Error(r(308));zi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else zi=zi.next=n;return a}var OE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},ME=s.unstable_scheduleCallback,VE=s.unstable_NormalPriority,Pt={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new OE,data:new Map,refCount:0}}function Lo(t){t.refCount--,t.refCount===0&&ME(VE,function(){t.controller.abort()})}var jo=null,Uh=0,ba=0,Aa=null;function PE(t,n){if(jo===null){var a=jo=[];Uh=0,ba=zf(),Aa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Uh++,n.then(Ap,Ap),n}function Ap(){if(--Uh===0&&jo!==null){Aa!==null&&(Aa.status="fulfilled");var t=jo;jo=null,ba=0,Aa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function kE(t,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Rp=G.S;G.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&PE(t,n),Rp!==null&&Rp(t,n)};var ks=U(null);function Lh(){var t=ks.current;return t!==null?t:lt.pooledCache}function Eu(t,n){n===null?ee(ks,ks.current):ee(ks,n.pool)}function wp(){var t=Lh();return t===null?null:{parent:Pt._currentValue,pool:t}}var zo=Error(r(460)),Ip=Error(r(474)),Su=Error(r(542)),jh={then:function(){}};function Cp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bu(){}function Np(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(bu,bu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,xp(t),t;default:if(typeof n.status=="string")n.then(bu,bu);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,xp(t),t}throw Bo=n,zo}}var Bo=null;function Dp(){if(Bo===null)throw Error(r(459));var t=Bo;return Bo=null,t}function xp(t){if(t===zo||t===Su)throw Error(r(483))}var Tr=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Er(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Sr(t,n,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Je&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=pu(t),yp(t,null,a),n}return mu(t,o,n,a),pu(t)}function qo(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,lr(t,a)}}function qh(t,n){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=n:d=d.next=n}else h=d=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Hh=!1;function Ho(){if(Hh){var t=Aa;if(t!==null)throw t}}function Fo(t,n,a,o){Hh=!1;var h=t.updateQueue;Tr=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,B=I.next;I.next=null,v===null?d=B:v.next=B,v=I;var K=t.alternate;K!==null&&(K=K.updateQueue,T=K.lastBaseUpdate,T!==v&&(T===null?K.firstBaseUpdate=B:T.next=B,K.lastBaseUpdate=I))}if(d!==null){var $=h.baseState;v=0,K=B=I=null,T=d;do{var q=T.lane&-536870913,H=q!==T.lane;if(H?(He&q)===q:(o&q)===q){q!==0&&q===ba&&(Hh=!0),K!==null&&(K=K.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Re=t,Ee=T;q=n;var rt=a;switch(Ee.tag){case 1:if(Re=Ee.payload,typeof Re=="function"){$=Re.call(rt,$,q);break e}$=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ee.payload,q=typeof Re=="function"?Re.call(rt,$,q):Re,q==null)break e;$=S({},$,q);break e;case 2:Tr=!0}}q=T.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},K===null?(B=K=H,I=$):K=K.next=H,v|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;H=T,T=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);K===null&&(I=$),h.baseState=I,h.firstBaseUpdate=B,h.lastBaseUpdate=K,d===null&&(h.shared.lanes=0),Dr|=v,t.lanes=v,t.memoizedState=$}}function Op(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Mp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Op(a[t],n)}var Ra=U(null),Au=U(0);function Vp(t,n){t=Yi,ee(Au,t),ee(Ra,n),Yi=t|n.baseLanes}function Fh(){ee(Au,Yi),ee(Ra,Ra.current)}function Gh(){Yi=Au.current,te(Ra),te(Au)}var br=0,Pe=null,nt=null,Nt=null,Ru=!1,wa=!1,Us=!1,wu=0,Go=0,Ia=null,UE=0;function Rt(){throw Error(r(321))}function Qh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!bn(t[a],n[a]))return!1;return!0}function Kh(t,n,a,o,h,d){return br=d,Pe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=t===null||t.memoizedState===null?yg:_g,Us=!1,d=a(o,h),Us=!1,wa&&(d=kp(n,a,o,h)),Pp(t),d}function Pp(t){G.H=Ou;var n=nt!==null&&nt.next!==null;if(br=0,Nt=nt=Pe=null,Ru=!1,Go=0,Ia=null,n)throw Error(r(300));t===null||Bt||(t=t.dependencies,t!==null&&vu(t)&&(Bt=!0))}function kp(t,n,a,o){Pe=t;var h=0;do{if(wa&&(Ia=null),Go=0,wa=!1,25<=h)throw Error(r(301));if(h+=1,Nt=nt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}G.H=FE,d=n(a,o)}while(wa);return d}function LE(){var t=G.H,n=t.useState()[0];return n=typeof n.then=="function"?Qo(n):n,t=t.useState()[0],(nt!==null?nt.memoizedState:null)!==t&&(Pe.flags|=1024),n}function Yh(){var t=wu!==0;return wu=0,t}function Xh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function $h(t){if(Ru){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ru=!1}br=0,Nt=nt=Pe=null,wa=!1,Go=wu=0,Ia=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Pe.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Dt(){if(nt===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var n=Nt===null?Pe.memoizedState:Nt.next;if(n!==null)Nt=n,nt=t;else{if(t===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?Pe.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(t){var n=Go;return Go+=1,Ia===null&&(Ia=[]),t=Np(Ia,t,n),n=Pe,(Nt===null?n.memoizedState:Nt.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?yg:_g),t}function Iu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Qo(t);if(t.$$typeof===ue)return rn(t)}throw Error(r(438,String(t)))}function Jh(t){var n=null,a=Pe.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Pe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Zh(),Pe.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),o=0;o<t;o++)a[o]=V;return n.index++,a}function qi(t,n){return typeof n=="function"?n(t):n}function Cu(t){var n=Dt();return Wh(n,nt,t)}function Wh(t,n,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,d=o.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}n.baseQueue=h=d,o.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{n=h.next;var T=v=null,I=null,B=n,K=!1;do{var $=B.lane&-536870913;if($!==B.lane?(He&$)===$:(br&$)===$){var q=B.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===ba&&(K=!0);else if((br&q)===q){B=B.next,q===ba&&(K=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(T=I=$,v=d):I=I.next=$,Pe.lanes|=q,Dr|=q;$=B.action,Us&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else q={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},I===null?(T=I=q,v=d):I=I.next=q,Pe.lanes|=$,Dr|=$;B=B.next}while(B!==null&&B!==n);if(I===null?v=d:I.next=T,!bn(d,t.memoizedState)&&(Bt=!0,K&&(a=Aa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=I,o.lastRenderedState=d}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ef(t){var n=Dt(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,d=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);bn(d,n.memoizedState)||(Bt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),a.lastRenderedState=d}return[d,o]}function Up(t,n,a){var o=Pe,h=Dt(),d=Ke;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!bn((nt||h).memoizedState,a);v&&(h.memoizedState=a,Bt=!0),h=h.queue;var T=zp.bind(null,o,h,t);if(Ko(2048,8,T,[t]),h.getSnapshot!==n||v||Nt!==null&&Nt.memoizedState.tag&1){if(o.flags|=2048,Ca(9,Nu(),jp.bind(null,o,h,a,n),null),lt===null)throw Error(r(349));d||(br&124)!==0||Lp(o,n,a)}return a}function Lp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Pe.updateQueue,n===null?(n=Zh(),Pe.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function jp(t,n,a,o){n.value=a,n.getSnapshot=o,Bp(n)&&qp(t)}function zp(t,n,a){return a(function(){Bp(n)&&qp(t)})}function Bp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!bn(t,a)}catch{return!0}}function qp(t){var n=va(t,2);n!==null&&Nn(n,t,2)}function tf(t){var n=gn();if(typeof t=="function"){var a=t;if(t=a(),Us){Qt(!0);try{a()}finally{Qt(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:t},n}function Hp(t,n,a,o){return t.baseState=a,Wh(t,nt,typeof o=="function"?o:qi)}function jE(t,n,a,o,h){if(xu(t))throw Error(r(485));if(t=n.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};G.T!==null?a(!0):d.isTransition=!1,o(d),a=n.pending,a===null?(d.next=n.pending=d,Fp(n,d)):(d.next=a.next,n.pending=a.next=d)}}function Fp(t,n){var a=n.action,o=n.payload,h=t.state;if(n.isTransition){var d=G.T,v={};G.T=v;try{var T=a(h,o),I=G.S;I!==null&&I(v,T),Gp(t,n,T)}catch(B){nf(t,n,B)}finally{G.T=d}}else try{d=a(h,o),Gp(t,n,d)}catch(B){nf(t,n,B)}}function Gp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Qp(t,n,o)},function(o){return nf(t,n,o)}):Qp(t,n,a)}function Qp(t,n,a){n.status="fulfilled",n.value=a,Kp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Fp(t,a)))}function nf(t,n,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Kp(n),n=n.next;while(n!==o)}t.action=null}function Kp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Yp(t,n){return n}function Xp(t,n){if(Ke){var a=lt.formState;if(a!==null){e:{var o=Pe;if(Ke){if(_t){t:{for(var h=_t,d=pi;h.nodeType!==8;){if(!d){h=null;break t}if(h=Jn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){_t=Jn(h.nextSibling),o=h.data==="F!";break e}}Ms(o)}o=!1}o&&(n=a[0])}}return a=gn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:n},a.queue=o,a=mg.bind(null,Pe,o),o.dispatch=a,o=tf(!1),d=lf.bind(null,Pe,!1,o.queue),o=gn(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,a=jE.bind(null,Pe,h,d,a),h.dispatch=a,o.memoizedState=t,[n,a,!1]}function $p(t){var n=Dt();return Zp(n,nt,t)}function Zp(t,n,a){if(n=Wh(t,n,Yp)[0],t=Cu(qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Qo(n)}catch(v){throw v===zo?Su:v}else o=n;n=Dt();var h=n.queue,d=h.dispatch;return a!==n.memoizedState&&(Pe.flags|=2048,Ca(9,Nu(),zE.bind(null,h,a),null)),[o,d,t]}function zE(t,n){t.action=n}function Jp(t){var n=Dt(),a=nt;if(a!==null)return Zp(n,a,t);Dt(),n=n.memoizedState,a=Dt();var o=a.queue.dispatch;return a.memoizedState=t,[n,o,!1]}function Ca(t,n,a,o){return t={tag:t,create:a,deps:o,inst:n,next:null},n=Pe.updateQueue,n===null&&(n=Zh(),Pe.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,n.lastEffect=t),t}function Nu(){return{destroy:void 0,resource:void 0}}function Wp(){return Dt().memoizedState}function Du(t,n,a,o){var h=gn();o=o===void 0?null:o,Pe.flags|=t,h.memoizedState=Ca(1|n,Nu(),a,o)}function Ko(t,n,a,o){var h=Dt();o=o===void 0?null:o;var d=h.memoizedState.inst;nt!==null&&o!==null&&Qh(o,nt.memoizedState.deps)?h.memoizedState=Ca(n,d,a,o):(Pe.flags|=t,h.memoizedState=Ca(1|n,d,a,o))}function eg(t,n){Du(8390656,8,t,n)}function tg(t,n){Ko(2048,8,t,n)}function ng(t,n){return Ko(4,2,t,n)}function ig(t,n){return Ko(4,4,t,n)}function rg(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function sg(t,n,a){a=a!=null?a.concat([t]):null,Ko(4,4,rg.bind(null,n,t),a)}function rf(){}function ag(t,n){var a=Dt();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Qh(n,o[1])?o[0]:(a.memoizedState=[t,n],t)}function og(t,n){var a=Dt();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Qh(n,o[1]))return o[0];if(o=t(),Us){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[o,n],o}function sf(t,n,a){return a===void 0||(br&1073741824)!==0?t.memoizedState=n:(t.memoizedState=a,t=cy(),Pe.lanes|=t,Dr|=t,a)}function lg(t,n,a,o){return bn(a,n)?a:Ra.current!==null?(t=sf(t,a,o),bn(t,n)||(Bt=!0),t):(br&42)===0?(Bt=!0,t.memoizedState=a):(t=cy(),Pe.lanes|=t,Dr|=t,n)}function ug(t,n,a,o,h){var d=ce.p;ce.p=d!==0&&8>d?d:8;var v=G.T,T={};G.T=T,lf(t,!1,n,a);try{var I=h(),B=G.S;if(B!==null&&B(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=kE(I,o);Yo(t,n,K,Cn(t))}else Yo(t,n,o,Cn(t))}catch($){Yo(t,n,{then:function(){},status:"rejected",reason:$},Cn())}finally{ce.p=d,G.T=v}}function BE(){}function af(t,n,a,o){if(t.tag!==5)throw Error(r(476));var h=cg(t).queue;ug(t,h,n,pe,a===null?BE:function(){return hg(t),a(o)})}function cg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:pe},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function hg(t){var n=cg(t).next.queue;Yo(t,n,{},Cn())}function of(){return rn(fl)}function fg(){return Dt().memoizedState}function dg(){return Dt().memoizedState}function qE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=Cn();t=Er(a);var o=Sr(n,t,a);o!==null&&(Nn(o,n,a),qo(o,n,a)),n={cache:kh()},t.payload=n;return}n=n.return}}function HE(t,n,a){var o=Cn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},xu(t)?pg(n,a):(a=wh(t,n,a,o),a!==null&&(Nn(a,t,o),gg(a,n,o)))}function mg(t,n,a){var o=Cn();Yo(t,n,a,o)}function Yo(t,n,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(xu(t))pg(n,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var v=n.lastRenderedState,T=d(v,a);if(h.hasEagerState=!0,h.eagerState=T,bn(T,v))return mu(t,n,h,0),lt===null&&du(),!1}catch{}finally{}if(a=wh(t,n,h,o),a!==null)return Nn(a,t,o),gg(a,n,o),!0}return!1}function lf(t,n,a,o){if(o={lane:2,revertLane:zf(),action:o,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(n)throw Error(r(479))}else n=wh(t,a,o,2),n!==null&&Nn(n,t,2)}function xu(t){var n=t.alternate;return t===Pe||n!==null&&n===Pe}function pg(t,n){wa=Ru=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function gg(t,n,a){if((a&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,lr(t,a)}}var Ou={readContext:rn,use:Iu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},yg={readContext:rn,use:Iu,useCallback:function(t,n){return gn().memoizedState=[t,n===void 0?null:n],t},useContext:rn,useEffect:eg,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Du(4194308,4,rg.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Du(4194308,4,t,n)},useInsertionEffect:function(t,n){Du(4,2,t,n)},useMemo:function(t,n){var a=gn();n=n===void 0?null:n;var o=t();if(Us){Qt(!0);try{t()}finally{Qt(!1)}}return a.memoizedState=[o,n],o},useReducer:function(t,n,a){var o=gn();if(a!==void 0){var h=a(n);if(Us){Qt(!0);try{a(n)}finally{Qt(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=HE.bind(null,Pe,t),[o.memoizedState,t]},useRef:function(t){var n=gn();return t={current:t},n.memoizedState=t},useState:function(t){t=tf(t);var n=t.queue,a=mg.bind(null,Pe,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:rf,useDeferredValue:function(t,n){var a=gn();return sf(a,t,n)},useTransition:function(){var t=tf(!1);return t=ug.bind(null,Pe,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var o=Pe,h=gn();if(Ke){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),lt===null)throw Error(r(349));(He&124)!==0||Lp(o,n,a)}h.memoizedState=a;var d={value:a,getSnapshot:n};return h.queue=d,eg(zp.bind(null,o,d,t),[t]),o.flags|=2048,Ca(9,Nu(),jp.bind(null,o,d,a,n),null),a},useId:function(){var t=gn(),n=lt.identifierPrefix;if(Ke){var a=ji,o=Li;a=(o&~(1<<32-jt(o)-1)).toString(32)+a,n=""+n+"R"+a,a=wu++,0<a&&(n+="H"+a.toString(32)),n+=""}else a=UE++,n=""+n+"r"+a.toString(32)+"";return t.memoizedState=n},useHostTransitionStatus:of,useFormState:Xp,useActionState:Xp,useOptimistic:function(t){var n=gn();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=lf.bind(null,Pe,!0,a),a.dispatch=n,[t,n]},useMemoCache:Jh,useCacheRefresh:function(){return gn().memoizedState=qE.bind(null,Pe)}},_g={readContext:rn,use:Iu,useCallback:ag,useContext:rn,useEffect:tg,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:og,useReducer:Cu,useRef:Wp,useState:function(){return Cu(qi)},useDebugValue:rf,useDeferredValue:function(t,n){var a=Dt();return lg(a,nt.memoizedState,t,n)},useTransition:function(){var t=Cu(qi)[0],n=Dt().memoizedState;return[typeof t=="boolean"?t:Qo(t),n]},useSyncExternalStore:Up,useId:fg,useHostTransitionStatus:of,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var a=Dt();return Hp(a,nt,t,n)},useMemoCache:Jh,useCacheRefresh:dg},FE={readContext:rn,use:Iu,useCallback:ag,useContext:rn,useEffect:tg,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:og,useReducer:ef,useRef:Wp,useState:function(){return ef(qi)},useDebugValue:rf,useDeferredValue:function(t,n){var a=Dt();return nt===null?sf(a,t,n):lg(a,nt.memoizedState,t,n)},useTransition:function(){var t=ef(qi)[0],n=Dt().memoizedState;return[typeof t=="boolean"?t:Qo(t),n]},useSyncExternalStore:Up,useId:fg,useHostTransitionStatus:of,useFormState:Jp,useActionState:Jp,useOptimistic:function(t,n){var a=Dt();return nt!==null?Hp(a,nt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Jh,useCacheRefresh:dg},Na=null,Xo=0;function Mu(t){var n=Xo;return Xo+=1,Na===null&&(Na=[]),Np(Na,t,n)}function $o(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Vu(t,n){throw n.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function vg(t){var n=t._init;return n(t._payload)}function Tg(t){function n(k,O){if(t){var L=k.deletions;L===null?(k.deletions=[O],k.flags|=16):L.push(O)}}function a(k,O){if(!t)return null;for(;O!==null;)n(k,O),O=O.sibling;return null}function o(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=Ui(k,O),k.index=0,k.sibling=null,k}function d(k,O,L){return k.index=L,t?(L=k.alternate,L!==null?(L=L.index,L<O?(k.flags|=67108866,O):L):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function T(k,O,L,Y){return O===null||O.tag!==6?(O=Ch(L,k.mode,Y),O.return=k,O):(O=h(O,L),O.return=k,O)}function I(k,O,L,Y){var me=L.type;return me===J?K(k,O,L.props.children,Y,L.key):O!==null&&(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===A&&vg(me)===O.type)?(O=h(O,L.props),$o(O,L),O.return=k,O):(O=gu(L.type,L.key,L.props,null,k.mode,Y),$o(O,L),O.return=k,O)}function B(k,O,L,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==L.containerInfo||O.stateNode.implementation!==L.implementation?(O=Nh(L,k.mode,Y),O.return=k,O):(O=h(O,L.children||[]),O.return=k,O)}function K(k,O,L,Y,me){return O===null||O.tag!==7?(O=Ns(L,k.mode,Y,me),O.return=k,O):(O=h(O,L),O.return=k,O)}function $(k,O,L){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ch(""+O,k.mode,L),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case M:return L=gu(O.type,O.key,O.props,null,k.mode,L),$o(L,O),L.return=k,L;case z:return O=Nh(O,k.mode,L),O.return=k,O;case A:var Y=O._init;return O=Y(O._payload),$(k,O,L)}if(Qe(O)||P(O))return O=Ns(O,k.mode,L,null),O.return=k,O;if(typeof O.then=="function")return $(k,Mu(O),L);if(O.$$typeof===ue)return $(k,Tu(k,O),L);Vu(k,O)}return null}function q(k,O,L,Y){var me=O!==null?O.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return me!==null?null:T(k,O,""+L,Y);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return L.key===me?I(k,O,L,Y):null;case z:return L.key===me?B(k,O,L,Y):null;case A:return me=L._init,L=me(L._payload),q(k,O,L,Y)}if(Qe(L)||P(L))return me!==null?null:K(k,O,L,Y,null);if(typeof L.then=="function")return q(k,O,Mu(L),Y);if(L.$$typeof===ue)return q(k,O,Tu(k,L),Y);Vu(k,L)}return null}function H(k,O,L,Y,me){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return k=k.get(L)||null,T(O,k,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case M:return k=k.get(Y.key===null?L:Y.key)||null,I(O,k,Y,me);case z:return k=k.get(Y.key===null?L:Y.key)||null,B(O,k,Y,me);case A:var ke=Y._init;return Y=ke(Y._payload),H(k,O,L,Y,me)}if(Qe(Y)||P(Y))return k=k.get(L)||null,K(O,k,Y,me,null);if(typeof Y.then=="function")return H(k,O,L,Mu(Y),me);if(Y.$$typeof===ue)return H(k,O,L,Tu(O,Y),me);Vu(O,Y)}return null}function Re(k,O,L,Y){for(var me=null,ke=null,_e=O,be=O=0,Ht=null;_e!==null&&be<L.length;be++){_e.index>be?(Ht=_e,_e=null):Ht=_e.sibling;var Ge=q(k,_e,L[be],Y);if(Ge===null){_e===null&&(_e=Ht);break}t&&_e&&Ge.alternate===null&&n(k,_e),O=d(Ge,O,be),ke===null?me=Ge:ke.sibling=Ge,ke=Ge,_e=Ht}if(be===L.length)return a(k,_e),Ke&&xs(k,be),me;if(_e===null){for(;be<L.length;be++)_e=$(k,L[be],Y),_e!==null&&(O=d(_e,O,be),ke===null?me=_e:ke.sibling=_e,ke=_e);return Ke&&xs(k,be),me}for(_e=o(_e);be<L.length;be++)Ht=H(_e,k,be,L[be],Y),Ht!==null&&(t&&Ht.alternate!==null&&_e.delete(Ht.key===null?be:Ht.key),O=d(Ht,O,be),ke===null?me=Ht:ke.sibling=Ht,ke=Ht);return t&&_e.forEach(function(jr){return n(k,jr)}),Ke&&xs(k,be),me}function Ee(k,O,L,Y){if(L==null)throw Error(r(151));for(var me=null,ke=null,_e=O,be=O=0,Ht=null,Ge=L.next();_e!==null&&!Ge.done;be++,Ge=L.next()){_e.index>be?(Ht=_e,_e=null):Ht=_e.sibling;var jr=q(k,_e,Ge.value,Y);if(jr===null){_e===null&&(_e=Ht);break}t&&_e&&jr.alternate===null&&n(k,_e),O=d(jr,O,be),ke===null?me=jr:ke.sibling=jr,ke=jr,_e=Ht}if(Ge.done)return a(k,_e),Ke&&xs(k,be),me;if(_e===null){for(;!Ge.done;be++,Ge=L.next())Ge=$(k,Ge.value,Y),Ge!==null&&(O=d(Ge,O,be),ke===null?me=Ge:ke.sibling=Ge,ke=Ge);return Ke&&xs(k,be),me}for(_e=o(_e);!Ge.done;be++,Ge=L.next())Ge=H(_e,k,be,Ge.value,Y),Ge!==null&&(t&&Ge.alternate!==null&&_e.delete(Ge.key===null?be:Ge.key),O=d(Ge,O,be),ke===null?me=Ge:ke.sibling=Ge,ke=Ge);return t&&_e.forEach(function(GS){return n(k,GS)}),Ke&&xs(k,be),me}function rt(k,O,L,Y){if(typeof L=="object"&&L!==null&&L.type===J&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case M:e:{for(var me=L.key;O!==null;){if(O.key===me){if(me=L.type,me===J){if(O.tag===7){a(k,O.sibling),Y=h(O,L.props.children),Y.return=k,k=Y;break e}}else if(O.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===A&&vg(me)===O.type){a(k,O.sibling),Y=h(O,L.props),$o(Y,L),Y.return=k,k=Y;break e}a(k,O);break}else n(k,O);O=O.sibling}L.type===J?(Y=Ns(L.props.children,k.mode,Y,L.key),Y.return=k,k=Y):(Y=gu(L.type,L.key,L.props,null,k.mode,Y),$o(Y,L),Y.return=k,k=Y)}return v(k);case z:e:{for(me=L.key;O!==null;){if(O.key===me)if(O.tag===4&&O.stateNode.containerInfo===L.containerInfo&&O.stateNode.implementation===L.implementation){a(k,O.sibling),Y=h(O,L.children||[]),Y.return=k,k=Y;break e}else{a(k,O);break}else n(k,O);O=O.sibling}Y=Nh(L,k.mode,Y),Y.return=k,k=Y}return v(k);case A:return me=L._init,L=me(L._payload),rt(k,O,L,Y)}if(Qe(L))return Re(k,O,L,Y);if(P(L)){if(me=P(L),typeof me!="function")throw Error(r(150));return L=me.call(L),Ee(k,O,L,Y)}if(typeof L.then=="function")return rt(k,O,Mu(L),Y);if(L.$$typeof===ue)return rt(k,O,Tu(k,L),Y);Vu(k,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,O!==null&&O.tag===6?(a(k,O.sibling),Y=h(O,L),Y.return=k,k=Y):(a(k,O),Y=Ch(L,k.mode,Y),Y.return=k,k=Y),v(k)):a(k,O)}return function(k,O,L,Y){try{Xo=0;var me=rt(k,O,L,Y);return Na=null,me}catch(_e){if(_e===zo||_e===Su)throw _e;var ke=An(29,_e,null,k.mode);return ke.lanes=Y,ke.return=k,ke}finally{}}}var Da=Tg(!0),Eg=Tg(!1),Ln=U(null),gi=null;function Ar(t){var n=t.alternate;ee(kt,kt.current&1),ee(Ln,t),gi===null&&(n===null||Ra.current!==null||n.memoizedState!==null)&&(gi=t)}function Sg(t){if(t.tag===22){if(ee(kt,kt.current),ee(Ln,t),gi===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(gi=t)}}else Rr()}function Rr(){ee(kt,kt.current),ee(Ln,Ln.current)}function Hi(t){te(Ln),gi===t&&(gi=null),te(kt)}var kt=U(0);function Pu(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jf(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function uf(t,n,a,o){n=t.memoizedState,a=a(o,n),a=a==null?n:S({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cf={enqueueSetState:function(t,n,a){t=t._reactInternals;var o=Cn(),h=Er(o);h.payload=n,a!=null&&(h.callback=a),n=Sr(t,h,o),n!==null&&(Nn(n,t,o),qo(n,t,o))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var o=Cn(),h=Er(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Sr(t,h,o),n!==null&&(Nn(n,t,o),qo(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=Cn(),o=Er(a);o.tag=2,n!=null&&(o.callback=n),n=Sr(t,o,a),n!==null&&(Nn(n,t,a),qo(n,t,a))}};function bg(t,n,a,o,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,d,v):n.prototype&&n.prototype.isPureReactComponent?!Oo(a,o)||!Oo(h,d):!0}function Ag(t,n,a,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==t&&cf.enqueueReplaceState(n,n.state,null)}function Ls(t,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(t=t.defaultProps){a===n&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rg(t){ku(t)}function wg(t){console.error(t)}function Ig(t){ku(t)}function Uu(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Cg(t,n,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hf(t,n,a){return a=Er(a),a.tag=3,a.payload={element:null},a.callback=function(){Uu(t,n)},a}function Ng(t){return t=Er(t),t.tag=3,t}function Dg(t,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=o.value;t.payload=function(){return h(d)},t.callback=function(){Cg(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Cg(n,a,o),typeof h!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function GE(t,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&Uo(n,a,h,!0),a=Ln.current,a!==null){switch(a.tag){case 13:return gi===null?Pf():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===jh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Uf(t,o,h)),!1;case 22:return a.flags|=65536,o===jh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Uf(t,o,h)),!1}throw Error(r(435,a.tag))}return Uf(t,o,h),Pf(),!1}if(Ke)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Oh&&(t=Error(r(422),{cause:o}),ko(Vn(t,a)))):(o!==Oh&&(n=Error(r(423),{cause:o}),ko(Vn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=Vn(o,a),h=hf(t.stateNode,o,h),qh(t,h),vt!==4&&(vt=2)),!1;var d=Error(r(520),{cause:o});if(d=Vn(d,a),il===null?il=[d]:il.push(d),vt!==4&&(vt=2),n===null)return!0;o=Vn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=hf(a.stateNode,o,t),qh(a,t),!1;case 1:if(n=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(xr===null||!xr.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ng(h),Dg(h,t,a,o),qh(a,h),!1}a=a.return}while(a!==null);return!1}var xg=Error(r(461)),Bt=!1;function Yt(t,n,a,o){n.child=t===null?Eg(n,null,a,o):Da(n,t.child,a,o)}function Og(t,n,a,o,h){a=a.render;var d=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Ps(n),o=Kh(t,n,a,v,d,h),T=Yh(),t!==null&&!Bt?(Xh(t,n,h),Fi(t,n,h)):(Ke&&T&&Dh(n),n.flags|=1,Yt(t,n,o,h),n.child)}function Mg(t,n,a,o,h){if(t===null){var d=a.type;return typeof d=="function"&&!Ih(d)&&d.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=d,Vg(t,n,d,o,h)):(t=gu(a.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(d=t.child,!vf(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(v,o)&&t.ref===n.ref)return Fi(t,n,h)}return n.flags|=1,t=Ui(d,o),t.ref=n.ref,t.return=n,n.child=t}function Vg(t,n,a,o,h){if(t!==null){var d=t.memoizedProps;if(Oo(d,o)&&t.ref===n.ref)if(Bt=!1,n.pendingProps=o=d,vf(t,h))(t.flags&131072)!==0&&(Bt=!0);else return n.lanes=t.lanes,Fi(t,n,h)}return ff(t,n,a,o,h)}function Pg(t,n,a){var o=n.pendingProps,h=o.children,d=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=d!==null?d.baseLanes|a:a,t!==null){for(h=n.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;n.childLanes=d&~o}else n.childLanes=0,n.child=null;return kg(t,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Eu(n,d!==null?d.cachePool:null),d!==null?Vp(n,d):Fh(),Sg(n);else return n.lanes=n.childLanes=536870912,kg(t,n,d!==null?d.baseLanes|a:a,a)}else d!==null?(Eu(n,d.cachePool),Vp(n,d),Rr(),n.memoizedState=null):(t!==null&&Eu(n,null),Fh(),Rr());return Yt(t,n,h,a),n.child}function kg(t,n,a,o){var h=Lh();return h=h===null?null:{parent:Pt._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},t!==null&&Eu(n,null),Fh(),Sg(n),t!==null&&Uo(t,n,o,!0),null}function Lu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function ff(t,n,a,o,h){return Ps(n),a=Kh(t,n,a,o,void 0,h),o=Yh(),t!==null&&!Bt?(Xh(t,n,h),Fi(t,n,h)):(Ke&&o&&Dh(n),n.flags|=1,Yt(t,n,a,h),n.child)}function Ug(t,n,a,o,h,d){return Ps(n),n.updateQueue=null,a=kp(n,o,a,h),Pp(t),o=Yh(),t!==null&&!Bt?(Xh(t,n,d),Fi(t,n,d)):(Ke&&o&&Dh(n),n.flags|=1,Yt(t,n,a,d),n.child)}function Lg(t,n,a,o,h){if(Ps(n),n.stateNode===null){var d=Ta,v=a.contextType;typeof v=="object"&&v!==null&&(d=rn(v)),d=new a(o,d),n.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=cf,n.stateNode=d,d._reactInternals=n,d=n.stateNode,d.props=o,d.state=n.memoizedState,d.refs={},zh(n),v=a.contextType,d.context=typeof v=="object"&&v!==null?rn(v):Ta,d.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(uf(n,a,v,o),d.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&cf.enqueueReplaceState(d,d.state,null),Fo(n,o,d,h),Ho(),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){d=n.stateNode;var T=n.memoizedProps,I=Ls(a,T);d.props=I;var B=d.context,K=a.contextType;v=Ta,typeof K=="object"&&K!==null&&(v=rn(K));var $=a.getDerivedStateFromProps;K=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,K||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==v)&&Ag(n,d,o,v),Tr=!1;var q=n.memoizedState;d.state=q,Fo(n,o,d,h),Ho(),B=n.memoizedState,T||q!==B||Tr?(typeof $=="function"&&(uf(n,a,$,o),B=n.memoizedState),(I=Tr||bg(n,a,I,o,q,B,v))?(K||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(n.flags|=4194308)):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=B),d.props=o,d.state=B,d.context=v,o=I):(typeof d.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{d=n.stateNode,Bh(t,n),v=n.memoizedProps,K=Ls(a,v),d.props=K,$=n.pendingProps,q=d.context,B=a.contextType,I=Ta,typeof B=="object"&&B!==null&&(I=rn(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==$||q!==I)&&Ag(n,d,o,I),Tr=!1,q=n.memoizedState,d.state=q,Fo(n,o,d,h),Ho();var H=n.memoizedState;v!==$||q!==H||Tr||t!==null&&t.dependencies!==null&&vu(t.dependencies)?(typeof T=="function"&&(uf(n,a,T,o),H=n.memoizedState),(K=Tr||bg(n,a,K,o,q,H,I)||t!==null&&t.dependencies!==null&&vu(t.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,H,I),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,H,I)),typeof d.componentDidUpdate=="function"&&(n.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=H),d.props=o,d.state=H,d.context=I,o=K):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),o=!1)}return d=o,Lu(t,n),o=(n.flags&128)!==0,d||o?(d=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:d.render(),n.flags|=1,t!==null&&o?(n.child=Da(n,t.child,null,h),n.child=Da(n,null,a,h)):Yt(t,n,a,h),n.memoizedState=d.state,t=n.child):t=Fi(t,n,h),t}function jg(t,n,a,o){return Po(),n.flags|=256,Yt(t,n,a,o),n.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:wp()}}function pf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=jn),t}function zg(t,n,a){var o=n.pendingProps,h=!1,d=(n.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(kt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ke){if(h?Ar(n):Rr(),Ke){var T=_t,I;if(I=T){e:{for(I=T,T=pi;I.nodeType!==8;){if(!T){T=null;break e}if(I=Jn(I.nextSibling),I===null){T=null;break e}}T=I}T!==null?(n.memoizedState={dehydrated:T,treeContext:Ds!==null?{id:Li,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},I=An(18,null,null,0),I.stateNode=T,I.return=n,n.child=I,mn=n,_t=null,I=!0):I=!1}I||Ms(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Jf(T)?n.lanes=32:n.lanes=536870912,null;Hi(n)}return T=o.children,o=o.fallback,h?(Rr(),h=n.mode,T=ju({mode:"hidden",children:T},h),o=Ns(o,h,a,null),T.return=n,o.return=n,T.sibling=o,n.child=T,h=n.child,h.memoizedState=mf(a),h.childLanes=pf(t,v,a),n.memoizedState=df,o):(Ar(n),gf(n,T))}if(I=t.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(d)n.flags&256?(Ar(n),n.flags&=-257,n=yf(t,n,a)):n.memoizedState!==null?(Rr(),n.child=t.child,n.flags|=128,n=null):(Rr(),h=o.fallback,T=n.mode,o=ju({mode:"visible",children:o.children},T),h=Ns(h,T,a,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,Da(n,t.child,null,a),o=n.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),n.memoizedState=df,n=h);else if(Ar(n),Jf(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var B=v.dgst;v=B,o=Error(r(419)),o.stack="",o.digest=v,ko({value:o,source:null,stack:null}),n=yf(t,n,a)}else if(Bt||Uo(t,n,a,!1),v=(a&t.childLanes)!==0,Bt||v){if(v=lt,v!==null&&(o=a&-a,o=(o&42)!==0?1:po(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==I.retryLane))throw I.retryLane=o,va(t,o),Nn(v,t,o),xg;T.data==="$?"||Pf(),n=yf(t,n,a)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=I.treeContext,_t=Jn(T.nextSibling),mn=n,Ke=!0,Os=null,pi=!1,t!==null&&(kn[Un++]=Li,kn[Un++]=ji,kn[Un++]=Ds,Li=t.id,ji=t.overflow,Ds=n),n=gf(n,o.children),n.flags|=4096);return n}return h?(Rr(),h=o.fallback,T=n.mode,I=t.child,B=I.sibling,o=Ui(I,{mode:"hidden",children:o.children}),o.subtreeFlags=I.subtreeFlags&65011712,B!==null?h=Ui(B,h):(h=Ns(h,T,a,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,T=t.child.memoizedState,T===null?T=mf(a):(I=T.cachePool,I!==null?(B=Pt._currentValue,I=I.parent!==B?{parent:B,pool:B}:I):I=wp(),T={baseLanes:T.baseLanes|a,cachePool:I}),h.memoizedState=T,h.childLanes=pf(t,v,a),n.memoizedState=df,o):(Ar(n),a=t.child,t=a.sibling,a=Ui(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function gf(t,n){return n=ju({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function ju(t,n){return t=An(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function yf(t,n,a){return Da(n,t.child,null,a),t=gf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Bg(t,n,a){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),Vh(t.return,n,a)}function _f(t,n,a,o,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=o,d.tail=a,d.tailMode=h)}function qg(t,n,a){var o=n.pendingProps,h=o.revealOrder,d=o.tail;if(Yt(t,n,o.children,a),o=kt.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Bg(t,a,n);else if(t.tag===19)Bg(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(ee(kt,o),h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&Pu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),_f(n,!1,h,a,d);break;case"backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&Pu(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}_f(n,!0,a,null,d);break;case"together":_f(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Dr|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Uo(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=Ui(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Ui(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function vf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&vu(t)))}function QE(t,n,a){switch(n.tag){case 3:Ve(n,n.stateNode.containerInfo),vr(n,Pt,t.memoizedState.cache),Po();break;case 27:case 5:ns(n);break;case 4:Ve(n,n.stateNode.containerInfo);break;case 10:vr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ar(n),n.flags|=128,null):(a&n.child.childLanes)!==0?zg(t,n,a):(Ar(n),t=Fi(t,n,a),t!==null?t.sibling:null);Ar(n);break;case 19:var h=(t.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(Uo(t,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return qg(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ee(kt,kt.current),o)break;return null;case 22:case 23:return n.lanes=0,Pg(t,n,a);case 24:vr(n,Pt,t.memoizedState.cache)}return Fi(t,n,a)}function Hg(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Bt=!0;else{if(!vf(t,a)&&(n.flags&128)===0)return Bt=!1,QE(t,n,a);Bt=(t.flags&131072)!==0}else Bt=!1,Ke&&(n.flags&1048576)!==0&&vp(n,_u,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")Ih(o)?(t=Ls(o,t),n.tag=1,n=Lg(null,n,o,t,a)):(n.tag=0,n=ff(null,n,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===we){n.tag=11,n=Og(null,n,o,t,a);break e}else if(h===N){n.tag=14,n=Mg(null,n,o,t,a);break e}}throw n=Ye(o)||o,Error(r(306,n,""))}}return n;case 0:return ff(t,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Ls(o,n.pendingProps),Lg(t,n,o,h,a);case 3:e:{if(Ve(n,n.stateNode.containerInfo),t===null)throw Error(r(387));o=n.pendingProps;var d=n.memoizedState;h=d.element,Bh(t,n),Fo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,vr(n,Pt,o),o!==d.cache&&Ph(n,[Pt],a,!0),Ho(),o=v.element,d.isDehydrated)if(d={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){n=jg(t,n,o,a);break e}else if(o!==h){h=Vn(Error(r(424)),n),ko(h),n=jg(t,n,o,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=Jn(t.firstChild),mn=n,Ke=!0,Os=null,pi=!0,a=Eg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Po(),o===h){n=Fi(t,n,a);break e}Yt(t,n,o,a)}n=n.child}return n;case 26:return Lu(t,n),t===null?(a=Ky(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ke||(a=n.type,t=n.pendingProps,o=Wu(fe.current).createElement(a),o[St]=n,o[Kt]=t,$t(o,a,t),bt(o),n.stateNode=o):n.memoizedState=Ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ns(n),t===null&&Ke&&(o=n.stateNode=Fy(n.type,n.pendingProps,fe.current),mn=n,pi=!0,h=_t,Vr(n.type)?(Wf=h,_t=Jn(o.firstChild)):_t=h),Yt(t,n,n.pendingProps.children,a),Lu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ke&&((h=o=_t)&&(o=TS(o,n.type,n.pendingProps,pi),o!==null?(n.stateNode=o,mn=n,_t=Jn(o.firstChild),pi=!1,h=!0):h=!1),h||Ms(n)),ns(n),h=n.type,d=n.pendingProps,v=t!==null?t.memoizedProps:null,o=d.children,Xf(h,d)?o=null:v!==null&&Xf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Kh(t,n,LE,null,null,a),fl._currentValue=h),Lu(t,n),Yt(t,n,o,a),n.child;case 6:return t===null&&Ke&&((t=a=_t)&&(a=ES(a,n.pendingProps,pi),a!==null?(n.stateNode=a,mn=n,_t=null,t=!0):t=!1),t||Ms(n)),null;case 13:return zg(t,n,a);case 4:return Ve(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Da(n,null,o,a):Yt(t,n,o,a),n.child;case 11:return Og(t,n,n.type,n.pendingProps,a);case 7:return Yt(t,n,n.pendingProps,a),n.child;case 8:return Yt(t,n,n.pendingProps.children,a),n.child;case 12:return Yt(t,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,vr(n,n.type,o.value),Yt(t,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,Ps(n),h=rn(h),o=o(h),n.flags|=1,Yt(t,n,o,a),n.child;case 14:return Mg(t,n,n.type,n.pendingProps,a);case 15:return Vg(t,n,n.type,n.pendingProps,a);case 19:return qg(t,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},t===null?(a=ju(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=Ui(t.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Pg(t,n,a);case 24:return Ps(n),o=rn(Pt),t===null?(h=Lh(),h===null&&(h=lt,d=kh(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),n.memoizedState={parent:o,cache:h},zh(n),vr(n,Pt,h)):((t.lanes&a)!==0&&(Bh(t,n),Fo(n,null,null,a),Ho()),h=t.memoizedState,d=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),vr(n,Pt,o)):(o=d.cache,vr(n,Pt,o),o!==h.cache&&Ph(n,[Pt],a,!0))),Yt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Gi(t){t.flags|=4}function Fg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Jy(n)){if(n=Ln.current,n!==null&&((He&4194048)===He?gi!==null:(He&62914560)!==He&&(He&536870912)===0||n!==gi))throw Bo=jh,Ip;t.flags|=8192}}function zu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Et():536870912,t.lanes|=n,Va|=n)}function Zo(t,n){if(!Ke)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function pt(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,n}function KE(t,n,a){var o=n.pendingProps;switch(xh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(n),null;case 1:return pt(n),null;case 3:return a=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Bi(Pt),ft(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Vo(n)?Gi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Sp())),pt(n),null;case 26:return a=n.memoizedState,t===null?(Gi(n),a!==null?(pt(n),Fg(n,a)):(pt(n),n.flags&=-16777217)):a?a!==t.memoizedState?(Gi(n),pt(n),Fg(n,a)):(pt(n),n.flags&=-16777217):(t.memoizedProps!==o&&Gi(n),pt(n),n.flags&=-16777217),null;case 27:sr(n),a=fe.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Gi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return pt(n),null}t=oe.current,Vo(n)?Tp(n):(t=Fy(h,o,a),n.stateNode=t,Gi(n))}return pt(n),null;case 5:if(sr(n),a=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Gi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return pt(n),null}if(t=oe.current,Vo(n))Tp(n);else{switch(h=Wu(fe.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[St]=n,t[Kt]=o;e:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;e:switch($t(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Gi(n)}}return pt(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Gi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(t=fe.current,Vo(n)){if(t=n.stateNode,a=n.memoizedProps,o=null,h=mn,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[St]=n,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Uy(t.nodeValue,a)),t||Ms(n)}else t=Wu(t).createTextNode(o),t[St]=n,n.stateNode=t}return pt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Vo(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[St]=n}else Po(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pt(n),h=!1}else h=Sp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Hi(n),n):(Hi(n),null)}if(Hi(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var d=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==h&&(o.flags|=2048)}return a!==t&&a&&(n.child.flags|=8192),zu(n,n.updateQueue),pt(n),null;case 4:return ft(),t===null&&Ff(n.stateNode.containerInfo),pt(n),null;case 10:return Bi(n.type),pt(n),null;case 19:if(te(kt),h=n.memoizedState,h===null)return pt(n),null;if(o=(n.flags&128)!==0,d=h.rendering,d===null)if(o)Zo(h,!1);else{if(vt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(d=Pu(t),d!==null){for(n.flags|=128,Zo(h,!1),t=d.updateQueue,n.updateQueue=t,zu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)_p(a,t),a=a.sibling;return ee(kt,kt.current&1|2),n.child}t=t.sibling}h.tail!==null&&tn()>Hu&&(n.flags|=128,o=!0,Zo(h,!1),n.lanes=4194304)}else{if(!o)if(t=Pu(d),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,zu(n,t),Zo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Ke)return pt(n),null}else 2*tn()-h.renderingStartTime>Hu&&a!==536870912&&(n.flags|=128,o=!0,Zo(h,!1),n.lanes=4194304);h.isBackwards?(d.sibling=n.child,n.child=d):(t=h.last,t!==null?t.sibling=d:n.child=d,h.last=d)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=tn(),n.sibling=null,t=kt.current,ee(kt,o?t&1|2:t&1),n):(pt(n),null);case 22:case 23:return Hi(n),Gh(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(pt(n),n.subtreeFlags&6&&(n.flags|=8192)):pt(n),a=n.updateQueue,a!==null&&zu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),t!==null&&te(ks),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Bi(Pt),pt(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function YE(t,n){switch(xh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Bi(Pt),ft(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return sr(n),null;case 13:if(Hi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Po()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return te(kt),null;case 4:return ft(),null;case 10:return Bi(n.type),null;case 22:case 23:return Hi(n),Gh(),t!==null&&te(ks),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Bi(Pt),null;case 25:return null;default:return null}}function Gg(t,n){switch(xh(n),n.tag){case 3:Bi(Pt),ft();break;case 26:case 27:case 5:sr(n);break;case 4:ft();break;case 13:Hi(n);break;case 19:te(kt);break;case 10:Bi(n.type);break;case 22:case 23:Hi(n),Gh(),t!==null&&te(ks);break;case 24:Bi(Pt)}}function Jo(t,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var d=a.create,v=a.inst;o=d(),v.destroy=o}a=a.next}while(a!==h)}}catch(T){at(n,n.return,T)}}function wr(t,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var d=h.next;o=d;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,h=n;var I=a,B=T;try{B()}catch(K){at(h,I,K)}}}o=o.next}while(o!==d)}}catch(K){at(n,n.return,K)}}function Qg(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Mp(n,a)}catch(o){at(t,t.return,o)}}}function Kg(t,n,a){a.props=Ls(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){at(t,n,o)}}function Wo(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){at(t,n,h)}}function yi(t,n){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){at(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){at(t,n,h)}else a.current=null}function Yg(t){var n=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){at(t,t.return,h)}}function Tf(t,n,a){try{var o=t.stateNode;pS(o,t.type,a,n),o[Kt]=n}catch(h){at(t,t.return,h)}}function Xg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vr(t.type)||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ju));else if(o!==4&&(o===27&&Vr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(Sf(t,n,a),t=t.sibling;t!==null;)Sf(t,n,a),t=t.sibling}function Bu(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(o!==4&&(o===27&&Vr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Bu(t,n,a),t=t.sibling;t!==null;)Bu(t,n,a),t=t.sibling}function $g(t){var n=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);$t(n,o,a),n[St]=t,n[Kt]=a}catch(d){at(t,t.return,d)}}var Qi=!1,wt=!1,bf=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,qt=null;function XE(t,n){if(t=t.containerInfo,Kf=sc,t=lp(t),Th(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,d=o.focusNode;o=o.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,T=-1,I=-1,B=0,K=0,$=t,q=null;t:for(;;){for(var H;$!==a||h!==0&&$.nodeType!==3||(T=v+h),$!==d||o!==0&&$.nodeType!==3||(I=v+o),$.nodeType===3&&(v+=$.nodeValue.length),(H=$.firstChild)!==null;)q=$,$=H;for(;;){if($===t)break t;if(q===a&&++B===h&&(T=v),q===d&&++K===o&&(I=v),(H=$.nextSibling)!==null)break;$=q,q=$.parentNode}$=H}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:t,selectionRange:a},sc=!1,qt=n;qt!==null;)if(n=qt,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,qt=t;else for(;qt!==null;){switch(n=qt,d=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=n,h=d.memoizedProps,d=d.memoizedState,o=a.stateNode;try{var Re=Ls(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Re,d),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){at(a,a.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,qt=t;break}qt=n.return}}function Jg(t,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ir(t,a),o&4&&Jo(5,a);break;case 1:if(Ir(t,a),o&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){at(a,a.return,v)}else{var h=Ls(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){at(a,a.return,v)}}o&64&&Qg(a),o&512&&Wo(a,a.return);break;case 3:if(Ir(t,a),o&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Mp(t,n)}catch(v){at(a,a.return,v)}}break;case 27:n===null&&o&4&&$g(a);case 26:case 5:Ir(t,a),n===null&&o&4&&Yg(a),o&512&&Wo(a,a.return);break;case 12:Ir(t,a);break;case 13:Ir(t,a),o&4&&ty(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=rS.bind(null,a),SS(t,a))));break;case 22:if(o=a.memoizedState!==null||Qi,!o){n=n!==null&&n.memoizedState!==null||wt,h=Qi;var d=wt;Qi=o,(wt=n)&&!d?Cr(t,a,(a.subtreeFlags&8772)!==0):Ir(t,a),Qi=h,wt=d}break;case 30:break;default:Ir(t,a)}}function Wg(t){var n=t.alternate;n!==null&&(t.alternate=null,Wg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ra(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var dt=null,yn=!1;function Ki(t,n,a){for(a=a.child;a!==null;)ey(t,n,a),a=a.sibling}function ey(t,n,a){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(Tn,a)}catch{}switch(a.tag){case 26:wt||yi(a,n),Ki(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||yi(a,n);var o=dt,h=yn;Vr(a.type)&&(dt=a.stateNode,yn=!1),Ki(t,n,a),ll(a.stateNode),dt=o,yn=h;break;case 5:wt||yi(a,n);case 6:if(o=dt,h=yn,dt=null,Ki(t,n,a),dt=o,yn=h,dt!==null)if(yn)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(a.stateNode)}catch(d){at(a,n,d)}else try{dt.removeChild(a.stateNode)}catch(d){at(a,n,d)}break;case 18:dt!==null&&(yn?(t=dt,qy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),gl(t)):qy(dt,a.stateNode));break;case 4:o=dt,h=yn,dt=a.stateNode.containerInfo,yn=!0,Ki(t,n,a),dt=o,yn=h;break;case 0:case 11:case 14:case 15:wt||wr(2,a,n),wt||wr(4,a,n),Ki(t,n,a);break;case 1:wt||(yi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Kg(a,n,o)),Ki(t,n,a);break;case 21:Ki(t,n,a);break;case 22:wt=(o=wt)||a.memoizedState!==null,Ki(t,n,a),wt=o;break;default:Ki(t,n,a)}}function ty(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{gl(t)}catch(a){at(n,n.return,a)}}function $E(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zg),n;default:throw Error(r(435,t.tag))}}function Af(t,n){var a=$E(t);n.forEach(function(o){var h=sS.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function Rn(t,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],d=t,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Vr(T.type)){dt=T.stateNode,yn=!1;break e}break;case 5:dt=T.stateNode,yn=!1;break e;case 3:case 4:dt=T.stateNode.containerInfo,yn=!0;break e}T=T.return}if(dt===null)throw Error(r(160));ey(d,v,h),dt=null,yn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ny(n,t),n=n.sibling}var Zn=null;function ny(t,n){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Rn(n,t),wn(t),o&4&&(wr(3,t,t.return),Jo(3,t),wr(5,t,t.return));break;case 1:Rn(n,t),wn(t),o&512&&(wt||a===null||yi(a,a.return)),o&64&&Qi&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=Zn;if(Rn(n,t),wn(t),o&512&&(wt||a===null||yi(a,a.return)),o&4){var d=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":d=h.getElementsByTagName("title")[0],(!d||d[ur]||d[St]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(o),h.head.insertBefore(d,h.querySelector("head > title"))),$t(d,o,a),d[St]=t,bt(d),o=d;break e;case"link":var v=$y("link","href",h).get(o+(a.href||""));if(v){for(var T=0;T<v.length;T++)if(d=v[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(T,1);break t}}d=h.createElement(o),$t(d,o,a),h.head.appendChild(d);break;case"meta":if(v=$y("meta","content",h).get(o+(a.content||""))){for(T=0;T<v.length;T++)if(d=v[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(T,1);break t}}d=h.createElement(o),$t(d,o,a),h.head.appendChild(d);break;default:throw Error(r(468,o))}d[St]=t,bt(d),o=d}t.stateNode=o}else Zy(h,t.type,t.stateNode);else t.stateNode=Xy(h,o,t.memoizedProps);else d!==o?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,o===null?Zy(h,t.type,t.stateNode):Xy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Tf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Rn(n,t),wn(t),o&512&&(wt||a===null||yi(a,a.return)),a!==null&&o&4&&Tf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Rn(n,t),wn(t),o&512&&(wt||a===null||yi(a,a.return)),t.flags&32){h=t.stateNode;try{On(h,"")}catch(H){at(t,t.return,H)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Tf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(bf=!0);break;case 6:if(Rn(n,t),wn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(H){at(t,t.return,H)}}break;case 3:if(nc=null,h=Zn,Zn=ec(n.containerInfo),Rn(n,t),Zn=h,wn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{gl(n.containerInfo)}catch(H){at(t,t.return,H)}bf&&(bf=!1,iy(t));break;case 4:o=Zn,Zn=ec(t.stateNode.containerInfo),Rn(n,t),wn(t),Zn=o;break;case 12:Rn(n,t),wn(t);break;case 13:Rn(n,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Df=tn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Af(t,o)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,B=Qi,K=wt;if(Qi=B||h,wt=K||I,Rn(n,t),wt=K,Qi=B,wn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||I||Qi||wt||js(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){I=a=n;try{if(d=I.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=I.stateNode;var $=I.memoizedProps.style,q=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){at(I,I.return,H)}}}else if(n.tag===6){if(a===null){I=n;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(H){at(I,I.return,H)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Af(t,a))));break;case 19:Rn(n,t),wn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Af(t,o)));break;case 30:break;case 21:break;default:Rn(n,t),wn(t)}}function wn(t){var n=t.flags;if(n&2){try{for(var a,o=t.return;o!==null;){if(Xg(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Ef(t);Bu(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(On(v,""),a.flags&=-33);var T=Ef(t);Bu(t,T,v);break;case 3:case 4:var I=a.stateNode.containerInfo,B=Ef(t);Sf(t,B,I);break;default:throw Error(r(161))}}catch(K){at(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function iy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;iy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ir(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Jg(t,n.alternate,n),n=n.sibling}function js(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:wr(4,n,n.return),js(n);break;case 1:yi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Kg(n,n.return,a),js(n);break;case 27:ll(n.stateNode);case 26:case 5:yi(n,n.return),js(n);break;case 22:n.memoizedState===null&&js(n);break;case 30:js(n);break;default:js(n)}t=t.sibling}}function Cr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,d=n,v=d.flags;switch(d.tag){case 0:case 11:case 15:Cr(h,d,a),Jo(4,d);break;case 1:if(Cr(h,d,a),o=d,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(B){at(o,o.return,B)}if(o=d,h=o.updateQueue,h!==null){var T=o.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Op(I[h],T)}catch(B){at(o,o.return,B)}}a&&v&64&&Qg(d),Wo(d,d.return);break;case 27:$g(d);case 26:case 5:Cr(h,d,a),a&&o===null&&v&4&&Yg(d),Wo(d,d.return);break;case 12:Cr(h,d,a);break;case 13:Cr(h,d,a),a&&v&4&&ty(h,d);break;case 22:d.memoizedState===null&&Cr(h,d,a),Wo(d,d.return);break;case 30:break;default:Cr(h,d,a)}n=n.sibling}}function Rf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Lo(a))}function wf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Lo(t))}function _i(t,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ry(t,n,a,o),n=n.sibling}function ry(t,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:_i(t,n,a,o),h&2048&&Jo(9,n);break;case 1:_i(t,n,a,o);break;case 3:_i(t,n,a,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Lo(t)));break;case 12:if(h&2048){_i(t,n,a,o),t=n.stateNode;try{var d=n.memoizedProps,v=d.id,T=d.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){at(n,n.return,I)}}else _i(t,n,a,o);break;case 13:_i(t,n,a,o);break;case 23:break;case 22:d=n.stateNode,v=n.alternate,n.memoizedState!==null?d._visibility&2?_i(t,n,a,o):el(t,n):d._visibility&2?_i(t,n,a,o):(d._visibility|=2,xa(t,n,a,o,(n.subtreeFlags&10256)!==0)),h&2048&&Rf(v,n);break;case 24:_i(t,n,a,o),h&2048&&wf(n.alternate,n);break;default:_i(t,n,a,o)}}function xa(t,n,a,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var d=t,v=n,T=a,I=o,B=v.flags;switch(v.tag){case 0:case 11:case 15:xa(d,v,T,I,h),Jo(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?xa(d,v,T,I,h):el(d,v):(K._visibility|=2,xa(d,v,T,I,h)),h&&B&2048&&Rf(v.alternate,v);break;case 24:xa(d,v,T,I,h),h&&B&2048&&wf(v.alternate,v);break;default:xa(d,v,T,I,h)}n=n.sibling}}function el(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,o=n,h=o.flags;switch(o.tag){case 22:el(a,o),h&2048&&Rf(o.alternate,o);break;case 24:el(a,o),h&2048&&wf(o.alternate,o);break;default:el(a,o)}n=n.sibling}}var tl=8192;function Oa(t){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)sy(t),t=t.sibling}function sy(t){switch(t.tag){case 26:Oa(t),t.flags&tl&&t.memoizedState!==null&&PS(Zn,t.memoizedState,t.memoizedProps);break;case 5:Oa(t);break;case 3:case 4:var n=Zn;Zn=ec(t.stateNode.containerInfo),Oa(t),Zn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=tl,tl=16777216,Oa(t),tl=n):Oa(t));break;default:Oa(t)}}function ay(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function nl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];qt=o,ly(o,t)}ay(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)oy(t),t=t.sibling}function oy(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&wr(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,qu(t)):nl(t);break;default:nl(t)}}function qu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];qt=o,ly(o,t)}ay(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:wr(8,n,n.return),qu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,qu(n));break;default:qu(n)}t=t.sibling}}function ly(t,n){for(;qt!==null;){var a=qt;switch(a.tag){case 0:case 11:case 15:wr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Lo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,qt=o;else e:for(a=t;qt!==null;){o=qt;var h=o.sibling,d=o.return;if(Wg(o),o===a){qt=null;break e}if(h!==null){h.return=d,qt=h;break e}qt=d}}}var ZE={getCacheForType:function(t){var n=rn(Pt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a}},JE=typeof WeakMap=="function"?WeakMap:Map,Je=0,lt=null,Ue=null,He=0,We=0,In=null,Nr=!1,Ma=!1,If=!1,Yi=0,vt=0,Dr=0,zs=0,Cf=0,jn=0,Va=0,il=null,_n=null,Nf=!1,Df=0,Hu=1/0,Fu=null,xr=null,Xt=0,Or=null,Pa=null,ka=0,xf=0,Of=null,uy=null,rl=0,Mf=null;function Cn(){if((Je&2)!==0&&He!==0)return He&-He;if(G.T!==null){var t=ba;return t!==0?t:zf()}return Di()}function cy(){jn===0&&(jn=(He&536870912)===0||Ke?st():536870912);var t=Ln.current;return t!==null&&(t.flags|=32),jn}function Nn(t,n,a){(t===lt&&(We===2||We===9)||t.cancelPendingCommit!==null)&&(Ua(t,0),Mr(t,He,jn,!1)),ut(t,a),((Je&2)===0||t!==lt)&&(t===lt&&((Je&2)===0&&(zs|=a),vt===4&&Mr(t,He,jn,!1)),vi(t))}function hy(t,n,a){if((Je&6)!==0)throw Error(r(327));var o=!a&&(n&124)===0&&(n&t.expiredLanes)===0||si(t,n),h=o?tS(t,n):kf(t,n,!0),d=o;do{if(h===0){Ma&&!o&&Mr(t,n,0,!1);break}else{if(a=t.current.alternate,d&&!WE(a)){h=kf(t,n,!1),d=!1;continue}if(h===2){if(d=n,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var T=t;h=il;var I=T.current.memoizedState.isDehydrated;if(I&&(Ua(T,v).flags|=256),v=kf(T,v,!1),v!==2){if(If&&!I){T.errorRecoveryDisabledLanes|=d,zs|=d,h=4;break e}d=_n,_n=h,d!==null&&(_n===null?_n=d:_n.push.apply(_n,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){Ua(t,0),Mr(t,n,0,!0);break}e:{switch(o=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Mr(o,n,jn,!Nr);break e;case 2:_n=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=Df+300-tn(),10<h)){if(Mr(o,n,jn,!Nr),cn(o,0,!0)!==0)break e;o.timeoutHandle=zy(fy.bind(null,o,a,_n,Fu,Nf,n,jn,zs,Va,Nr,d,2,-0,0),h);break e}fy(o,a,_n,Fu,Nf,n,jn,zs,Va,Nr,d,0,-0,0)}}break}while(!0);vi(t)}function fy(t,n,a,o,h,d,v,T,I,B,K,$,q,H){if(t.timeoutHandle=-1,$=n.subtreeFlags,($&8192||($&16785408)===16785408)&&(hl={stylesheets:null,count:0,unsuspend:VS},sy(n),$=kS(),$!==null)){t.cancelPendingCommit=$(vy.bind(null,t,n,d,a,o,h,v,T,I,K,1,q,H)),Mr(t,d,v,!B);return}vy(t,n,d,a,o,h,v,T,I)}function WE(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],d=h.getSnapshot;h=h.value;try{if(!bn(d(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Mr(t,n,a,o){n&=~Cf,n&=~zs,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var d=31-jt(h),v=1<<d;o[d]=-1,h&=~v}a!==0&&ai(t,a,n)}function Gu(){return(Je&6)===0?(sl(0),!1):!0}function Vf(){if(Ue!==null){if(We===0)var t=Ue.return;else t=Ue,zi=Vs=null,$h(t),Na=null,Xo=0,t=Ue;for(;t!==null;)Gg(t.alternate,t),t=t.return;Ue=null}}function Ua(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,yS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vf(),lt=t,Ue=a=Ui(t.current,null),He=n,We=0,In=null,Nr=!1,Ma=si(t,n),If=!1,Va=jn=Cf=zs=Dr=vt=0,_n=il=null,Nf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-jt(o),d=1<<h;n|=t[h],o&=~d}return Yi=n,du(),a}function dy(t,n){Pe=null,G.H=Ou,n===zo||n===Su?(n=Dp(),We=3):n===Ip?(n=Dp(),We=4):We=n===xg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,In=n,Ue===null&&(vt=1,Uu(t,Vn(n,t.current)))}function my(){var t=G.H;return G.H=Ou,t===null?Ou:t}function py(){var t=G.A;return G.A=ZE,t}function Pf(){vt=4,Nr||(He&4194048)!==He&&Ln.current!==null||(Ma=!0),(Dr&134217727)===0&&(zs&134217727)===0||lt===null||Mr(lt,He,jn,!1)}function kf(t,n,a){var o=Je;Je|=2;var h=my(),d=py();(lt!==t||He!==n)&&(Fu=null,Ua(t,n)),n=!1;var v=vt;e:do try{if(We!==0&&Ue!==null){var T=Ue,I=In;switch(We){case 8:Vf(),v=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var B=We;if(We=0,In=null,La(t,T,I,B),a&&Ma){v=0;break e}break;default:B=We,We=0,In=null,La(t,T,I,B)}}eS(),v=vt;break}catch(K){dy(t,K)}while(!0);return n&&t.shellSuspendCounter++,zi=Vs=null,Je=o,G.H=h,G.A=d,Ue===null&&(lt=null,He=0,du()),v}function eS(){for(;Ue!==null;)gy(Ue)}function tS(t,n){var a=Je;Je|=2;var o=my(),h=py();lt!==t||He!==n?(Fu=null,Hu=tn()+500,Ua(t,n)):Ma=si(t,n);e:do try{if(We!==0&&Ue!==null){n=Ue;var d=In;t:switch(We){case 1:We=0,In=null,La(t,n,d,1);break;case 2:case 9:if(Cp(d)){We=0,In=null,yy(n);break}n=function(){We!==2&&We!==9||lt!==t||(We=7),vi(t)},d.then(n,n);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Cp(d)?(We=0,In=null,yy(n)):(We=0,In=null,La(t,n,d,7));break;case 5:var v=null;switch(Ue.tag){case 26:v=Ue.memoizedState;case 5:case 27:var T=Ue;if(!v||Jy(v)){We=0,In=null;var I=T.sibling;if(I!==null)Ue=I;else{var B=T.return;B!==null?(Ue=B,Qu(B)):Ue=null}break t}}We=0,In=null,La(t,n,d,5);break;case 6:We=0,In=null,La(t,n,d,6);break;case 8:Vf(),vt=6;break e;default:throw Error(r(462))}}nS();break}catch(K){dy(t,K)}while(!0);return zi=Vs=null,G.H=o,G.A=h,Je=a,Ue!==null?0:(lt=null,He=0,du(),vt)}function nS(){for(;Ue!==null&&!mo();)gy(Ue)}function gy(t){var n=Hg(t.alternate,t,Yi);t.memoizedProps=t.pendingProps,n===null?Qu(t):Ue=n}function yy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Ug(a,n,n.pendingProps,n.type,void 0,He);break;case 11:n=Ug(a,n,n.pendingProps,n.type.render,n.ref,He);break;case 5:$h(n);default:Gg(a,n),n=Ue=_p(n,Yi),n=Hg(a,n,Yi)}t.memoizedProps=t.pendingProps,n===null?Qu(t):Ue=n}function La(t,n,a,o){zi=Vs=null,$h(n),Na=null,Xo=0;var h=n.return;try{if(GE(t,h,n,a,He)){vt=1,Uu(t,Vn(a,t.current)),Ue=null;return}}catch(d){if(h!==null)throw Ue=h,d;vt=1,Uu(t,Vn(a,t.current)),Ue=null;return}n.flags&32768?(Ke||o===1?t=!0:Ma||(He&536870912)!==0?t=!1:(Nr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),_y(n,t)):Qu(n)}function Qu(t){var n=t;do{if((n.flags&32768)!==0){_y(n,Nr);return}t=n.return;var a=KE(n.alternate,n,Yi);if(a!==null){Ue=a;return}if(n=n.sibling,n!==null){Ue=n;return}Ue=n=t}while(n!==null);vt===0&&(vt=5)}function _y(t,n){do{var a=YE(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);vt=6,Ue=null}function vy(t,n,a,o,h,d,v,T,I){t.cancelPendingCommit=null;do Ku();while(Xt!==0);if((Je&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(d=n.lanes|n.childLanes,d|=Rh,as(t,a,d,v,T,I),t===lt&&(Ue=lt=null,He=0),Pa=n,Or=t,ka=a,xf=d,Of=h,uy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,aS(re,function(){return Ay(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=ce.p,ce.p=2,v=Je,Je|=4;try{XE(t,n,a)}finally{Je=v,ce.p=h,G.T=o}}Xt=1,Ty(),Ey(),Sy()}}function Ty(){if(Xt===1){Xt=0;var t=Or,n=Pa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=ce.p;ce.p=2;var h=Je;Je|=4;try{ny(n,t);var d=Yf,v=lp(t.containerInfo),T=d.focusedElem,I=d.selectionRange;if(v!==T&&T&&T.ownerDocument&&op(T.ownerDocument.documentElement,T)){if(I!==null&&Th(T)){var B=I.start,K=I.end;if(K===void 0&&(K=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(K,T.value.length);else{var $=T.ownerDocument||document,q=$&&$.defaultView||window;if(q.getSelection){var H=q.getSelection(),Re=T.textContent.length,Ee=Math.min(I.start,Re),rt=I.end===void 0?Ee:Math.min(I.end,Re);!H.extend&&Ee>rt&&(v=rt,rt=Ee,Ee=v);var k=ap(T,Ee),O=ap(T,rt);if(k&&O&&(H.rangeCount!==1||H.anchorNode!==k.node||H.anchorOffset!==k.offset||H.focusNode!==O.node||H.focusOffset!==O.offset)){var L=$.createRange();L.setStart(k.node,k.offset),H.removeAllRanges(),Ee>rt?(H.addRange(L),H.extend(O.node,O.offset)):(L.setEnd(O.node,O.offset),H.addRange(L))}}}}for($=[],H=T;H=H.parentNode;)H.nodeType===1&&$.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Y=$[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}sc=!!Kf,Yf=Kf=null}finally{Je=h,ce.p=o,G.T=a}}t.current=n,Xt=2}}function Ey(){if(Xt===2){Xt=0;var t=Or,n=Pa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=ce.p;ce.p=2;var h=Je;Je|=4;try{Jg(t,n.alternate,n)}finally{Je=h,ce.p=o,G.T=a}}Xt=3}}function Sy(){if(Xt===4||Xt===3){Xt=0,is();var t=Or,n=Pa,a=ka,o=uy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xt=5:(Xt=0,Pa=Or=null,by(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(xr=null),go(a),n=n.stateNode,Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(Tn,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,h=ce.p,ce.p=2,G.T=null;try{for(var d=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];d(T.value,{componentStack:T.stack})}}finally{G.T=n,ce.p=h}}(ka&3)!==0&&Ku(),vi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mf?rl++:(rl=0,Mf=t):rl=0,sl(0)}}function by(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Lo(n)))}function Ku(t){return Ty(),Ey(),Sy(),Ay()}function Ay(){if(Xt!==5)return!1;var t=Or,n=xf;xf=0;var a=go(ka),o=G.T,h=ce.p;try{ce.p=32>a?32:a,G.T=null,a=Of,Of=null;var d=Or,v=ka;if(Xt=0,Pa=Or=null,ka=0,(Je&6)!==0)throw Error(r(331));var T=Je;if(Je|=4,oy(d.current),ry(d,d.current,v,a),Je=T,sl(0,!1),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(Tn,d)}catch{}return!0}finally{ce.p=h,G.T=o,by(t,n)}}function Ry(t,n,a){n=Vn(a,n),n=hf(t.stateNode,n,2),t=Sr(t,n,2),t!==null&&(ut(t,2),vi(t))}function at(t,n,a){if(t.tag===3)Ry(t,t,a);else for(;n!==null;){if(n.tag===3){Ry(n,t,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(xr===null||!xr.has(o))){t=Vn(a,t),a=Ng(2),o=Sr(n,a,2),o!==null&&(Dg(a,o,n,t),ut(o,2),vi(o));break}}n=n.return}}function Uf(t,n,a){var o=t.pingCache;if(o===null){o=t.pingCache=new JE;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(If=!0,h.add(a),t=iS.bind(null,t,n,a),n.then(t,t))}function iS(t,n,a){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(He&a)===a&&(vt===4||vt===3&&(He&62914560)===He&&300>tn()-Df?(Je&2)===0&&Ua(t,0):Cf|=a,Va===He&&(Va=0)),vi(t)}function wy(t,n){n===0&&(n=Et()),t=va(t,n),t!==null&&(ut(t,n),vi(t))}function rS(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),wy(t,a)}function sS(t,n){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),wy(t,a)}function aS(t,n){return ii(t,n)}var Yu=null,ja=null,Lf=!1,Xu=!1,jf=!1,Bs=0;function vi(t){t!==ja&&t.next===null&&(ja===null?Yu=ja=t:ja=ja.next=t),Xu=!0,Lf||(Lf=!0,lS())}function sl(t,n){if(!jf&&Xu){jf=!0;do for(var a=!1,o=Yu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var d=0;else{var v=o.suspendedLanes,T=o.pingedLanes;d=(1<<31-jt(42|t)+1)-1,d&=h&~(v&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Dy(o,d))}else d=He,d=cn(o,o===lt?d:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(d&3)===0||si(o,d)||(a=!0,Dy(o,d));o=o.next}while(a);jf=!1}}function oS(){Iy()}function Iy(){Xu=Lf=!1;var t=0;Bs!==0&&(gS()&&(t=Bs),Bs=0);for(var n=tn(),a=null,o=Yu;o!==null;){var h=o.next,d=Cy(o,n);d===0?(o.next=null,a===null?Yu=h:a.next=h,h===null&&(ja=a)):(a=o,(t!==0||(d&3)!==0)&&(Xu=!0)),o=h}sl(t)}function Cy(t,n){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-jt(d),T=1<<v,I=h[v];I===-1?((T&a)===0||(T&o)!==0)&&(h[v]=or(T,n)):I<=n&&(t.expiredLanes|=T),d&=~T}if(n=lt,a=He,a=cn(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===n&&(We===2||We===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ar(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||si(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(o!==null&&ar(o),go(a)){case 2:case 8:a=Ct;break;case 32:a=re;break;case 268435456:a=je;break;default:a=re}return o=Ny.bind(null,t),a=ii(a,o),t.callbackPriority=n,t.callbackNode=a,n}return o!==null&&o!==null&&ar(o),t.callbackPriority=2,t.callbackNode=null,2}function Ny(t,n){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ku()&&t.callbackNode!==a)return null;var o=He;return o=cn(t,t===lt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(hy(t,o,n),Cy(t,tn()),t.callbackNode!=null&&t.callbackNode===a?Ny.bind(null,t):null)}function Dy(t,n){if(Ku())return null;hy(t,n,!0)}function lS(){_S(function(){(Je&6)!==0?ii(Tt,oS):Iy()})}function zf(){return Bs===0&&(Bs=st()),Bs}function xy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Qn(""+t)}function Oy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function uS(t,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var d=xy((h[Kt]||null).action),v=o.submitter;v&&(n=(n=v[Kt]||null)?xy(n.formAction):v.getAttribute("formAction"),n!==null&&(d=n,v=null));var T=new Ts("action","action",null,o,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Bs!==0){var I=v?Oy(h,v):new FormData(h);af(a,{pending:!0,data:I,method:h.method,action:d},null,I)}}else typeof d=="function"&&(T.preventDefault(),I=v?Oy(h,v):new FormData(h),af(a,{pending:!0,data:I,method:h.method,action:d},d,I))},currentTarget:h}]})}}for(var Bf=0;Bf<Ah.length;Bf++){var qf=Ah[Bf],cS=qf.toLowerCase(),hS=qf[0].toUpperCase()+qf.slice(1);$n(cS,"on"+hS)}$n(hp,"onAnimationEnd"),$n(fp,"onAnimationIteration"),$n(dp,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(CE,"onTransitionRun"),$n(NE,"onTransitionStart"),$n(DE,"onTransitionCancel"),$n(mp,"onTransitionEnd"),hi("onMouseEnter",["mouseout","mouseover"]),hi("onMouseLeave",["mouseout","mouseover"]),hi("onPointerEnter",["pointerout","pointerover"]),hi("onPointerLeave",["pointerout","pointerover"]),ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ci("onBeforeInput",["compositionend","keypress","textInput","paste"]),ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function My(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var d=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],I=T.instance,B=T.currentTarget;if(T=T.listener,I!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=B;try{d(h)}catch(K){ku(K)}h.currentTarget=null,d=I}else for(v=0;v<o.length;v++){if(T=o[v],I=T.instance,B=T.currentTarget,T=T.listener,I!==d&&h.isPropagationStopped())break e;d=T,h.currentTarget=B;try{d(h)}catch(K){ku(K)}h.currentTarget=null,d=I}}}}function Le(t,n){var a=n[os];a===void 0&&(a=n[os]=new Set);var o=t+"__bubble";a.has(o)||(Vy(n,t,2,!1),a.add(o))}function Hf(t,n,a){var o=0;n&&(o|=4),Vy(a,t,o,n)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[$u]){t[$u]=!0,Zl.forEach(function(a){a!=="selectionchange"&&(fS.has(a)||Hf(a,!1,t),Hf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[$u]||(n[$u]=!0,Hf("selectionchange",!1,n))}}function Vy(t,n,a,o){switch(r_(n)){case 2:var h=jS;break;case 8:h=zS;break;default:h=rd}a=h.bind(null,n,a,t),h=void 0,!Pi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Gf(t,n,a,o,h){var d=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===h)break;if(v===4)for(v=o.return;v!==null;){var I=v.tag;if((I===3||I===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;T!==null;){if(v=li(T),v===null)return;if(I=v.tag,I===5||I===6||I===26||I===27){o=d=v;continue e}T=T.parentNode}}o=o.return}ys(function(){var B=d,K=bo(a),$=[];e:{var q=pp.get(t);if(q!==void 0){var H=Ts,Re=t;switch(t){case"keypress":if(_s(a)===0)break e;case"keydown":case"keyup":H=pa;break;case"focusin":Re="focus",H=fa;break;case"focusout":Re="blur",H=fa;break;case"beforeblur":case"afterblur":H=fa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Rs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=_r;break;case hp:case fp:case dp:H=Ro;break;case mp:H=m;break;case"scroll":case"scrollend":H=Ss;break;case"wheel":H=b;break;case"copy":case"cut":case"paste":H=au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Co;break;case"toggle":case"beforetoggle":H=F}var Ee=(n&4)!==0,rt=!Ee&&(t==="scroll"||t==="scrollend"),k=Ee?q!==null?q+"Capture":null:q;Ee=[];for(var O=B,L;O!==null;){var Y=O;if(L=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||L===null||k===null||(Y=gr(O,k),Y!=null&&Ee.push(ol(O,Y,L))),rt)break;O=O.return}0<Ee.length&&(q=new H(q,Re,null,a,K),$.push({event:q,listeners:Ee}))}}if((n&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==So&&(Re=a.relatedTarget||a.fromElement)&&(li(Re)||Re[xi]))break e;if((H||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Re=a.relatedTarget||a.toElement,H=B,Re=Re?li(Re):null,Re!==null&&(rt=c(Re),Ee=Re.tag,Re!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(Re=null)):(H=null,Re=B),H!==Re)){if(Ee=Rs,Y="onMouseLeave",k="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=Co,Y="onPointerLeave",k="onPointerEnter",O="pointer"),rt=H==null?q:cr(H),L=Re==null?q:cr(Re),q=new Ee(Y,O+"leave",H,a,K),q.target=rt,q.relatedTarget=L,Y=null,li(K)===B&&(Ee=new Ee(k,O+"enter",Re,a,K),Ee.target=L,Ee.relatedTarget=rt,Y=Ee),rt=Y,H&&Re)t:{for(Ee=H,k=Re,O=0,L=Ee;L;L=za(L))O++;for(L=0,Y=k;Y;Y=za(Y))L++;for(;0<O-L;)Ee=za(Ee),O--;for(;0<L-O;)k=za(k),L--;for(;O--;){if(Ee===k||k!==null&&Ee===k.alternate)break t;Ee=za(Ee),k=za(k)}Ee=null}else Ee=null;H!==null&&Py($,q,H,Ee,!1),Re!==null&&rt!==null&&Py($,rt,Re,Ee,!0)}}e:{if(q=B?cr(B):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var me=ep;else if(Jm(q))if(tp)me=RE;else{me=bE;var ke=SE}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?B&&ua(B.elementType)&&(me=ep):me=AE;if(me&&(me=me(t,B))){Wm($,me,a,K);break e}ke&&ke(t,q,B),t==="focusout"&&B&&q.type==="number"&&B.memoizedProps.value!=null&&vo(q,"number",q.value)}switch(ke=B?cr(B):window,t){case"focusin":(Jm(ke)||ke.contentEditable==="true")&&(ga=ke,Eh=B,Mo=null);break;case"focusout":Mo=Eh=ga=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,up($,a,K);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":up($,a,K)}var _e;if(Ne)e:{switch(t){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Xn?Kn(t,a)&&(be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(At&&a.locale!=="ko"&&(Xn||be!=="onCompositionStart"?be==="onCompositionEnd"&&Xn&&(_e=iu()):(Mn=K,ot="value"in Mn?Mn.value:Mn.textContent,Xn=!0)),ke=Zu(B,be),0<ke.length&&(be=new Io(be,t,null,a,K),$.push({event:be,listeners:ke}),_e?be.data=_e:(_e=Yn(a),_e!==null&&(be.data=_e)))),(_e=Ze?No(t,a):vE(t,a))&&(be=Zu(B,"onBeforeInput"),0<be.length&&(ke=new Io("onBeforeInput","beforeinput",null,a,K),$.push({event:ke,listeners:be}),ke.data=_e)),uS($,t,B,a,K)}My($,n)})}function ol(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Zu(t,n){for(var a=n+"Capture",o=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=gr(t,a),h!=null&&o.unshift(ol(t,h,d)),h=gr(t,n),h!=null&&o.push(ol(t,h,d))),t.tag===3)return o;t=t.return}return[]}function za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Py(t,n,a,o,h){for(var d=n._reactName,v=[];a!==null&&a!==o;){var T=a,I=T.alternate,B=T.stateNode;if(T=T.tag,I!==null&&I===o)break;T!==5&&T!==26&&T!==27||B===null||(I=B,h?(B=gr(a,d),B!=null&&v.unshift(ol(a,B,I))):h||(B=gr(a,d),B!=null&&v.push(ol(a,B,I)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var dS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(dS,`
`).replace(mS,"")}function Uy(t,n){return n=ky(n),ky(t)===n}function Ju(){}function it(t,n,a,o,h,d){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||On(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&On(t,""+o);break;case"className":fs(t,"class",o);break;case"tabIndex":fs(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":fs(t,a,o);break;case"style":Eo(t,o,d);break;case"data":if(n!=="object"){fs(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Qn(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(n!=="input"&&it(t,n,"name",h.name,h,null),it(t,n,"formEncType",h.formEncType,h,null),it(t,n,"formMethod",h.formMethod,h,null),it(t,n,"formTarget",h.formTarget,h,null)):(it(t,n,"encType",h.encType,h,null),it(t,n,"method",h.method,h,null),it(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=Qn(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ju);break;case"onScroll":o!=null&&Le("scroll",t);break;case"onScrollEnd":o!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=Qn(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":Le("beforetoggle",t),Le("toggle",t),hs(t,"popover",o);break;case"xlinkActuate":xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":xn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":xn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":xn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":xn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":hs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eu.get(a)||a,hs(t,a,o))}}function Qf(t,n,a,o,h,d){switch(a){case"style":Eo(t,o,d);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?On(t,o):(typeof o=="number"||typeof o=="bigint")&&On(t,""+o);break;case"onScroll":o!=null&&Le("scroll",t);break;case"onScrollEnd":o!=null&&Le("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),d=t[Kt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(n,d,h),typeof o=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):hs(t,a,o)}}}function $t(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var o=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:it(t,n,d,v,a,null)}}h&&it(t,n,"srcSet",a.srcSet,a,null),o&&it(t,n,"src",a.src,a,null);return;case"input":Le("invalid",t);var T=d=v=h=null,I=null,B=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":v=K;break;case"checked":I=K;break;case"defaultChecked":B=K;break;case"value":d=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:it(t,n,o,K,a,null)}}_o(t,d,T,I,B,v,h,!1),dr(t);return;case"select":Le("invalid",t),o=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":d=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:it(t,n,h,T,a,null)}n=d,a=v,t.multiple=!!o,n!=null?mr(t,!!o,n,!1):a!=null&&mr(t,!!o,a,!0);return;case"textarea":Le("invalid",t),d=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(T=a[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":h=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:it(t,n,v,T,a,null)}Wl(t,o,h,d),dr(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(o=a[I],o!=null))switch(I){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:it(t,n,I,o,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(o=0;o<al.length;o++)Le(al[o],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(o=a[B],o!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:it(t,n,B,o,a,null)}return;default:if(ua(n)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&Qf(t,n,K,o,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(o=a[T],o!=null&&it(t,n,T,o,a,null))}function pS(t,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,T=null,I=null,B=null,K=null;for(H in a){var $=a[H];if(a.hasOwnProperty(H)&&$!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=$;default:o.hasOwnProperty(H)||it(t,n,H,null,o,$)}}for(var q in o){var H=o[q];if($=a[q],o.hasOwnProperty(q)&&(H!=null||$!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":B=H;break;case"defaultChecked":K=H;break;case"value":v=H;break;case"defaultValue":T=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,n));break;default:H!==$&&it(t,n,q,H,o,$)}}yo(t,v,T,I,B,K,d,h);return;case"select":H=v=T=q=null;for(d in a)if(I=a[d],a.hasOwnProperty(d)&&I!=null)switch(d){case"value":break;case"multiple":H=I;default:o.hasOwnProperty(d)||it(t,n,d,null,o,I)}for(h in o)if(d=o[h],I=a[h],o.hasOwnProperty(h)&&(d!=null||I!=null))switch(h){case"value":q=d;break;case"defaultValue":T=d;break;case"multiple":v=d;default:d!==I&&it(t,n,h,d,o,I)}n=T,a=v,o=H,q!=null?mr(t,!!a,q,!1):!!o!=!!a&&(n!=null?mr(t,!!a,n,!0):mr(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:it(t,n,T,null,o,h)}for(v in o)if(h=o[v],d=a[v],o.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&it(t,n,v,h,o,d)}Jl(t,q,H);return;case"option":for(var Re in a)if(q=a[Re],a.hasOwnProperty(Re)&&q!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":t.selected=!1;break;default:it(t,n,Re,null,o,q)}for(I in o)if(q=o[I],H=a[I],o.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:it(t,n,I,q,o,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)q=a[Ee],a.hasOwnProperty(Ee)&&q!=null&&!o.hasOwnProperty(Ee)&&it(t,n,Ee,null,o,q);for(B in o)if(q=o[B],H=a[B],o.hasOwnProperty(B)&&q!==H&&(q!=null||H!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:it(t,n,B,q,o,H)}return;default:if(ua(n)){for(var rt in a)q=a[rt],a.hasOwnProperty(rt)&&q!==void 0&&!o.hasOwnProperty(rt)&&Qf(t,n,rt,void 0,o,q);for(K in o)q=o[K],H=a[K],!o.hasOwnProperty(K)||q===H||q===void 0&&H===void 0||Qf(t,n,K,q,o,H);return}}for(var k in a)q=a[k],a.hasOwnProperty(k)&&q!=null&&!o.hasOwnProperty(k)&&it(t,n,k,null,o,q);for($ in o)q=o[$],H=a[$],!o.hasOwnProperty($)||q===H||q==null&&H==null||it(t,n,$,q,o,H)}var Kf=null,Yf=null;function Wu(t){return t.nodeType===9?t:t.ownerDocument}function Ly(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Xf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $f=null;function gS(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,yS=typeof clearTimeout=="function"?clearTimeout:void 0,By=typeof Promise=="function"?Promise:void 0,_S=typeof queueMicrotask=="function"?queueMicrotask:typeof By<"u"?function(t){return By.resolve(null).then(t).catch(vS)}:zy;function vS(t){setTimeout(function(){throw t})}function Vr(t){return t==="head"}function qy(t,n){var a=n,o=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&ll(v.documentElement),a&2&&ll(v.body),a&4)for(a=v.head,ll(a),v=a.firstChild;v;){var T=v.nextSibling,I=v.nodeName;v[ur]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=T}}if(h===0){t.removeChild(d),gl(n);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=d}while(a);gl(n)}function Zf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),ra(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function TS(t,n,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ur])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Jn(t.nextSibling),t===null)break}return null}function ES(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Jn(t.nextSibling),t===null))return null;return t}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function SS(t,n){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Jn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Wf=null;function Hy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}function Fy(t,n,a){switch(n=Wu(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ll(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ra(t)}var zn=new Map,Gy=new Set;function ec(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Xi=ce.d;ce.d={f:bS,r:AS,D:RS,C:wS,L:IS,m:CS,X:DS,S:NS,M:xS};function bS(){var t=Xi.f(),n=Gu();return t||n}function AS(t){var n=ui(t);n!==null&&n.tag===5&&n.type==="form"?hg(n):Xi.r(t)}var Ba=typeof document>"u"?null:document;function Qy(t,n,a){var o=Ba;if(o&&typeof n=="string"&&n){var h=zt(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gy.has(h)||(Gy.add(h),t={rel:t,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),$t(n,"link",t),bt(n),o.head.appendChild(n)))}}function RS(t){Xi.D(t),Qy("dns-prefetch",t,null)}function wS(t,n){Xi.C(t,n),Qy("preconnect",t,n)}function IS(t,n,a){Xi.L(t,n,a);var o=Ba;if(o&&t&&n){var h='link[rel="preload"][as="'+zt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+zt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+zt(a.imageSizes)+'"]')):h+='[href="'+zt(t)+'"]';var d=h;switch(n){case"style":d=qa(t);break;case"script":d=Ha(t)}zn.has(d)||(t=S({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),zn.set(d,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(ul(d))||n==="script"&&o.querySelector(cl(d))||(n=o.createElement("link"),$t(n,"link",t),bt(n),o.head.appendChild(n)))}}function CS(t,n){Xi.m(t,n);var a=Ba;if(a&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+zt(o)+'"][href="'+zt(t)+'"]',d=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ha(t)}if(!zn.has(d)&&(t=S({rel:"modulepreload",href:t},n),zn.set(d,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(d)))return}o=a.createElement("link"),$t(o,"link",t),bt(o),a.head.appendChild(o)}}}function NS(t,n,a){Xi.S(t,n,a);var o=Ba;if(o&&t){var h=hr(o).hoistableStyles,d=qa(t);n=n||"default";var v=h.get(d);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(ul(d)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},a),(a=zn.get(d))&&ed(t,a);var I=v=o.createElement("link");bt(I),$t(I,"link",t),I._p=new Promise(function(B,K){I.onload=B,I.onerror=K}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,tc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},h.set(d,v)}}}function DS(t,n){Xi.X(t,n);var a=Ba;if(a&&t){var o=hr(a).hoistableScripts,h=Ha(t),d=o.get(h);d||(d=a.querySelector(cl(h)),d||(t=S({src:t,async:!0},n),(n=zn.get(h))&&td(t,n),d=a.createElement("script"),bt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function xS(t,n){Xi.M(t,n);var a=Ba;if(a&&t){var o=hr(a).hoistableScripts,h=Ha(t),d=o.get(h);d||(d=a.querySelector(cl(h)),d||(t=S({src:t,async:!0,type:"module"},n),(n=zn.get(h))&&td(t,n),d=a.createElement("script"),bt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},o.set(h,d))}}function Ky(t,n,a,o){var h=(h=fe.current)?ec(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=qa(a.href),a=hr(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=qa(a.href);var d=hr(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(ul(t)))&&!d._p&&(v.instance=d,v.state.loading=5),zn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},zn.set(t,a),d||OS(h,t,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ha(a),a=hr(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function qa(t){return'href="'+zt(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function Yy(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function OS(t,n,a,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),$t(n,"link",a),bt(n),t.head.appendChild(n))}function Ha(t){return'[src="'+zt(t)+'"]'}function cl(t){return"script[async]"+t}function Xy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+zt(a.href)+'"]');if(o)return n.instance=o,bt(o),o;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),bt(o),$t(o,"style",h),tc(o,a.precedence,t),n.instance=o;case"stylesheet":h=qa(a.href);var d=t.querySelector(ul(h));if(d)return n.state.loading|=4,n.instance=d,bt(d),d;o=Yy(a),(h=zn.get(h))&&ed(o,h),d=(t.ownerDocument||t).createElement("link"),bt(d);var v=d;return v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),$t(d,"link",o),n.state.loading|=4,tc(d,a.precedence,t),n.instance=d;case"script":return d=Ha(a.src),(h=t.querySelector(cl(d)))?(n.instance=h,bt(h),h):(o=a,(h=zn.get(d))&&(o=S({},a),td(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),bt(h),$t(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,tc(o,a.precedence,t));return n.instance}function tc(t,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,d=h,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)d=T;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function ed(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function td(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var nc=null;function $y(t,n,a){if(nc===null){var o=new Map,h=nc=new Map;h.set(a,o)}else h=nc,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[ur]||d[St]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(n)||"";v=t+v;var T=o.get(v);T?T.push(d):o.set(v,[d])}}return o}function Zy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function MS(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Jy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var hl=null;function VS(){}function PS(t,n,a){if(hl===null)throw Error(r(475));var o=hl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=qa(a.href),d=t.querySelector(ul(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=ic.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=d,bt(d);return}d=t.ownerDocument||t,a=Yy(a),(h=zn.get(h))&&ed(a,h),d=d.createElement("link"),bt(d);var v=d;v._p=new Promise(function(T,I){v.onload=T,v.onerror=I}),$t(d,"link",a),n.instance=d}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=ic.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function kS(){if(hl===null)throw Error(r(475));var t=hl;return t.stylesheets&&t.count===0&&nd(t,t.stylesheets),0<t.count?function(n){var a=setTimeout(function(){if(t.stylesheets&&nd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ic(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var rc=null;function nd(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,rc=new Map,n.forEach(US,t),rc=null,ic.call(t))}function US(t,n){if(!(n.state.loading&4)){var a=rc.get(t);if(a)var o=a.get(null);else{a=new Map,rc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||o,d===o&&a.set(null,h),a.set(v,h),this.count++,o=ic.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var fl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function LS(t,n,a,o,h,d,v,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pn(0),this.hiddenUpdates=pn(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function Wy(t,n,a,o,h,d,v,T,I,B,K,$){return t=new LS(t,n,a,v,T,I,B,$),n=1,d===!0&&(n|=24),d=An(3,null,null,n),t.current=d,d.stateNode=t,n=kh(),n.refCount++,t.pooledCache=n,n.refCount++,d.memoizedState={element:o,isDehydrated:a,cache:n},zh(d),t}function e_(t){return t?(t=Ta,t):Ta}function t_(t,n,a,o,h,d){h=e_(h),o.context===null?o.context=h:o.pendingContext=h,o=Er(n),o.payload={element:a},d=d===void 0?null:d,d!==null&&(o.callback=d),a=Sr(t,o,n),a!==null&&(Nn(a,t,n),qo(a,t,n))}function n_(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function id(t,n){n_(t,n),(t=t.alternate)&&n_(t,n)}function i_(t){if(t.tag===13){var n=va(t,67108864);n!==null&&Nn(n,t,67108864),id(t,67108864)}}var sc=!0;function jS(t,n,a,o){var h=G.T;G.T=null;var d=ce.p;try{ce.p=2,rd(t,n,a,o)}finally{ce.p=d,G.T=h}}function zS(t,n,a,o){var h=G.T;G.T=null;var d=ce.p;try{ce.p=8,rd(t,n,a,o)}finally{ce.p=d,G.T=h}}function rd(t,n,a,o){if(sc){var h=sd(o);if(h===null)Gf(t,n,o,ac,a),s_(t,o);else if(qS(h,t,n,a,o))o.stopPropagation();else if(s_(t,o),n&4&&-1<BS.indexOf(t)){for(;h!==null;){var d=ui(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=En(d.pendingLanes);if(v!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var I=1<<31-jt(v);T.entanglements[1]|=I,v&=~I}vi(d),(Je&6)===0&&(Hu=tn()+500,sl(0))}}break;case 13:T=va(d,2),T!==null&&Nn(T,d,2),Gu(),id(d,2)}if(d=sd(o),d===null&&Gf(t,n,o,ac,a),d===h)break;h=d}h!==null&&o.stopPropagation()}else Gf(t,n,o,null,a)}}function sd(t){return t=bo(t),ad(t)}var ac=null;function ad(t){if(ac=null,t=li(t),t!==null){var n=c(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return ac=t,null}function r_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(na()){case Tt:return 2;case Ct:return 8;case re:case ye:return 32;case je:return 268435456;default:return 32}default:return 32}}var od=!1,Pr=null,kr=null,Ur=null,dl=new Map,ml=new Map,Lr=[],BS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(t,n){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":dl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(n.pointerId)}}function pl(t,n,a,o,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:d,targetContainers:[h]},n!==null&&(n=ui(n),n!==null&&i_(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function qS(t,n,a,o,h){switch(n){case"focusin":return Pr=pl(Pr,t,n,a,o,h),!0;case"dragenter":return kr=pl(kr,t,n,a,o,h),!0;case"mouseover":return Ur=pl(Ur,t,n,a,o,h),!0;case"pointerover":var d=h.pointerId;return dl.set(d,pl(dl.get(d)||null,t,n,a,o,h)),!0;case"gotpointercapture":return d=h.pointerId,ml.set(d,pl(ml.get(d)||null,t,n,a,o,h)),!0}return!1}function a_(t){var n=li(t.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,dh(t.priority,function(){if(a.tag===13){var o=Cn();o=po(o);var h=va(a,o);h!==null&&Nn(h,a,o),id(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=sd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);So=o,a.target.dispatchEvent(o),So=null}else return n=ui(a),n!==null&&i_(n),t.blockedOn=a,!1;n.shift()}return!0}function o_(t,n,a){oc(t)&&a.delete(n)}function HS(){od=!1,Pr!==null&&oc(Pr)&&(Pr=null),kr!==null&&oc(kr)&&(kr=null),Ur!==null&&oc(Ur)&&(Ur=null),dl.forEach(o_),ml.forEach(o_)}function lc(t,n){t.blockedOn===n&&(t.blockedOn=null,od||(od=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,HS)))}var uc=null;function l_(t){uc!==t&&(uc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){uc===t&&(uc=null);for(var n=0;n<t.length;n+=3){var a=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(ad(o||a)===null)continue;break}var d=ui(a);d!==null&&(t.splice(n,3),n-=3,af(d,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function gl(t){function n(I){return lc(I,t)}Pr!==null&&lc(Pr,t),kr!==null&&lc(kr,t),Ur!==null&&lc(Ur,t),dl.forEach(n),ml.forEach(n);for(var a=0;a<Lr.length;a++){var o=Lr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Lr.length&&(a=Lr[0],a.blockedOn===null);)a_(a),a.blockedOn===null&&Lr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],d=a[o+1],v=h[Kt]||null;if(typeof d=="function")v||l_(a);else if(v){var T=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Kt]||null)T=v.formAction;else if(ad(h)!==null)continue}else T=v.action;typeof T=="function"?a[o+1]=T:(a.splice(o,3),o-=3),l_(a)}}}function ld(t){this._internalRoot=t}cc.prototype.render=ld.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=Cn();t_(a,o,t,n,null,null)},cc.prototype.unmount=ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t_(t.current,2,null,t,null,null),Gu(),n[xi]=null}};function cc(t){this._internalRoot=t}cc.prototype.unstable_scheduleHydration=function(t){if(t){var n=Di();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Lr.length&&n!==0&&n<Lr[a].priority;a++);Lr.splice(a,0,t),a===0&&a_(t)}};var u_=e.version;if(u_!=="19.1.1")throw Error(r(527,u_,"19.1.1"));ce.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(n),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var FS={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hc.isDisabled&&hc.supportsFiber)try{Tn=hc.inject(FS),Mt=hc}catch{}}return _l.createRoot=function(t,n){if(!l(t))throw Error(r(299));var a=!1,o="",h=Rg,d=wg,v=Ig,T=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(d=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=Wy(t,1,!1,null,null,a,o,h,d,v,T,null),t[xi]=n.current,Ff(t),new ld(n)},_l.hydrateRoot=function(t,n,a){if(!l(t))throw Error(r(299));var o=!1,h="",d=Rg,v=wg,T=Ig,I=null,B=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(B=a.formState)),n=Wy(t,1,!0,n,a??null,o,h,d,v,T,I,B),n.context=e_(null),a=n.current,o=Cn(),o=po(o),h=Er(o),h.callback=null,Sr(a,h,o),a=o,n.current.lanes=a,ut(n,a),vi(n),t[xi]=n.current,Ff(t),new cc(n)},_l.version="19.1.1",_l}var v_;function eb(){if(v_)return hd.exports;v_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hd.exports=WS(),hd.exports}var tb=eb();const Zt=[];for(let s=0;s<256;++s)Zt.push((s+256).toString(16).slice(1));function nb(s,e=0){return(Zt[s[e+0]]+Zt[s[e+1]]+Zt[s[e+2]]+Zt[s[e+3]]+"-"+Zt[s[e+4]]+Zt[s[e+5]]+"-"+Zt[s[e+6]]+Zt[s[e+7]]+"-"+Zt[s[e+8]]+Zt[s[e+9]]+"-"+Zt[s[e+10]]+Zt[s[e+11]]+Zt[s[e+12]]+Zt[s[e+13]]+Zt[s[e+14]]+Zt[s[e+15]]).toLowerCase()}let pd;const ib=new Uint8Array(16);function rb(){if(!pd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pd=crypto.getRandomValues.bind(crypto)}return pd(ib)}const sb=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T_={randomUUID:sb};function ab(s,e,i){s=s||{};const r=s.random??s.rng?.()??rb();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nb(r)}function bl(s,e,i){return T_.randomUUID&&!s?T_.randomUUID():ab(s)}var gd={exports:{}},yd,E_;function ob(){if(E_)return yd;E_=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yd=s,yd}var _d,S_;function lb(){if(S_)return _d;S_=1;var s=ob();function e(){}function i(){}return i.resetWarningCache=e,_d=function(){function r(f,p,y,g,S,R){if(R!==s){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}r.isRequired=r;function l(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:l,element:r,elementType:r,instanceOf:l,node:r,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:i,resetWarningCache:e};return c.PropTypes=c,c},_d}var b_;function ub(){return b_||(b_=1,gd.exports=lb()()),gd.exports}var cb=ub();const ie=Kv(cb),hb=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},fb=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],f=s[i++],p=s[i++],y=((l&7)<<18|(c&63)<<12|(f&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[i++],f=s[i++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],f=l+1<s.length,p=f?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,S=c>>2,R=(c&3)<<4|p>>4;let M=(p&15)<<2|g>>6,z=g&63;y||(z=64,f||(M=64)),r.push(i[S],i[R],i[M],i[z])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Yv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fb(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const g=l<s.length?i[s.charAt(l)]:64;++l;const R=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||p==null||g==null||R==null)throw new db;const M=c<<2|p>>4;if(r.push(M),g!==64){const z=p<<4&240|g>>2;if(r.push(z),R!==64){const J=g<<6&192|R;r.push(J)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class db extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mb=function(s){const e=Yv(s);return Xv.encodeByteArray(e,!0)},xc=function(s){return mb(s).replace(/\./g,"")},$v=function(s){try{return Xv.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=()=>pb().__FIREBASE_DEFAULTS__,yb=()=>{if(typeof process>"u"||typeof A_>"u")return;const s=A_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_b=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&$v(s[1]);return e&&JSON.parse(e)},Zc=()=>{try{return hb()||gb()||yb()||_b()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Zv=s=>Zc()?.emulatorHosts?.[s],vb=s=>{const e=Zv(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},Jv=()=>Zc()?.config,Wv=s=>Zc()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[xc(JSON.stringify(i)),xc(JSON.stringify(f)),""].join(".")}const Al={};function Sb(){const s={prod:[],emulator:[]};for(const e of Object.keys(Al))Al[e]?s.emulator.push(e):s.prod.push(e);return s}function bb(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let R_=!1;function t0(s,e){if(typeof window>"u"||typeof document>"u"||!ao(window.location.host)||Al[s]===e||Al[s]||R_)return;Al[s]=e;function i(M){return`__firebase__banner__${M}`}const r="__firebase__banner",c=Sb().prod.length>0;function f(){const M=document.getElementById(r);M&&M.remove()}function p(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function y(M,z){M.setAttribute("width","24"),M.setAttribute("id",z),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function g(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{R_=!0,f()},M}function S(M,z){M.setAttribute("id",z),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function R(){const M=bb(r),z=i("text"),J=document.getElementById(z)||document.createElement("span"),W=i("learnmore"),X=document.getElementById(W)||document.createElement("a"),Q=i("preprendIcon"),le=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const ue=M.element;p(ue),S(X,W);const we=g();y(le,Q),ue.append(le,J,X,we),document.body.appendChild(ue)}c?(J.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,J.innerText="Preview backend running in this workspace."),J.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ab(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function Rb(){const s=Zc()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ib(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Cb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nb(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Db(){return!Rb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xb(){try{return typeof indexedDB=="object"}catch{return!1}}function Ob(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="FirebaseError";class rr extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=Mb,Object.setPrototypeOf(this,rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},l=`${this.service}/${e}`,c=this.errors[e],f=c?Vb(c,r):"Error",p=`${this.serviceName}: ${f} (${l}).`;return new rr(l,p,r)}}function Vb(s,e){return s.replace(Pb,(i,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const Pb=/\{\$([^}]+)}/g;function kb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ks(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const l of i){if(!r.includes(l))return!1;const c=s[l],f=e[l];if(w_(c)&&w_(f)){if(!Ks(c,f))return!1}else if(c!==f)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function w_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ub(s,e){const i=new Lb(s,e);return i.subscribe.bind(i)}class Lb{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let l;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");jb(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:r},l.next===void 0&&(l.next=vd),l.error===void 0&&(l.error=vd),l.complete===void 0&&(l.complete=vd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jb(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(s){return s&&s._delegate?s._delegate:s}class Ys{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new Tb;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(qb(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[c,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&f.resolve(l)}return l}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Bb(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bb(s){return s===qs?void 0:s}function qb(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new zb(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(ze||(ze={}));const Fb={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},Gb=ze.INFO,Qb={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},Kb=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=Qb[e];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=Gb,this._logHandler=Kb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const Yb=(s,e)=>e.some(i=>s instanceof i);let I_,C_;function Xb(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $b(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,Od=new WeakMap,i0=new WeakMap,Td=new WeakMap,om=new WeakMap;function Zb(s){const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",f)},c=()=>{i(Gr(s.result)),l()},f=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&n0.set(i,s)}).catch(()=>{}),om.set(e,s),e}function Jb(s){if(Od.has(s))return;const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",f),s.removeEventListener("abort",f)},c=()=>{i(),l()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",f),s.addEventListener("abort",f)});Od.set(s,e)}let Md={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return Od.get(s);if(e==="objectStoreNames")return s.objectStoreNames||i0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Gr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Wb(s){Md=s(Md)}function eA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(Ed(this),e,...i);return i0.set(r,e.sort?e.sort():[e]),Gr(r)}:$b().includes(s)?function(...e){return s.apply(Ed(this),e),Gr(n0.get(this))}:function(...e){return Gr(s.apply(Ed(this),e))}}function tA(s){return typeof s=="function"?eA(s):(s instanceof IDBTransaction&&Jb(s),Yb(s,Xb())?new Proxy(s,Md):s)}function Gr(s){if(s instanceof IDBRequest)return Zb(s);if(Td.has(s))return Td.get(s);const e=tA(s);return e!==s&&(Td.set(s,e),om.set(e,s)),e}const Ed=s=>om.get(s);function nA(s,e,{blocked:i,upgrade:r,blocking:l,terminated:c}={}){const f=indexedDB.open(s,e),p=Gr(f);return r&&f.addEventListener("upgradeneeded",y=>{r(Gr(f.result),y.oldVersion,y.newVersion,Gr(f.transaction),y)}),i&&f.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const iA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],Sd=new Map;function N_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Sd.get(e))return Sd.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,l=rA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||iA.includes(i)))return;const c=async function(f,...p){const y=this.transaction(f,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),l&&y.done]))[0]};return Sd.set(e,c),c}Wb(s=>({...s,get:(e,i,r)=>N_(e,i)||s.get(e,i,r),has:(e,i)=>!!N_(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(aA(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function aA(s){return s.getComponent()?.type==="VERSION"}const Vd="@firebase/app",D_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new am("@firebase/app"),oA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",cA="@firebase/app-check-compat",hA="@firebase/app-check",fA="@firebase/auth",dA="@firebase/auth-compat",mA="@firebase/database",pA="@firebase/data-connect",gA="@firebase/database-compat",yA="@firebase/functions",_A="@firebase/functions-compat",vA="@firebase/installations",TA="@firebase/installations-compat",EA="@firebase/messaging",SA="@firebase/messaging-compat",bA="@firebase/performance",AA="@firebase/performance-compat",RA="@firebase/remote-config",wA="@firebase/remote-config-compat",IA="@firebase/storage",CA="@firebase/storage-compat",NA="@firebase/firestore",DA="@firebase/ai",xA="@firebase/firestore-compat",OA="firebase",MA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",VA={[Vd]:"fire-core",[oA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[cA]:"fire-app-check-compat",[fA]:"fire-auth",[dA]:"fire-auth-compat",[mA]:"fire-rtdb",[pA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[_A]:"fire-fn-compat",[vA]:"fire-iid",[TA]:"fire-iid-compat",[EA]:"fire-fcm",[SA]:"fire-fcm-compat",[bA]:"fire-perf",[AA]:"fire-perf-compat",[RA]:"fire-rc",[wA]:"fire-rc-compat",[IA]:"fire-gcs",[CA]:"fire-gcs-compat",[NA]:"fire-fst",[xA]:"fire-fst-compat",[DA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,PA=new Map,kd=new Map;function x_(s,e){try{s.container.addComponent(e)}catch(i){er.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Ja(s){const e=s.name;if(kd.has(e))return er.debug(`There were multiple attempts to register component ${e}.`),!1;kd.set(e,s);for(const i of Oc.values())x_(i,s);for(const i of PA.values())x_(i,s);return!0}function lm(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function Wn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new Bl("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ys("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=MA;function r0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:Pd,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Qr.create("bad-app-name",{appName:String(l)});if(i||(i=Jv()),!i)throw Qr.create("no-options");const c=Oc.get(l);if(c){if(Ks(i,c.options)&&Ks(r,c.config))return c;throw Qr.create("duplicate-app",{appName:l})}const f=new Hb(l);for(const y of kd.values())f.addComponent(y);const p=new UA(i,r,f);return Oc.set(l,p),p}function s0(s=Pd){const e=Oc.get(s);if(!e&&s===Pd&&Jv())return r0();if(!e)throw Qr.create("no-app",{appName:s});return e}function Kr(s,e,i){let r=VA[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${r}" with version "${e}":`];l&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),er.warn(f.join(" "));return}Ja(new Ys(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="firebase-heartbeat-database",jA=1,xl="firebase-heartbeat-store";let bd=null;function a0(){return bd||(bd=nA(LA,jA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(xl)}catch(i){console.warn(i)}}}}).catch(s=>{throw Qr.create("idb-open",{originalErrorMessage:s.message})})),bd}async function zA(s){try{const i=(await a0()).transaction(xl),r=await i.objectStore(xl).get(o0(s));return await i.done,r}catch(e){if(e instanceof rr)er.warn(e.message);else{const i=Qr.create("idb-get",{originalErrorMessage:e?.message});er.warn(i.message)}}}async function O_(s,e){try{const r=(await a0()).transaction(xl,"readwrite");await r.objectStore(xl).put(e,o0(s)),await r.done}catch(i){if(i instanceof rr)er.warn(i.message);else{const r=Qr.create("idb-set",{originalErrorMessage:i?.message});er.warn(r.message)}}}function o0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=1024,qA=30;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new GA(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>qA){const l=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=M_(),{heartbeatsToSend:i,unsentEntries:r}=FA(this._heartbeatsCache.heartbeats),l=xc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return er.warn(e),""}}}function M_(){return new Date().toISOString().substring(0,10)}function FA(s,e=BA){const i=[];let r=s.slice();for(const l of s){const c=i.find(f=>f.agent===l.agent);if(c){if(c.dates.push(l.date),V_(i)>e){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),V_(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xb()?Ob().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await zA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V_(s){return xc(JSON.stringify({version:2,heartbeats:s})).length}function QA(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s){Ja(new Ys("platform-logger",e=>new sA(e),"PRIVATE")),Ja(new Ys("heartbeat",e=>new HA(e),"PRIVATE")),Kr(Vd,D_,s),Kr(Vd,D_,"esm2020"),Kr("fire-js","")}KA("");var YA="firebase",XA="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr(YA,XA,"app");function l0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $A=l0,u0=new Bl("auth","Firebase",l0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new am("@firebase/auth");function ZA(s,...e){Mc.logLevel<=ze.WARN&&Mc.warn(`Auth (${oo}): ${s}`,...e)}function Ec(s,...e){Mc.logLevel<=ze.ERROR&&Mc.error(`Auth (${oo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(s,...e){throw cm(s,...e)}function ni(s,...e){return cm(s,...e)}function um(s,e,i){const r={...$A(),[e]:i};return new Bl("auth","Firebase",r).create(e,{appName:s.name})}function Gs(s){return um(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function JA(s,e,i){const r=i;if(!(e instanceof r))throw r.name!==e.constructor.name&&wi(s,"argument-error"),um(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cm(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return u0.create(s,...e)}function Ie(s,e,...i){if(!s)throw cm(e,...i)}function Zi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ec(e),new Error(e)}function tr(s,e){s||Zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){return typeof self<"u"&&self.location?.href||""}function WA(){return P_()==="http:"||P_()==="https:"}function P_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WA()||Ib()||"connection"in navigator)?navigator.onLine:!0}function t1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,i){this.shortDelay=e,this.longDelay=i,tr(i>e,"Short delay should be less than long delay!"),this.isMobile=Ab()||Cb()}get(){return e1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(s,e){tr(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r1=new Hl(3e4,6e4);function fm(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function lo(s,e,i,r,l={}){return h0(s,l,async()=>{let c={},f={};r&&(e==="GET"?f=r:c={body:JSON.stringify(r)});const p=ql({key:s.config.apiKey,...f}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...c};return wb()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&ao(s.emulatorConfig.host)&&(g.credentials="include"),c0.fetch()(await f0(s,s.config.apiHost,i,p),g)})}async function h0(s,e,i){s._canInitEmulator=!1;const r={...n1,...e};try{const l=new a1(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const f=await c.json();if("needConfirmation"in f)throw dc(s,"account-exists-with-different-credential",f);if(c.ok&&!("errorMessage"in f))return f;{const p=c.ok?f.errorMessage:f.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(s,"credential-already-in-use",f);if(y==="EMAIL_EXISTS")throw dc(s,"email-already-in-use",f);if(y==="USER_DISABLED")throw dc(s,"user-disabled",f);const S=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw um(s,S,g);wi(s,S)}}catch(l){if(l instanceof rr)throw l;wi(s,"network-request-failed",{message:String(l)})}}async function s1(s,e,i,r,l={}){const c=await lo(s,e,i,r,l);return"mfaPendingCredential"in c&&wi(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function f0(s,e,i,r){const l=`${e}${i}?${r}`,c=s,f=c.config.emulator?hm(s.config,l):`${s.config.apiScheme}://${l}`;return i1.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(f).toString():f}class a1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(ni(this.auth,"network-request-failed")),r1.get())})}}function dc(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=ni(s,e,r);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(s,e){return lo(s,"POST","/v1/accounts:delete",e)}async function Vc(s,e){return lo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l1(s,e=!1){const i=Hn(s),r=await i.getIdToken(e),l=dm(r);Ie(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,f=c?.sign_in_provider;return{claims:l,token:r,authTime:Rl(Ad(l.auth_time)),issuedAtTime:Rl(Ad(l.iat)),expirationTime:Rl(Ad(l.exp)),signInProvider:f||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Ad(s){return Number(s)*1e3}function dm(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const l=$v(i);return l?JSON.parse(l):(Ec("Failed to decode base64 JWT payload"),null)}catch(l){return Ec("Caught error parsing JWT payload as JSON",l?.toString()),null}}function k_(s){const e=dm(s);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ol(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof rr&&u1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function u1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rl(this.lastLoginAt),this.creationTime=Rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pc(s){const e=s.auth,i=await s.getIdToken(),r=await Ol(s,Vc(e,{idToken:i}));Ie(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?d0(l.providerUserInfo):[],f=f1(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!f?.length,g=p?y:!1,S={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Ld(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,S)}async function h1(s){const e=Hn(s);await Pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f1(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function d0(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(s,e){const i=await h0(s,{},async()=>{const r=ql({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,f=await f0(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&ao(s.emulatorConfig.host)&&(y.credentials="include"),c0.fetch()(f,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function m1(s,e){return lo(s,"POST","/v2/accounts:revokeToken",fm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const i=k_(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:l,expiresIn:c}=await d1(e,i);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:l,expirationTime:c}=i,f=new Ya;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),l&&(Ie(typeof l=="string","internal-error",{appName:e}),f.accessToken=l),c&&(Ie(typeof c=="number","internal-error",{appName:e}),f.expirationTime=c),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ya,this.toJSON())}_performRefresh(){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(s,e){Ie(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new c1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ld(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await Ol(this,this.stsTokenManager.getToken(this.auth,e));return Ie(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return l1(this,e)}reload(){return h1(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await Pc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wn(this.auth.app))return Promise.reject(Gs(this.auth));const e=await this.getIdToken();return await Ol(this,o1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,f=i.photoURL??void 0,p=i.tenantId??void 0,y=i._redirectEventId??void 0,g=i.createdAt??void 0,S=i.lastLoginAt??void 0,{uid:R,emailVerified:M,isAnonymous:z,providerData:J,stsTokenManager:W}=i;Ie(R&&W,e,"internal-error");const X=Ya.fromJSON(this.name,W);Ie(typeof R=="string",e,"internal-error"),zr(r,e.name),zr(l,e.name),Ie(typeof M=="boolean",e,"internal-error"),Ie(typeof z=="boolean",e,"internal-error"),zr(c,e.name),zr(f,e.name),zr(p,e.name),zr(y,e.name),zr(g,e.name),zr(S,e.name);const Q=new ei({uid:R,auth:e,email:l,emailVerified:M,displayName:r,isAnonymous:z,photoURL:f,phoneNumber:c,tenantId:p,stsTokenManager:X,createdAt:g,lastLoginAt:S});return J&&Array.isArray(J)&&(Q.providerData=J.map(le=>({...le}))),y&&(Q._redirectEventId=y),Q}static async _fromIdTokenResponse(e,i,r=!1){const l=new Ya;l.updateFromServerResponse(i);const c=new ei({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await Pc(c),c}static async _fromGetAccountInfoResponse(e,i,r){const l=i.users[0];Ie(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?d0(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!c?.length,p=new Ya;p.updateFromIdToken(r);const y=new ei({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:f}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new Ld(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Ji(s){tr(s instanceof Function,"Expected a class definition");let e=U_.get(s);return e?(tr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,U_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}m0.type="NONE";const L_=m0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s,e,i){return`firebase:${s}:${e}:${i}`}class Xa{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Sc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Sc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await Vc(this.auth,{idToken:e}).catch(()=>{});return i?ei._fromGetAccountInfoResponse(this.auth,i,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new Xa(Ji(L_),e,r);const l=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||Ji(L_);const f=Sc(r,e.config.apiKey,e.name);let p=null;for(const g of i)try{const S=await g._get(f);if(S){let R;if(typeof S=="string"){const M=await Vc(e,{idToken:S}).catch(()=>{});if(!M)break;R=await ei._fromGetAccountInfoResponse(e,M,S)}else R=ei._fromJSON(e,S);g!==c&&(p=R),c=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Xa(c,e,r):(c=y[0],p&&await c._set(f,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==c)try{await g._remove(f)}catch{}})),new Xa(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T0(e))return"Blackberry";if(E0(e))return"Webos";if(g0(e))return"Safari";if((e.includes("chrome/")||y0(e))&&!e.includes("edge/"))return"Chrome";if(v0(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function p0(s=un()){return/firefox\//i.test(s)}function g0(s=un()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y0(s=un()){return/crios\//i.test(s)}function _0(s=un()){return/iemobile/i.test(s)}function v0(s=un()){return/android/i.test(s)}function T0(s=un()){return/blackberry/i.test(s)}function E0(s=un()){return/webos/i.test(s)}function mm(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function p1(s=un()){return mm(s)&&!!window.navigator?.standalone}function g1(){return Nb()&&document.documentMode===10}function S0(s=un()){return mm(s)||v0(s)||E0(s)||T0(s)||/windows phone/i.test(s)||_0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(s,e=[]){let i;switch(s){case"Browser":i=j_(un());break;case"Worker":i=`${j_(un())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${oo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=c=>new Promise((f,p)=>{try{const y=e(c);f(y)}catch(y){p(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(s,e={}){return lo(s,"GET","/v2/passwordPolicy",fm(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=6;class T1{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??v1,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,i,r,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z_(this),this.idTokenSubscription=new z_(this),this.beforeStateQueue=new y1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=Ji(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Xa.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await Vc(this,{idToken:e}),r=await ei._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,f=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await Pc(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wn(this.app))return Promise.reject(Gs(this));const i=e?Hn(e):null;return i&&Ie(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wn(this.app)?Promise.reject(Gs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wn(this.app)?Promise.reject(Gs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _1(this),i=new T1(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bl("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await m1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&Ji(e)||this._popupRedirectResolver;Ie(i,this,"argument-error"),this.redirectPersistenceManager=await Xa.create(this,[Ji(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(p,this,"internal-error"),p.then(()=>{f||c(this.currentUser)}),typeof i=="function"){const y=e.addObserver(i,r,l);return()=>{f=!0,y()}}else{const y=e.addObserver(i);return()=>{f=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=b0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jc(s){return Hn(s)}class z_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ub(i=>this.observer=i)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function S1(s){pm=s}function b1(s){return pm.loadJS(s)}function A1(){return pm.gapiScript}function R1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(s,e){const i=lm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ks(c,e??{}))return l;wi(l,"already-initialized")}return i.initialize({options:e})}function I1(s,e){const i=e?.persistence||[],r=(Array.isArray(i)?i:[i]).map(Ji);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function C1(s,e,i){const r=Jc(s);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=A0(e),{host:f,port:p}=N1(e),y=p===null?"":`:${p}`,g={url:`${c}//${f}${y}/`},S=Object.freeze({host:f,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Ks(g,r.config.emulator)&&Ks(S,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=S,r.settings.appVerificationDisabledForTesting=!0,ao(f)?(e0(`${c}//${f}${y}`),t0("Auth",!0)):D1()}function A0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function N1(s){const e=A0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:B_(r.substr(c.length+1))}}else{const[c,f]=r.split(":");return{host:c,port:B_(f)}}}function B_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function D1(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return Zi("not implemented")}_getIdTokenResponse(e){return Zi("not implemented")}_linkToIdToken(e,i){return Zi("not implemented")}_getReauthenticationResolver(e){return Zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(s,e){return s1(s,"POST","/v1/accounts:signInWithIdp",fm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1="http://localhost";class Xs extends R0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):wi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=i;if(!r||!l)return null;const f=new Xs(r,l);return f.idToken=c.idToken||void 0,f.accessToken=c.accessToken||void 0,f.secret=c.secret,f.nonce=c.nonce,f.pendingToken=c.pendingToken||null,f}_getIdTokenResponse(e){const i=this.buildRequest();return $a(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,$a(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,$a(e,i)}buildRequest(){const e={requestUri:x1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=ql(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends gm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br extends Fl{constructor(){super("facebook.com")}static credential(e){return Xs._fromParams({providerId:Br.PROVIDER_ID,signInMethod:Br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Br.credentialFromTaggedObject(e)}static credentialFromError(e){return Br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Br.credential(e.oauthAccessToken)}catch{return null}}}Br.FACEBOOK_SIGN_IN_METHOD="facebook.com";Br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Fl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Xs._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return $i.credential(i,r)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends Fl{constructor(){super("github.com")}static credential(e){return Xs._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qr.credential(e.oauthAccessToken)}catch{return null}}}qr.GITHUB_SIGN_IN_METHOD="github.com";qr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Fl{constructor(){super("twitter.com")}static credential(e,i){return Xs._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return Hr.credential(i,r)}catch{return null}}}Hr.TWITTER_SIGN_IN_METHOD="twitter.com";Hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,l=!1){const c=await ei._fromIdTokenResponse(e,r,l),f=q_(r);return new Wa({user:c,providerId:f,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const l=q_(r);return new Wa({user:e,providerId:l,_tokenResponse:r,operationType:i})}}function q_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc extends rr{constructor(e,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,kc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,l){return new kc(e,i,r,l)}}function w0(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?kc._fromErrorAndOperation(s,c,e,r):c})}async function O1(s,e,i=!1){const r=await Ol(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return Wa._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(s,e,i=!1){const{auth:r}=s;if(Wn(r.app))return Promise.reject(Gs(r));const l="reauthenticate";try{const c=await Ol(s,w0(r,l,e,s),i);Ie(c.idToken,r,"internal-error");const f=dm(c.idToken);Ie(f,r,"internal-error");const{sub:p}=f;return Ie(s.uid===p,r,"user-mismatch"),Wa._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&wi(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(s,e,i=!1){if(Wn(s.app))return Promise.reject(Gs(s));const r="signIn",l=await w0(s,r,e),c=await Wa._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(c.user),c}function P1(s,e,i,r){return Hn(s).onIdTokenChanged(e,i,r)}function k1(s,e,i){return Hn(s).beforeAuthStateChanged(e,i)}function U1(s,e,i,r){return Hn(s).onAuthStateChanged(e,i,r)}function L1(s){return Hn(s).signOut()}const Uc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(Uc,"1"),this.storage.removeItem(Uc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=1e3,z1=10;class C0 extends I0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&e(i,l,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((f,p,y)=>{this.notifyListeners(f,y)});return}const r=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(r);!i&&this.localCache[r]===f||this.notifyListeners(r,f)},c=this.storage.getItem(r);g1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,z1):l()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},j1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}C0.type="LOCAL";const B1=C0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends I0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}N0.type="SESSION";const D0=N0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:l,data:c}=i.data,f=this.handlersMap[l];if(!f?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(f).map(async g=>g(i.origin,c)),y=await q1(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,f;return new Promise((p,y)=>{const g=ym("",20);l.port1.start();const S=setTimeout(()=>{y(new Error("unsupported_event"))},r);f={messageChannel:l,onMessage(R){const M=R;if(M.data.eventId===g)switch(M.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(M.data.response);break;default:clearTimeout(S),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(){return window}function F1(s){Ei().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return typeof Ei().WorkerGlobalScope<"u"&&typeof Ei().importScripts=="function"}async function G1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q1(){return navigator?.serviceWorker?.controller||null}function K1(){return x0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="firebaseLocalStorageDb",Y1=1,Lc="firebaseLocalStorage",M0="fbase_key";class Gl{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function eh(s,e){return s.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function X1(){const s=indexedDB.deleteDatabase(O0);return new Gl(s).toPromise()}function jd(){const s=indexedDB.open(O0,Y1);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Lc,{keyPath:M0})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),await X1(),e(await jd()))})})}async function H_(s,e,i){const r=eh(s,!0).put({[M0]:e,value:i});return new Gl(r).toPromise()}async function $1(s,e){const i=eh(s,!1).get(e),r=await new Gl(i).toPromise();return r===void 0?null:r.value}function F_(s,e){const i=eh(s,!0).delete(e);return new Gl(i).toPromise()}const Z1=800,J1=3;class V0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jd(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>J1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return x0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(K1()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await G1(),!this.activeServiceWorker)return;this.sender=new H1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jd();return await H_(e,Uc,"1"),await F_(e,Uc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>H_(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>$1(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>F_(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=eh(l,!1).getAll();return new Gl(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V0.type="LOCAL";const W1=V0;new Hl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s,e){return e?Ji(e):(Ie(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends R0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $a(e,this._buildIdpRequest())}_linkToIdToken(e,i){return $a(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return $a(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function eR(s){return V1(s.auth,new _m(s),s.bypassAuthState)}function tR(s){const{auth:e,user:i}=s;return Ie(i,e,"internal-error"),M1(i,new _m(s),s.bypassAuthState)}async function nR(s){const{auth:e,user:i}=s;return Ie(i,e,"internal-error"),O1(i,new _m(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,i,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:l,tenantId:c,error:f,type:p}=e;if(f){this.reject(f);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return nR;case"reauthViaPopup":case"reauthViaRedirect":return tR;default:wi(this.auth,"internal-error")}}resolve(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new Hl(2e3,1e4);async function rR(s,e,i){if(Wn(s.app))return Promise.reject(ni(s,"operation-not-supported-in-this-environment"));const r=Jc(s);JA(s,e,gm);const l=P0(r,i);return new Hs(r,"signInViaPopup",e,l).executeNotNull()}class Hs extends k0{constructor(e,i,r,l,c){super(e,i,l,c),this.provider=r,this.authWindow=null,this.pollId=null,Hs.currentPopupAction&&Hs.currentPopupAction.cancel(),Hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){tr(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iR.get())};e()}}Hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",bc=new Map;class aR extends k0{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=bc.get(this.auth._key());if(!e){try{const r=await oR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}bc.set(this.auth._key(),e)}return this.bypassAuthState||bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oR(s,e){const i=cR(e),r=uR(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function lR(s,e){bc.set(s._key(),e)}function uR(s){return Ji(s._redirectPersistence)}function cR(s){return Sc(sR,s.config.apiKey,s.name)}async function hR(s,e,i=!1){if(Wn(s.app))return Promise.reject(Gs(s));const r=Jc(s),l=P0(r,e),f=await new aR(r,l,i).execute();return f&&!i&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=600*1e3;class dR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mR(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!U0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";i.onError(ni(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fR&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function U0({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function mR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(s,e={}){return lo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function _R(s){if(s.config.emulator)return;const{authorizedDomains:e}=await pR(s);for(const i of e)try{if(vR(i))return}catch{}wi(s,"unauthorized-domain")}function vR(s){const e=Ud(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&f.hostname===r}if(!yR.test(i))return!1;if(gR.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Hl(3e4,6e4);function Q_(){const s=Ei().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function ER(s){return new Promise((e,i)=>{function r(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),i(ni(s,"network-request-failed"))},timeout:TR.get()})}if(Ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ei().gapi?.load)r();else{const l=R1("iframefcb");return Ei()[l]=()=>{gapi.load?r():i(ni(s,"network-request-failed"))},b1(`${A1()}?onload=${l}`).catch(c=>i(c))}}).catch(e=>{throw Ac=null,e})}let Ac=null;function SR(s){return Ac=Ac||ER(s),Ac}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new Hl(5e3,15e3),AR="__/auth/iframe",RR="emulator/auth/iframe",wR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(s){const e=s.config;Ie(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?hm(e,RR):`https://${s.config.authDomain}/${AR}`,r={apiKey:e.apiKey,appName:s.name,v:oo},l=IR.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${i}?${ql(r).slice(1)}`}async function NR(s){const e=await SR(s),i=Ei().gapi;return Ie(i,s,"internal-error"),e.open({where:document.body,url:CR(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wR,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const f=ni(s,"network-request-failed"),p=Ei().setTimeout(()=>{c(f)},bR.get());function y(){Ei().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,OR=600,MR="_blank",VR="http://localhost";class K_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(s,e,i,r=xR,l=OR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...DR,width:r.toString(),height:l.toString(),top:c,left:f},g=un().toLowerCase();i&&(p=y0(g)?MR:i),p0(g)&&(e=e||VR,y.scrollbars="yes");const S=Object.entries(y).reduce((M,[z,J])=>`${M}${z}=${J},`,"");if(p1(g)&&p!=="_self")return kR(e||"",p),new K_(null);const R=window.open(e||"",p,S);Ie(R,s,"popup-blocked");try{R.focus()}catch{}return new K_(R)}function kR(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="__/auth/handler",LR="emulator/auth/handler",jR=encodeURIComponent("fac");async function Y_(s,e,i,r,l,c){Ie(s.config.authDomain,s,"auth-domain-config-required"),Ie(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:oo,eventId:l};if(e instanceof gm){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",kb(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,R]of Object.entries({}))f[S]=R}if(e instanceof Fl){const S=e.getScopes().filter(R=>R!=="");S.length>0&&(f.scopes=S.join(","))}s.tenantId&&(f.tid=s.tenantId);const p=f;for(const S of Object.keys(p))p[S]===void 0&&delete p[S];const y=await s._getAppCheckToken(),g=y?`#${jR}=${encodeURIComponent(y)}`:"";return`${zR(s)}?${ql(p).slice(1)}${g}`}function zR({config:s}){return s.emulator?hm(s,LR):`https://${s.authDomain}/${UR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="webStorageSupport";class BR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=D0,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(e,i,r,l){tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Y_(e,i,r,Ud(),l);return PR(e,c,ym())}async _openRedirect(e,i,r,l){await this._originValidation(e);const c=await Y_(e,i,r,Ud(),l);return F1(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(tr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await NR(e),r=new dR(e);return i.register("authEvent",l=>(Ie(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Rd,{type:Rd},l=>{const c=l?.[0]?.[Rd];c!==void 0&&i(!!c),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=_R(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return S0()||g0()||mm()}}const qR=BR;var X_="@firebase/auth",$_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GR(s){Ja(new Ys("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=r.options;Ie(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:f,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:b0(s)},g=new E1(r,l,c,y);return I1(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),Ja(new Ys("auth-internal",e=>{const i=Jc(e.getProvider("auth").getImmediate());return(r=>new HR(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kr(X_,$_,FR(s)),Kr(X_,$_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=300,KR=Wv("authIdTokenMaxAge")||QR;let Z_=null;const YR=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>KR)return;const l=i?.token;Z_!==l&&(Z_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function XR(s=s0()){const e=lm(s,"auth");if(e.isInitialized())return e.getImmediate();const i=w1(s,{popupRedirectResolver:qR,persistence:[W1,B1,D0]}),r=Wv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const f=YR(c.toString());k1(i,f,()=>f(i.currentUser)),P1(i,p=>f(p))}}const l=Zv("auth");return l&&C1(i,`http://${l}`),i}function $R(){return document.getElementsByTagName("head")?.[0]??document}S1({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=ni("internal-error");c.customData=l,i(c)},r.type="text/javascript",r.charset="UTF-8",$R().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GR("Browser");var J_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Yr,L0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function C(){}C.prototype=A.prototype,N.F=A.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(V,x,P){for(var w=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)w[Ye-2]=arguments[Ye];return A.prototype[x].apply(V,w)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(N,A,C){C||(C=0);const V=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)V[x]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(x=0;x<16;++x)V[x]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=N.g[0],C=N.g[1],x=N.g[2];let P=N.g[3],w;w=A+(P^C&(x^P))+V[0]+3614090360&4294967295,A=C+(w<<7&4294967295|w>>>25),w=P+(x^A&(C^x))+V[1]+3905402710&4294967295,P=A+(w<<12&4294967295|w>>>20),w=x+(C^P&(A^C))+V[2]+606105819&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(A^x&(P^A))+V[3]+3250441966&4294967295,C=x+(w<<22&4294967295|w>>>10),w=A+(P^C&(x^P))+V[4]+4118548399&4294967295,A=C+(w<<7&4294967295|w>>>25),w=P+(x^A&(C^x))+V[5]+1200080426&4294967295,P=A+(w<<12&4294967295|w>>>20),w=x+(C^P&(A^C))+V[6]+2821735955&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(A^x&(P^A))+V[7]+4249261313&4294967295,C=x+(w<<22&4294967295|w>>>10),w=A+(P^C&(x^P))+V[8]+1770035416&4294967295,A=C+(w<<7&4294967295|w>>>25),w=P+(x^A&(C^x))+V[9]+2336552879&4294967295,P=A+(w<<12&4294967295|w>>>20),w=x+(C^P&(A^C))+V[10]+4294925233&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(A^x&(P^A))+V[11]+2304563134&4294967295,C=x+(w<<22&4294967295|w>>>10),w=A+(P^C&(x^P))+V[12]+1804603682&4294967295,A=C+(w<<7&4294967295|w>>>25),w=P+(x^A&(C^x))+V[13]+4254626195&4294967295,P=A+(w<<12&4294967295|w>>>20),w=x+(C^P&(A^C))+V[14]+2792965006&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(A^x&(P^A))+V[15]+1236535329&4294967295,C=x+(w<<22&4294967295|w>>>10),w=A+(x^P&(C^x))+V[1]+4129170786&4294967295,A=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(A^C))+V[6]+3225465664&4294967295,P=A+(w<<9&4294967295|w>>>23),w=x+(A^C&(P^A))+V[11]+643717713&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^A&(x^P))+V[0]+3921069994&4294967295,C=x+(w<<20&4294967295|w>>>12),w=A+(x^P&(C^x))+V[5]+3593408605&4294967295,A=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(A^C))+V[10]+38016083&4294967295,P=A+(w<<9&4294967295|w>>>23),w=x+(A^C&(P^A))+V[15]+3634488961&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^A&(x^P))+V[4]+3889429448&4294967295,C=x+(w<<20&4294967295|w>>>12),w=A+(x^P&(C^x))+V[9]+568446438&4294967295,A=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(A^C))+V[14]+3275163606&4294967295,P=A+(w<<9&4294967295|w>>>23),w=x+(A^C&(P^A))+V[3]+4107603335&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^A&(x^P))+V[8]+1163531501&4294967295,C=x+(w<<20&4294967295|w>>>12),w=A+(x^P&(C^x))+V[13]+2850285829&4294967295,A=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(A^C))+V[2]+4243563512&4294967295,P=A+(w<<9&4294967295|w>>>23),w=x+(A^C&(P^A))+V[7]+1735328473&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^A&(x^P))+V[12]+2368359562&4294967295,C=x+(w<<20&4294967295|w>>>12),w=A+(C^x^P)+V[5]+4294588738&4294967295,A=C+(w<<4&4294967295|w>>>28),w=P+(A^C^x)+V[8]+2272392833&4294967295,P=A+(w<<11&4294967295|w>>>21),w=x+(P^A^C)+V[11]+1839030562&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^A)+V[14]+4259657740&4294967295,C=x+(w<<23&4294967295|w>>>9),w=A+(C^x^P)+V[1]+2763975236&4294967295,A=C+(w<<4&4294967295|w>>>28),w=P+(A^C^x)+V[4]+1272893353&4294967295,P=A+(w<<11&4294967295|w>>>21),w=x+(P^A^C)+V[7]+4139469664&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^A)+V[10]+3200236656&4294967295,C=x+(w<<23&4294967295|w>>>9),w=A+(C^x^P)+V[13]+681279174&4294967295,A=C+(w<<4&4294967295|w>>>28),w=P+(A^C^x)+V[0]+3936430074&4294967295,P=A+(w<<11&4294967295|w>>>21),w=x+(P^A^C)+V[3]+3572445317&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^A)+V[6]+76029189&4294967295,C=x+(w<<23&4294967295|w>>>9),w=A+(C^x^P)+V[9]+3654602809&4294967295,A=C+(w<<4&4294967295|w>>>28),w=P+(A^C^x)+V[12]+3873151461&4294967295,P=A+(w<<11&4294967295|w>>>21),w=x+(P^A^C)+V[15]+530742520&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^A)+V[2]+3299628645&4294967295,C=x+(w<<23&4294967295|w>>>9),w=A+(x^(C|~P))+V[0]+4096336452&4294967295,A=C+(w<<6&4294967295|w>>>26),w=P+(C^(A|~x))+V[7]+1126891415&4294967295,P=A+(w<<10&4294967295|w>>>22),w=x+(A^(P|~C))+V[14]+2878612391&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~A))+V[5]+4237533241&4294967295,C=x+(w<<21&4294967295|w>>>11),w=A+(x^(C|~P))+V[12]+1700485571&4294967295,A=C+(w<<6&4294967295|w>>>26),w=P+(C^(A|~x))+V[3]+2399980690&4294967295,P=A+(w<<10&4294967295|w>>>22),w=x+(A^(P|~C))+V[10]+4293915773&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~A))+V[1]+2240044497&4294967295,C=x+(w<<21&4294967295|w>>>11),w=A+(x^(C|~P))+V[8]+1873313359&4294967295,A=C+(w<<6&4294967295|w>>>26),w=P+(C^(A|~x))+V[15]+4264355552&4294967295,P=A+(w<<10&4294967295|w>>>22),w=x+(A^(P|~C))+V[6]+2734768916&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~A))+V[13]+1309151649&4294967295,C=x+(w<<21&4294967295|w>>>11),w=A+(x^(C|~P))+V[4]+4149444226&4294967295,A=C+(w<<6&4294967295|w>>>26),w=P+(C^(A|~x))+V[11]+3174756917&4294967295,P=A+(w<<10&4294967295|w>>>22),w=x+(A^(P|~C))+V[2]+718787259&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~A))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(x+(w<<21&4294967295|w>>>11))&4294967295,N.g[2]=N.g[2]+x&4294967295,N.g[3]=N.g[3]+P&4294967295}r.prototype.v=function(N,A){A===void 0&&(A=N.length);const C=A-this.blockSize,V=this.C;let x=this.h,P=0;for(;P<A;){if(x==0)for(;P<=C;)l(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<A;)if(V[x++]=N.charCodeAt(P++),x==this.blockSize){l(this,V),x=0;break}}else for(;P<A;)if(V[x++]=N[P++],x==this.blockSize){l(this,V),x=0;break}}this.h=x,this.o+=A},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;A=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=A&255,A/=256;for(this.v(N),N=Array(16),A=0,C=0;C<4;++C)for(let V=0;V<32;V+=8)N[A++]=this.g[C]>>>V&255;return N};function c(N,A){var C=p;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=A(N)}function f(N,A){this.h=A;const C=[];let V=!0;for(let x=N.length-1;x>=0;x--){const P=N[x]|0;V&&P==A||(C[x]=P,V=!1)}this.g=C}var p={};function y(N){return-128<=N&&N<128?c(N,function(A){return new f([A|0],A<0?-1:0)}):new f([N|0],N<0?-1:0)}function g(N){if(isNaN(N)||!isFinite(N))return R;if(N<0)return X(g(-N));const A=[];let C=1;for(let V=0;N>=C;V++)A[V]=N/C|0,C*=4294967296;return new f(A,0)}function S(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return X(S(N.substring(1),A));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(A,8));let V=R;for(let P=0;P<N.length;P+=8){var x=Math.min(8,N.length-P);const w=parseInt(N.substring(P,P+x),A);x<8?(x=g(Math.pow(A,x)),V=V.j(x).add(g(w))):(V=V.j(C),V=V.add(g(w)))}return V}var R=y(0),M=y(1),z=y(16777216);s=f.prototype,s.m=function(){if(W(this))return-X(this).m();let N=0,A=1;for(let C=0;C<this.g.length;C++){const V=this.i(C);N+=(V>=0?V:4294967296+V)*A,A*=4294967296}return N},s.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(J(this))return"0";if(W(this))return"-"+X(this).toString(N);const A=g(Math.pow(N,6));var C=this;let V="";for(;;){const x=we(C,A).g;C=Q(C,x.j(A));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=x,J(C))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},s.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function J(N){if(N.h!=0)return!1;for(let A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function W(N){return N.h==-1}s.l=function(N){return N=Q(this,N),W(N)?-1:J(N)?0:1};function X(N){const A=N.g.length,C=[];for(let V=0;V<A;V++)C[V]=~N.g[V];return new f(C,~N.h).add(M)}s.abs=function(){return W(this)?X(this):this},s.add=function(N){const A=Math.max(this.g.length,N.g.length),C=[];let V=0;for(let x=0;x<=A;x++){let P=V+(this.i(x)&65535)+(N.i(x)&65535),w=(P>>>16)+(this.i(x)>>>16)+(N.i(x)>>>16);V=w>>>16,P&=65535,w&=65535,C[x]=w<<16|P}return new f(C,C[C.length-1]&-2147483648?-1:0)};function Q(N,A){return N.add(X(A))}s.j=function(N){if(J(this)||J(N))return R;if(W(this))return W(N)?X(this).j(X(N)):X(X(this).j(N));if(W(N))return X(this.j(X(N)));if(this.l(z)<0&&N.l(z)<0)return g(this.m()*N.m());const A=this.g.length+N.g.length,C=[];for(var V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<N.g.length;x++){const P=this.i(V)>>>16,w=this.i(V)&65535,Ye=N.i(x)>>>16,Qe=N.i(x)&65535;C[2*V+2*x]+=w*Qe,le(C,2*V+2*x),C[2*V+2*x+1]+=P*Qe,le(C,2*V+2*x+1),C[2*V+2*x+1]+=w*Ye,le(C,2*V+2*x+1),C[2*V+2*x+2]+=P*Ye,le(C,2*V+2*x+2)}for(N=0;N<A;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=A;N<2*A;N++)C[N]=0;return new f(C,0)};function le(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function ue(N,A){this.g=N,this.h=A}function we(N,A){if(J(A))throw Error("division by zero");if(J(N))return new ue(R,R);if(W(N))return A=we(X(N),A),new ue(X(A.g),X(A.h));if(W(A))return A=we(N,X(A)),new ue(X(A.g),A.h);if(N.g.length>30){if(W(N)||W(A))throw Error("slowDivide_ only works with positive integers.");for(var C=M,V=A;V.l(N)<=0;)C=he(C),V=he(V);var x=se(C,1),P=se(V,1);for(V=se(V,2),C=se(C,2);!J(V);){var w=P.add(V);w.l(N)<=0&&(x=x.add(C),P=w),V=se(V,1),C=se(C,1)}return A=Q(N,x.j(A)),new ue(x,A)}for(x=R;N.l(A)>=0;){for(C=Math.max(1,Math.floor(N.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=g(C),w=P.j(A);W(w)||w.l(N)>0;)C-=V,P=g(C),w=P.j(A);J(P)&&(P=M),x=x.add(P),N=Q(N,w)}return new ue(x,N)}s.B=function(N){return we(this,N).h},s.and=function(N){const A=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)&N.i(V);return new f(C,this.h&N.h)},s.or=function(N){const A=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)|N.i(V);return new f(C,this.h|N.h)},s.xor=function(N){const A=Math.max(this.g.length,N.g.length),C=[];for(let V=0;V<A;V++)C[V]=this.i(V)^N.i(V);return new f(C,this.h^N.h)};function he(N){const A=N.g.length+1,C=[];for(let V=0;V<A;V++)C[V]=N.i(V)<<1|N.i(V-1)>>>31;return new f(C,N.h)}function se(N,A){const C=A>>5;A%=32;const V=N.g.length-C,x=[];for(let P=0;P<V;P++)x[P]=A>0?N.i(P+C)>>>A|N.i(P+C+1)<<32-A:N.i(P+C);return new f(x,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,L0=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=S,Yr=f}).apply(typeof J_<"u"?J_:typeof self<"u"?self:typeof window<"u"?window:{});var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var j0,vl,z0,Rc,zd,B0,q0,H0;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof mc=="object"&&mc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)e:{var _=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var j=u[b];if(!(j in _))break e;_=_[j]}u=u[u.length-1],b=_[u],m=m(b),m!=b&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],b;for(b in m)Object.prototype.hasOwnProperty.call(m,b)&&_.push([b,m[b]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function g(u,m,_){return g=y,g.apply(null,arguments)}function S(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function R(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(b,j,F){for(var ae=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)ae[Ne-2]=arguments[Ne];return m.prototype[j].apply(b,ae)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function z(u){const m=u.length;if(m>0){const _=Array(m);for(let b=0;b<m;b++)_[b]=u[b];return _}return[]}function J(u,m){for(let b=1;b<arguments.length;b++){const j=arguments[b];var _=typeof j;if(_=_!="object"?_:j?Array.isArray(j)?"array":_:"null",_=="array"||_=="object"&&typeof j.length=="number"){_=u.length||0;const F=j.length||0;u.length=_+F;for(let ae=0;ae<F;ae++)u[_+ae]=j[ae]}else u.push(j)}}class W{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(u){f.setTimeout(()=>{throw u},0)}function Q(){var u=N;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class le{constructor(){this.h=this.g=null}add(m,_){const b=ue.get();b.set(m,_),this.h?this.h.next=b:this.g=b,this.h=b}}var ue=new W(()=>new we,u=>u.reset());class we{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let he,se=!1,N=new le,A=()=>{const u=Promise.resolve(void 0);he=()=>{u.then(C)}};function C(){for(var u;u=Q();){try{u.h.call(u.g)}catch(_){X(_)}var m=ue;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}se=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};f.addEventListener("test",_,m),f.removeEventListener("test",_,m)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function Ye(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}R(Ye,x),Ye.prototype.init=function(u,m){const _=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ye.Z.h.call(this)},Ye.prototype.h=function(){Ye.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qe="closure_listenable_"+(Math.random()*1e6|0),G=0;function ce(u,m,_,b,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!b,this.ha=j,this.key=++G,this.da=this.fa=!1}function pe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function xe(u,m,_){for(const b in u)m.call(_,u[b],b,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function U(u){const m={};for(const _ in u)m[_]=u[_];return m}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(u,m){let _,b;for(let j=1;j<arguments.length;j++){b=arguments[j];for(_ in b)u[_]=b[_];for(let F=0;F<te.length;F++)_=te[F],Object.prototype.hasOwnProperty.call(b,_)&&(u[_]=b[_])}}function oe(u){this.src=u,this.g={},this.h=0}oe.prototype.add=function(u,m,_,b,j){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const ae=fe(u,m,b,j);return ae>-1?(m=u[ae],_||(m.fa=!1)):(m=new ce(m,this.src,F,!!b,j),m.fa=_,u.push(m)),m};function ge(u,m){const _=m.type;if(_ in u.g){var b=u.g[_],j=Array.prototype.indexOf.call(b,m,void 0),F;(F=j>=0)&&Array.prototype.splice.call(b,j,1),F&&(pe(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function fe(u,m,_,b){for(let j=0;j<u.length;++j){const F=u[j];if(!F.da&&F.listener==m&&F.capture==!!_&&F.ha==b)return j}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),Ve={};function ft(u,m,_,b,j){if(Array.isArray(m)){for(let F=0;F<m.length;F++)ft(u,m[F],_,b,j);return null}return _=na(_),u&&u[Qe]?u.J(m,_,p(b)?!!b.capture:!1,j):ns(u,m,_,!1,b,j)}function ns(u,m,_,b,j,F){if(!m)throw Error("Invalid event type");const ae=p(j)?!!j.capture:!!j;let Ne=is(u);if(Ne||(u[$e]=Ne=new oe(u)),_=Ne.add(m,_,b,ae,F),_.proxy)return _;if(b=sr(),_.proxy=b,b.src=u,b.listener=_,u.addEventListener)P||(j=ae),j===void 0&&(j=!1),u.addEventListener(m.toString(),b,j);else if(u.attachEvent)u.attachEvent(ar(m.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function sr(){function u(_){return m.call(u.src,u.listener,_)}const m=mo;return u}function Ni(u,m,_,b,j){if(Array.isArray(m))for(var F=0;F<m.length;F++)Ni(u,m[F],_,b,j);else b=p(b)?!!b.capture:!!b,_=na(_),u&&u[Qe]?(u=u.i,F=String(m).toString(),F in u.g&&(m=u.g[F],_=fe(m,_,b,j),_>-1&&(pe(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[F],u.h--)))):u&&(u=is(u))&&(m=u.g[m.toString()],u=-1,m&&(u=fe(m,_,b,j)),(_=u>-1?m[u]:null)&&ii(_))}function ii(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Qe])ge(m.i,u);else{var _=u.type,b=u.proxy;m.removeEventListener?m.removeEventListener(_,b,u.capture):m.detachEvent?m.detachEvent(ar(_),b):m.addListener&&m.removeListener&&m.removeListener(b),(_=is(m))?(ge(_,u),_.h==0&&(_.src=null,m[$e]=null)):pe(u)}}}function ar(u){return u in Ve?Ve[u]:Ve[u]="on"+u}function mo(u,m){if(u.da)u=!0;else{m=new Ye(m,this);const _=u.listener,b=u.ha||u.src;u.fa&&ii(u),u=_.call(b,m)}return u}function is(u){return u=u[$e],u instanceof oe?u:null}var tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function na(u){return typeof u=="function"?u:(u[tn]||(u[tn]=function(m){return u.handleEvent(m)}),u[tn])}function Tt(){V.call(this),this.i=new oe(this),this.M=this,this.G=null}R(Tt,V),Tt.prototype[Qe]=!0,Tt.prototype.removeEventListener=function(u,m,_,b){Ni(this,u,m,_,b)};function Ct(u,m){var _,b=u.G;if(b)for(_=[];b;b=b.G)_.push(b);if(u=u.M,b=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var j=m;m=new x(b,u),ee(m,j)}j=!0;let F,ae;if(_)for(ae=_.length-1;ae>=0;ae--)F=m.g=_[ae],j=re(F,b,!0,m)&&j;if(F=m.g=u,j=re(F,b,!0,m)&&j,j=re(F,b,!1,m)&&j,_)for(ae=0;ae<_.length;ae++)F=m.g=_[ae],j=re(F,b,!1,m)&&j}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let b=0;b<_.length;b++)pe(_[b]);delete u.g[m],u.h--}}this.G=null},Tt.prototype.J=function(u,m,_,b){return this.i.add(String(u),m,!1,_,b)},Tt.prototype.K=function(u,m,_,b){return this.i.add(String(u),m,!0,_,b)};function re(u,m,_,b){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let F=0;F<m.length;++F){const ae=m[F];if(ae&&!ae.da&&ae.capture==_){const Ne=ae.listener,ct=ae.ha||ae.src;ae.fa&&ge(u.i,ae),j=Ne.call(ct,b)!==!1&&j}}return j&&!b.defaultPrevented}function ye(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(u,m||0)}function je(u){u.g=ye(()=>{u.g=null,u.i&&(u.i=!1,je(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class et extends V{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:je(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Me(u){V.call(this),this.h=u,this.g={}}R(Me,V);var Tn=[];function Mt(u){xe(u.g,function(m,_){this.g.hasOwnProperty(_)&&ii(m)},u),u.g={}}Me.prototype.N=function(){Me.Z.N.call(this),Mt(this)},Me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=f.JSON.stringify,jt=f.JSON.parse,rs=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function ia(){}function ss(){}var Dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ri(){x.call(this,"d")}R(ri,x);function En(){x.call(this,"c")}R(En,x);var cn={},si=null;function or(){return si=si||new Tt}cn.Ia="serverreachability";function st(u){x.call(this,cn.Ia,u)}R(st,x);function Et(u){const m=or();Ct(m,new st(m))}cn.STAT_EVENT="statevent";function pn(u,m){x.call(this,cn.STAT_EVENT,u),this.stat=m}R(pn,x);function ut(u){const m=or();Ct(m,new pn(m,u))}cn.Ja="timingevent";function as(u,m){x.call(this,cn.Ja,u),this.size=m}R(as,x);function ai(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},m)}function lr(){this.g=!0}lr.prototype.ua=function(){this.g=!1};function po(u,m,_,b,j,F){u.info(function(){if(u.g)if(F){var ae="",Ne=F.split("&");for(let Ze=0;Ze<Ne.length;Ze++){var ct=Ne[Ze].split("=");if(ct.length>1){const At=ct[0];ct=ct[1];const Sn=At.split("_");ae=Sn.length>=2&&Sn[1]=="type"?ae+(At+"="+ct+"&"):ae+(At+"=redacted&")}}}else ae=null;else ae=F;return"XMLHTTP REQ ("+b+") [attempt "+j+"]: "+m+`
`+_+`
`+ae})}function go(u,m,_,b,j,F,ae){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+j+"]: "+m+`
`+_+`
`+F+" "+ae})}function Di(u,m,_,b){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+oi(u,_)+(b?" "+b:"")})}function dh(u,m){u.info(function(){return"TIMEOUT: "+m})}lr.prototype.info=function(){};function oi(u,m){if(!u.g)return m;if(!m)return null;try{const F=JSON.parse(m);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var _=F[u];if(!(_.length<2)){var b=_[1];if(Array.isArray(b)&&!(b.length<1)){var j=b[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ae=1;ae<b.length;ae++)b[ae]=""}}}}return Qt(F)}catch{return m}}var St={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Kt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xi;function os(){}R(os,ia),os.prototype.g=function(){return new XMLHttpRequest},xi=new os;function ls(u){return encodeURIComponent(String(u))}function mh(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Fn(u,m,_,b){this.j=u,this.i=m,this.l=_,this.S=b||1,this.V=new Me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ur}function ur(){this.i=null,this.g="",this.h=!1}var ra={},li={};function ui(u,m,_){u.M=1,u.A=Mi(mt(m)),u.u=_,u.R=!0,cr(u,null)}function cr(u,m){u.F=Date.now(),us(u),u.B=mt(u.A);var _=u.B,b=u.S;Array.isArray(b)||(b=[String(b)]),eu(_.i,"t",b),u.C=0,_=u.j.L,u.h=new ur,u.g=ma(u.j,_?m:null,!u.u),u.P>0&&(u.O=new et(g(u.Y,u,u.g),u.P)),m=u.V,_=u.g,b=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(Tn[0]=j.toString()),j=Tn);for(let F=0;F<j.length;F++){const ae=ft(_,j[F],b||m.handleEvent,!1,m.h||m);if(!ae)break;m.g[ae.key]=ae}m=u.J?U(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),Et(),po(u.i,u.v,u.B,u.l,u.S,u.u)}Fn.prototype.ba=function(u){u=u.target;const m=this.O;m&&nn(u)==3?m.j():this.Y(u)},Fn.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=nn(this.g),ct=this.g.ya(),Ze=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Ts(this.g)))){this.K||Ne!=4||ct==7||(ct==8||Ze<=0?Et(3):Et(2)),hi(this);var m=this.g.ca();this.X=m;var _=hr(this);if(this.o=m==200,go(this.i,this.v,this.B,this.l,this.S,Ne,m),this.o){if(this.U&&!this.L){t:{if(this.g){var b,j=this.g;if((b=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(b)){var F=b;break t}}F=null}if(u=F)Di(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,sa(this,u);else{this.o=!1,this.m=3,ut(12),fi(this),cs(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<_.length;)if(At=Zl(this,_),At==li){Ne==4&&(this.m=4,ut(14),u=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(At==ra){this.m=4,ut(15),Di(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Di(this.i,this.l,At,null),sa(this,At);if(bt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,ut(16),u=!1),this.o=this.o&&u,!u)Di(this.i,this.l,_,"[Invalid Chunked Response]"),fi(this),cs(this);else if(_.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),wo(ae),ae.P=!0,ut(11))}}else Di(this.i,this.l,_,null),sa(this,_);Ne==4&&fi(this),this.o&&!this.K&&(Ne==4?Io(this.j,this):(this.o=!1,us(this)))}else Es(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),fi(this),cs(this)}}}catch{}finally{}};function hr(u){if(!bt(u))return u.g.la();const m=Ts(u.g);if(m==="")return"";let _="";const b=m.length,j=nn(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return fi(u),cs(u),"";u.h.i=new f.TextDecoder}for(let F=0;F<b;F++)u.h.h=!0,_+=u.h.i.decode(m[F],{stream:!(j&&F==b-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function bt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Zl(u,m){var _=u.C,b=m.indexOf(`
`,_);return b==-1?li:(_=Number(m.substring(_,b)),isNaN(_)?ra:(b+=1,b+_>m.length?li:(m=m.slice(b,b+_),u.C=b+_,m)))}Fn.prototype.cancel=function(){this.K=!0,fi(this)};function us(u){u.T=Date.now()+u.H,ci(u,u.H)}function ci(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ai(g(u.aa,u),m)}function hi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Fn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(dh(this.i,this.B),this.M!=2&&(Et(),ut(17)),fi(this),this.m=2,cs(this)):ci(this,this.T-u)};function cs(u){u.j.I==0||u.K||Io(u.j,u)}function fi(u){hi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Mt(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function sa(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ds(_.h,u))){if(!u.L&&ds(_.h,u)&&_.I==3){try{var b=_.Ba.g.parse(m)}catch{b=null}if(Array.isArray(b)&&b.length==3){var j=b;if(j[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)da(_),di(_);else break e;Ro(_),ut(18)}}else _.xa=j[1],0<_.xa-_.K&&j[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ai(g(_.Va,_),6e3));xn(_.h)<=1&&_.ta&&(_.ta=void 0)}else ki(_,11)}else if((u.L||_.g==u)&&da(_),!w(m))for(j=_.Ba.g.parse(m),m=0;m<j.length;m++){let Ze=j[m];const At=Ze[0];if(!(At<=_.K))if(_.K=At,Ze=Ze[1],_.I==2)if(Ze[0]=="c"){_.M=Ze[1],_.ba=Ze[2];const Sn=Ze[3];Sn!=null&&(_.ka=Sn,_.j.info("VER="+_.ka));const mi=Ze[4];mi!=null&&(_.za=mi,_.j.info("SVER="+_.za));const Kn=Ze[5];Kn!=null&&typeof Kn=="number"&&Kn>0&&(b=1.5*Kn,_.O=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Yn=u.g;if(Yn){const Xn=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xn){var F=b.h;F.g||Xn.indexOf("spdy")==-1&&Xn.indexOf("quic")==-1&&Xn.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(aa(F,F.h),F.h=null))}if(b.G){const No=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(b.wa=No,tt(b.J,b.G,No))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),b=_;var ae=u;if(b.na=uu(b,b.L?b.ba:null,b.W),ae.L){Oi(b.h,ae);var Ne=ae,ct=b.O;ct&&(Ne.H=ct),Ne.D&&(hi(Ne),us(Ne)),b.g=ae}else su(b);_.i.length>0&&Rs(_)}else Ze[0]!="stop"&&Ze[0]!="close"||ki(_,7);else _.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?ki(_,7):bs(_):Ze[0]!="noop"&&_.l&&_.l.qa(Ze),_.A=0)}}Et(4)}catch{}}var ph=class{constructor(u,m){this.g=u,this.map=m}};function hs(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xn(u){return u.h?1:u.g?u.g.size:0}function ds(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function aa(u,m){u.g?u.g.add(m):u.h=m}function Oi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}hs.prototype.cancel=function(){if(this.i=oa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function oa(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return z(u.i)}var la=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const b=u[_].indexOf("=");let j,F=null;b>=0?(j=u[_].substring(0,b),F=u[_].substring(b+1)):j=u[_],m(j,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Gn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Gn?(this.l=u.l,fr(this,u.j),this.o=u.o,this.g=u.g,ms(this,u.u),this.h=u.h,dr(this,tu(u.i)),this.m=u.m):u&&(m=String(u).match(la))?(this.l=!1,fr(this,m[1]||"",!0),this.o=ps(m[2]||""),this.g=ps(m[3]||"",!0),ms(this,m[4]),this.h=ps(m[5]||"",!0),dr(this,m[6]||"",!0),this.m=ps(m[7]||"")):(this.l=!1,this.i=new On(null,this.l))}Gn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(zt(m,_o,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(zt(m,_o,!0),"@"),u.push(ls(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(zt(_,_.charAt(0)=="/"?mr:vo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",zt(_,Wl)),u.join("")},Gn.prototype.resolve=function(u){const m=mt(this);let _=!!u.j;_?fr(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var b=u.h;if(_)ms(m,u.u);else if(_=!!u.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var j=m.h.lastIndexOf("/");j!=-1&&(b=m.h.slice(0,j+1)+b)}if(j=b,j==".."||j==".")b="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){b=j.lastIndexOf("/",0)==0,j=j.split("/");const F=[];for(let ae=0;ae<j.length;){const Ne=j[ae++];Ne=="."?b&&ae==j.length&&F.push(""):Ne==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),b&&ae==j.length&&F.push("")):(F.push(Ne),b=!0)}b=F.join("/")}else b=j}return _?m.h=b:_=u.i.toString()!=="",_?dr(m,tu(u.i)):_=!!u.m,_&&(m.m=u.m),m};function mt(u){return new Gn(u)}function fr(u,m,_){u.j=_?ps(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ms(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function dr(u,m,_){m instanceof On?(u.i=m,So(u.i,u.l)):(_||(m=zt(m,Jl)),u.i=new On(m,u.l))}function tt(u,m,_){u.i.set(m,_)}function Mi(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ps(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function zt(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,yo),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _o=/[#\/\?@]/g,vo=/[#\?:]/g,mr=/[#\?]/g,Jl=/[#\?@]/g,Wl=/#/g;function On(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Vi(u){u.g||(u.g=new Map,u.h=0,u.i&&gh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=On.prototype,s.add=function(u,m){Vi(this),this.i=null,u=Qn(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function To(u,m){Vi(u),m=Qn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Eo(u,m){return Vi(u),m=Qn(u,m),u.g.has(m)}s.forEach=function(u,m){Vi(this),this.g.forEach(function(_,b){_.forEach(function(j){u.call(m,j,b,this)},this)},this)};function ua(u,m){Vi(u);let _=[];if(typeof m=="string")Eo(u,m)&&(_=_.concat(u.g.get(Qn(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}s.set=function(u,m){return Vi(this),this.i=null,u=Qn(this,u),Eo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=ua(this,u),u.length>0?String(u[0]):m):m};function eu(u,m,_){To(u,m),_.length>0&&(u.i=null,u.g.set(Qn(u,m),z(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let b=0;b<m.length;b++){var _=m[b];const j=ls(_);_=ua(this,_);for(let F=0;F<_.length;F++){let ae=j;_[F]!==""&&(ae+="="+ls(_[F])),u.push(ae)}}return this.i=u.join("&")};function tu(u){const m=new On;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function Qn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function So(u,m){m&&!u.j&&(Vi(u),u.i=null,u.g.forEach(function(_,b){const j=b.toLowerCase();b!=j&&(To(this,b),eu(this,j,_))},u)),u.j=m}function bo(u,m){const _=new lr;if(f.Image){const b=new Image;b.onload=S(hn,_,"TestLoadImage: loaded",!0,m,b),b.onerror=S(hn,_,"TestLoadImage: error",!1,m,b),b.onabort=S(hn,_,"TestLoadImage: abort",!1,m,b),b.ontimeout=S(hn,_,"TestLoadImage: timeout",!1,m,b),f.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else m(!1)}function pr(u,m){const _=new lr,b=new AbortController,j=setTimeout(()=>{b.abort(),hn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:b.signal}).then(F=>{clearTimeout(j),F.ok?hn(_,"TestPingServer: ok",!0,m):hn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),hn(_,"TestPingServer: error",!1,m)})}function hn(u,m,_,b,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),b(_)}catch{}}function nu(){this.g=new rs}function gs(u){this.i=u.Sb||null,this.h=u.ab||!1}R(gs,ia),gs.prototype.g=function(){return new ys(this.i,this.h)};function ys(u,m){Tt.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(ys,Tt),s=ys.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Pi(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fn(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gr(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function gr(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?fn(this):Pi(this),this.readyState==3&&gr(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,fn(this))},s.Na=function(u){this.g&&(this.response=u,fn(this))},s.ga=function(){this.g&&fn(this)};function fn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Pi(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function yr(u){let m="";return xe(u,function(_,b){m+=b,m+=":",m+=_,m+=`\r
`}),m}function Mn(u,m,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=yr(_),typeof u=="string"?_!=null&&ls(_):tt(u,m,_))}function ot(u){Tt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(ot,Tt);var ca=/^https?$/i,iu=["POST","PUT"];s=ot.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xi.g(),this.g.onreadystatechange=M(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(F){_s(this,F);return}if(u=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var j in b)_.set(j,b[j]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const F of b.keys())_.set(F,b.get(F));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),j=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(iu,m,void 0)>=0)||b||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ae]of _)this.g.setRequestHeader(F,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){_s(this,F)}};function _s(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,vs(u),Vt(u)}function vs(u){u.A||(u.A=!0,Ct(u,"complete"),Ct(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ct(this,"complete"),Ct(this,"abort"),Vt(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),ot.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},s.Xa=function(){Ao(this)};function Ao(u){if(u.h&&typeof c<"u"){if(u.v&&nn(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ct(u,"readystatechange"),nn(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var b;if(b=F===0){let ae=String(u.D).match(la)[1]||null;!ae&&f.self&&f.self.location&&(ae=f.self.location.protocol.slice(0,-1)),b=!ca.test(ae?ae.toLowerCase():"")}_=b}if(_)Ct(u,"complete"),Ct(u,"success");else{u.o=6;try{var j=nn(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",vs(u)}}finally{Vt(u)}}}}function Vt(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||Ct(u,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function nn(u){return u.g?u.g.readyState:0}s.ca=function(){try{return nn(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),jt(m)}};function Ts(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Es(u){const m={};u=(u.g&&nn(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(w(u[b]))continue;var _=mh(u[b]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=m[j]||[];m[j]=F,F.push(_)}D(m,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ha(u){this.za=0,this.i=[],this.j=new lr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ss("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ss("baseRetryDelayMs",5e3,u),this.Za=Ss("retryDelaySeedMs",1e4,u),this.Ta=Ss("forwardChannelMaxRetries",2,u),this.va=Ss("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new hs(u&&u.concurrentRequestLimit),this.Ba=new nu,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=ha.prototype,s.ka=8,s.I=1,s.connect=function(u,m,_,b){ut(0),this.W=u,this.H=m||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.J=uu(this,null,this.W),Rs(this)};function bs(u){if(As(u),u.I==3){var m=u.V++,_=mt(u.J);if(tt(_,"SID",u.M),tt(_,"RID",m),tt(_,"TYPE","terminate"),ws(u,_),m=new Fn(u,u.j,m),m.M=2,m.A=Mi(mt(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&f.Image&&(new Image().src=m.A,_=!0),_||(m.g=ma(m.j,null),m.g.ea(m.A)),m.F=Date.now(),us(m)}lu(u)}function di(u){u.g&&(wo(u),u.g.cancel(),u.g=null)}function As(u){di(u),u.v&&(f.clearTimeout(u.v),u.v=null),da(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Rs(u){if(!fs(u.h)&&!u.m){u.m=!0;var m=u.Ea;he||A(),se||(he(),se=!0),N.add(m,u),u.D=0}}function yh(u,m){return xn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ai(g(u.Ea,u,m),ou(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Fn(this,this.j,u);let F=this.o;if(this.U&&(F?(F=U(F),ee(F,this.U)):F=this.U),this.u!==null||this.R||(j.J=F,F=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(m+=b,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=fa(this,j,m),_=mt(this.J),tt(_,"RID",u),tt(_,"CVER",22),this.G&&tt(_,"X-HTTP-Session-Id",this.G),ws(this,_),F&&(this.R?m="headers="+ls(yr(F))+"&"+m:this.u&&Mn(_,this.u,F)),aa(this.h,j),this.Ra&&tt(_,"TYPE","init"),this.S?(tt(_,"$req",m),tt(_,"SID","null"),j.U=!0,ui(j,_,null)):ui(j,_,m),this.I=2}}else this.I==3&&(u?ru(this,u):this.i.length==0||fs(this.h)||ru(this))};function ru(u,m){var _;m?_=m.l:_=u.V++;const b=mt(u.J);tt(b,"SID",u.M),tt(b,"RID",_),tt(b,"AID",u.K),ws(u,b),u.u&&u.o&&Mn(b,u.u,u.o),_=new Fn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=fa(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),aa(u.h,_),ui(_,b,m)}function ws(u,m){u.H&&xe(u.H,function(_,b){tt(m,b,_)}),u.l&&xe({},function(_,b){tt(m,b,_)})}function fa(u,m,_){_=Math.min(u.i.length,_);const b=u.l?g(u.l.Ka,u.l,u):null;e:{var j=u.i;let Ne=-1;for(;;){const ct=["count="+_];Ne==-1?_>0?(Ne=j[0].g,ct.push("ofs="+Ne)):Ne=0:ct.push("ofs="+Ne);let Ze=!0;for(let At=0;At<_;At++){var F=j[At].g;const Sn=j[At].map;if(F-=Ne,F<0)Ne=Math.max(0,j[At].g-100),Ze=!1;else try{F="req"+F+"_"||"";try{var ae=Sn instanceof Map?Sn:Object.entries(Sn);for(const[mi,Kn]of ae){let Yn=Kn;p(Kn)&&(Yn=Qt(Kn)),ct.push(F+mi+"="+encodeURIComponent(Yn))}}catch(mi){throw ct.push(F+"type="+encodeURIComponent("_badmap")),mi}}catch{b&&b(Sn)}}if(Ze){ae=ct.join("&");break e}}ae=void 0}return u=u.i.splice(0,_),m.G=u,ae}function su(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;he||A(),se||(he(),se=!0),N.add(m,u),u.A=0}}function Ro(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ai(g(u.Da,u),ou(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,au(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ai(g(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),di(this),au(this))};function wo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function au(u){u.g=new Fn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=mt(u.na);tt(m,"RID","rpc"),tt(m,"SID",u.M),tt(m,"AID",u.K),tt(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(m,"TO",u.ia),tt(m,"TYPE","xmlhttp"),ws(u,m),u.u&&u.o&&Mn(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Mi(mt(m)),_.u=null,_.R=!0,cr(_,u)}s.Va=function(){this.C!=null&&(this.C=null,di(this),Ro(this),ut(19))};function da(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Io(u,m){var _=null;if(u.g==m){da(u),wo(u),u.g=null;var b=2}else if(ds(u.h,m))_=m.G,Oi(u.h,m),b=1;else return;if(u.I!=0){if(m.o)if(b==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;b=or(),Ct(b,new as(b,_)),Rs(u)}else su(u);else if(j=m.m,j==3||j==0&&m.X>0||!(b==1&&yh(u,m)||b==2&&Ro(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),j){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function ou(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function ki(u,m){if(u.j.info("Error code "+m),m==2){var _=g(u.bb,u),b=u.Ua;const j=!b;b=new Gn(b||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||fr(b,"https"),Mi(b),j?bo(b.toString(),_):pr(b.toString(),_)}else ut(2);u.I=0,u.l&&u.l.pa(m),lu(u),As(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function lu(u){if(u.I=0,u.ja=[],u.l){const m=oa(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ja,m),J(u.ja,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.oa()}}function uu(u,m,_){var b=_ instanceof Gn?mt(_):new Gn(_);if(b.g!="")m&&(b.g=m+"."+b.g),ms(b,b.u);else{var j=f.location;b=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const F=new Gn(null);b&&fr(F,b),m&&(F.g=m),j&&ms(F,j),_&&(F.h=_),b=F}return _=u.G,m=u.wa,_&&m&&tt(b,_,m),tt(b,"VER",u.ka),ws(u,b),b}function ma(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ot(new gs({ab:_})):new ot(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}s=cu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function pa(){}pa.prototype.g=function(u,m){return new dn(u,m)};function dn(u,m){Tt.call(this),this.g=new ha(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!w(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new _r(this)}R(dn,Tt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){bs(this.g)},dn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Qt(u),u=_);m.i.push(new ph(m.Ya++,u)),m.I==3&&Rs(m)},dn.prototype.N=function(){this.g.l=null,delete this.j,bs(this.g),delete this.g,dn.Z.N.call(this)};function Co(u){ri.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}R(Co,ri);function hu(){En.call(this),this.status=1}R(hu,En);function _r(u){this.g=u}R(_r,cu),_r.prototype.ra=function(){Ct(this.g,"a")},_r.prototype.qa=function(u){Ct(this.g,new Co(u))},_r.prototype.pa=function(u){Ct(this.g,new hu)},_r.prototype.oa=function(){Ct(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,H0=function(){return new pa},q0=function(){return or()},B0=cn,zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},St.NO_ERROR=0,St.TIMEOUT=8,St.HTTP_ERROR=6,Rc=St,Kt.COMPLETE="complete",z0=Kt,ss.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,vl=ss,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,j0=ot}).apply(typeof mc<"u"?mc:typeof self<"u"?self:typeof window<"u"?window:{});const W_="@firebase/firestore",ev="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new am("@firebase/firestore");function Fa(){return $s.logLevel}function de(s,...e){if($s.logLevel<=ze.DEBUG){const i=e.map(vm);$s.debug(`Firestore (${uo}): ${s}`,...i)}}function nr(s,...e){if($s.logLevel<=ze.ERROR){const i=e.map(vm);$s.error(`Firestore (${uo}): ${s}`,...i)}}function eo(s,...e){if($s.logLevel<=ze.WARN){const i=e.map(vm);$s.warn(`Firestore (${uo}): ${s}`,...i)}}function vm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,F0(s,r,i)}function F0(s,e,i){let r=`FIRESTORE (${uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw nr(r),new Error(r)}function Xe(s,e,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||F0(e,l,r)}function De(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends rr{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(on.UNAUTHENTICATED)))}shutdown(){}}class JR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class WR{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Xe(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let c=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Xr,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Xr)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new G0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new on(e)}}class ew{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tw{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new ew(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(on.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nw{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Xe(this.o===void 0,3512);const r=c=>{c.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,de("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(Xe(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new tv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=iw(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<i&&(r+=e.charAt(l[c]%62))}return r}}function Be(s,e){return s<e?-1:s>e?1:0}function Bd(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return wd(l)===wd(c)?Be(l,c):wd(l)?1:-1}return Be(s.length,e.length)}const rw=55296,sw=57343;function wd(s){const e=s.charCodeAt(0);return e>=rw&&e<=sw}function to(s,e,i){return s.length===e.length&&s.every(((r,l)=>i(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Ti{constructor(e,i,r){i===void 0?i=0:i>e.length&&Ae(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&Ae(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return Ti.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ti?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let l=0;l<r;l++){const c=Ti.compareSegments(e.get(l),i.get(l));if(c!==0)return c}return Be(e.length,i.length)}static compareSegments(e,i){const r=Ti.isNumericId(e),l=Ti.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Ti.extractNumericId(e).compare(Ti.extractNumericId(i)):Bd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Yr.fromString(e.substring(4,e.length-2))}}class gt extends Ti{construct(e,i,r){return new gt(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new ve(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new gt(i)}static emptyPath(){return new gt([])}}const aw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Ti{construct(e,i,r){return new Wt(e,i,r)}static isValidIdentifier(e){return aw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new Wt([nv])}static fromServerFormat(e){const i=[];let r="",l=0;const c=()=>{if(r.length===0)throw new ve(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let f=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new ve(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ve(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(f=!f,l++):p!=="."||f?(r+=p,l++):(c(),l++)}if(c(),f)throw new ve(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(i)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(gt.fromString(e))}static fromName(e){return new Te(gt.fromString(e).popFirst(5))}static empty(){return new Te(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return gt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(s,e,i){if(!i)throw new ve(ne.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function lw(s,e,i,r){if(e===!0&&r===!0)throw new ve(ne.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function iv(s){if(!Te.isDocumentKey(s))throw new ve(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Q0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Em(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ae(12329,{type:typeof s})}function Ml(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ve(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Em(s);throw new ve(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(s,e){const i={typeString:s};return e&&(i.value=e),i}function Ql(s,e){if(!Q0(s))throw new ve(ne.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const f=s[r];if(l&&typeof f!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&f!==c.value){i=`Expected '${r}' field to equal '${c.value}'`;break}}if(i)throw new ve(ne.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,sv=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*sv);return new ht(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ve(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<rv)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ql(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:Ot("string",ht._jsonSchemaVersion),seconds:Ot("number"),nanoseconds:Ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new ht(0,0))}static max(){return new Ce(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function uw(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=Ce.fromTimestamp(r===1e9?new ht(i+1,0):new ht(i,r));return new $r(l,Te.empty(),e)}function cw(s){return new $r(s.readTime,s.key,Vl)}class $r{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new $r(Ce.min(),Te.empty(),Vl)}static max(){return new $r(Ce.max(),Te.empty(),Vl)}}function hw(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=Te.comparator(s.documentKey,e.documentKey),i!==0?i:Be(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s){if(s.code!==ne.FAILED_PRECONDITION||s.message!==fw)throw s;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new Z(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(r,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof Z?i:Z.resolve(i)}catch(i){return Z.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):Z.reject(i)}static resolve(e){return new Z(((i,r)=>{i(e)}))}static reject(e){return new Z(((i,r)=>{r(e)}))}static waitFor(e){return new Z(((i,r)=>{let l=0,c=0,f=!1;e.forEach((p=>{++l,p.next((()=>{++c,f&&c===l&&i()}),(y=>r(y)))})),f=!0,c===l&&i()}))}static or(e){let i=Z.resolve(!1);for(const r of e)i=i.next((l=>l?Z.resolve(l):r()));return i}static forEach(e,i){const r=[];return e.forEach(((l,c)=>{r.push(i.call(this,l,c))})),this.waitFor(r)}static mapArray(e,i){return new Z(((r,l)=>{const c=e.length,f=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;i(e[g]).next((S=>{f[g]=S,++p,p===c&&r(f)}),(S=>l(S)))}}))}static doWhile(e,i){return new Z(((r,l)=>{const c=()=>{e()===!0?i().next((()=>{c()}),l):r()};c()}))}}function mw(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function ho(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function nh(s){return s==null}function jc(s){return s===0&&1/s==-1/0}function pw(s){return typeof s=="number"&&Number.isInteger(s)&&!jc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="";function gw(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=av(e)),e=yw(s.get(i),e);return av(e)}function yw(s,e){let i=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case K0:i+="";break;default:i+=c}}return i}function av(s){return s+K0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Js(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function Y0(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,i){this.comparator=e,this.root=i||Jt.EMPTY}insert(e,i){return new yt(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,i,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?r(e.key,i):1,i&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,i,r,l,c){this.key=e,this.value=i,this.color=r??Jt.RED,this.left=l??Jt.EMPTY,this.right=c??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,l,c){return new Jt(e??this.key,i??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,i,r),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return Jt.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,i,r,l,c){return this}insert(e,i,r){return new Jt(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new lv(this.data.getIterator())}getIteratorFrom(e){return new lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Lt(this.comparator);return i.data=e,i}}class lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new ti([])}unionWith(e){let i=new Lt(Wt.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new ti(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new X0("Invalid base64 string: "+c):c}})(e);return new en(i)}static fromUint8Array(e){const i=(function(l){let c="";for(let f=0;f<l.length;++f)c+=String.fromCharCode(l[f]);return c})(e);return new en(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(s){if(Xe(!!s,39018),typeof s=="string"){let e=0;const i=_w.exec(s);if(Xe(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:It(s.seconds),nanos:It(s.nanos)}}function It(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Jr(s){return typeof s=="string"?en.fromBase64String(s):en.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="server_timestamp",Z0="__type__",J0="__previous_value__",W0="__local_write_time__";function bm(s){return(s?.mapValue?.fields||{})[Z0]?.stringValue===$0}function ih(s){const e=s.mapValue.fields[J0];return bm(e)?ih(e):e}function Pl(s){const e=Zr(s.mapValue.fields[W0].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,i,r,l,c,f,p,y,g,S){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=S}}const zc="(default)";class kl{constructor(e,i){this.projectId=e,this.database=i||zc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===zc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="__type__",Tw="__max__",gc={mapValue:{}},tT="__vector__",Bc="value";function Wr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?bm(s)?4:Sw(s)?9007199254740991:Ew(s)?10:11:Ae(28295,{value:s})}function Ii(s,e){if(s===e)return!0;const i=Wr(s);if(i!==Wr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Pl(s).isEqual(Pl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const f=Zr(l.timestampValue),p=Zr(c.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return Jr(l.bytesValue).isEqual(Jr(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return It(l.geoPointValue.latitude)===It(c.geoPointValue.latitude)&&It(l.geoPointValue.longitude)===It(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return It(l.integerValue)===It(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const f=It(l.doubleValue),p=It(c.doubleValue);return f===p?jc(f)===jc(p):isNaN(f)&&isNaN(p)}return!1})(s,e);case 9:return to(s.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(l,c){const f=l.mapValue.fields||{},p=c.mapValue.fields||{};if(ov(f)!==ov(p))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(p[y]===void 0||!Ii(f[y],p[y])))return!1;return!0})(s,e);default:return Ae(52216,{left:s})}}function Ul(s,e){return(s.values||[]).find((i=>Ii(i,e)))!==void 0}function no(s,e){if(s===e)return 0;const i=Wr(s),r=Wr(e);if(i!==r)return Be(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return Be(s.booleanValue,e.booleanValue);case 2:return(function(c,f){const p=It(c.integerValue||c.doubleValue),y=It(f.integerValue||f.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return uv(s.timestampValue,e.timestampValue);case 4:return uv(Pl(s),Pl(e));case 5:return Bd(s.stringValue,e.stringValue);case 6:return(function(c,f){const p=Jr(c),y=Jr(f);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,f){const p=c.split("/"),y=f.split("/");for(let g=0;g<p.length&&g<y.length;g++){const S=Be(p[g],y[g]);if(S!==0)return S}return Be(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,f){const p=Be(It(c.latitude),It(f.latitude));return p!==0?p:Be(It(c.longitude),It(f.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return cv(s.arrayValue,e.arrayValue);case 10:return(function(c,f){const p=c.fields||{},y=f.fields||{},g=p[Bc]?.arrayValue,S=y[Bc]?.arrayValue,R=Be(g?.values?.length||0,S?.values?.length||0);return R!==0?R:cv(g,S)})(s.mapValue,e.mapValue);case 11:return(function(c,f){if(c===gc.mapValue&&f===gc.mapValue)return 0;if(c===gc.mapValue)return 1;if(f===gc.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=f.fields||{},S=Object.keys(g);y.sort(),S.sort();for(let R=0;R<y.length&&R<S.length;++R){const M=Bd(y[R],S[R]);if(M!==0)return M;const z=no(p[y[R]],g[S[R]]);if(z!==0)return z}return Be(y.length,S.length)})(s.mapValue,e.mapValue);default:throw Ae(23264,{he:i})}}function uv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Be(s,e);const i=Zr(s),r=Zr(e),l=Be(i.seconds,r.seconds);return l!==0?l:Be(i.nanos,r.nanos)}function cv(s,e){const i=s.values||[],r=e.values||[];for(let l=0;l<i.length&&l<r.length;++l){const c=no(i[l],r[l]);if(c)return c}return Be(i.length,r.length)}function io(s){return qd(s)}function qd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Zr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return Jr(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Te.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const c of i.values||[])l?l=!1:r+=",",r+=qd(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const f of r)c?c=!1:l+=",",l+=`${f}:${qd(i.fields[f])}`;return l+"}"})(s.mapValue):Ae(61005,{value:s})}function wc(s){switch(Wr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ih(s);return e?16+wc(e):16;case 5:return 2*s.stringValue.length;case 6:return Jr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+wc(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Js(r.fields,((c,f)=>{l+=c.length+wc(f)})),l})(s.mapValue);default:throw Ae(13486,{value:s})}}function Hd(s){return!!s&&"integerValue"in s}function Am(s){return!!s&&"arrayValue"in s}function hv(s){return!!s&&"nullValue"in s}function fv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ic(s){return!!s&&"mapValue"in s}function Ew(s){return(s?.mapValue?.fields||{})[eT]?.stringValue===tT}function wl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Js(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=wl(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=wl(s.arrayValue.values[i]);return e}return{...s}}function Sw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Tw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!Ic(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(i)}setAll(e){let i=Wt.emptyPath(),r={},l=[];e.forEach(((f,p)=>{if(!i.isImmediateParentOf(p)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=p.popLast()}f?r[p.lastSegment()]=wl(f):l.push(p.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,r,l)}delete(e){const i=this.field(e.popLast());Ic(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=i.mapValue.fields[e.get(r)];Ic(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,r){Js(i,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new Bn(wl(this.value))}}function nT(s){const e=[];return Js(s.fields,((i,r)=>{const l=new Wt([i]);if(Ic(r)){const c=nT(r.mapValue).fields;if(c.length===0)e.push(l);else for(const f of c)e.push(l.child(f))}else e.push(l)})),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,i,r,l,c,f,p){this.key=e,this.documentType=i,this.version=r,this.readTime=l,this.createTime=c,this.data=f,this.documentState=p}static newInvalidDocument(e){return new ln(e,0,Ce.min(),Ce.min(),Ce.min(),Bn.empty(),0)}static newFoundDocument(e,i,r,l){return new ln(e,1,i,Ce.min(),r,l,0)}static newNoDocument(e,i){return new ln(e,2,i,Ce.min(),Ce.min(),Bn.empty(),0)}static newUnknownDocument(e,i){return new ln(e,3,i,Ce.min(),Ce.min(),Bn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,i){this.position=e,this.inclusive=i}}function dv(s,e,i){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],f=s.position[l];if(c.field.isKeyField()?r=Te.comparator(Te.fromName(f.referenceValue),i.key):r=no(f,i.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function mv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Ii(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,i="asc"){this.field=e,this.dir=i}}function bw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{}class Ut extends iT{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new Rw(e,i,r):i==="array-contains"?new Cw(e,r):i==="in"?new Nw(e,r):i==="not-in"?new Dw(e,r):i==="array-contains-any"?new xw(e,r):new Ut(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new ww(e,r):new Iw(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(no(i,this.value)):i!==null&&Wr(this.value)===Wr(i)&&this.matchesComparison(no(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ci extends iT{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Ci(e,i)}matches(e){return rT(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rT(s){return s.op==="and"}function sT(s){return Aw(s)&&rT(s)}function Aw(s){for(const e of s.filters)if(e instanceof Ci)return!1;return!0}function Fd(s){if(s instanceof Ut)return s.field.canonicalString()+s.op.toString()+io(s.value);if(sT(s))return s.filters.map((e=>Fd(e))).join(",");{const e=s.filters.map((i=>Fd(i))).join(",");return`${s.op}(${e})`}}function aT(s,e){return s instanceof Ut?(function(r,l){return l instanceof Ut&&r.op===l.op&&r.field.isEqual(l.field)&&Ii(r.value,l.value)})(s,e):s instanceof Ci?(function(r,l){return l instanceof Ci&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,f,p)=>c&&aT(f,l.filters[p])),!0):!1})(s,e):void Ae(19439)}function oT(s){return s instanceof Ut?(function(i){return`${i.field.canonicalString()} ${i.op} ${io(i.value)}`})(s):s instanceof Ci?(function(i){return i.op.toString()+" {"+i.getFilters().map(oT).join(" ,")+"}"})(s):"Filter"}class Rw extends Ut{constructor(e,i,r){super(e,i,r),this.key=Te.fromName(r.referenceValue)}matches(e){const i=Te.comparator(e.key,this.key);return this.matchesComparison(i)}}class ww extends Ut{constructor(e,i){super(e,"in",i),this.keys=lT("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class Iw extends Ut{constructor(e,i){super(e,"not-in",i),this.keys=lT("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function lT(s,e){return(e.arrayValue?.values||[]).map((i=>Te.fromName(i.referenceValue)))}class Cw extends Ut{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Am(i)&&Ul(i.arrayValue,this.value)}}class Nw extends Ut{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Ul(this.value.arrayValue,i)}}class Dw extends Ut{constructor(e,i){super(e,"not-in",i)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Ul(this.value.arrayValue,i)}}class xw extends Ut{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Am(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>Ul(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,i=null,r=[],l=[],c=null,f=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=f,this.endAt=p,this.Te=null}}function pv(s,e=null,i=[],r=[],l=null,c=null,f=null){return new Ow(s,e,i,r,l,c,f)}function Rm(s){const e=De(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>Fd(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),nh(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>io(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>io(r))).join(",")),e.Te=i}return e.Te}function wm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!bw(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!aT(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!mv(s.startAt,e.startAt)&&mv(s.endAt,e.endAt)}function Gd(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,i=null,r=[],l=[],c=null,f="F",p=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=f,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Mw(s,e,i,r,l,c,f,p){return new rh(s,e,i,r,l,c,f,p)}function Im(s){return new rh(s)}function gv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Vw(s){return s.collectionGroup!==null}function Il(s){const e=De(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),i.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new Lt(Wt.comparator);return f.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Hc(c,r))})),i.has(Wt.keyField().canonicalString())||e.Ie.push(new Hc(Wt.keyField(),r))}return e.Ie}function Si(s){const e=De(s);return e.Ee||(e.Ee=Pw(e,Il(s))),e.Ee}function Pw(s,e){if(s.limitType==="F")return pv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Hc(l.field,c)}));const i=s.endAt?new qc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new qc(s.startAt.position,s.startAt.inclusive):null;return pv(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function Qd(s,e,i){return new rh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function sh(s,e){return wm(Si(s),Si(e))&&s.limitType===e.limitType}function uT(s){return`${Rm(Si(s))}|lt:${s.limitType}`}function Ga(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>oT(l))).join(", ")}]`),nh(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>io(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>io(l))).join(",")),`Target(${r})`})(Si(s))}; limitType=${s.limitType})`}function ah(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Te.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Il(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(f,p,y){const g=dv(f,p,y);return f.inclusive?g<=0:g<0})(r.startAt,Il(r),l)||r.endAt&&!(function(f,p,y){const g=dv(f,p,y);return f.inclusive?g>=0:g>0})(r.endAt,Il(r),l))})(s,e)}function kw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function cT(s){return(e,i)=>{let r=!1;for(const l of Il(s)){const c=Uw(l,e,i);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function Uw(s,e,i){const r=s.field.isKeyField()?Te.comparator(e.key,i.key):(function(c,f,p){const y=f.data.field(c),g=p.data.field(c);return y!==null&&g!==null?no(y,g):Ae(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((i,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return Y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=new yt(Te.comparator);function ir(){return Lw}const hT=new yt(Te.comparator);function Tl(...s){let e=hT;for(const i of s)e=e.insert(i.key,i);return e}function fT(s){let e=hT;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function Fs(){return Cl()}function dT(){return Cl()}function Cl(){return new Ws((s=>s.toString()),((s,e)=>s.isEqual(e)))}const jw=new yt(Te.comparator),zw=new Lt(Te.comparator);function qe(...s){let e=zw;for(const i of s)e=e.add(i);return e}const Bw=new Lt(Be);function qw(){return Bw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function mT(s){return{integerValue:""+s}}function Hw(s,e){return pw(e)?mT(e):Cm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this._=void 0}}function Fw(s,e,i){return s instanceof Fc?(function(l,c){const f={fields:{[Z0]:{stringValue:$0},[W0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&bm(c)&&(c=ih(c)),c&&(f.fields[J0]=c),{mapValue:f}})(i,e):s instanceof Ll?gT(s,e):s instanceof jl?yT(s,e):(function(l,c){const f=pT(l,c),p=yv(f)+yv(l.Ae);return Hd(f)&&Hd(l.Ae)?mT(p):Cm(l.serializer,p)})(s,e)}function Gw(s,e,i){return s instanceof Ll?gT(s,e):s instanceof jl?yT(s,e):i}function pT(s,e){return s instanceof Gc?(function(r){return Hd(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Fc extends oh{}class Ll extends oh{constructor(e){super(),this.elements=e}}function gT(s,e){const i=_T(e);for(const r of s.elements)i.some((l=>Ii(l,r)))||i.push(r);return{arrayValue:{values:i}}}class jl extends oh{constructor(e){super(),this.elements=e}}function yT(s,e){let i=_T(e);for(const r of s.elements)i=i.filter((l=>!Ii(l,r)));return{arrayValue:{values:i}}}class Gc extends oh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function yv(s){return It(s.integerValue||s.doubleValue)}function _T(s){return Am(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Qw(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Ll&&l instanceof Ll||r instanceof jl&&l instanceof jl?to(r.elements,l.elements,Ii):r instanceof Gc&&l instanceof Gc?Ii(r.Ae,l.Ae):r instanceof Fc&&l instanceof Fc})(s.transform,e.transform)}class Kw{constructor(e,i){this.version=e,this.transformResults=i}}class Wi{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Wi}static exists(e){return new Wi(void 0,e)}static updateTime(e){return new Wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class lh{}function vT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ET(s.key,Wi.none()):new Kl(s.key,s.data,Wi.none());{const i=s.data,r=Bn.empty();let l=new Lt(Wt.comparator);for(let c of e.fields)if(!l.has(c)){let f=i.field(c);f===null&&c.length>1&&(c=c.popLast(),f=i.field(c)),f===null?r.delete(c):r.set(c,f),l=l.add(c)}return new ea(s.key,r,new ti(l.toArray()),Wi.none())}}function Yw(s,e,i){s instanceof Kl?(function(l,c,f){const p=l.value.clone(),y=vv(l.fieldTransforms,c,f.transformResults);p.setAll(y),c.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(s,e,i):s instanceof ea?(function(l,c,f){if(!Cc(l.precondition,c))return void c.convertToUnknownDocument(f.version);const p=vv(l.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(TT(l)),y.setAll(p),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(s,e,i):(function(l,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function Nl(s,e,i,r){return s instanceof Kl?(function(c,f,p,y){if(!Cc(c.precondition,f))return p;const g=c.value.clone(),S=Tv(c.fieldTransforms,y,f);return g.setAll(S),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(s,e,i,r):s instanceof ea?(function(c,f,p,y){if(!Cc(c.precondition,f))return p;const g=Tv(c.fieldTransforms,y,f),S=f.data;return S.setAll(TT(c)),S.setAll(g),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(s,e,i,r):(function(c,f,p){return Cc(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(s,e,i)}function Xw(s,e){let i=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=pT(r.transform,l||null);c!=null&&(i===null&&(i=Bn.empty()),i.set(r.field,c))}return i||null}function _v(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&to(r,l,((c,f)=>Qw(c,f)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Kl extends lh{constructor(e,i,r,l=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ea extends lh{constructor(e,i,r,l,c=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TT(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function vv(s,e,i){const r=new Map;Xe(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const c=s[l],f=c.transform,p=e.data.field(c.field);r.set(c.field,Gw(f,p,i[l]))}return r}function Tv(s,e,i){const r=new Map;for(const l of s){const c=l.transform,f=i.data.field(l.field);r.set(l.field,Fw(c,f,e))}return r}class ET extends lh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $w extends lh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,i,r,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&Yw(c,e,r[l])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=Nl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=Nl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=dT();return this.mutations.forEach((l=>{const c=e.get(l.key),f=c.overlayedDocument;let p=this.applyToLocalView(f,c.mutatedFields);p=i.has(l.key)?null:p;const y=vT(f,p);y!==null&&r.set(l.key,y),f.isValidDocument()||f.convertToNoDocument(Ce.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),qe())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((i,r)=>_v(i,r)))&&to(this.baseMutations,e.baseMutations,((i,r)=>_v(i,r)))}}class Nm{constructor(e,i,r,l){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(e,i,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return jw})();const c=e.mutations;for(let f=0;f<c.length;f++)l=l.insert(c[f].key,r[f].version);return new Nm(e,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Fe;function eI(s){switch(s){case ne.OK:return Ae(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ae(15467,{code:s})}}function ST(s){if(s===void 0)return nr("GRPC error has no .code"),ne.UNKNOWN;switch(s){case xt.OK:return ne.OK;case xt.CANCELLED:return ne.CANCELLED;case xt.UNKNOWN:return ne.UNKNOWN;case xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case xt.INTERNAL:return ne.INTERNAL;case xt.UNAVAILABLE:return ne.UNAVAILABLE;case xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case xt.NOT_FOUND:return ne.NOT_FOUND;case xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case xt.ABORTED:return ne.ABORTED;case xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case xt.DATA_LOSS:return ne.DATA_LOSS;default:return Ae(39323,{code:s})}}(Fe=xt||(xt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new Yr([4294967295,4294967295],0);function Ev(s){const e=tI().encode(s),i=new L0;return i.update(e),new Uint8Array(i.digest())}function Sv(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Yr([i,r],0),new Yr([l,c],0)]}class Dm{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new El(`Invalid padding: ${i}`);if(r<0)throw new El(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new El(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=Yr.fromNumber(this.ge)}ye(e,i,r){let l=e.add(i.multiply(Yr.fromNumber(r)));return l.compare(nI)===1&&(l=new Yr([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=Ev(e),[r,l]=Sv(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);if(!this.we(f))return!1}return!0}static create(e,i,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Dm(c,l,i);return r.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const i=Ev(e),[r,l]=Sv(i);for(let c=0;c<this.hashCount;c++){const f=this.ye(r,l,c);this.Se(f)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,i,r,l,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const l=new Map;return l.set(e,Yl.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new uh(Ce.min(),l,new yt(Be),ir(),qe())}}class Yl{constructor(e,i,r,l,c){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new Yl(r,i,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,i,r,l){this.be=e,this.removedTargetIds=i,this.key=r,this.De=l}}class bT{constructor(e,i){this.targetId=e,this.Ce=i}}class AT{constructor(e,i,r=en.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=l}}class bv{constructor(){this.ve=0,this.Fe=Av(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),i=qe(),r=qe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:Ae(38017,{changeType:c})}})),new Yl(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=Av()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ir(),this.Je=yc(),this.He=yc(),this.Ye=new yt(Be)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,r=e.Ce.count,l=this.ot(i);if(l){const c=l.target;if(Gd(c))if(r===0){const f=new Te(c.path);this.et(i,f,ln.newNoDocument(f,Ce.min()))}else Xe(r===1,20013,{expectedCount:r});else{const f=this._t(i);if(f!==r){const p=this.ut(e),y=p?this.ct(p,e,f):1;if(y!==0){this.it(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,g)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=i;let f,p;try{f=Jr(r).toUint8Array()}catch(y){if(y instanceof X0)return eo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new Dm(f,l,c)}catch(y){return eo(y instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((c=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(i,c,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((c,f)=>{const p=this.ot(f);if(p){if(c.current&&Gd(p.target)){const y=new Te(p.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,ln.newNoDocument(y,e))}c.Be&&(i.set(f,c.ke()),c.qe())}}));let r=qe();this.He.forEach(((c,f)=>{let p=!0;f.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const l=new uh(e,i,this.Ye,this.je,r);return this.je=ir(),this.Je=yc(),this.He=yc(),this.Ye=new yt(Be),l}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new bv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Lt(Be),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Lt(Be),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||de("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new bv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function yc(){return new yt(Te.comparator)}function Av(){return new yt(Te.comparator)}const rI={asc:"ASCENDING",desc:"DESCENDING"},sI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aI={and:"AND",or:"OR"};class oI{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Kd(s,e){return s.useProto3Json||nh(e)?e:{value:e}}function Qc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lI(s,e){return Qc(s,e.toTimestamp())}function bi(s){return Xe(!!s,49232),Ce.fromTimestamp((function(i){const r=Zr(i);return new ht(r.seconds,r.nanos)})(s))}function xm(s,e){return Yd(s,e).canonicalString()}function Yd(s,e){const i=(function(l){return new gt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function wT(s){const e=gt.fromString(s);return Xe(xT(e),10190,{key:e.toString()}),e}function Xd(s,e){return xm(s.databaseId,e.path)}function Id(s,e){const i=wT(e);if(i.get(1)!==s.databaseId.projectId)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ve(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Te(CT(i))}function IT(s,e){return xm(s.databaseId,e)}function uI(s){const e=wT(s);return e.length===4?gt.emptyPath():CT(e)}function $d(s){return new gt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function CT(s){return Xe(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Rv(s,e,i){return{name:Xd(s,e),fields:i.value.mapValue.fields}}function cI(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Ae(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(g,S){return g.useProto3Json?(Xe(S===void 0||typeof S=="string",58123),en.fromBase64String(S||"")):(Xe(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),en.fromUint8Array(S||new Uint8Array))})(s,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(g){const S=g.code===void 0?ne.UNKNOWN:ST(g.code);return new ve(S,g.message||"")})(f);i=new AT(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Id(s,r.document.name),c=bi(r.document.updateTime),f=r.document.createTime?bi(r.document.createTime):Ce.min(),p=new Bn({mapValue:{fields:r.document.fields}}),y=ln.newFoundDocument(l,c,f,p),g=r.targetIds||[],S=r.removedTargetIds||[];i=new Nc(g,S,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Id(s,r.document),c=r.readTime?bi(r.readTime):Ce.min(),f=ln.newNoDocument(l,c),p=r.removedTargetIds||[];i=new Nc([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Id(s,r.document),c=r.removedTargetIds||[];i=new Nc([],c,l,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,f=new Ww(l,c),p=r.targetId;i=new bT(p,f)}}return i}function hI(s,e){let i;if(e instanceof Kl)i={update:Rv(s,e.key,e.value)};else if(e instanceof ET)i={delete:Xd(s,e.key)};else if(e instanceof ea)i={update:Rv(s,e.key,e.data),updateMask:TI(e.fieldMask)};else{if(!(e instanceof $w))return Ae(16599,{Vt:e.type});i={verify:Xd(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(c,f){const p=f.transform;if(p instanceof Fc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ll)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof jl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gc)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw Ae(20930,{transform:f.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:lI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ae(27497)})(s,e.precondition)),i}function fI(s,e){return s&&s.length>0?(Xe(e!==void 0,14353),s.map((i=>(function(l,c){let f=l.updateTime?bi(l.updateTime):bi(c);return f.isEqual(Ce.min())&&(f=bi(c)),new Kw(f,l.transformResults||[])})(i,e)))):[]}function dI(s,e){return{documents:[IT(s,e.path)]}}function mI(s,e){const i={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=IT(s,l);const c=(function(g){if(g.length!==0)return DT(Ci.create(g,"and"))})(e.filters);c&&(i.structuredQuery.where=c);const f=(function(g){if(g.length!==0)return g.map((S=>(function(M){return{field:Qa(M.field),direction:yI(M.dir)}})(S)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const p=Kd(s,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:i,parent:l}}function pI(s){let e=uI(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){Xe(r===1,65062);const S=i.from[0];S.allDescendants?l=S.collectionId:e=e.child(S.collectionId)}let c=[];i.where&&(c=(function(R){const M=NT(R);return M instanceof Ci&&sT(M)?M.getFilters():[M]})(i.where));let f=[];i.orderBy&&(f=(function(R){return R.map((M=>(function(J){return new Hc(Ka(J.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(J.direction))})(M)))})(i.orderBy));let p=null;i.limit&&(p=(function(R){let M;return M=typeof R=="object"?R.value:R,nh(M)?null:M})(i.limit));let y=null;i.startAt&&(y=(function(R){const M=!!R.before,z=R.values||[];return new qc(z,M)})(i.startAt));let g=null;return i.endAt&&(g=(function(R){const M=!R.before,z=R.values||[];return new qc(z,M)})(i.endAt)),Mw(e,l,f,c,p,"F",y,g)}function gI(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function NT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Ka(i.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Ka(i.unaryFilter.field);return Ut.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Ka(i.unaryFilter.field);return Ut.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ka(i.unaryFilter.field);return Ut.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(s):s.fieldFilter!==void 0?(function(i){return Ut.create(Ka(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Ci.create(i.compositeFilter.filters.map((r=>NT(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(i.compositeFilter.op))})(s):Ae(30097,{filter:s})}function yI(s){return rI[s]}function _I(s){return sI[s]}function vI(s){return aI[s]}function Qa(s){return{fieldPath:s.canonicalString()}}function Ka(s){return Wt.fromServerFormat(s.fieldPath)}function DT(s){return s instanceof Ut?(function(i){if(i.op==="=="){if(fv(i.value))return{unaryFilter:{field:Qa(i.field),op:"IS_NAN"}};if(hv(i.value))return{unaryFilter:{field:Qa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(fv(i.value))return{unaryFilter:{field:Qa(i.field),op:"IS_NOT_NAN"}};if(hv(i.value))return{unaryFilter:{field:Qa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qa(i.field),op:_I(i.op),value:i.value}}})(s):s instanceof Ci?(function(i){const r=i.getFilters().map((l=>DT(l)));return r.length===1?r[0]:{compositeFilter:{op:vI(i.op),filters:r}}})(s):Ae(54877,{filter:s})}function TI(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function xT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,i,r,l,c=Ce.min(),f=Ce.min(),p=en.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.yt=e}}function SI(s){const e=pI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.Cn=new AI}addToCollectionParentIndex(e,i){return this.Cn.add(i),Z.resolve()}getCollectionParents(e,i){return Z.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return Z.resolve()}deleteFieldIndex(e,i){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,i){return Z.resolve()}getDocumentsMatchingTarget(e,i){return Z.resolve(null)}getIndexType(e,i){return Z.resolve(0)}getFieldIndexes(e,i){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,i){return Z.resolve($r.min())}getMinOffsetFromCollectionGroup(e,i){return Z.resolve($r.min())}updateCollectionGroup(e,i,r){return Z.resolve()}updateIndexEntries(e,i){return Z.resolve()}}class AI{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i]||new Lt(gt.comparator),c=!l.has(r);return this.index[i]=l.add(r),c}has(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(e){return(this.index[e]||new Lt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OT=41943040;class vn{static withCacheSize(e){return new vn(e,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn.DEFAULT_COLLECTION_PERCENTILE=10,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vn.DEFAULT=new vn(OT,vn.DEFAULT_COLLECTION_PERCENTILE,vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vn.DISABLED=new vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LruGarbageCollector",RI=1048576;function Cv([s,e],[i,r]){const l=Be(s,i);return l===0?Be(e,r):l}class wI{constructor(e){this.Ir=e,this.buffer=new Lt(Cv),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();Cv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class II{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){ho(i)?de(Iv,"Ignoring IndexedDB error during garbage collection: ",i):await co(i)}await this.Vr(3e5)}))}}class CI{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return Z.resolve(th.ce);const r=new wI(i);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(wv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,l,c,f,p,y,g;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,f=Date.now(),this.nthSequenceNumber(e,l)))).next((R=>(r=R,p=Date.now(),this.removeTargets(e,r,i)))).next((R=>(c=R,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((R=>(g=Date.now(),Fa()<=ze.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${l} in `+(p-f)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${R} documents in `+(g-y)+`ms
Total Duration: ${g-S}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function NI(s,e){return new CI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.changes=new Ws((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?Z.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,i,r,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(r!==null&&Nl(r.mutation,l,ti.empty(),ht.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,qe()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=qe()){const l=Fs();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,r).next((c=>{let f=Tl();return c.forEach(((p,y)=>{f=f.insert(p,y.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const r=Fs();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,qe())))}populateOverlays(e,i,r){const l=[];return r.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((f,p)=>{i.set(f,p)}))}))}computeViews(e,i,r,l){let c=ir();const f=Cl(),p=(function(){return Cl()})();return i.forEach(((y,g)=>{const S=r.get(g.key);l.has(g.key)&&(S===void 0||S.mutation instanceof ea)?c=c.insert(g.key,g):S!==void 0?(f.set(g.key,S.mutation.getFieldMask()),Nl(S.mutation,g,S.mutation.getFieldMask(),ht.now())):f.set(g.key,ti.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,S)=>f.set(g,S))),i.forEach(((g,S)=>p.set(g,new xI(S,f.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,i){const r=Cl();let l=new yt(((f,p)=>f-p)),c=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const p of f)p.keys().forEach((y=>{const g=i.get(y);if(g===null)return;let S=r.get(y)||ti.empty();S=p.applyToLocalView(g,S),r.set(y,S);const R=(l.get(p.batchId)||qe()).add(y);l=l.insert(p.batchId,R)}))})).next((()=>{const f=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,S=y.value,R=dT();S.forEach((M=>{if(!c.has(M)){const z=vT(i.get(M),r.get(M));z!==null&&R.set(M,z),c=c.add(M)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,R))}return Z.waitFor(f)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,l){return(function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):Vw(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,l):this.getDocumentsMatchingCollectionQuery(e,i,r,l)}getNextDocuments(e,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,l).next((c=>{const f=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,l-c.size):Z.resolve(Fs());let p=Vl,y=c;return f.next((g=>Z.forEach(g,((S,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(S)?Z.resolve():this.remoteDocumentCache.getEntry(e,S).next((M=>{y=y.insert(S,M)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,qe()))).next((S=>({batchId:p,changes:fT(S)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Te(i)).next((r=>{let l=Tl();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,l){const c=i.collectionGroup;let f=Tl();return this.indexManager.getCollectionParents(e,c).next((p=>Z.forEach(p,(y=>{const g=(function(R,M){return new rh(M,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(i,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((S=>{S.forEach(((R,M)=>{f=f.insert(R,M)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,c,l)))).next((f=>{c.forEach(((y,g)=>{const S=g.getKey();f.get(S)===null&&(f=f.insert(S,ln.newInvalidDocument(S)))}));let p=Tl();return f.forEach(((y,g)=>{const S=c.get(y);S!==void 0&&Nl(S.mutation,g,ti.empty(),ht.now()),ah(i,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return Z.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:bi(l.createTime)}})(i)),Z.resolve()}getNamedQuery(e,i){return Z.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:SI(l.bundledQuery),readTime:bi(l.readTime)}})(i)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.overlays=new yt(Te.comparator),this.qr=new Map}getOverlay(e,i){return Z.resolve(this.overlays.get(i))}getOverlays(e,i){const r=Fs();return Z.forEach(i,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((l,c)=>{this.St(e,i,c)})),Z.resolve()}removeOverlaysForBatchId(e,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,i,r){const l=Fs(),c=i.length+1,f=new Te(i.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return Z.resolve(l)}getOverlaysForCollectionGroup(e,i,r,l){let c=new yt(((g,S)=>g-S));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let S=c.get(g.largestBatchId);S===null&&(S=Fs(),c=c.insert(g.largestBatchId,S)),S.set(g.getKey(),g)}}const p=Fs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,S)=>p.set(g,S))),!(p.size()>=l)););return Z.resolve(p)}St(e,i,r){const l=this.overlays.get(r.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new Jw(i,r));let c=this.qr.get(i);c===void 0&&(c=qe(),this.qr.set(i,c)),this.qr.set(i,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.Qr=new Lt(Ft.$r),this.Ur=new Lt(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Ft(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Ft(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new Te(new gt([])),r=new Ft(i,e),l=new Ft(i,e+1),c=[];return this.Ur.forEachInRange([r,l],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Te(new gt([])),r=new Ft(i,e),l=new Ft(i,e+1);let c=qe();return this.Ur.forEachInRange([r,l],(f=>{c=c.add(f.key)})),c}containsKey(e){const i=new Ft(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Te.comparator(e.key,i.key)||Be(e.Yr,i.Yr)}static Kr(e,i){return Be(e.Yr,i.Yr)||Te.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Lt(Ft.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new Zw(c,i,r,l);this.mutationQueue.push(f);for(const p of l)this.Zr=this.Zr.add(new Ft(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return Z.resolve(f)}lookupMutationBatch(e,i){return Z.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,l=this.ei(r),c=l<0?0:l;return Z.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Sm:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Ft(i,0),l=new Ft(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(f=>{const p=this.Xr(f.Yr);c.push(p)})),Z.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new Lt(Be);return i.forEach((l=>{const c=new Ft(l,0),f=new Ft(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(p=>{r=r.add(p.Yr)}))})),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,l=r.length+1;let c=r;Te.isDocumentKey(c)||(c=c.child(""));const f=new Ft(new Te(c),0);let p=new Lt(Be);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),f),Z.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){Xe(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(i.mutations,(l=>{const c=new Ft(l.key,i.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Ft(i,0),l=this.Zr.firstAfterOrEqual(r);return Z.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.ri=e,this.docs=(function(){return new yt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,l=this.docs.get(r),c=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return Z.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(i))}getEntries(e,i){let r=ir();return i.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():ln.newInvalidDocument(l))})),Z.resolve(r)}getDocumentsMatchingQuery(e,i,r,l){let c=ir();const f=i.path,p=new Te(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:S}}=y.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||hw(cw(S),r)<=0||(l.has(S.key)||ah(i,S))&&(c=c.insert(S.key,S.mutableCopy()))}return Z.resolve(c)}getAllFromCollectionGroup(e,i,r,l){Ae(9500)}ii(e,i){return Z.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new LI(this)}getSize(e){return Z.resolve(this.size)}}class LI extends DI{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),Z.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.persistence=e,this.si=new Ws((i=>Rm(i)),wm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Om,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,i){return this.si.forEach(((r,l)=>i(l))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),Z.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new ro(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,Z.resolve()}updateTargetData(e,i){return this.Pr(i),Z.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,i,r){let l=0;const c=[];return this.si.forEach(((f,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),Z.waitFor(c).next((()=>l))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return Z.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),Z.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((f=>{c.push(l.markPotentiallyOrphaned(e,f))})),Z.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),Z.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return Z.resolve(r)}containsKey(e,i){return Z.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,i){this.ui={},this.overlays={},this.ci=new th(0),this.li=!1,this.li=!0,this.hi=new PI,this.referenceDelegate=e(this),this.Pi=new jI(this),this.indexManager=new bI,this.remoteDocumentCache=(function(l){return new UI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new EI(i),this.Ii=new MI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new VI,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new kI(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){de("MemoryPersistence","Starting transaction:",e);const l=new zI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,i){return Z.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class zI extends dw{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Ri=new Om,this.Vi=null}static mi(e){return new Mm(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),Z.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,(r=>{const l=Te.fromPath(r);return this.gi(e,l).next((c=>{c||i.removeEntry(l,Ce.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return Z.or([()=>Z.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class Kc{constructor(e,i){this.persistence=e,this.pi=new Ws((r=>gw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=NI(this,i)}static mi(e,i){return new Kc(e,i)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((l=>r+l))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return Z.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?Z.resolve():i(l)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((p=>{p||(r++,c.removeEntry(f,Ce.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=wc(e.data.value)),i}br(e,i,r){return Z.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return Z.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,i,r,l){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=l}static As(e,i){let r=qe(),l=qe();for(const c of i.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Vm(e,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Db()?8:mw(un())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,l){const c={result:null};return this.ys(e,i).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,i,l,r).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new BI;return this.Ss(e,i,f).next((p=>{if(c.result=p,this.Vs)return this.bs(e,i,f,p.size)}))})).next((()=>c.result))}bs(e,i,r,l){return r.documentReadCount<this.fs?(Fa()<=ze.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Ga(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Fa()<=ze.DEBUG&&de("QueryEngine","Query:",Ga(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Fa()<=ze.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Ga(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Si(i))):Z.resolve())}ys(e,i){if(gv(i))return Z.resolve(null);let r=Si(i);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Qd(i,null,"F"),r=Si(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const f=qe(...c);return this.ps.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(i,p);return this.Cs(i,g,f,y.readTime)?this.ys(e,Qd(i,null,"F")):this.vs(e,g,i,y)}))))})))))}ws(e,i,r,l){return gv(i)||l.isEqual(Ce.min())?Z.resolve(null):this.ps.getDocuments(e,r).next((c=>{const f=this.Ds(i,c);return this.Cs(i,f,r,l)?Z.resolve(null):(Fa()<=ze.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ga(i)),this.vs(e,f,i,uw(l,Vl)).next((p=>p)))}))}Ds(e,i){let r=new Lt(cT(e));return i.forEach(((l,c)=>{ah(e,c)&&(r=r.add(c))})),r}Cs(e,i,r,l){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,i,r){return Fa()<=ze.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Ga(i)),this.ps.getDocumentsMatchingQuery(e,i,$r.min(),r)}vs(e,i,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(i.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LocalStore",HI=3e8;class FI{constructor(e,i,r,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new yt(Be),this.xs=new Ws((c=>Rm(c)),wm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function GI(s,e,i,r){return new FI(s,e,i,r)}async function VT(s,e){const i=De(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((c=>{const f=[],p=[];let y=qe();for(const g of l){f.push(g.batchId);for(const S of g.mutations)y=y.add(S.key)}for(const g of c){p.push(g.batchId);for(const S of g.mutations)y=y.add(S.key)}return i.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:p})))}))}))}function QI(s,e){const i=De(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,S){const R=g.batch,M=R.keys();let z=Z.resolve();return M.forEach((J=>{z=z.next((()=>S.getEntry(y,J))).next((W=>{const X=g.docVersions.get(J);Xe(X!==null,48541),W.version.compareTo(X)<0&&(R.applyToRemoteDocument(W,g),W.isValidDocument()&&(W.setReadTime(g.commitVersion),S.addEntry(W)))}))})),z.next((()=>p.mutationQueue.removeMutationBatch(y,R)))})(i,r,e,c).next((()=>c.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=qe();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function PT(s){const e=De(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function KI(s,e){const i=De(s),r=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];e.targetChanges.forEach(((S,R)=>{const M=l.get(R);if(!M)return;p.push(i.Pi.removeMatchingKeys(c,S.removedDocuments,R).next((()=>i.Pi.addMatchingKeys(c,S.addedDocuments,R))));let z=M.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?z=z.withResumeToken(en.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):S.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(S.resumeToken,r)),l=l.insert(R,z),(function(W,X,Q){return W.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=HI?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(M,z,S)&&p.push(i.Pi.updateTargetData(c,z))}));let y=ir(),g=qe();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(c,S))})),p.push(YI(c,f,e.documentUpdates).next((S=>{y=S.ks,g=S.qs}))),!r.isEqual(Ce.min())){const S=i.Pi.getLastRemoteSnapshotVersion(c).next((R=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(S)}return Z.waitFor(p).next((()=>f.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(i.Ms=l,c)))}function YI(s,e,i){let r=qe(),l=qe();return i.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let f=ir();return i.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(Ce.min())?(e.removeEntry(p,y.readTime),f=f.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),f=f.insert(p,y)):de(Pm,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:f,qs:l}}))}function XI(s,e){const i=De(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $I(s,e){const i=De(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,e).next((c=>c?(l=c,Z.resolve(l)):i.Pi.allocateTargetId(r).next((f=>(l=new Fr(e,f,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function Zd(s,e,i){const r=De(s),l=r.Ms.get(e),c=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",c,(f=>r.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!ho(f))throw f;de(Pm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Nv(s,e,i){const r=De(s);let l=Ce.min(),c=qe();return r.persistence.runTransaction("Execute query","readwrite",(f=>(function(y,g,S){const R=De(y),M=R.xs.get(S);return M!==void 0?Z.resolve(R.Ms.get(M)):R.Pi.getTargetData(g,S)})(r,f,Si(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(f,e,i?l:Ce.min(),i?c:qe()))).next((p=>(ZI(r,kw(e),p),{documents:p,Qs:c})))))}function ZI(s,e,i){let r=s.Os.get(e)||Ce.min();i.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class Dv{constructor(){this.activeTargetIds=qw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JI{constructor(){this.Mo=new Dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Dv,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(xv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(xv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=null;function Jd(){return _c===null?_c=(function(){return 268435456+Math.round(2147483648*Math.random())})():_c++,"0x"+_c.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="RestConnection",eC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===zc?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,i,r,l,c){const f=Jd(),p=this.zo(e,i.toUriEncodedString());de(Cd,`Sending RPC '${e}' ${f}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:g}=new URL(p),S=ao(g);return this.Jo(e,p,y,r,S).then((R=>(de(Cd,`Received RPC '${e}' ${f}: `,R),R)),(R=>{throw eo(Cd,`RPC '${e}' ${f} failed with error: `,R,"url: ",p,"request:",r),R}))}Ho(e,i,r,l,c,f){return this.Go(e,i,r,l,c)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,i){const r=eC[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class iC extends tC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,l,c){const f=Jd();return new Promise(((p,y)=>{const g=new j0;g.setWithCredentials(!0),g.listenOnce(z0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Rc.NO_ERROR:const R=g.getResponseJson();de(an,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(R)),p(R);break;case Rc.TIMEOUT:de(an,`RPC '${e}' ${f} timed out`),y(new ve(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Rc.HTTP_ERROR:const M=g.getStatus();if(de(an,`RPC '${e}' ${f} failed with status:`,M,"response text:",g.getResponseText()),M>0){let z=g.getResponseJson();Array.isArray(z)&&(z=z[0]);const J=z?.error;if(J&&J.status&&J.message){const W=(function(Q){const le=Q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(le)>=0?le:ne.UNKNOWN})(J.status);y(new ve(W,J.message))}else y(new ve(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new ve(ne.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{de(an,`RPC '${e}' ${f} completed.`)}}));const S=JSON.stringify(l);de(an,`RPC '${e}' ${f} sending request:`,l),g.send(i,"POST",S,r,15)}))}T_(e,i,r){const l=Jd(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=H0(),p=q0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const S=c.join("");de(an,`Creating RPC '${e}' stream ${l}: ${S}`,y);const R=f.createWebChannel(S,y);this.I_(R);let M=!1,z=!1;const J=new nC({Yo:X=>{z?de(an,`Not sending because RPC '${e}' stream ${l} is closed:`,X):(M||(de(an,`Opening RPC '${e}' stream ${l} transport.`),R.open(),M=!0),de(an,`RPC '${e}' stream ${l} sending:`,X),R.send(X))},Zo:()=>R.close()}),W=(X,Q,le)=>{X.listen(Q,(ue=>{try{le(ue)}catch(we){setTimeout((()=>{throw we}),0)}}))};return W(R,vl.EventType.OPEN,(()=>{z||(de(an,`RPC '${e}' stream ${l} transport opened.`),J.o_())})),W(R,vl.EventType.CLOSE,(()=>{z||(z=!0,de(an,`RPC '${e}' stream ${l} transport closed`),J.a_(),this.E_(R))})),W(R,vl.EventType.ERROR,(X=>{z||(z=!0,eo(an,`RPC '${e}' stream ${l} transport errored. Name:`,X.name,"Message:",X.message),J.a_(new ve(ne.UNAVAILABLE,"The operation could not be completed")))})),W(R,vl.EventType.MESSAGE,(X=>{if(!z){const Q=X.data[0];Xe(!!Q,16349);const le=Q,ue=le?.error||le[0]?.error;if(ue){de(an,`RPC '${e}' stream ${l} received error:`,ue);const we=ue.status;let he=(function(A){const C=xt[A];if(C!==void 0)return ST(C)})(we),se=ue.message;he===void 0&&(he=ne.INTERNAL,se="Unknown error status: "+we+" with message "+ue.message),z=!0,J.a_(new ve(he,se)),R.close()}else de(an,`RPC '${e}' stream ${l} received:`,Q),J.u_(Q)}})),W(p,B0.STAT_EVENT,(X=>{X.stat===zd.PROXY?de(an,`RPC '${e}' stream ${l} detected buffering proxy`):X.stat===zd.NOPROXY&&de(an,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{J.__()}),0),J}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(s){return new oI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,i,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&de("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="PersistentStream";class UT{constructor(e,i,r,l,c,f,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ne.RESOURCE_EXHAUSTED?(nr(i.toString()),nr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{e((()=>{const l=new ve(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(Mv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(de(Mv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rC extends UT{constructor(e,i,r,l,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,f),this.serializer=c}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=cI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return Ce.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Ce.min():f.readTime?bi(f.readTime):Ce.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=$d(this.serializer),i.addTarget=(function(c,f){let p;const y=f.target;if(p=Gd(y)?{documents:dI(c,y)}:{query:mI(c,y).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=RT(c,f.resumeToken);const g=Kd(c,f.expectedCount);g!==null&&(p.expectedCount=g)}else if(f.snapshotVersion.compareTo(Ce.min())>0){p.readTime=Qc(c,f.snapshotVersion.toTimestamp());const g=Kd(c,f.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=gI(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=$d(this.serializer),i.removeTarget=e,this.q_(i)}}class sC extends UT{constructor(e,i,r,l,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=fI(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=$d(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>hI(this.serializer,r)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class oC extends aC{constructor(e,i,r,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,Yd(i,r),l,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ve(ne.UNKNOWN,c.toString())}))}Ho(e,i,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.Ho(e,Yd(i,r),l,f,p,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ve(ne.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lC{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nr(i),this.aa=!1):de("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class uC{constructor(e,i,r,l,c){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{r.enqueueAndForget((async()=>{ta(this)&&(de(Zs,"Restarting streams for network reachability change."),await(async function(y){const g=De(y);g.Ea.add(4),await Xl(g),g.Ra.set("Unknown"),g.Ea.delete(4),await hh(g)})(this))}))})),this.Ra=new lC(r,l)}}async function hh(s){if(ta(s))for(const e of s.da)await e(!0)}async function Xl(s){for(const e of s.da)await e(!1)}function LT(s,e){const i=De(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),jm(i)?Lm(i):fo(i).O_()&&Um(i,e))}function km(s,e){const i=De(s),r=fo(i);i.Ia.delete(e),r.O_()&&jT(i,e),i.Ia.size===0&&(r.O_()?r.L_():ta(i)&&i.Ra.set("Unknown"))}function Um(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}fo(s).Y_(e)}function jT(s,e){s.Va.Ue(e),fo(s).Z_(e)}function Lm(s){s.Va=new iI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),fo(s).start(),s.Ra.ua()}function jm(s){return ta(s)&&!fo(s).x_()&&s.Ia.size>0}function ta(s){return De(s).Ea.size===0}function zT(s){s.Va=void 0}async function cC(s){s.Ra.set("Online")}async function hC(s){s.Ia.forEach(((e,i)=>{Um(s,e)}))}async function fC(s,e){zT(s),jm(s)?(s.Ra.ha(e),Lm(s)):s.Ra.set("Unknown")}async function dC(s,e,i){if(s.Ra.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await(async function(l,c){const f=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,f),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){de(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yc(s,r)}else if(e instanceof Nc?s.Va.Ze(e):e instanceof bT?s.Va.st(e):s.Va.tt(e),!i.isEqual(Ce.min()))try{const r=await PT(s.localStore);i.compareTo(r)>=0&&await(function(c,f){const p=c.Va.Tt(f);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const S=c.Ia.get(g);S&&c.Ia.set(g,S.withResumeToken(y.resumeToken,f))}})),p.targetMismatches.forEach(((y,g)=>{const S=c.Ia.get(y);if(!S)return;c.Ia.set(y,S.withResumeToken(en.EMPTY_BYTE_STRING,S.snapshotVersion)),jT(c,y);const R=new Fr(S.target,y,g,S.sequenceNumber);Um(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){de(Zs,"Failed to raise snapshot:",r),await Yc(s,r)}}async function Yc(s,e,i){if(!ho(e))throw e;s.Ea.add(1),await Xl(s),s.Ra.set("Offline"),i||(i=()=>PT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{de(Zs,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await hh(s)}))}function BT(s,e){return e().catch((i=>Yc(s,i,e)))}async function fh(s){const e=De(s),i=es(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sm;for(;mC(e);)try{const l=await XI(e.localStore,r);if(l===null){e.Ta.length===0&&i.L_();break}r=l.batchId,pC(e,l)}catch(l){await Yc(e,l)}qT(e)&&HT(e)}function mC(s){return ta(s)&&s.Ta.length<10}function pC(s,e){s.Ta.push(e);const i=es(s);i.O_()&&i.X_&&i.ea(e.mutations)}function qT(s){return ta(s)&&!es(s).x_()&&s.Ta.length>0}function HT(s){es(s).start()}async function gC(s){es(s).ra()}async function yC(s){const e=es(s);for(const i of s.Ta)e.ea(i.mutations)}async function _C(s,e,i){const r=s.Ta.shift(),l=Nm.from(r,e,i);await BT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await fh(s)}async function vC(s,e){e&&es(s).X_&&await(async function(r,l){if((function(f){return eI(f)&&f!==ne.ABORTED})(l.code)){const c=r.Ta.shift();es(r).B_(),await BT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await fh(r)}})(s,e),qT(s)&&HT(s)}async function Vv(s,e){const i=De(s);i.asyncQueue.verifyOperationInProgress(),de(Zs,"RemoteStore received new credentials");const r=ta(i);i.Ea.add(3),await Xl(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await hh(i)}async function TC(s,e){const i=De(s);e?(i.Ea.delete(2),await hh(i)):e||(i.Ea.add(2),await Xl(i),i.Ra.set("Unknown"))}function fo(s){return s.ma||(s.ma=(function(i,r,l){const c=De(i);return c.sa(),new rC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:cC.bind(null,s),t_:hC.bind(null,s),r_:fC.bind(null,s),H_:dC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),jm(s)?Lm(s):s.Ra.set("Unknown")):(await s.ma.stop(),zT(s))}))),s.ma}function es(s){return s.fa||(s.fa=(function(i,r,l){const c=De(i);return c.sa(),new sC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:gC.bind(null,s),r_:vC.bind(null,s),ta:yC.bind(null,s),na:_C.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await fh(s)):(await s.fa.stop(),s.Ta.length>0&&(de(Zs,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,i,r,l,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,l,c){const f=Date.now()+r,p=new zm(e,i,f,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(s,e){if(nr("AsyncQueue",`${e}: ${s}`),ho(s))return new ve(ne.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||Te.comparator(i.key,r.key):(i,r)=>Te.comparator(i.key,r.key),this.keyedMap=Tl(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.ga=new yt(Te.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class so{constructor(e,i,r,l,c,f,p,y,g){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,i,r,l,c){const f=[];return i.forEach((p=>{f.push({type:0,doc:p})})),new so(e,i,Za.emptySet(i),f,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class SC{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=De(i),c=l.queries;l.queries=kv(),c.forEach(((f,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new ve(ne.ABORTED,"Firestore shutting down"))}}function kv(){return new Ws((s=>uT(s)),sh)}async function bC(s,e){const i=De(s);let r=3;const l=e.query;let c=i.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new EC,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const p=Bm(f,`Initialization of query '${Ga(e.query)}' failed`);return void e.onError(p)}i.queries.set(l,c),c.Sa.push(e),e.va(i.onlineState),c.wa&&e.Fa(c.wa)&&qm(i)}async function AC(s,e){const i=De(s),r=e.query;let l=3;const c=i.queries.get(r);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function RC(s,e){const i=De(s);let r=!1;for(const l of e){const c=l.query,f=i.queries.get(c);if(f){for(const p of f.Sa)p.Fa(l)&&(r=!0);f.wa=l}}r&&qm(i)}function wC(s,e,i){const r=De(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(i);r.queries.delete(e)}function qm(s){s.Ca.forEach((e=>{e.next()}))}var Wd,Uv;(Uv=Wd||(Wd={})).Ma="default",Uv.Cache="cache";class IC{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new so(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.key=e}}class GT{constructor(e){this.key=e}}class CC{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=cT(e),this.tu=new Za(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new Pv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,f=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((S,R)=>{const M=l.get(S),z=ah(this.query,R)?R:null,J=!!M&&this.mutatedKeys.has(M.key),W=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let X=!1;M&&z?M.data.isEqual(z.data)?J!==W&&(r.track({type:3,doc:z}),X=!0):this.su(M,z)||(r.track({type:2,doc:z}),X=!0,(y&&this.eu(z,y)>0||g&&this.eu(z,g)<0)&&(p=!0)):!M&&z?(r.track({type:0,doc:z}),X=!0):M&&!z&&(r.track({type:1,doc:M}),X=!0,(y||g)&&(p=!0)),X&&(z?(f=f.add(z),c=W?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),r.track({type:1,doc:S})}return{tu:f,iu:r,Cs:p,mutatedKeys:c}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((S,R)=>(function(z,J){const W=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:X})}};return W(z)-W(J)})(S.type,R.type)||this.eu(S.doc,R.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,f.length!==0||g?{snapshot:new so(this.query,e.tu,c,f,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Pv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new GT(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new FT(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=qe();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return so.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hm="SyncEngine";class NC{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class DC{constructor(e){this.key=e,this.hu=!1}}class xC{constructor(e,i,r,l,c,f){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ws((p=>uT(p)),sh),this.Iu=new Map,this.Eu=new Set,this.du=new yt(Te.comparator),this.Au=new Map,this.Ru=new Om,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OC(s,e,i=!0){const r=ZT(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await QT(r,e,i,!0),l}async function MC(s,e){const i=ZT(s);await QT(i,e,!0,!1)}async function QT(s,e,i,r){const l=await $I(s.localStore,Si(e)),c=l.targetId,f=s.sharedClientState.addLocalQueryTarget(c,i);let p;return r&&(p=await VC(s,e,c,f==="current",l.resumeToken)),s.isPrimaryClient&&i&&LT(s.remoteStore,l),p}async function VC(s,e,i,r,l){s.pu=(R,M,z)=>(async function(W,X,Q,le){let ue=X.view.ru(Q);ue.Cs&&(ue=await Nv(W.localStore,X.query,!1).then((({documents:N})=>X.view.ru(N,ue))));const we=le&&le.targetChanges.get(X.targetId),he=le&&le.targetMismatches.get(X.targetId)!=null,se=X.view.applyChanges(ue,W.isPrimaryClient,we,he);return jv(W,X.targetId,se.au),se.snapshot})(s,R,M,z);const c=await Nv(s.localStore,e,!0),f=new CC(e,c.Qs),p=f.ru(c.documents),y=Yl.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),g=f.applyChanges(p,s.isPrimaryClient,y);jv(s,i,g.au);const S=new NC(e,i,f);return s.Tu.set(e,S),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),g.snapshot}async function PC(s,e,i){const r=De(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((f=>!sh(f,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Zd(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&km(r.remoteStore,l.targetId),em(r,l.targetId)})).catch(co)):(em(r,l.targetId),await Zd(r.localStore,l.targetId,!0))}async function kC(s,e){const i=De(s),r=i.Tu.get(e),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),km(i.remoteStore,r.targetId))}async function UC(s,e,i){const r=FC(s);try{const l=await(function(f,p){const y=De(f),g=ht.now(),S=p.reduce(((z,J)=>z.add(J.key)),qe());let R,M;return y.persistence.runTransaction("Locally write mutations","readwrite",(z=>{let J=ir(),W=qe();return y.Ns.getEntries(z,S).next((X=>{J=X,J.forEach(((Q,le)=>{le.isValidDocument()||(W=W.add(Q))}))})).next((()=>y.localDocuments.getOverlayedDocuments(z,J))).next((X=>{R=X;const Q=[];for(const le of p){const ue=Xw(le,R.get(le.key).overlayedDocument);ue!=null&&Q.push(new ea(le.key,ue,nT(ue.value.mapValue),Wi.exists(!0)))}return y.mutationQueue.addMutationBatch(z,g,Q,p)})).next((X=>{M=X;const Q=X.applyToLocalDocumentSet(R,W);return y.documentOverlayCache.saveOverlays(z,X.batchId,Q)}))})).then((()=>({batchId:M.batchId,changes:fT(R)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(f,p,y){let g=f.Vu[f.currentUser.toKey()];g||(g=new yt(Be)),g=g.insert(p,y),f.Vu[f.currentUser.toKey()]=g})(r,l.batchId,i),await $l(r,l.changes),await fh(r.remoteStore)}catch(l){const c=Bm(l,"Failed to persist write");i.reject(c)}}async function KT(s,e){const i=De(s);try{const r=await KI(i.localStore,e);e.targetChanges.forEach(((l,c)=>{const f=i.Au.get(c);f&&(Xe(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?Xe(f.hu,14607):l.removedDocuments.size>0&&(Xe(f.hu,42227),f.hu=!1))})),await $l(i,r,e)}catch(r){await co(r)}}function Lv(s,e,i){const r=De(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((c,f)=>{const p=f.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(f,p){const y=De(f);y.onlineState=p;let g=!1;y.queries.forEach(((S,R)=>{for(const M of R.Sa)M.va(p)&&(g=!0)})),g&&qm(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LC(s,e,i){const r=De(s);r.sharedClientState.updateQueryState(e,"rejected",i);const l=r.Au.get(e),c=l&&l.key;if(c){let f=new yt(Te.comparator);f=f.insert(c,ln.newNoDocument(c,Ce.min()));const p=qe().add(c),y=new uh(Ce.min(),new Map,new yt(Be),f,p);await KT(r,y),r.du=r.du.remove(c),r.Au.delete(e),Fm(r)}else await Zd(r.localStore,e,!1).then((()=>em(r,e,i))).catch(co)}async function jC(s,e){const i=De(s),r=e.batch.batchId;try{const l=await QI(i.localStore,e);XT(i,r,null),YT(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await $l(i,l)}catch(l){await co(l)}}async function zC(s,e,i){const r=De(s);try{const l=await(function(f,p){const y=De(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let S;return y.mutationQueue.lookupMutationBatch(g,p).next((R=>(Xe(R!==null,37113),S=R.keys(),y.mutationQueue.removeMutationBatch(g,R)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,S,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,S))).next((()=>y.localDocuments.getDocuments(g,S)))}))})(r.localStore,e);XT(r,e,i),YT(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await $l(r,l)}catch(l){await co(l)}}function YT(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function XT(s,e,i){const r=De(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(i?c.reject(i):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function em(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||$T(s,r)}))}function $T(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(km(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),Fm(s))}function jv(s,e,i){for(const r of i)r instanceof FT?(s.Ru.addReference(r.key,e),BC(s,r)):r instanceof GT?(de(Hm,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||$T(s,r.key)):Ae(19791,{wu:r})}function BC(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(de(Hm,"New document in limbo: "+i),s.Eu.add(r),Fm(s))}function Fm(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new Te(gt.fromString(e)),r=s.fu.next();s.Au.set(r,new DC(i)),s.du=s.du.insert(i,r),LT(s.remoteStore,new Fr(Si(Im(i.path)),r,"TargetPurposeLimboResolution",th.ce))}}async function $l(s,e,i){const r=De(s),l=[],c=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{f.push(r.pu(y,e,i).then((g=>{if((g||i)&&r.isPrimaryClient){const S=g?!g.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(g){l.push(g);const S=Vm.As(y.targetId,g);c.push(S)}})))})),await Promise.all(f),r.Pu.H_(l),await(async function(y,g){const S=De(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>Z.forEach(g,(M=>Z.forEach(M.Es,(z=>S.persistence.referenceDelegate.addReference(R,M.targetId,z))).next((()=>Z.forEach(M.ds,(z=>S.persistence.referenceDelegate.removeReference(R,M.targetId,z)))))))))}catch(R){if(!ho(R))throw R;de(Pm,"Failed to update sequence numbers: "+R)}for(const R of g){const M=R.targetId;if(!R.fromCache){const z=S.Ms.get(M),J=z.snapshotVersion,W=z.withLastLimboFreeSnapshotVersion(J);S.Ms=S.Ms.insert(M,W)}}})(r.localStore,c))}async function qC(s,e){const i=De(s);if(!i.currentUser.isEqual(e)){de(Hm,"User change. New user:",e.toKey());const r=await VT(i.localStore,e);i.currentUser=e,(function(c,f){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new ve(ne.CANCELLED,f))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $l(i,r.Ls)}}function HC(s,e){const i=De(s),r=i.Au.get(e);if(r&&r.hu)return qe().add(r.key);{let l=qe();const c=i.Iu.get(e);if(!c)return l;for(const f of c){const p=i.Tu.get(f);l=l.unionWith(p.view.nu)}return l}}function ZT(s){const e=De(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LC.bind(null,e),e.Pu.H_=RC.bind(null,e.eventManager),e.Pu.yu=wC.bind(null,e.eventManager),e}function FC(s){const e=De(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zC.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return GI(this.persistence,new qI,e.initialUser,this.serializer)}Cu(e){return new MT(Mm.mi,this.serializer)}Du(e){return new JI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class GC extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){Xe(this.persistence.referenceDelegate instanceof Kc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?vn.withCacheSize(this.cacheSizeBytes):vn.DEFAULT;return new MT((r=>Kc.mi(r,i)),this.serializer)}}class tm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qC.bind(null,this.syncEngine),await TC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new SC})()}createDatastore(e){const i=ch(e.databaseInfo.databaseId),r=(function(c){return new iC(c)})(e.databaseInfo);return(function(c,f,p,y){return new oC(c,f,p,y)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,l,c,f,p){return new uC(r,l,c,f,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>Lv(this.syncEngine,i,0)),(function(){return Ov.v()?new Ov:new WI})())}createSyncEngine(e,i){return(function(l,c,f,p,y,g,S){const R=new xC(l,c,f,p,y,g);return S&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=De(i);de(Zs,"RemoteStore shutting down."),r.Ea.add(5),await Xl(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tm.provider={build:()=>new tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):nr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="FirestoreClient";class KC{constructor(e,i,r,l,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=on.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async f=>{de(ts,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(r,(f=>(de(ts,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=Bm(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Dd(s,e){s.asyncQueue.verifyOperationInProgress(),de(ts,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await VT(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function zv(s,e){s.asyncQueue.verifyOperationInProgress();const i=await YC(s);de(ts,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>Vv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>Vv(e.remoteStore,l))),s._onlineComponents=e}async function YC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){de(ts,"Using user provided OfflineComponentProvider");try{await Dd(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ne.FAILED_PRECONDITION||l.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;eo("Error using user provided cache. Falling back to memory cache: "+i),await Dd(s,new Xc)}}else de(ts,"Using default OfflineComponentProvider"),await Dd(s,new GC(void 0));return s._offlineComponents}async function JT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(de(ts,"Using user provided OnlineComponentProvider"),await zv(s,s._uninitializedComponentsProvider._online)):(de(ts,"Using default OnlineComponentProvider"),await zv(s,new tm))),s._onlineComponents}function XC(s){return JT(s).then((e=>e.syncEngine))}async function $C(s){const e=await JT(s),i=e.eventManager;return i.onListen=OC.bind(null,e.syncEngine),i.onUnlisten=PC.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=MC.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=kC.bind(null,e.syncEngine),i}function ZC(s,e,i={}){const r=new Xr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,f,p,y,g){const S=new QC({next:M=>{S.Nu(),f.enqueueAndForget((()=>AC(c,R)));const z=M.docs.has(p);!z&&M.fromCache?g.reject(new ve(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&M.fromCache&&y&&y.source==="server"?g.reject(new ve(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(M)},error:M=>g.reject(M)}),R=new IC(Im(p.path),S,{includeMetadataChanges:!0,qa:!0});return bC(c,R)})(await $C(s),s.asyncQueue,e,i,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firestore.googleapis.com",qv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eE,this.ssl=qv}else this.host=e.host,this.ssl=e.ssl??qv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RI)throw new ve(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ve(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,i,r,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZR;switch(r.type){case"firstParty":return new tw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ve(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=Bv.get(i);r&&(de("ComponentProvider","Removing Datastore"),Bv.delete(i),r.terminate())})(this),Promise.resolve()}}function JC(s,e,i,r={}){s=Ml(s,Gm);const l=ao(e),c=s._getSettings(),f={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${i}`;l&&(e0(`https://${p}`),t0("Firestore",!0)),c.host!==eE&&c.host!==p&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!Ks(y,f)&&(s._setSettings(y),r.mockUserToken)){let g,S;if(typeof r.mockUserToken=="string")g=r.mockUserToken,S=on.MOCK_USER;else{g=Eb(r.mockUserToken,s._app?.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new ve(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new on(R)}s._authCredentials=new JR(new G0(g,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qm(this.firestore,e,this._query)}}class Gt{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(Ql(i,Gt._jsonSchema))return new Gt(e,r||null,new Te(gt.fromString(i.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:Ot("string",Gt._jsonSchemaVersion),referencePath:Ot("string")};class zl extends Qm{constructor(e,i,r){super(e,i,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Te(e))}withConverter(e){return new zl(this.firestore,e,this._path)}}function vc(s,e,...i){if(s=Hn(s),arguments.length===1&&(e=Tm.newId()),ow("doc","path",e),s instanceof Gm){const r=gt.fromString(e,...i);return iv(r),new Gt(s,null,new Te(r))}{if(!(s instanceof Gt||s instanceof zl))throw new ve(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(gt.fromString(e,...i));return iv(r),new Gt(s.firestore,s instanceof zl?s.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const r=Nd();r&&de(Fv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=Nd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Nd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Xr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;de(Fv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,nr("INTERNAL UNHANDLED ERROR: ",Qv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=zm.createAndSchedule(this,e,i,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&Ae(47125,{Pc:Qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function Qv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Km extends Gm{constructor(e,i,r,l){super(e,i,r,l),this.type="firestore",this._queue=new Gv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function WC(s,e){const i=typeof s=="object"?s:s0(),r=typeof s=="string"?s:zc,l=lm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=vb("firestore");c&&JC(l,...c)}return l}function tE(s){if(s._terminated)throw new ve(ne.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||e2(s),s._firestoreClient}function e2(s){const e=s._freezeSettings(),i=(function(l,c,f,p){return new vw(l,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,WT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new KC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qn(en.fromBase64String(e))}catch(i){throw new ve(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new qn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ql(e,qn._jsonSchema))return qn.fromBase64String(e.bytes)}}qn._jsonSchemaVersion="firestore/bytes/1.0",qn._jsonSchema={type:Ot("string",qn._jsonSchemaVersion),bytes:Ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new ve(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new ve(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new ve(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Ql(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Ot("string",Ai._jsonSchemaVersion),latitude:Ot("number"),longitude:Ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ql(e,Ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Ri(e.vectorValues);throw new ve(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:Ot("string",Ri._jsonSchemaVersion),vectorValues:Ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=/^__.*__$/;class n2{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new ea(e,this.data,this.fieldMask,i,this.fieldTransforms):new Kl(e,this.data,i,this.fieldTransforms)}}function iE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:s})}}class Xm{constructor(e,i,r,l,c,f){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $c(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iE(this.Ac)&&t2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i2{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||ch(e)}Cc(e,i,r,l=!1){return new Xm({Ac:e,methodName:i,Dc:r,path:Wt.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r2(s){const e=s._freezeSettings(),i=ch(s._databaseId);return new i2(s._databaseId,!!e.ignoreUndefinedProperties,i)}function s2(s,e,i,r,l,c={}){const f=s.Cc(c.merge||c.mergeFields?2:0,e,i,l);oE("Data must be an object, but it was:",f,r);const p=sE(r,f);let y,g;if(c.merge)y=new ti(f.fieldMask),g=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const R of c.mergeFields){const M=a2(e,R,i);if(!f.contains(M))throw new ve(ne.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);l2(S,M)||S.push(M)}y=new ti(S),g=f.fieldTransforms.filter((R=>y.covers(R.field)))}else y=null,g=f.fieldTransforms;return new n2(new Bn(p),y,g)}function rE(s,e){if(aE(s=Hn(s)))return oE("Unsupported field value:",e,s),sE(s,e);if(s instanceof nE)return(function(r,l){if(!iE(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let f=0;for(const p of r){let y=rE(p,l.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=Hn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=ht.fromDate(r);return{timestampValue:Qc(l.serializer,c)}}if(r instanceof ht){const c=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qc(l.serializer,c)}}if(r instanceof Ai)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qn)return{bytesValue:RT(l.serializer,r._byteString)};if(r instanceof Gt){const c=l.databaseId,f=r.firestore._databaseId;if(!f.isEqual(c))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xm(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof Ri)return(function(f,p){return{mapValue:{fields:{[eT]:{stringValue:tT},[Bc]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Cm(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Em(r)}`)})(s,e)}function sE(s,e){const i={};return Y0(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(s,((r,l)=>{const c=rE(l,e.mc(r));c!=null&&(i[r]=c)})),{mapValue:{fields:i}}}function aE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof ht||s instanceof Ai||s instanceof qn||s instanceof Gt||s instanceof nE||s instanceof Ri)}function oE(s,e,i){if(!aE(i)||!Q0(i)){const r=Em(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function a2(s,e,i){if((e=Hn(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return lE(s,e);throw $c("Field path arguments must be of type string or ",s,!1,void 0,i)}const o2=new RegExp("[~\\*/\\[\\]]");function lE(s,e,i){if(e.search(o2)>=0)throw $c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Ym(...e.split("."))._internalPath}catch{throw $c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function $c(s,e,i,r,l){const c=r&&!r.isEmpty(),f=l!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${r}`),f&&(y+=` in document ${l}`),y+=")"),new ve(ne.INVALID_ARGUMENT,p+s+y)}function l2(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,i,r,l,c){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(cE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class u2 extends uE{data(){return super.data()}}function cE(s,e){return typeof e=="string"?lE(s,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}class c2{convertValue(e,i="none"){switch(Wr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(Jr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return Js(e,((l,c)=>{r[l]=this.convertValue(c,i)})),r}convertVectorValue(e){const i=e.fields?.[Bc].arrayValue?.values?.map((r=>It(r.doubleValue)));return new Ri(i)}convertGeoPoint(e){return new Ai(It(e.latitude),It(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=ih(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(Pl(e));default:return null}}convertTimestamp(e){const i=Zr(e);return new ht(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=gt.fromString(e);Xe(xT(r),9688,{name:e});const l=new kl(r.get(1),r.get(3)),c=new Te(r.popFirst(5));return l.isEqual(i)||nr(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(s,e,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(e,i):s.toFirestore(e):e,r}class Sl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qs extends uE{constructor(e,i,r,l,c,f){super(e,i,r,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(cE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Qs._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qs._jsonSchema={type:Ot("string",Qs._jsonSchemaVersion),bundleSource:Ot("string","DocumentSnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class Dc extends Qs{data(e={}){return super.data(e)}}class Dl{constructor(e,i,r,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Sl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new Dc(this._firestore,this._userDataWriter,r.key,r,new Sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ve(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((p=>{const y=new Dc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Dc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,S=-1;return p.type!==0&&(g=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),S=f.indexOf(p.doc.key)),{type:f2(p.type),doc:y,oldIndex:g,newIndex:S}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(s){s=Ml(s,Gt);const e=Ml(s.firestore,Km);return ZC(tE(e),s._key).then((i=>g2(e,s,i)))}Dl._jsonSchemaVersion="firestore/querySnapshot/1.0",Dl._jsonSchema={type:Ot("string",Dl._jsonSchemaVersion),bundleSource:Ot("string","QuerySnapshot"),bundleName:Ot("string"),bundle:Ot("string")};class m2 extends c2{constructor(e){super(),this.firestore=e}convertBytes(e){return new qn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,i)}}function xd(s,e,i){s=Ml(s,Gt);const r=Ml(s.firestore,Km),l=h2(s.converter,e,i);return p2(r,[s2(r2(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,Wi.none())])}function p2(s,e){return(function(r,l){const c=new Xr;return r.asyncQueue.enqueueAndForget((async()=>UC(await XC(r),l,c))),c.promise})(tE(s),e)}function g2(s,e,i){const r=i.docs.get(e._key),l=new m2(s);return new Qs(s,l,e._key,r,new Sl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(l){uo=l})(oo),Ja(new Ys("firestore",((r,{instanceIdentifier:l,options:c})=>{const f=r.getProvider("app").getImmediate(),p=new Km(new WR(r.getProvider("auth-internal")),new nw(f,r.getProvider("app-check-internal")),(function(g,S){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ve(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(g.options.projectId,S)})(f,l),f);return c={useFetchStreams:i,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Kr(W_,ev,e),Kr(W_,ev,"esm2020")})();const y2={apiKey:"AIzaSyAEEPhhbnuMe7pNBNFhObUT7d-r9kMUY-M",authDomain:"split-bill-a4a7c.firebaseapp.com",projectId:"split-bill-a4a7c",storageBucket:"split-bill-a4a7c.firebasestorage.app",messagingSenderId:"666205954591",appId:"1:666205954591:web:4ef058e91091e705b52b2a"},hE=r0(y2),$m=XR(hE),_2=new $i,Tc=WC(hE),v2=async()=>(await rR($m,_2)).user,T2=async()=>{await L1($m)},fE=({onUserChange:s,onProcessing:e})=>{const[i,r]=Se.useState(!0),[l,c]=Se.useState(null),[f,p]=Se.useState(!1),y=Se.useRef(null),[g,S]=Se.useState(!1);Se.useEffect(()=>{const z=U1($m,J=>{r(!1),J?(c(J),p(!0)):(p(!1),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{c(null),y.current=null},350)),s&&s(J)});return()=>z()},[s]);const R=async()=>{S(!0),e&&e(!0);try{await v2()}catch(z){console.error("Sign-in error",z),alert("Could not sign in: "+z.message)}finally{S(!1),e&&e(!1)}},M=async()=>{S(!0),e&&e(!0);try{p(!1),await new Promise(z=>setTimeout(z,360)),await T2()}catch(z){console.error("Sign-out error",z),alert("Could not sign out: "+z.message)}finally{S(!1),e&&e(!1)}};return i?E.jsx("div",{className:"small",children:"Checking authentication..."}):E.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:l?E.jsxs("div",{className:`auth-status ${f?"show":""}`,children:[E.jsxs("div",{className:"small",style:{color:"#000"},children:["Signed in as ",l.displayName]}),E.jsx("button",{className:"btn ghost-soft auth-button",onClick:M,disabled:g,children:g?E.jsx("span",{className:"spinner","aria-hidden":"true"}):"Sign out"})]}):E.jsx("button",{className:"btn auth-button",onClick:R,disabled:g,children:g?E.jsx("span",{className:"spinner","aria-hidden":"true"}):"Sign in with Google"})})};fE.propTypes={onUserChange:ie.func,onProcessing:ie.func};const nm=({people:s,addPerson:e,removePerson:i,activePerson:r,setActivePerson:l})=>{const[c,f]=Se.useState(""),p=g=>{g.preventDefault(),c.trim()&&(e(c.trim()),f(""))},y=g=>{l(g===r?null:g)};return E.jsxs("div",{className:"people-section card",children:[E.jsxs("form",{onSubmit:p,className:"add-form",children:[E.jsx("input",{value:c,onChange:g=>f(g.target.value),placeholder:"Enter name",className:"input","aria-label":"Person name"}),E.jsx("button",{type:"submit",className:"btn primary","aria-label":"Add person",disabled:!c.trim(),children:"+"})]}),s.filter(g=>g.name?.trim()).length>0?E.jsx("ul",{className:"person-list",children:s.filter(g=>g.name?.trim()).map(g=>E.jsxs("li",{className:`person-item${g.id===r?" active":""}`,onClick:()=>y(g.id),style:{display:"flex",alignItems:"center",width:"100%",padding:"0.5rem 0.75rem",borderBottom:"1px solid #e5e7eb",cursor:"pointer"},children:[E.jsx("span",{className:"person-name",style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"1rem",fontWeight:500,color:"#111827"},children:g.name||"No Name"}),E.jsx("button",{type:"button","aria-label":`Remove ${g.name}`,onClick:S=>{S.stopPropagation(),i(g.id)},style:{background:"none",border:"none",color:"#dc2626",fontSize:"0.875rem",fontWeight:600,width:"1.75rem",height:"1.75rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:""})]},g.id))}):E.jsx("p",{className:"empty-message",children:"No people added yet"})]})};nm.propTypes={people:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired})).isRequired,addPerson:ie.func.isRequired,removePerson:ie.func.isRequired,activePerson:ie.string,setActivePerson:ie.func.isRequired};const im=({menuItems:s,addMenuItem:e,removeMenuItem:i,restaurants:r,addRestaurant:l,removeRestaurant:c})=>{const[f,p]=Se.useState({name:"",price:"",restaurantId:""}),[y,g]=Se.useState(""),[S,R]=Se.useState(""),[M,z]=Se.useState(""),[J,W]=Se.useState(r.length>0?r[0].id:""),[X,Q]=Se.useState(!1),le=s.filter(se=>se.restaurantId===J).filter(se=>se.name.toLowerCase().includes(S.toLowerCase())).sort((se,N)=>se.name.localeCompare(N.name));Se.useEffect(()=>{r.length>0&&!f.restaurantId&&p(se=>({...se,restaurantId:r[0].id}))},[r]),Se.useEffect(()=>{r.length===0?W(""):r.find(se=>se.id===J)||W(r[0].id)},[r,J]),Se.useEffect(()=>{p(se=>({...se,restaurantId:J}))},[J]),Se.useEffect(()=>{if(M&&r.length>0){const se=r.find(N=>N.name===M);se&&(W(se.id),z(""))}},[r,M]);const ue=se=>{se.preventDefault(),f.name.trim()&&f.price&&f.restaurantId&&(e({id:bl(),name:f.name.trim(),price:parseFloat(f.price),restaurantId:f.restaurantId}),p({name:"",price:"",restaurantId:r[0]?.id||""}))},we=se=>{if(se.preventDefault(),y.trim()){const N=y.trim();z(N),l(N),g(""),Q(!1)}},he=se=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(se);return r.length>0&&f.restaurantId,E.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[E.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"1rem"},children:"Menu Items"}),E.jsxs("div",{style:{marginBottom:"1em",display:"flex",gap:"1em",alignItems:"flex-end"},children:[E.jsxs("div",{style:{flex:4},children:[E.jsx("label",{htmlFor:"item-restaurant",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Restaurant"}),E.jsxs("select",{id:"item-restaurant",value:J,onChange:se=>W(se.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"},required:!0,children:[r.length===0&&E.jsx("option",{value:"",disabled:!0,children:"No restaurant"}),r.map(se=>E.jsx("option",{value:se.id,children:se.name},se.id))]})]}),E.jsx("button",{type:"button",onClick:()=>Q(se=>!se),style:{flex:1,background:"rgba(102,187,106,0.12)",color:"var(--primary)",border:"1px solid var(--primary)",borderRadius:"0.375rem",cursor:"pointer",fontWeight:500,padding:"0.5rem 0.75rem",whiteSpace:"nowrap"},children:X?"Cancel":"New Restaurant"})]}),!X&&E.jsx("div",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:E.jsx("input",{"aria-label":"Search menu items",placeholder:"Search items...",value:S,onChange:se=>R(se.target.value),className:"menu-search",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})}),X&&E.jsxs("form",{onSubmit:we,style:{marginBottom:"1em",alignItems:"flex-end"},children:[E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsx("label",{htmlFor:"restaurant-name",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Add Restaurant"}),E.jsx("input",{id:"restaurant-name",value:y,onChange:se=>g(se.target.value),placeholder:"Enter restaurant name",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),E.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"#fff",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Add"})]}),J&&!X&&E.jsx("form",{onSubmit:ue,children:E.jsxs("div",{style:{gap:"1rem",marginBottom:"2rem",alignItems:"flex-end"},children:[E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsx("label",{htmlFor:"item-name",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Item Name"}),E.jsx("input",{id:"item-name",value:f.name,onChange:se=>p({...f,name:se.target.value}),placeholder:"Enter item name",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),E.jsxs("div",{style:{flex:1,marginBottom:"2rem"},children:[E.jsx("label",{htmlFor:"item-price",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Price (Rp)"}),E.jsx("input",{id:"item-price",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:f.price,onChange:se=>p({...f,price:se.target.value.replace(/\D/g,"")}),placeholder:"Enter price",className:"input","aria-label":"Price",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),E.jsx("button",{type:"submit","aria-label":"Add menu item",disabled:!f.name.trim()||!f.price,style:{padding:"0.5 rem 1rem",backgroundColor:!f.name.trim()||!f.price?"var(--surface-high)":"var(--primary)",color:"#fff",border:"none",borderRadius:"0.375rem",opacity:!f.name.trim()||!f.price?.4:1,cursor:!f.name.trim()||!f.price?"not-allowed":"pointer"},children:"+"})]})}),!X&&E.jsx("div",{className:"menu-items-container",style:{marginTop:"0.5rem"},children:le.length>0?E.jsx("div",{children:E.jsxs("table",{className:"menu-table",style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{style:{textAlign:"left",padding:"0.5rem 0.75rem"},children:"Item"}),E.jsx("th",{style:{textAlign:"right",padding:"0.5rem 0.75rem"},children:"Price"}),E.jsx("th",{style:{width:40}})]})}),E.jsx("tbody",{children:le.map(se=>{const N=r.find(A=>A.id===se.restaurantId);return N&&N.name,E.jsxs("tr",{className:"menu-table-row",children:[E.jsx("td",{style:{padding:"0.5rem 0.75rem"},children:E.jsx("strong",{children:se.name})}),E.jsx("td",{style:{textAlign:"right",padding:"0.5rem 0.75rem"},children:E.jsx("span",{className:"menu-item-price",children:he(se.price)})}),E.jsx("td",{style:{textAlign:"center",padding:"0.5rem 0.75rem"},children:E.jsx("button",{type:"button","aria-label":"Remove item",onClick:()=>i(se.id),style:{background:"none",border:"none",color:"#e53e3e",fontSize:"1.1em",cursor:"pointer"},children:""})})]},se.id)})})]})}):E.jsx("div",{style:{textAlign:"center",color:"#a0aec0",padding:"1em"},children:"No menu items yet for this restaurant."})})]})};im.propTypes={menuItems:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired,price:ie.number.isRequired})).isRequired,addMenuItem:ie.func.isRequired,removeMenuItem:ie.func.isRequired};const dE=({people:s,menuItems:e,orders:i,addOrder:r,removeOrder:l,activePerson:c,restaurants:f,selectedRestaurant:p,setSelectedRestaurant:y})=>{const[g,S]=Se.useState(c||""),[R,M]=Se.useState([]);Se.useEffect(()=>{c&&S(c)},[c]),Se.useEffect(()=>{p&&M(W=>W.filter(X=>{const Q=e.find(le=>le.id===X);return Q?Q.restaurantId===p:!1}))},[p,e]),Se.useEffect(()=>{M([])},[p]);const z=W=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(W),J={};return i.forEach(W=>{J[W.personId]||(J[W.personId]=[]),J[W.personId].push(W)}),g&&s.find(W=>W.id===g)?.name,E.jsxs("div",{children:[E.jsx("h2",{children:"Orders"}),f.length>0&&E.jsxs("div",{style:{marginBottom:"1em"},children:[E.jsx("label",{htmlFor:"restaurant-select",style:{fontWeight:500,marginRight:8},children:"Restaurant:"}),E.jsx("select",{id:"restaurant-select",value:p,onChange:W=>y(W.target.value),style:{padding:"0.3em 0.7em",borderRadius:6},children:f.map(W=>E.jsx("option",{value:W.id,children:W.name},W.id))})]}),s.length===0?E.jsx("div",{className:"message info",children:E.jsx("p",{children:"Please add people first"})}):E.jsxs(E.Fragment,{children:[E.jsx("h3",{children:"Current Orders"}),E.jsx("div",{className:"order-vertical-list",children:s.map(W=>E.jsxs("div",{className:"order-person-block",children:[E.jsxs("div",{className:"order-person-header",children:[E.jsx("span",{className:"order-person-name",children:W.name}),J[W.id]?.length>0&&E.jsx("span",{className:"badge",children:J[W.id].length})]}),E.jsx("div",{className:"person-menu-list",children:e.filter(X=>X.restaurantId===p).length===0?E.jsx("div",{className:"message info",children:E.jsx("p",{children:"No menu items available"})}):E.jsx("ul",{className:"menu-list",children:e.filter(X=>X.restaurantId===p).map(X=>E.jsx("li",{className:"menu-list-item",children:E.jsxs("button",{className:"btn small add",onClick:()=>r({id:bl(),personId:W.id,items:[X.id]}),children:[E.jsx("span",{className:"plus-icon",children:"+"})," ",X.name]})},X.id))})}),J[W.id]&&J[W.id].filter(X=>X.items.some(Q=>{const le=e.find(ue=>ue.id===Q);return le&&le.restaurantId===p})).length>0?E.jsx("ul",{className:"order-list",children:J[W.id].map(X=>{const Q=X.items.filter(ue=>{const we=e.find(he=>he.id===ue);return we&&we.restaurantId===p});if(Q.length===0)return null;const le=Q.reduce((ue,we)=>{const he=e.find(se=>se.id===we);return he?ue+he.price:ue},0);return E.jsxs("li",{className:"order-item",children:[E.jsxs("div",{className:"order-details",children:[E.jsx("p",{className:"order-items",children:Q.map(ue=>{const we=e.find(he=>he.id===ue);return we?we.name:""}).filter(Boolean).join(", ")}),E.jsx("p",{className:"order-price",children:z(le)})]}),E.jsx("button",{onClick:()=>l(X.id),className:"btn-icon remove","aria-label":"Remove order",style:{background:"none",border:"none",color:"#dc2626",fontSize:"1rem",fontWeight:600,width:"1.75rem",height:"1.75rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:1,transition:"background-color 0.2s, color 0.2s"},onMouseEnter:ue=>{ue.target.style.backgroundColor="#dc2626",ue.target.style.color="white"},onMouseLeave:ue=>{ue.target.style.backgroundColor="transparent",ue.target.style.color="#dc2626"},children:""})]},X.id)})}):E.jsx("div",{className:"message info",children:E.jsxs("p",{children:["No orders yet for ",W.name]})})]},W.id))})]})]})};dE.propTypes={people:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired})).isRequired,menuItems:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired,price:ie.number.isRequired})).isRequired,orders:ie.arrayOf(ie.shape({id:ie.string.isRequired,personId:ie.string.isRequired,items:ie.arrayOf(ie.string).isRequired})).isRequired,addOrder:ie.func.isRequired,removeOrder:ie.func.isRequired,activePerson:ie.string};const mE=({shippingCost:s,otherCost:e,setShippingCost:i,setOtherCost:r})=>{const l=f=>{const p=parseFloat(f)||0;i(p)},c=f=>{const p=parseFloat(f)||0;r(p)};return E.jsx("div",{children:E.jsxs("div",{className:"card",children:[E.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Additional Costs"}),E.jsxs("div",{className:"additional-costs-grid",children:[E.jsxs("div",{className:"additional-costs-group",children:[E.jsx("label",{htmlFor:"shipping-cost",className:"additional-costs-label",children:"Shipping Cost"}),E.jsx("span",{className:"additional-costs-desc",children:"Shipping is divided equally among all people"}),E.jsxs("div",{className:"input-currency-row",children:[E.jsx("span",{className:"input-currency-prefix",children:"Rp"}),E.jsx("input",{id:"shipping-cost",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:f=>l(f.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Shipping cost"})]})]}),E.jsxs("div",{className:"additional-costs-group",children:[E.jsx("label",{htmlFor:"other-cost",className:"additional-costs-label",children:"Other Costs"}),E.jsx("span",{className:"additional-costs-desc",children:"Any other additional cost, divided equally among all people"}),E.jsxs("div",{className:"input-currency-row",children:[E.jsx("span",{className:"input-currency-prefix",children:"Rp"}),E.jsx("input",{id:"other-cost",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e,onChange:f=>c(f.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Other cost"})]})]})]})]})})};mE.propTypes={shippingCost:ie.number.isRequired,otherCost:ie.number.isRequired,setShippingCost:ie.func.isRequired,setOtherCost:ie.func.isRequired};function rm(){return rm=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r])}return s},rm.apply(this,arguments)}function E2(s,e){if(s==null)return{};var i=S2(s,e),r,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(l=0;l<c.length;l++)r=c[l],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(i[r]=s[r])}return i}function S2(s,e){if(s==null)return{};var i={},r=Object.keys(s),l,c;for(c=0;c<r.length;c++)l=r[c],!(e.indexOf(l)>=0)&&(i[l]=s[l]);return i}var Zm=Se.forwardRef(function(s,e){var i=s.color,r=i===void 0?"currentColor":i,l=s.size,c=l===void 0?24:l,f=E2(s,["color","size"]);return fc.createElement("svg",rm({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},f),fc.createElement("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),fc.createElement("polyline",{points:"17 21 17 13 7 13 7 21"}),fc.createElement("polyline",{points:"7 3 7 8 15 8"}))});Zm.propTypes={color:ie.string,size:ie.oneOfType([ie.string,ie.number])};Zm.displayName="Save";const pE=({people:s,menuItems:e,orders:i,shippingCost:r,tax:l,discount:c,otherCost:f,billDate:p,excludeNoOrder:y,taxMethod:g,selectedRestaurant:S,restaurants:R,saveOrderToHistory:M})=>{const z=U=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),J=p?`${p.slice(8,10)}-${p.slice(5,7)}-${p.slice(0,4)}`:"",W=S?i.filter(U=>U.items.some(te=>{const ee=e.find(oe=>oe.id===te);return ee&&ee.restaurantId===S})):i,X=S?e.filter(U=>U.restaurantId===S):e,Q=y?s.filter(U=>W.some(te=>te.personId===U.id)):s,le=(()=>{const U=Q.reduce((te,ee)=>(te[ee.id]=0,te),{});return W.forEach(te=>{const ee=te.personId,oe=te.items.reduce((ge,fe)=>{const $e=X.find(Ve=>Ve.id===fe);return $e?ge+$e.price:ge},0);U[ee]=(U[ee]||0)+oe}),U})(),ue=Object.values(le).reduce((U,te)=>U+te,0),we=ue-c,he=f||0;let se=we;g==="after"&&(se+=r+he);const N=l>0?se*l/100:0,A=(U,te)=>{if(te<=0||ue<=0)return Q.reduce((oe,ge)=>(oe[ge.id]=0,oe),{});const ee={};return Object.keys(U).forEach(oe=>{const ge=U[oe]/ue;ee[oe]=ge*te}),ee},C=Q.length>0?r/Q.length:0,V=Q.length>0?N/Q.length:0,x=Q.length>0?he/Q.length:0,P=Q.reduce((U,te)=>(U[te.id]=C,U),{}),w=Q.reduce((U,te)=>(U[te.id]=V,U),{}),Ye=Q.reduce((U,te)=>(U[te.id]=x,U),{}),Qe=A(le,c),G={};Q.forEach(U=>{const te=le[U.id]||0,ee=Qe[U.id]||0,oe=P[U.id]||0,ge=w[U.id]||0,fe=Ye[U.id]||0;G[U.id]=te-ee+oe+ge+fe});const ce=we+N+r+he,pe=U=>{const te=W.filter(oe=>oe.personId===U),ee=new Map;return te.forEach(oe=>{oe.items.forEach(ge=>{const fe=X.find($e=>$e.id===ge);fe&&(ee.has(fe.id)?ee.set(fe.id,{...fe,quantity:ee.get(fe.id).quantity+1}):ee.set(fe.id,{...fe,quantity:1}))})}),Array.from(ee.values())};let xe="";if(S&&Array.isArray(R)&&R.length>0){const U=R.find(te=>te.id===S);U&&(xe=U.name)}const D=()=>{const U=prompt("Enter a name for this order:",`${xe||"Order"} - ${J}`);U&&U.trim()&&M(U.trim())&&alert("Order saved to history successfully!")};return E.jsxs("div",{className:"summary-section",children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[E.jsxs("h2",{style:{margin:0},children:["Summary Order",xe?` ${xe}`:""]}),Q.length>0&&ce>0&&E.jsxs("button",{className:"btn success",onClick:D,style:{fontSize:"0.9rem",padding:"0.5rem 1rem"},children:[E.jsx(Zm,{size:14,style:{marginRight:8}}),"Save Order"]})]}),E.jsxs("div",{className:"card summary-card",children:[E.jsx("div",{className:"card-header",children:E.jsx("h3",{children:"Bill Summary"})}),E.jsx("div",{className:"card-body",children:E.jsx("table",{className:"summary-table summary-total",children:E.jsxs("tbody",{children:[E.jsxs("tr",{children:[E.jsx("td",{children:"Subtotal"}),E.jsx("td",{className:"price-value",children:z(ue)})]}),c>0&&E.jsxs("tr",{className:"discount-row",children:[E.jsx("td",{children:"Discount"}),E.jsxs("td",{className:"price-value",children:["-",z(c)]})]}),N>0&&E.jsxs("tr",{children:[E.jsxs("td",{children:["Tax (",l,"%)"]}),E.jsx("td",{className:"price-value",children:z(N)})]}),r>0&&E.jsxs("tr",{children:[E.jsx("td",{children:"Shipping"}),E.jsx("td",{className:"price-value",children:z(r)})]}),he>0&&E.jsxs("tr",{children:[E.jsx("td",{children:"Other Costs"}),E.jsx("td",{className:"price-value",children:z(he)})]}),E.jsxs("tr",{children:[E.jsx("td",{children:"Total Bill"}),E.jsx("td",{className:"price-value price-total amount-total",children:z(ce)})]})]})})}),E.jsx("h3",{style:{marginTop:"2em",marginBottom:"0.5em",color:"var(--primary)",fontWeight:700},children:"Individual Breakdown"}),Q.length>0&&E.jsx("div",{className:"person-breakdown-wrapper",children:E.jsx("div",{className:"person-breakdown-table-wrapper",children:E.jsxs("table",{className:"summary-table person-breakdown-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{children:"Name"}),E.jsx("th",{children:"Items"}),E.jsx("th",{children:"Subtotal"}),E.jsx("th",{children:"Discount"}),E.jsx("th",{children:"Tax"}),E.jsx("th",{children:"Shipping"}),E.jsx("th",{children:"Other"}),E.jsx("th",{children:"Total"})]})}),E.jsx("tbody",{children:Q.map(U=>{const te=le[U.id]||0,ee=Qe[U.id]||0,oe=P[U.id]||0,ge=w[U.id]||0,fe=Ye[U.id]||0,$e=G[U.id]||0,Ve=pe(U.id);return E.jsxs("tr",{children:[E.jsx("td",{children:U.name}),E.jsx("td",{children:Ve.length>0?Ve.map(ft=>E.jsxs("div",{style:{display:"block"},children:[ft.name,ft.quantity>1?` x${ft.quantity}`:""]},ft.id)):"-"}),E.jsx("td",{className:"price-value",children:z(te)}),E.jsx("td",{className:"price-value",children:ee>0?`-${z(ee)}`:ee<0?z(ee):"-"}),E.jsx("td",{className:"price-value",children:ge>0?z(ge):"-"}),E.jsx("td",{className:"price-value",children:oe>0?z(oe):"-"}),E.jsx("td",{className:"price-value",children:fe>0?z(fe):"-"}),E.jsx("td",{className:"price-value price-total amount-total",children:z($e)})]},U.id)})})]})})}),Q.length===0&&E.jsx("p",{className:"empty-message",children:"Add people to see the breakdown"}),E.jsx("div",{className:"person-cards",children:Q.map(U=>{const te=le[U.id]||0,ee=Qe[U.id]||0,oe=P[U.id]||0,ge=w[U.id]||0,fe=Ye[U.id]||0,$e=G[U.id]||0,Ve=pe(U.id);return E.jsxs("div",{className:"person-card",children:[E.jsx("div",{className:"person-name",children:U.name}),E.jsx("div",{className:"item-list",children:Ve.length>0?Ve.map(ft=>E.jsxs("div",{children:[ft.name,ft.quantity>1?` x${ft.quantity}`:""]},ft.id)):E.jsx("div",{className:"small",children:"-"})}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Subtotal"}),E.jsx("div",{className:"value",children:z(te)})]}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Discount"}),E.jsx("div",{className:"value",children:ee>0?`-${z(ee)}`:ee<0?z(ee):"-"})]}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Tax"}),E.jsx("div",{className:"value",children:ge>0?z(ge):"-"})]}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Shipping"}),E.jsx("div",{className:"value",children:oe>0?z(oe):"-"})]}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Other"}),E.jsx("div",{className:"value",children:fe>0?z(fe):"-"})]}),E.jsxs("div",{className:"card-row",children:[E.jsx("div",{className:"label",children:"Total"}),E.jsx("div",{className:"value amount-total",children:z($e)})]})]},`card-${U.id}`)})})]})]})};pE.propTypes={people:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired})).isRequired,menuItems:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired,price:ie.number.isRequired})).isRequired,orders:ie.arrayOf(ie.shape({id:ie.string.isRequired,personId:ie.string.isRequired,items:ie.arrayOf(ie.string).isRequired})).isRequired,shippingCost:ie.number.isRequired,tax:ie.number.isRequired,discount:ie.number.isRequired,otherCost:ie.number.isRequired,excludeNoOrder:ie.bool,billDate:ie.string.isRequired,taxMethod:ie.string,selectedRestaurant:ie.string,restaurants:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired})).isRequired,saveOrderToHistory:ie.func.isRequired};const gE=({discount:s,setDiscount:e})=>{const i=r=>{const l=parseFloat(r)||0;e(l)};return E.jsxs("div",{className:"card",children:[E.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Discount"}),E.jsxs("div",{className:"discount-group",children:[E.jsx("label",{htmlFor:"discount",className:"additional-costs-label",children:"Discount"}),E.jsx("span",{className:"additional-costs-desc",children:"Discount is applied proportionally based on order totals"}),E.jsxs("div",{className:"input-currency-row",children:[E.jsx("span",{className:"input-currency-prefix",children:"Rp"}),E.jsx("input",{id:"discount",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:r=>i(r.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Discount"})]})]})]})};gE.propTypes={discount:ie.number.isRequired,setDiscount:ie.func.isRequired};const yE=({tax:s,setTax:e,taxMethod:i,setTaxMethod:r})=>{const l=c=>{let f=parseFloat(c)||0;f>100&&(f=100),f<0&&(f=0),e(f)};return E.jsxs("div",{className:"card",children:[E.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Tax"}),E.jsxs("div",{className:"tax-group",children:[E.jsx("label",{htmlFor:"tax",className:"additional-costs-label",children:"Tax (%)"}),E.jsx("span",{className:"additional-costs-desc",children:"Tax is calculated as a percentage of subtotal and divided equally"}),E.jsxs("div",{className:"input-currency-row",children:[E.jsx("input",{id:"tax",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:c=>l(c.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Tax percentage",style:{maxWidth:"80px"}}),E.jsx("span",{className:"input-currency-prefix",children:"%"})]}),E.jsxs("div",{style:{marginTop:"1em"},children:[E.jsx("label",{style:{fontWeight:500,marginRight:"1em"},children:"Tax Calculation Method:"}),E.jsxs("select",{value:i,onChange:c=>r(c.target.value),children:[E.jsx("option",{value:"before",children:"Before shipping & other costs (default)"}),E.jsx("option",{value:"after",children:"After shipping & other costs"})]})]})]})]})};yE.propTypes={tax:ie.number.isRequired,setTax:ie.func.isRequired,taxMethod:ie.string.isRequired,setTaxMethod:ie.func.isRequired};const _E=({orderHistory:s,loadHistoryOrder:e,deleteHistoryOrder:i,editHistoryOrder:r})=>{const[l,c]=Se.useState(null),[f,p]=Se.useState(null),[y,g]=Se.useState({name:"",billDate:""}),S=Q=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(Q),R=Q=>Q?`${Q.slice(8,10)}-${Q.slice(5,7)}-${Q.slice(0,4)}`:"",M=Q=>{c(l===Q?null:Q)},z=Q=>{window.confirm("Loading this order will replace your current data. Continue?")&&e(Q)},J=(Q,le)=>{window.confirm(`Are you sure you want to delete "${le}"? This action cannot be undone.`)&&i(Q)},W=()=>{y.name.trim()&&(r(f,{name:y.name.trim(),billDate:y.billDate}),p(null),g({name:"",billDate:""}))},X=()=>{p(null),g({name:"",billDate:""})};return s.length===0?E.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[E.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",color:"#0078d4"},children:"Order History"}),E.jsx("p",{className:"empty-message",style:{fontSize:"0.9rem",color:"#666"},children:"No saved orders yet"})]}):E.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[E.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",color:"#0078d4"},children:"Order History"}),E.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(Q=>E.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"6px",overflow:"hidden",background:"#fff",fontSize:"0.85rem"},children:[E.jsx("div",{onClick:()=>M(Q.id),style:{padding:"0.75rem",cursor:"pointer",borderBottom:l===Q.id?"1px solid #f1f5f9":"none",transition:"background-color 0.2s"},onMouseEnter:le=>le.target.style.backgroundColor="#f8fafc",onMouseLeave:le=>le.target.style.backgroundColor="transparent",children:E.jsxs("div",{children:[E.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1e293b",marginBottom:"0.25rem"},children:Q.name}),E.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem"},children:[R(Q.savedAt),"  ",Q.restaurantName||"All"]}),E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[E.jsx("span",{style:{fontWeight:600,color:"#0f766e",fontSize:"0.8rem"},children:S(Q.totalBill)}),E.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[E.jsx("button",{onClick:le=>{le.stopPropagation(),z(Q)},style:{padding:"0.2rem 0.5rem",fontSize:"0.75rem",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Load"}),E.jsx("button",{onClick:le=>{le.stopPropagation(),J(Q.id,Q.name)},style:{padding:"0.2rem 0.5rem",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Del"}),E.jsx("span",{style:{fontSize:"0.7rem",color:"#64748b"},children:l===Q.id?"":""})]})]})]})}),l===Q.id&&E.jsxs("div",{className:"history-details",children:[E.jsx("div",{className:"history-summary",children:E.jsx("table",{className:"summary-table",children:E.jsxs("tbody",{children:[E.jsxs("tr",{children:[E.jsx("td",{children:"Bill Date:"}),E.jsx("td",{children:R(Q.billDate)})]}),E.jsxs("tr",{children:[E.jsx("td",{children:"People:"}),E.jsx("td",{children:Q.people.length})]}),E.jsxs("tr",{children:[E.jsx("td",{children:"Orders:"}),E.jsx("td",{children:Q.orders.length})]}),E.jsxs("tr",{children:[E.jsx("td",{children:"Subtotal:"}),E.jsx("td",{className:"price-value",children:S(Q.subtotal)})]}),Q.discount>0&&E.jsxs("tr",{children:[E.jsx("td",{children:"Discount:"}),E.jsxs("td",{className:"price-value",children:["-",S(Q.discount)]})]}),Q.tax>0&&E.jsxs("tr",{children:[E.jsxs("td",{children:["Tax (",Q.taxRate,"%):"]}),E.jsx("td",{className:"price-value",children:S(Q.tax)})]}),Q.shippingCost>0&&E.jsxs("tr",{children:[E.jsx("td",{children:"Shipping:"}),E.jsx("td",{className:"price-value",children:S(Q.shippingCost)})]}),Q.otherCost>0&&E.jsxs("tr",{children:[E.jsx("td",{children:"Other Costs:"}),E.jsx("td",{className:"price-value",children:S(Q.otherCost)})]}),E.jsxs("tr",{className:"history-total-row",children:[E.jsx("td",{children:E.jsx("strong",{children:"Total:"})}),E.jsx("td",{className:"price-value",children:E.jsx("strong",{children:S(Q.totalBill)})})]})]})})}),E.jsxs("div",{className:"history-people",children:[E.jsx("h5",{children:"People & Orders:"}),Q.people.map(le=>{const ue=Q.orders.filter(he=>he.personId===le.id),we=Q.finalAmounts[le.id]||0;return E.jsxs("div",{className:"history-person",children:[E.jsxs("div",{className:"person-info",children:[E.jsx("span",{className:"person-name",children:le.name}),E.jsx("span",{className:"person-total",children:S(we)})]}),ue.length>0&&E.jsx("div",{className:"person-orders",children:ue.map(he=>E.jsx("div",{className:"history-order-items",children:he.items.map(se=>{const N=Q.menuItems.find(A=>A.id===se);return N?E.jsxs("span",{className:"history-order-item",children:[N.name," (",S(N.price),")"]},se):null})},he.id))})]},le.id)})]})]})]},Q.id))}),f&&E.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:E.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",width:"300px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[E.jsx("h4",{style:{marginBottom:"1rem",color:"#1e293b"},children:"Edit Order"}),E.jsxs("div",{style:{marginBottom:"1rem"},children:[E.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Order Name:"}),E.jsx("input",{type:"text",value:y.name,onChange:Q=>g({...y,name:Q.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.875rem",boxSizing:"border-box"},placeholder:"Enter order name"})]}),E.jsxs("div",{style:{marginBottom:"1.5rem"},children:[E.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Bill Date:"}),E.jsx("input",{type:"date",value:y.billDate,onChange:Q=>g({...y,billDate:Q.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),E.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[E.jsx("button",{onClick:X,style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"}),E.jsx("button",{onClick:W,style:{padding:"0.5rem 1rem",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",opacity:y.name.trim()?1:.5},disabled:!y.name.trim(),children:"Save"})]})]})})]})};_E.propTypes={orderHistory:ie.arrayOf(ie.shape({id:ie.string.isRequired,name:ie.string.isRequired,savedAt:ie.string.isRequired,billDate:ie.string.isRequired,people:ie.array.isRequired,menuItems:ie.array.isRequired,orders:ie.array.isRequired,restaurants:ie.array.isRequired,selectedRestaurant:ie.string,restaurantName:ie.string,subtotal:ie.number.isRequired,discount:ie.number.isRequired,tax:ie.number.isRequired,taxRate:ie.number.isRequired,shippingCost:ie.number.isRequired,otherCost:ie.number.isRequired,totalBill:ie.number.isRequired,finalAmounts:ie.object.isRequired})).isRequired,loadHistoryOrder:ie.func.isRequired,deleteHistoryOrder:ie.func.isRequired,editHistoryOrder:ie.func.isRequired};function b2(){const[s,e]=Se.useState(null),i=Se.useRef(!1),r=Se.useRef(null),l=Se.useRef(!1),c=async(re,ye)=>{try{const je=vc(Tc,"users",re);await xd(je,ye,{merge:!0}),console.log("Saved user data to Firestore")}catch(je){console.error("Error saving user data to Firestore",je)}},f=async re=>{try{const ye=vc(Tc,"users",re),je=await d2(ye);return je.exists()?je.data():null}catch(ye){return console.error("Error loading user data from Firestore",ye),null}},[p,y]=Se.useState(()=>{const re=localStorage.getItem("splitBillPeople");return re?JSON.parse(re):[]}),[g,S]=Se.useState(()=>{const re=localStorage.getItem("splitBillRestaurants");return re?JSON.parse(re):[]}),[R,M]=Se.useState(()=>{const re=localStorage.getItem("splitBillMenuItems");return re?JSON.parse(re):[]}),[z,J]=Se.useState([]),[W,X]=Se.useState("percentage"),[Q,le]=Se.useState(0),[ue,we]=Se.useState(0),[he,se]=Se.useState(0),[N,A]=Se.useState(0),[C,V]=Se.useState(null),[x,P]=Se.useState(!0),w=()=>new Date().toISOString().slice(0,10),[Ye,Qe]=Se.useState(w()),[G,ce]=Se.useState(g[0]?.id||""),[pe,xe]=Se.useState(()=>{const re=localStorage.getItem("splitBillOrderHistory");return re?JSON.parse(re):[]}),D=Se.useRef(""),[U,te]=Se.useState(!1),ee=()=>{console.log("Data saved to local storage")},oe=async re=>{if(!(re&&re.uid&&r.current===re.uid)&&!l.current){if(l.current=!0,re&&re.uid){r.current=re.uid,i.current=!0;const ye=await f(re.uid);if(ye){ye.people&&y(ye.people),ye.menuItems&&M(ye.menuItems),ye.restaurants&&S(ye.restaurants),ye.orderHistory&&xe(ye.orderHistory),console.log("Loaded user data from Firestore");try{D.current=JSON.stringify({people:ye.people||[],menuItems:ye.menuItems||[],restaurants:ye.restaurants||[],orderHistory:ye.orderHistory||[]})}catch{}e(re);try{await xd(vc(Tc,"users",re.uid),{profile:{displayName:re.displayName||null,email:re.email||null,photoURL:re.photoURL||null,lastSeen:new Date().toISOString()}},{merge:!0})}catch(je){console.error("Error saving user profile to Firestore",je)}setTimeout(()=>{i.current=!1},100)}else{const je={people:p,menuItems:R,restaurants:g,orderHistory:pe};await c(re.uid,je),console.log("Migrated local data to Firestore for new user");try{D.current=JSON.stringify(je)}catch{}e(re),setTimeout(()=>{i.current=!1},100);try{await xd(vc(Tc,"users",re.uid),{profile:{displayName:re.displayName||null,email:re.email||null,photoURL:re.photoURL||null,lastSeen:new Date().toISOString()}},{merge:!0})}catch(et){console.error("Error saving user profile to Firestore",et)}}}else r.current=null,e(null);l.current=!1}},ge=Se.useRef(null);Se.useEffect(()=>{if(i.current)return;const re={restaurants:g,people:p,menuItems:R,orderHistory:pe},ye=JSON.stringify(re);if(D.current!==ye)return ge.current&&clearTimeout(ge.current),ge.current=setTimeout(async()=>{if(s&&s.uid)try{await c(s.uid,re),D.current=ye}catch(je){console.error("Error saving batched user data to Firestore",je)}else localStorage.setItem("splitBillRestaurants",JSON.stringify(g)),localStorage.setItem("splitBillPeople",JSON.stringify(p)),localStorage.setItem("splitBillMenuItems",JSON.stringify(R)),localStorage.setItem("splitBillOrderHistory",JSON.stringify(pe)),(p.length>0||R.length>0)&&ee(),D.current=ye;ge.current=null},600),()=>{ge.current&&(clearTimeout(ge.current),ge.current=null)}},[g,p,R,pe,s]);const fe=re=>{y([...p,{id:bl(),name:re}])},$e=re=>{y(p.filter(ye=>ye.id!==re)),J(z.filter(ye=>ye.personId!==re))},Ve=re=>{M([...R,re])},ft=re=>{M(R.filter(ye=>ye.id!==re)),J(z.map(ye=>({...ye,items:ye.items.filter(je=>je!==re)})).filter(ye=>ye.items.length>0))},ns=re=>{J([...z,re])},sr=re=>{J(z.filter(ye=>ye.id!==re))},Ni=re=>{S([...g,{id:bl(),name:re}])},ii=re=>{S(g.filter(ye=>ye.id!==re))},ar=re=>{const ye=G?z.filter(st=>st.items.some(Et=>{const pn=R.find(ut=>ut.id===Et);return pn&&pn.restaurantId===G})):z,je=G?R.filter(st=>st.restaurantId===G):R,et=p.filter(st=>ye.some(Et=>Et.personId===st.id)),Me=et.reduce((st,Et)=>(st[Et.id]=0,st),{});ye.forEach(st=>{const Et=st.items.reduce((pn,ut)=>{const as=je.find(ai=>ai.id===ut);return as?pn+as.price:pn},0);Me[st.personId]=(Me[st.personId]||0)+Et});const Tn=Object.values(Me).reduce((st,Et)=>st+Et,0),Mt=Tn-he,Qt=N||0;let jt=Mt;W==="after"&&(jt+=Q+Qt);const rs=ue>0?jt*ue/100:0,ia=Mt+rs+Q+Qt,ss={},Dn=et.length>0?Q/et.length:0,ri=et.length>0?rs/et.length:0,En=et.length>0?Qt/et.length:0;et.forEach(st=>{const Et=Me[st.id]||0,pn=Tn>0?Et/Tn*he:0;ss[st.id]=Et-pn+Dn+ri+En});const cn=g.find(st=>st.id===G),si=cn?cn.name:"",or={id:bl(),name:re,savedAt:new Date().toISOString().slice(0,10),billDate:Ye,people:[...et],menuItems:[...je],orders:[...ye],restaurants:[...g],selectedRestaurant:G,restaurantName:si,subtotal:Tn,discount:he,tax:rs,taxRate:ue,taxMethod:W,shippingCost:Q,otherCost:Qt,totalBill:ia,finalAmounts:ss};return xe(st=>[or,...st]),!0},mo=re=>{y(re.people),M(re.menuItems),J(re.orders),S(re.restaurants),ce(re.selectedRestaurant||""),Qe(re.billDate),se(re.discount),we(re.taxRate),X(re.taxMethod||"before"),le(re.shippingCost),A(re.otherCost)},is=re=>{xe(ye=>ye.filter(je=>je.id!==re))},tn=(re,ye)=>{xe(je=>je.map(et=>et.id===re?{...et,...ye,savedAt:new Date().toISOString()}:et))},na=()=>{window.confirm("Are you sure you want to clear all data? This action cannot be undone.")&&(y([]),M([]),J([]),S([]),le(0),we(0),se(0),A(0),xe([]),localStorage.removeItem("splitBillPeople"),localStorage.removeItem("splitBillMenuItems"),localStorage.removeItem("splitBillRestaurants"),localStorage.removeItem("splitBillShipping"),localStorage.removeItem("splitBillTax"),localStorage.removeItem("splitBillDiscount"),localStorage.removeItem("splitBillOtherCost"),localStorage.removeItem("splitBillOrderHistory"))},Tt=()=>{const re={people:p,menuItems:R,orders:z,shippingCost:Q,tax:ue,discount:he,otherCost:N,exportDate:new Date().toISOString()},ye=JSON.stringify(re,null,2),je=new Blob([ye],{type:"application/json"}),et=URL.createObjectURL(je),Me=document.createElement("a");Me.href=et,Me.download=`split-bill-export-${new Date().toLocaleDateString().replace(/\//g,"-")}.json`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me),URL.revokeObjectURL(et)},Ct=re=>{const ye=re.target.files[0];if(!ye)return;const je=new FileReader;je.onload=et=>{try{const Me=JSON.parse(et.target.result);if(!Me.people||!Me.menuItems||!Me.orders||!Array.isArray(Me.people)||!Array.isArray(Me.menuItems)||!Array.isArray(Me.orders))throw new Error("Invalid data format");y(Me.people),M(Me.menuItems),J(Me.orders),Me.shippingCost!==void 0&&le(parseFloat(Me.shippingCost)),Me.tax!==void 0&&we(parseFloat(Me.tax)),Me.discount!==void 0&&se(parseFloat(Me.discount)),Me.otherCost!==void 0&&A(parseFloat(Me.otherCost)),re.target.value=null}catch(Me){console.error("Error importing data:",Me),alert("Invalid data format. Please select a valid export file."),re.target.value=null}},je.readAsText(ye)};return Se.useEffect(()=>{G&&J(re=>re.map(ye=>({...ye,items:ye.items.filter(je=>{const et=R.find(Me=>Me.id===je);return et&&et.restaurantId===G})})).filter(ye=>ye.items.length>0))},[G,R]),E.jsxs("div",{className:"container app-container",children:[E.jsxs("header",{className:"card app-header",children:[E.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[E.jsx("h1",{className:"app-title",children:"Split Bill App"}),E.jsx("p",{className:"small",children:"Bagi tagihan dengan teman-teman dengan mudah"})]}),E.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginTop:"12px"},children:[E.jsx("button",{className:"btn btn-danger",onClick:na,children:" Hapus Semua Data"}),E.jsx("button",{className:"btn",onClick:Tt,children:" Export Data"}),E.jsxs("label",{className:"btn btn-success",children:[" Import Data",E.jsx("input",{type:"file",accept:".json",onChange:Ct,style:{display:"none"}})]})]}),E.jsx("div",{style:{position:"absolute",right:18,top:18},children:E.jsx(fE,{onUserChange:oe,onProcessing:te})})]}),U&&E.jsx("div",{className:"overlay-spinner","aria-hidden":"true",children:E.jsx("div",{className:"spinner"})}),E.jsxs("main",{className:"grid-2",style:{marginTop:"var(--space-4)"},children:[E.jsxs("aside",{className:"sidebar card",children:[E.jsx("h2",{className:"sidebar-title",children:"People"}),E.jsx(nm,{people:p,addPerson:fe,removePerson:$e,activePerson:C,setActivePerson:V}),E.jsx("div",{style:{marginTop:"var(--space-4)"},children:E.jsx(im,{menuItems:R,addMenuItem:Ve,removeMenuItem:ft,restaurants:g,addRestaurant:Ni,removeRestaurant:ii})}),E.jsx("div",{style:{marginTop:"var(--space-4)"},children:E.jsx(_E,{orderHistory:pe,loadHistoryOrder:mo,deleteHistoryOrder:is,editHistoryOrder:tn})})]}),E.jsxs("section",{className:"content",children:[E.jsxs("div",{className:"mobile-inline-sidebar",children:[E.jsxs("details",{className:"accordion-card",open:!0,children:[E.jsx("summary",{children:"People"}),E.jsx("div",{style:{marginTop:"var(--space-3)"},children:E.jsx(nm,{people:p,addPerson:fe,removePerson:$e,activePerson:C,setActivePerson:V})})]}),E.jsxs("details",{className:"accordion-card",children:[E.jsx("summary",{children:"Menu Items"}),E.jsx("div",{style:{marginTop:"var(--space-3)"},children:E.jsx(im,{menuItems:R,addMenuItem:Ve,removeMenuItem:ft,restaurants:g,addRestaurant:Ni,removeRestaurant:ii})})]})]}),E.jsx("div",{className:"card",children:E.jsx(dE,{people:p,menuItems:R,orders:z,addOrder:ns,removeOrder:sr,activePerson:C,restaurants:g,selectedRestaurant:G,setSelectedRestaurant:ce})}),E.jsxs("div",{className:"grid-container grid-3",style:{marginTop:"var(--space-4)",gap:"var(--space-4)"},children:[E.jsx("div",{className:"card",children:E.jsx(mE,{shippingCost:Q,otherCost:N,setShippingCost:le,setOtherCost:A})}),E.jsx("div",{className:"card",children:E.jsx(yE,{tax:ue,setTax:we,taxMethod:W,setTaxMethod:X})}),E.jsx("div",{className:"card",children:E.jsx(gE,{discount:he,setDiscount:se})})]}),E.jsxs("div",{className:"card summary-card-mobile",style:{marginTop:"var(--space-4)"},children:[E.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"0.5em",gap:"8px"},children:[E.jsx("label",{htmlFor:"bill-date",style:{marginRight:"0.5em",fontWeight:500},children:"Bill Date:"}),E.jsx("input",{id:"bill-date",type:"date",value:Ye,onChange:re=>Qe(re.target.value),className:"input",max:w(),style:{width:"200px"}})]}),E.jsx(pE,{people:p,menuItems:R,orders:z,shippingCost:Q,tax:ue,discount:he,otherCost:N,billDate:Ye,excludeNoOrder:!0,taxMethod:W,selectedRestaurant:G,restaurants:g,saveOrderToHistory:ar})]})]})]}),E.jsx("div",{id:"notification",className:"notification"})]})}tb.createRoot(document.getElementById("root")).render(E.jsx(Se.StrictMode,{children:E.jsx(b2,{})}));
