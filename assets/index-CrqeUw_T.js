(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();function Kv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var ud={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function Qb(){if(c_)return _l;c_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(r,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:s,type:r,key:d,ref:l!==void 0?l:null,props:c}}return _l.Fragment=e,_l.jsx=i,_l.jsxs=i,_l}var h_;function Kb(){return h_||(h_=1,ud.exports=Qb()),ud.exports}var T=Kb(),cd={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function Yb(){if(f_)return Ve;f_=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.iterator;function M(D){return D===null||typeof D!="object"?null:(D=R&&D[R]||D["@@iterator"],typeof D=="function"?D:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,ee={};function X(D,W,ce){this.props=D,this.context=W,this.refs=ee,this.updater=ce||B}X.prototype.isReactComponent={},X.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},X.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function F(){}F.prototype=X.prototype;function fe(D,W,ce){this.props=D,this.context=W,this.refs=ee,this.updater=ce||B}var he=fe.prototype=new F;he.constructor=fe,Q(he,X.prototype),he.isPureReactComponent=!0;var Ne=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ie=Object.prototype.hasOwnProperty;function I(D,W,ce,oe,de,ne){return ce=ne.ref,{$$typeof:s,type:D,key:W,ref:ce!==void 0?ce:null,props:ne}}function A(D,W){return I(D.type,W,void 0,void 0,void 0,D.props)}function w(D){return typeof D=="object"&&D!==null&&D.$$typeof===s}function V(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ce){return W[ce]})}var x=/\/+/g;function P(D,W){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):W.toString(36)}function C(){}function Je(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function $e(D,W,ce,oe,de){var ne=typeof D;(ne==="undefined"||ne==="boolean")&&(D=null);var se=!1;if(D===null)se=!0;else switch(ne){case"bigint":case"string":case"number":se=!0;break;case"object":switch(D.$$typeof){case s:case e:se=!0;break;case b:return se=D._init,$e(se(D._payload),W,ce,oe,de)}}if(se)return de=de(D),se=oe===""?"."+P(D,0):oe,Ne(de)?(ce="",se!=null&&(ce=se.replace(x,"$&/")+"/"),$e(de,W,ce,"",function(Ye){return Ye})):de!=null&&(w(de)&&(de=A(de,ce+(de.key==null||D&&D.key===de.key?"":(""+de.key).replace(x,"$&/")+"/")+se)),W.push(de)),1;se=0;var ge=oe===""?".":oe+":";if(Ne(D))for(var me=0;me<D.length;me++)oe=D[me],ne=ge+P(oe,me),se+=$e(oe,W,ce,ne,de);else if(me=M(D),typeof me=="function")for(D=me.call(D),me=0;!(oe=D.next()).done;)oe=oe.value,ne=ge+P(oe,me++),se+=$e(oe,W,ce,ne,de);else if(ne==="object"){if(typeof D.then=="function")return $e(Je(D),W,ce,oe,de);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return se}function G(D,W,ce){if(D==null)return D;var oe=[],de=0;return $e(D,oe,"","",function(ne){return W.call(ce,ne,de++)}),oe}function ue(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(ce){(D._status===0||D._status===-1)&&(D._status=1,D._result=ce)},function(ce){(D._status===0||D._status===-1)&&(D._status=2,D._result=ce)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var ve=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Le(){}return Ve.Children={map:G,forEach:function(D,W,ce){G(D,function(){W.apply(this,arguments)},ce)},count:function(D){var W=0;return G(D,function(){W++}),W},toArray:function(D){return G(D,function(W){return W})||[]},only:function(D){if(!w(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ve.Component=X,Ve.Fragment=i,Ve.Profiler=l,Ve.PureComponent=fe,Ve.StrictMode=r,Ve.Suspense=y,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(D){return ae.H.useMemoCache(D)}},Ve.cache=function(D){return function(){return D.apply(null,arguments)}},Ve.cloneElement=function(D,W,ce){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var oe=Q({},D.props),de=D.key,ne=void 0;if(W!=null)for(se in W.ref!==void 0&&(ne=void 0),W.key!==void 0&&(de=""+W.key),W)!ie.call(W,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&W.ref===void 0||(oe[se]=W[se]);var se=arguments.length-2;if(se===1)oe.children=ce;else if(1<se){for(var ge=Array(se),me=0;me<se;me++)ge[me]=arguments[me+2];oe.children=ge}return I(D.type,de,void 0,void 0,ne,oe)},Ve.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ve.createElement=function(D,W,ce){var oe,de={},ne=null;if(W!=null)for(oe in W.key!==void 0&&(ne=""+W.key),W)ie.call(W,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(de[oe]=W[oe]);var se=arguments.length-2;if(se===1)de.children=ce;else if(1<se){for(var ge=Array(se),me=0;me<se;me++)ge[me]=arguments[me+2];de.children=ge}if(D&&D.defaultProps)for(oe in se=D.defaultProps,se)de[oe]===void 0&&(de[oe]=se[oe]);return I(D,ne,void 0,void 0,null,de)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(D){return{$$typeof:p,render:D}},Ve.isValidElement=w,Ve.lazy=function(D){return{$$typeof:b,_payload:{_status:-1,_result:D},_init:ue}},Ve.memo=function(D,W){return{$$typeof:g,type:D,compare:W===void 0?null:W}},Ve.startTransition=function(D){var W=ae.T,ce={};ae.T=ce;try{var oe=D(),de=ae.S;de!==null&&de(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Le,ve)}catch(ne){ve(ne)}finally{ae.T=W}},Ve.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ve.use=function(D){return ae.H.use(D)},Ve.useActionState=function(D,W,ce){return ae.H.useActionState(D,W,ce)},Ve.useCallback=function(D,W){return ae.H.useCallback(D,W)},Ve.useContext=function(D){return ae.H.useContext(D)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(D,W){return ae.H.useDeferredValue(D,W)},Ve.useEffect=function(D,W,ce){var oe=ae.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(D,W)},Ve.useId=function(){return ae.H.useId()},Ve.useImperativeHandle=function(D,W,ce){return ae.H.useImperativeHandle(D,W,ce)},Ve.useInsertionEffect=function(D,W){return ae.H.useInsertionEffect(D,W)},Ve.useLayoutEffect=function(D,W){return ae.H.useLayoutEffect(D,W)},Ve.useMemo=function(D,W){return ae.H.useMemo(D,W)},Ve.useOptimistic=function(D,W){return ae.H.useOptimistic(D,W)},Ve.useReducer=function(D,W,ce){return ae.H.useReducer(D,W,ce)},Ve.useRef=function(D){return ae.H.useRef(D)},Ve.useState=function(D){return ae.H.useState(D)},Ve.useSyncExternalStore=function(D,W,ce){return ae.H.useSyncExternalStore(D,W,ce)},Ve.useTransition=function(){return ae.H.useTransition()},Ve.version="19.1.1",Ve}var d_;function sm(){return d_||(d_=1,cd.exports=Yb()),cd.exports}var Ee=sm();const dc=Kv(Ee);var hd={exports:{}},vl={},fd={exports:{}},dd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function Xb(){return m_||(m_=1,(function(s){function e(G,ue){var ve=G.length;G.push(ue);e:for(;0<ve;){var Le=ve-1>>>1,D=G[Le];if(0<l(D,ue))G[Le]=ue,G[ve]=D,ve=Le;else break e}}function i(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ue=G[0],ve=G.pop();if(ve!==ue){G[0]=ve;e:for(var Le=0,D=G.length,W=D>>>1;Le<W;){var ce=2*(Le+1)-1,oe=G[ce],de=ce+1,ne=G[de];if(0>l(oe,ve))de<D&&0>l(ne,oe)?(G[Le]=ne,G[de]=ve,Le=de):(G[Le]=oe,G[ce]=ve,Le=ce);else if(de<D&&0>l(ne,ve))G[Le]=ne,G[de]=ve,Le=de;else break e}}return ue}function l(G,ue){var ve=G.sortIndex-ue.sortIndex;return ve!==0?ve:G.id-ue.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();s.unstable_now=function(){return d.now()-p}}var y=[],g=[],b=1,R=null,M=3,B=!1,Q=!1,ee=!1,X=!1,F=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function Ne(G){for(var ue=i(g);ue!==null;){if(ue.callback===null)r(g);else if(ue.startTime<=G)r(g),ue.sortIndex=ue.expirationTime,e(y,ue);else break;ue=i(g)}}function ae(G){if(ee=!1,Ne(G),!Q)if(i(y)!==null)Q=!0,ie||(ie=!0,P());else{var ue=i(g);ue!==null&&$e(ae,ue.startTime-G)}}var ie=!1,I=-1,A=5,w=-1;function V(){return X?!0:!(s.unstable_now()-w<A)}function x(){if(X=!1,ie){var G=s.unstable_now();w=G;var ue=!0;try{e:{Q=!1,ee&&(ee=!1,fe(I),I=-1),B=!0;var ve=M;try{t:{for(Ne(G),R=i(y);R!==null&&!(R.expirationTime>G&&V());){var Le=R.callback;if(typeof Le=="function"){R.callback=null,M=R.priorityLevel;var D=Le(R.expirationTime<=G);if(G=s.unstable_now(),typeof D=="function"){R.callback=D,Ne(G),ue=!0;break t}R===i(y)&&r(y),Ne(G)}else r(y);R=i(y)}if(R!==null)ue=!0;else{var W=i(g);W!==null&&$e(ae,W.startTime-G),ue=!1}}break e}finally{R=null,M=ve,B=!1}ue=void 0}}finally{ue?P():ie=!1}}}var P;if(typeof he=="function")P=function(){he(x)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Je=C.port2;C.port1.onmessage=x,P=function(){Je.postMessage(null)}}else P=function(){F(x,0)};function $e(G,ue){I=F(function(){G(s.unstable_now())},ue)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return M},s.unstable_next=function(G){switch(M){case 1:case 2:case 3:var ue=3;break;default:ue=M}var ve=M;M=ue;try{return G()}finally{M=ve}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(G,ue){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ve=M;M=G;try{return ue()}finally{M=ve}},s.unstable_scheduleCallback=function(G,ue,ve){var Le=s.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Le+ve:Le):ve=Le,G){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=ve+D,G={id:b++,callback:ue,priorityLevel:G,startTime:ve,expirationTime:D,sortIndex:-1},ve>Le?(G.sortIndex=ve,e(g,G),i(y)===null&&G===i(g)&&(ee?(fe(I),I=-1):ee=!0,$e(ae,ve-Le))):(G.sortIndex=D,e(y,G),Q||B||(Q=!0,ie||(ie=!0,P()))),G},s.unstable_shouldYield=V,s.unstable_wrapCallback=function(G){var ue=M;return function(){var ve=M;M=ue;try{return G.apply(this,arguments)}finally{M=ve}}}})(dd)),dd}var p_;function $b(){return p_||(p_=1,fd.exports=Xb()),fd.exports}var md={exports:{}},cn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g_;function Zb(){if(g_)return cn;g_=1;var s=sm();function e(y){var g="https://react.dev/errors/"+y;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+y+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(y,g,b){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:R==null?null:""+R,children:y,containerInfo:g,implementation:b}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(y,g){if(y==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return cn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,cn.createPortal=function(y,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(y,g,null,b)},cn.flushSync=function(y){var g=d.T,b=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=g,r.p=b,r.d.f()}},cn.preconnect=function(y,g){typeof y=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(y,g))},cn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},cn.preinit=function(y,g){if(typeof y=="string"&&g&&typeof g.as=="string"){var b=g.as,R=p(b,g.crossOrigin),M=typeof g.integrity=="string"?g.integrity:void 0,B=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?r.d.S(y,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:R,integrity:M,fetchPriority:B}):b==="script"&&r.d.X(y,{crossOrigin:R,integrity:M,fetchPriority:B,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},cn.preinitModule=function(y,g){if(typeof y=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);r.d.M(y,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(y)},cn.preload=function(y,g){if(typeof y=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,R=p(b,g.crossOrigin);r.d.L(y,b,{crossOrigin:R,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},cn.preloadModule=function(y,g){if(typeof y=="string")if(g){var b=p(g.as,g.crossOrigin);r.d.m(y,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(y)},cn.requestFormReset=function(y){r.d.r(y)},cn.unstable_batchedUpdates=function(y,g){return y(g)},cn.useFormState=function(y,g,b){return d.H.useFormState(y,g,b)},cn.useFormStatus=function(){return d.H.useHostTransitionStatus()},cn.version="19.1.1",cn}var y_;function Wb(){if(y_)return md.exports;y_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),md.exports=Zb(),md.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function Jb(){if(__)return vl;__=1;var s=$b(),e=sm(),i=Wb();function r(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(c(t)!==t)throw Error(r(188))}function y(t){var n=t.alternate;if(!n){if(n=c(t),n===null)throw Error(r(188));return n!==t?null:t}for(var a=t,o=n;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(o=h.return,o!==null){a=o;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return p(h),t;if(f===o)return p(h),n;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=h,o=f;else{for(var v=!1,E=h.child;E;){if(E===a){v=!0,a=h,o=f;break}if(E===o){v=!0,o=h,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=h;break}if(E===o){v=!0,o=f,a=h;break}E=E.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:n}function g(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=g(t),n!==null)return n;t=t.sibling}return null}var b=Object.assign,R=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),ee=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),fe=Symbol.for("react.consumer"),he=Symbol.for("react.context"),Ne=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=x&&t[x]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case X:return"Profiler";case ee:return"StrictMode";case ae:return"Suspense";case ie:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case he:return(t.displayName||"Context")+".Provider";case fe:return(t._context.displayName||"Context")+".Consumer";case Ne:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:Je(t.type)||"Memo";case A:n=t._payload,t=t._init;try{return Je(t(n))}catch{}}return null}var $e=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Le=[],D=-1;function W(t){return{current:t}}function ce(t){0>D||(t.current=Le[D],Le[D]=null,D--)}function oe(t,n){D++,Le[D]=t.current,t.current=n}var de=W(null),ne=W(null),se=W(null),ge=W(null);function me(t,n){switch(oe(se,n),oe(ne,t),oe(de,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?jy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=jy(n),t=Ly(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ce(de),oe(de,t)}function Ye(){ce(de),ce(ne),ce(se)}function ht(t){t.memoizedState!==null&&oe(ge,t);var n=de.current,a=Ly(n,t.type);n!==a&&(oe(ne,t),oe(de,a))}function Zt(t){ne.current===t&&(ce(de),ce(ne)),ge.current===t&&(ce(ge),dl._currentValue=ve)}var on=Object.prototype.hasOwnProperty,ft=s.unstable_scheduleCallback,Vi=s.unstable_cancelCallback,ia=s.unstable_shouldYield,ur=s.unstable_requestPaint,Wt=s.unstable_now,ra=s.unstable_getCurrentPriorityLevel,At=s.unstable_ImmediatePriority,Rt=s.unstable_UserBlockingPriority,Vn=s.unstable_NormalPriority,go=s.unstable_LowPriority,rs=s.unstable_IdlePriority,yo=s.log,Pi=s.unstable_setDisableYieldValue,hi=null,Bt=null;function vn(t){if(typeof yo=="function"&&Pi(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(hi,t)}catch{}}var te=Math.clz32?Math.clz32:Ge,pe=Math.log,Pe=Math.LN2;function Ge(t){return t>>>=0,t===0?32:31-(pe(t)/Pe|0)|0}var xe=256,Pt=4194304;function Tn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ht(t,n,a){var o=t.pendingLanes;if(o===0)return 0;var h=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?h=Tn(o):(v&=E,v!==0?h=Tn(v):a||(a=E&~t,a!==0&&(h=Tn(a))))):(E=o&~f,E!==0?h=Tn(E):v!==0?h=Tn(v):a||(a=o&~t,a!==0&&(h=Tn(a)))),h===0?0:n!==0&&n!==h&&(n&f)===0&&(f=h&-h,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:h}function Yn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Xn(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(){var t=xe;return xe<<=1,(xe&4194048)===0&&(xe=256),t}function $n(){var t=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),t}function cr(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function gt(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function sa(t,n,a,o,h,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var E=t.entanglements,N=t.expirationTimes,L=t.hiddenUpdates;for(a=v&~a;0<a;){var K=31-te(a),Z=1<<K;E[K]=0,N[K]=-1;var z=L[K];if(z!==null)for(L[K]=null,K=0;K<z.length;K++){var q=z[K];q!==null&&(q.lane&=-536870913)}a&=~Z}o!==0&&fi(t,o,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~n))}function fi(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-te(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function Zn(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var o=31-te(a),h=1<<o;h&n|t[o]&n&&(t[o]|=n),a&=~h}}function as(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function os(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ke(){var t=ue.p;return t!==0?t:(t=window.event,t===void 0?32:r_(t.type))}function kt(t,n){var a=ue.p;try{return ue.p=t,n()}finally{ue.p=a}}var Ft=Math.random().toString(36).slice(2),ot="__reactFiber$"+Ft,Et="__reactProps$"+Ft,Rn="__reactContainer$"+Ft,ls="__reactEvents$"+Ft,us="__reactListeners$"+Ft,mh="__reactHandles$"+Ft,Wn="__reactResources$"+Ft,hr="__reactMarker$"+Ft;function aa(t){delete t[ot],delete t[Et],delete t[ls],delete t[us],delete t[mh]}function di(t){var n=t[ot];if(n)return n;for(var a=t.parentNode;a;){if(n=a[Rn]||a[ot]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Hy(t);t!==null;){if(a=t[ot])return a;t=Hy(t)}return n}t=a,a=t.parentNode}return null}function mi(t){if(t=t[ot]||t[Rn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function fr(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(r(33))}function dr(t){var n=t[Wn];return n||(n=t[Wn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function wt(t){t[hr]=!0}var Wl=new Set,cs={};function pi(t,n){gi(t,n),gi(t+"Capture",n)}function gi(t,n){for(cs[t]=n,t=0;t<n.length;t++)Wl.add(n[t])}var hs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yi={},oa={};function ph(t){return on.call(oa,t)?!0:on.call(yi,t)?!1:hs.test(t)?oa[t]=!0:(yi[t]=!0,!1)}function fs(t,n,a){if(ph(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function ds(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Pn(t,n,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+o)}}var ms,la;function ki(t){if(ms===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);ms=n&&n[1]||"",la=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ms+t+la}var ua=!1;function ca(t,n){if(!t||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var z=q}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(q){z=q}t.call(Z.prototype)}}else{try{throw Error()}catch(q){z=q}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&z&&typeof q.stack=="string")return[q.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var N=v.split(`
`),L=E.split(`
`);for(h=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;if(o===N.length||h===L.length)for(o=N.length-1,h=L.length-1;1<=o&&0<=h&&N[o]!==L[h];)h--;for(;1<=o&&0<=h;o--,h--)if(N[o]!==L[h]){if(o!==1||h!==1)do if(o--,h--,0>h||N[o]!==L[h]){var K=`
`+N[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=h);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ki(a):""}function gh(t){switch(t.tag){case 26:case 27:case 5:return ki(t.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 15:return ca(t.type,!1);case 11:return ca(t.type.render,!1);case 1:return ca(t.type,!0);case 31:return ki("Activity");default:return""}}function Jn(t){try{var n="";do n+=gh(t),t=t.return;while(t);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function yt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mr(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ps(t){var n=mr(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),o=""+t[n];if(!t.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return h.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function pr(t){t._valueTracker||(t._valueTracker=ps(t))}function it(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return t&&(o=mr(t)?t.checked?"true":"false":t.value),t=o,t!==a?(n.setValue(t),!0):!1}function Ui(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var gs=/[\n"\\]/g;function Gt(t){return t.replace(gs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function _o(t,n,a,o,h,f,v,E){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+yt(n)):t.value!==""+yt(n)&&(t.value=""+yt(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?To(t,v,yt(n)):a!=null?To(t,v,yt(a)):o!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+yt(E):t.removeAttribute("name")}function vo(t,n,a,o,h,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+yt(a):"",n=n!=null?""+yt(n):a,E||n===t.value||(t.value=n),t.defaultValue=n}o=o??h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function To(t,n,a){n==="number"&&Ui(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gr(t,n,a,o){if(t=t.options,n){n={};for(var h=0;h<a.length;h++)n["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=n.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&o&&(t[a].defaultSelected=!0)}else{for(a=""+yt(a),n=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}n!==null||t[h].disabled||(n=t[h])}n!==null&&(n.selected=!0)}}function Jl(t,n,a){if(n!=null&&(n=""+yt(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+yt(a):""}function eu(t,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(r(92));if($e(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=yt(n),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function kn(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var ji=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eo(t,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,a):typeof a!="number"||a===0||ji.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function bo(t,n,a){if(n!=null&&typeof n!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in n)o=n[h],n.hasOwnProperty(h)&&a[h]!==o&&Eo(t,h,o)}else for(var f in n)n.hasOwnProperty(f)&&Eo(t,f,n[f])}function ha(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(t){return nu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var So=null;function Ao(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yr=null,pn=null;function iu(t){var n=mi(t);if(n&&(t=n.stateNode)){var a=t[Et]||null;e:switch(t=n.stateNode,n.type){case"input":if(_o(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Gt(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==t&&o.form===t.form){var h=o[Et]||null;if(!h)throw Error(r(90));_o(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===t.form&&it(o)}break e;case"textarea":Jl(t,a.value,a.defaultValue);break e;case"select":n=a.value,n!=null&&gr(t,!!a.multiple,n,!1)}}}var ys=!1;function _s(t,n,a){if(ys)return t(n,a);ys=!0;try{var o=t(n);return o}finally{if(ys=!1,(yr!==null||pn!==null)&&(Qu(),yr&&(n=yr,t=pn,pn=yr=null,iu(n),t)))for(n=0;n<t.length;n++)iu(t[n])}}function _r(t,n){var a=t.stateNode;if(a===null)return null;var o=a[Et]||null;if(o===null)return null;a=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,n,typeof a));return a}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Li=!1;if(gn)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){Li=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{Li=!1}var Un=null,ut=null,fa=null;function ru(){if(fa)return fa;var t,n=ut,a=n.length,o,h="value"in Un?Un.value:Un.textContent,f=h.length;for(t=0;t<a&&n[t]===h[t];t++);var v=a-t;for(o=1;o<=v&&n[a-o]===h[f-o];o++);return fa=h.slice(t,1<o?1-o:void 0)}function vs(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Ts(){return!0}function Ro(){return!1}function Ut(t){function n(a,o,h,f,v){this._reactName=a,this._targetInst=h,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(a=t[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ts:Ro,this.isPropagationStopped=Ro,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ts)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ts)},persist:function(){},isPersistent:Ts}),n}var ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=Ut(ln),bs=b({},ln,{view:0,detail:0}),Ss=Ut(bs),da,As,_i,Rs=b({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_i&&(_i&&t.type==="mousemove"?(da=t.screenX-_i.screenX,As=t.screenY-_i.screenY):As=da=0,_i=t),da)},movementY:function(t){return"movementY"in t?t.movementY:As}}),ws=Ut(Rs),yh=b({},Rs,{dataTransfer:0}),su=Ut(yh),Is=b({},bs,{relatedTarget:0}),ma=Ut(Is),au=b({},ln,{animationName:0,elapsedTime:0,pseudoElement:0}),wo=Ut(au),Io=b({},ln,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ou=Ut(Io),pa=b({},ln,{data:0}),Co=Ut(pa),lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=uu[t])?!!n[t]:!1}function ga(){return cu}var hu=b({},bs,{key:function(t){if(t.key){var n=lu[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ga,charCode:function(t){return t.type==="keypress"?vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ya=Ut(hu),yn=b({},Rs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=Ut(yn),fu=b({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ga}),Tr=Ut(fu),u=b({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),m=Ut(u),_=b({},Rs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S=Ut(_),j=b({},ln,{newState:0,oldState:0}),H=Ut(j),le=[9,13,27,32],Oe=gn&&"CompositionEvent"in window,dt=null;gn&&"documentMode"in document&&(dt=document.documentMode);var et=gn&&"TextEvent"in window&&!dt,It=gn&&(!Oe||dt&&8<dt&&11>=dt),wn=" ",vi=!1;function ti(t,n){switch(t){case"keyup":return le.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ni(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ii=!1;function xo(t,n){switch(t){case"compositionend":return ni(n);case"keypress":return n.which!==32?null:(vi=!0,wn);case"textInput":return t=n.data,t===wn&&vi?null:t;default:return null}}function vE(t,n){if(ii)return t==="compositionend"||!Oe&&ti(t,n)?(t=ru(),fa=ut=Un=null,ii=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return It&&n.locale!=="ko"?null:n.data;default:return null}}var TE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!TE[t.type]:n==="textarea"}function Jm(t,n,a,o){yr?pn?pn.push(o):pn=[o]:yr=o,n=Wu(n,"onChange"),0<n.length&&(a=new Es("onChange","change",null,a,o),t.push({event:a,listeners:n}))}var Do=null,Oo=null;function EE(t){My(t,0)}function du(t){var n=fr(t);if(it(n))return t}function ep(t,n){if(t==="change")return n}var tp=!1;if(gn){var _h;if(gn){var vh="oninput"in document;if(!vh){var np=document.createElement("div");np.setAttribute("oninput","return;"),vh=typeof np.oninput=="function"}_h=vh}else _h=!1;tp=_h&&(!document.documentMode||9<document.documentMode)}function ip(){Do&&(Do.detachEvent("onpropertychange",rp),Oo=Do=null)}function rp(t){if(t.propertyName==="value"&&du(Oo)){var n=[];Jm(n,Oo,t,Ao(t)),_s(EE,n)}}function bE(t,n,a){t==="focusin"?(ip(),Do=n,Oo=a,Do.attachEvent("onpropertychange",rp)):t==="focusout"&&ip()}function SE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return du(Oo)}function AE(t,n){if(t==="click")return du(n)}function RE(t,n){if(t==="input"||t==="change")return du(n)}function wE(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var In=typeof Object.is=="function"?Object.is:wE;function Mo(t,n){if(In(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var h=a[o];if(!on.call(n,h)||!In(t[h],n[h]))return!1}return!0}function sp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ap(t,n){var a=sp(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=n&&o>=n)return{node:a,offset:n-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=sp(a)}}function op(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?op(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function lp(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ui(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=Ui(t.document)}return n}function Th(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var IE=gn&&"documentMode"in document&&11>=document.documentMode,_a=null,Eh=null,Vo=null,bh=!1;function up(t,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;bh||_a==null||_a!==Ui(o)||(o=_a,"selectionStart"in o&&Th(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Vo&&Mo(Vo,o)||(Vo=o,o=Wu(Eh,"onSelect"),0<o.length&&(n=new Es("onSelect","select",null,n,a),t.push({event:n,listeners:o}),n.target=_a)))}function Cs(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var va={animationend:Cs("Animation","AnimationEnd"),animationiteration:Cs("Animation","AnimationIteration"),animationstart:Cs("Animation","AnimationStart"),transitionrun:Cs("Transition","TransitionRun"),transitionstart:Cs("Transition","TransitionStart"),transitioncancel:Cs("Transition","TransitionCancel"),transitionend:Cs("Transition","TransitionEnd")},Sh={},cp={};gn&&(cp=document.createElement("div").style,"AnimationEvent"in window||(delete va.animationend.animation,delete va.animationiteration.animation,delete va.animationstart.animation),"TransitionEvent"in window||delete va.transitionend.transition);function Ns(t){if(Sh[t])return Sh[t];if(!va[t])return t;var n=va[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in cp)return Sh[t]=n[a];return t}var hp=Ns("animationend"),fp=Ns("animationiteration"),dp=Ns("animationstart"),CE=Ns("transitionrun"),NE=Ns("transitionstart"),xE=Ns("transitioncancel"),mp=Ns("transitionend"),pp=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function ri(t,n){pp.set(t,n),pi(n,[t])}var gp=new WeakMap;function jn(t,n){if(typeof t=="object"&&t!==null){var a=gp.get(t);return a!==void 0?a:(n={value:t,source:n,stack:Jn(n)},gp.set(t,n),n)}return{value:t,source:n,stack:Jn(n)}}var Ln=[],Ta=0,Rh=0;function mu(){for(var t=Ta,n=Rh=Ta=0;n<t;){var a=Ln[n];Ln[n++]=null;var o=Ln[n];Ln[n++]=null;var h=Ln[n];Ln[n++]=null;var f=Ln[n];if(Ln[n++]=null,o!==null&&h!==null){var v=o.pending;v===null?h.next=h:(h.next=v.next,v.next=h),o.pending=h}f!==0&&yp(a,h,f)}}function pu(t,n,a,o){Ln[Ta++]=t,Ln[Ta++]=n,Ln[Ta++]=a,Ln[Ta++]=o,Rh|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function wh(t,n,a,o){return pu(t,n,a,o),gu(t)}function Ea(t,n){return pu(t,null,null,n),gu(t)}function yp(t,n,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&n!==null&&(h=31-te(a),t=f.hiddenUpdates,o=t[h],o===null?t[h]=[n]:o.push(n),n.lane=a|536870912),f):null}function gu(t){if(50<sl)throw sl=0,Mf=null,Error(r(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var ba={};function DE(t,n,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,n,a,o){return new DE(t,n,a,o)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qi(t,n){var a=t.alternate;return a===null?(a=Cn(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function _p(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function yu(t,n,a,o,h,f){var v=0;if(o=t,typeof t=="function")Ih(t)&&(v=1);else if(typeof t=="string")v=Mb(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=Cn(31,a,n,h),t.elementType=w,t.lanes=f,t;case Q:return xs(a.children,h,f,n);case ee:v=8,h|=24;break;case X:return t=Cn(12,a,n,h|2),t.elementType=X,t.lanes=f,t;case ae:return t=Cn(13,a,n,h),t.elementType=ae,t.lanes=f,t;case ie:return t=Cn(19,a,n,h),t.elementType=ie,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:case he:v=10;break e;case fe:v=9;break e;case Ne:v=11;break e;case I:v=14;break e;case A:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return n=Cn(v,a,n,h),n.elementType=t,n.type=o,n.lanes=f,n}function xs(t,n,a,o){return t=Cn(7,t,o,n),t.lanes=a,t}function Ch(t,n,a){return t=Cn(6,t,null,n),t.lanes=a,t}function Nh(t,n,a){return n=Cn(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Sa=[],Aa=0,_u=null,vu=0,zn=[],qn=0,Ds=null,Bi=1,Hi="";function Os(t,n){Sa[Aa++]=vu,Sa[Aa++]=_u,_u=t,vu=n}function vp(t,n,a){zn[qn++]=Bi,zn[qn++]=Hi,zn[qn++]=Ds,Ds=t;var o=Bi;t=Hi;var h=32-te(o)-1;o&=~(1<<h),a+=1;var f=32-te(n)+h;if(30<f){var v=h-h%5;f=(o&(1<<v)-1).toString(32),o>>=v,h-=v,Bi=1<<32-te(n)+h|a<<h|o,Hi=f+t}else Bi=1<<f|a<<h|o,Hi=t}function xh(t){t.return!==null&&(Os(t,1),vp(t,1,0))}function Dh(t){for(;t===_u;)_u=Sa[--Aa],Sa[Aa]=null,vu=Sa[--Aa],Sa[Aa]=null;for(;t===Ds;)Ds=zn[--qn],zn[qn]=null,Hi=zn[--qn],zn[qn]=null,Bi=zn[--qn],zn[qn]=null}var _n=null,bt=null,Ze=!1,Ms=null,Ti=!1,Oh=Error(r(519));function Vs(t){var n=Error(r(418,""));throw Uo(jn(n,t)),Oh}function Tp(t){var n=t.stateNode,a=t.type,o=t.memoizedProps;switch(n[ot]=t,n[Et]=o,a){case"dialog":qe("cancel",n),qe("close",n);break;case"iframe":case"object":case"embed":qe("load",n);break;case"video":case"audio":for(a=0;a<ol.length;a++)qe(ol[a],n);break;case"source":qe("error",n);break;case"img":case"image":case"link":qe("error",n),qe("load",n);break;case"details":qe("toggle",n);break;case"input":qe("invalid",n),vo(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),pr(n);break;case"select":qe("invalid",n);break;case"textarea":qe("invalid",n),eu(n,o.value,o.defaultValue,o.children),pr(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||Uy(n.textContent,a)?(o.popover!=null&&(qe("beforetoggle",n),qe("toggle",n)),o.onScroll!=null&&qe("scroll",n),o.onScrollEnd!=null&&qe("scrollend",n),o.onClick!=null&&(n.onclick=Ju),n=!0):n=!1,n||Vs(t)}function Ep(t){for(_n=t.return;_n;)switch(_n.tag){case 5:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:_n=_n.return}}function Po(t){if(t!==_n)return!1;if(!Ze)return Ep(t),Ze=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xf(t.type,t.memoizedProps)),a=!a),a&&bt&&Vs(t),Ep(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(n===0){bt=ai(t.nextSibling);break e}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;t=t.nextSibling}bt=null}}else n===27?(n=bt,kr(t.type)?(t=Jf,Jf=null,bt=t):bt=n):bt=_n?ai(t.stateNode.nextSibling):null;return!0}function ko(){bt=_n=null,Ze=!1}function bp(){var t=Ms;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Ms=null),t}function Uo(t){Ms===null?Ms=[t]:Ms.push(t)}var Mh=W(null),Ps=null,Fi=null;function Er(t,n,a){oe(Mh,n._currentValue),n._currentValue=a}function Gi(t){t._currentValue=Mh.current,ce(Mh)}function Vh(t,n,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===a)break;t=t.return}}function Ph(t,n,a,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var v=h.child;f=f.firstContext;e:for(;f!==null;){var E=f;f=h;for(var N=0;N<n.length;N++)if(E.context===n[N]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Vh(f.return,a,t),o||(v=null);break e}f=E.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Vh(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function jo(t,n,a,o){t=null;for(var h=n,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var E=h.type;In(h.pendingProps.value,v.value)||(t!==null?t.push(E):t=[E])}}else if(h===ge.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(dl):t=[dl])}h=h.return}t!==null&&Ph(n,t,a,o),n.flags|=262144}function Tu(t){for(t=t.firstContext;t!==null;){if(!In(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ks(t){Ps=t,Fi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function un(t){return Sp(Ps,t)}function Eu(t,n){return Ps===null&&ks(t),Sp(t,n)}function Sp(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Fi===null){if(t===null)throw Error(r(308));Fi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Fi=Fi.next=n;return a}var OE=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},ME=s.unstable_scheduleCallback,VE=s.unstable_NormalPriority,jt={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function kh(){return{controller:new OE,data:new Map,refCount:0}}function Lo(t){t.refCount--,t.refCount===0&&ME(VE,function(){t.controller.abort()})}var zo=null,Uh=0,Ra=0,wa=null;function PE(t,n){if(zo===null){var a=zo=[];Uh=0,Ra=zf(),wa={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Uh++,n.then(Ap,Ap),n}function Ap(){if(--Uh===0&&zo!==null){wa!==null&&(wa.status="fulfilled");var t=zo;zo=null,Ra=0,wa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function kE(t,n){var a=[],o={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var h=0;h<a.length;h++)(0,a[h])(n)},function(h){for(o.status="rejected",o.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),o}var Rp=G.S;G.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&PE(t,n),Rp!==null&&Rp(t,n)};var Us=W(null);function jh(){var t=Us.current;return t!==null?t:ct.pooledCache}function bu(t,n){n===null?oe(Us,Us.current):oe(Us,n.pool)}function wp(){var t=jh();return t===null?null:{parent:jt._currentValue,pool:t}}var qo=Error(r(460)),Ip=Error(r(474)),Su=Error(r(542)),Lh={then:function(){}};function Cp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Au(){}function Np(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Au,Au),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t;default:if(typeof n.status=="string")n.then(Au,Au);else{if(t=ct,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var h=n;h.status="fulfilled",h.value=o}},function(o){if(n.status==="pending"){var h=n;h.status="rejected",h.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dp(t),t}throw Bo=n,qo}}var Bo=null;function xp(){if(Bo===null)throw Error(r(459));var t=Bo;return Bo=null,t}function Dp(t){if(t===qo||t===Su)throw Error(r(483))}var br=!1;function zh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Sr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ar(t,n,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(tt&2)!==0){var h=o.pending;return h===null?n.next=n:(n.next=h.next,h.next=n),o.pending=n,n=gu(t),yp(t,null,a),n}return pu(t,o,n,a),gu(t)}function Ho(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Zn(t,a)}}function Bh(t,n){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?h=f=n:f=f.next=n}else h=f=n;a={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var Hh=!1;function Fo(){if(Hh){var t=wa;if(t!==null)throw t}}function Go(t,n,a,o){Hh=!1;var h=t.updateQueue;br=!1;var f=h.firstBaseUpdate,v=h.lastBaseUpdate,E=h.shared.pending;if(E!==null){h.shared.pending=null;var N=E,L=N.next;N.next=null,v===null?f=L:v.next=L,v=N;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==v&&(E===null?K.firstBaseUpdate=L:E.next=L,K.lastBaseUpdate=N))}if(f!==null){var Z=h.baseState;v=0,K=L=N=null,E=f;do{var z=E.lane&-536870913,q=z!==E.lane;if(q?(Qe&z)===z:(o&z)===z){z!==0&&z===Ra&&(Hh=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ie=t,Ae=E;z=n;var at=a;switch(Ae.tag){case 1:if(Ie=Ae.payload,typeof Ie=="function"){Z=Ie.call(at,Z,z);break e}Z=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ae.payload,z=typeof Ie=="function"?Ie.call(at,Z,z):Ie,z==null)break e;Z=b({},Z,z);break e;case 2:br=!0}}z=E.callback,z!==null&&(t.flags|=64,q&&(t.flags|=8192),q=h.callbacks,q===null?h.callbacks=[z]:q.push(z))}else q={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(L=K=q,N=Z):K=K.next=q,v|=z;if(E=E.next,E===null){if(E=h.shared.pending,E===null)break;q=E,E=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);K===null&&(N=Z),h.baseState=N,h.firstBaseUpdate=L,h.lastBaseUpdate=K,f===null&&(h.shared.lanes=0),Or|=v,t.lanes=v,t.memoizedState=Z}}function Op(t,n){if(typeof t!="function")throw Error(r(191,t));t.call(n)}function Mp(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Op(a[t],n)}var Ia=W(null),Ru=W(0);function Vp(t,n){t=Wi,oe(Ru,t),oe(Ia,n),Wi=t|n.baseLanes}function Fh(){oe(Ru,Wi),oe(Ia,Ia.current)}function Gh(){Wi=Ru.current,ce(Ia),ce(Ru)}var Rr=0,Ue=null,rt=null,Dt=null,wu=!1,Ca=!1,js=!1,Iu=0,Qo=0,Na=null,UE=0;function Ct(){throw Error(r(321))}function Qh(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!In(t[a],n[a]))return!1;return!0}function Kh(t,n,a,o,h,f){return Rr=f,Ue=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=t===null||t.memoizedState===null?yg:_g,js=!1,f=a(o,h),js=!1,Ca&&(f=kp(n,a,o,h)),Pp(t),f}function Pp(t){G.H=Mu;var n=rt!==null&&rt.next!==null;if(Rr=0,Dt=rt=Ue=null,wu=!1,Qo=0,Na=null,n)throw Error(r(300));t===null||Qt||(t=t.dependencies,t!==null&&Tu(t)&&(Qt=!0))}function kp(t,n,a,o){Ue=t;var h=0;do{if(Ca&&(Na=null),Qo=0,Ca=!1,25<=h)throw Error(r(301));if(h+=1,Dt=rt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=FE,f=n(a,o)}while(Ca);return f}function jE(){var t=G.H,n=t.useState()[0];return n=typeof n.then=="function"?Ko(n):n,t=t.useState()[0],(rt!==null?rt.memoizedState:null)!==t&&(Ue.flags|=1024),n}function Yh(){var t=Iu!==0;return Iu=0,t}function Xh(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function $h(t){if(wu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}wu=!1}Rr=0,Dt=rt=Ue=null,Ca=!1,Qo=Iu=0,Na=null}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?Ue.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Ot(){if(rt===null){var t=Ue.alternate;t=t!==null?t.memoizedState:null}else t=rt.next;var n=Dt===null?Ue.memoizedState:Dt.next;if(n!==null)Dt=n,rt=t;else{if(t===null)throw Ue.alternate===null?Error(r(467)):Error(r(310));rt=t,t={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},Dt===null?Ue.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Zh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(t){var n=Qo;return Qo+=1,Na===null&&(Na=[]),t=Np(Na,t,n),n=Ue,(Dt===null?n.memoizedState:Dt.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?yg:_g),t}function Cu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ko(t);if(t.$$typeof===he)return un(t)}throw Error(r(438,String(t)))}function Wh(t){var n=null,a=Ue.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Ue.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(h){return h.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Zh(),Ue.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),o=0;o<t;o++)a[o]=V;return n.index++,a}function Qi(t,n){return typeof n=="function"?n(t):n}function Nu(t){var n=Ot();return Jh(n,rt,t)}function Jh(t,n,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var h=t.baseQueue,f=o.pending;if(f!==null){if(h!==null){var v=h.next;h.next=f.next,f.next=v}n.baseQueue=h=f,o.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{n=h.next;var E=v=null,N=null,L=n,K=!1;do{var Z=L.lane&-536870913;if(Z!==L.lane?(Qe&Z)===Z:(Rr&Z)===Z){var z=L.revertLane;if(z===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),Z===Ra&&(K=!0);else if((Rr&z)===z){L=L.next,z===Ra&&(K=!0);continue}else Z={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(E=N=Z,v=f):N=N.next=Z,Ue.lanes|=z,Or|=z;Z=L.action,js&&a(f,Z),f=L.hasEagerState?L.eagerState:a(f,Z)}else z={lane:Z,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},N===null?(E=N=z,v=f):N=N.next=z,Ue.lanes|=Z,Or|=Z;L=L.next}while(L!==null&&L!==n);if(N===null?v=f:N.next=E,!In(f,t.memoizedState)&&(Qt=!0,K&&(a=wa,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=N,o.lastRenderedState=f}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ef(t){var n=Ot(),a=n.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,h=a.pending,f=n.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do f=t(f,v.action),v=v.next;while(v!==h);In(f,n.memoizedState)||(Qt=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function Up(t,n,a){var o=Ue,h=Ot(),f=Ze;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=n();var v=!In((rt||h).memoizedState,a);v&&(h.memoizedState=a,Qt=!0),h=h.queue;var E=zp.bind(null,o,h,t);if(Yo(2048,8,E,[t]),h.getSnapshot!==n||v||Dt!==null&&Dt.memoizedState.tag&1){if(o.flags|=2048,xa(9,xu(),Lp.bind(null,o,h,a,n),null),ct===null)throw Error(r(349));f||(Rr&124)!==0||jp(o,n,a)}return a}function jp(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=Ue.updateQueue,n===null?(n=Zh(),Ue.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function Lp(t,n,a,o){n.value=a,n.getSnapshot=o,qp(n)&&Bp(t)}function zp(t,n,a){return a(function(){qp(n)&&Bp(t)})}function qp(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!In(t,a)}catch{return!0}}function Bp(t){var n=Ea(t,2);n!==null&&Mn(n,t,2)}function tf(t){var n=En();if(typeof t=="function"){var a=t;if(t=a(),js){vn(!0);try{a()}finally{vn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:t},n}function Hp(t,n,a,o){return t.baseState=a,Jh(t,rt,typeof o=="function"?o:Qi)}function LE(t,n,a,o,h){if(Ou(t))throw Error(r(485));if(t=n.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Fp(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Fp(t,n){var a=n.action,o=n.payload,h=t.state;if(n.isTransition){var f=G.T,v={};G.T=v;try{var E=a(h,o),N=G.S;N!==null&&N(v,E),Gp(t,n,E)}catch(L){nf(t,n,L)}finally{G.T=f}}else try{f=a(h,o),Gp(t,n,f)}catch(L){nf(t,n,L)}}function Gp(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Qp(t,n,o)},function(o){return nf(t,n,o)}):Qp(t,n,a)}function Qp(t,n,a){n.status="fulfilled",n.value=a,Kp(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Fp(t,a)))}function nf(t,n,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Kp(n),n=n.next;while(n!==o)}t.action=null}function Kp(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Yp(t,n){return n}function Xp(t,n){if(Ze){var a=ct.formState;if(a!==null){e:{var o=Ue;if(Ze){if(bt){t:{for(var h=bt,f=Ti;h.nodeType!==8;){if(!f){h=null;break t}if(h=ai(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){bt=ai(h.nextSibling),o=h.data==="F!";break e}}Vs(o)}o=!1}o&&(n=a[0])}}return a=En(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yp,lastRenderedState:n},a.queue=o,a=mg.bind(null,Ue,o),o.dispatch=a,o=tf(!1),f=lf.bind(null,Ue,!1,o.queue),o=En(),h={state:n,dispatch:null,action:t,pending:null},o.queue=h,a=LE.bind(null,Ue,h,f,a),h.dispatch=a,o.memoizedState=t,[n,a,!1]}function $p(t){var n=Ot();return Zp(n,rt,t)}function Zp(t,n,a){if(n=Jh(t,n,Yp)[0],t=Nu(Qi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ko(n)}catch(v){throw v===qo?Su:v}else o=n;n=Ot();var h=n.queue,f=h.dispatch;return a!==n.memoizedState&&(Ue.flags|=2048,xa(9,xu(),zE.bind(null,h,a),null)),[o,f,t]}function zE(t,n){t.action=n}function Wp(t){var n=Ot(),a=rt;if(a!==null)return Zp(n,a,t);Ot(),n=n.memoizedState,a=Ot();var o=a.queue.dispatch;return a.memoizedState=t,[n,o,!1]}function xa(t,n,a,o){return t={tag:t,create:a,deps:o,inst:n,next:null},n=Ue.updateQueue,n===null&&(n=Zh(),Ue.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,n.lastEffect=t),t}function xu(){return{destroy:void 0,resource:void 0}}function Jp(){return Ot().memoizedState}function Du(t,n,a,o){var h=En();o=o===void 0?null:o,Ue.flags|=t,h.memoizedState=xa(1|n,xu(),a,o)}function Yo(t,n,a,o){var h=Ot();o=o===void 0?null:o;var f=h.memoizedState.inst;rt!==null&&o!==null&&Qh(o,rt.memoizedState.deps)?h.memoizedState=xa(n,f,a,o):(Ue.flags|=t,h.memoizedState=xa(1|n,f,a,o))}function eg(t,n){Du(8390656,8,t,n)}function tg(t,n){Yo(2048,8,t,n)}function ng(t,n){return Yo(4,2,t,n)}function ig(t,n){return Yo(4,4,t,n)}function rg(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function sg(t,n,a){a=a!=null?a.concat([t]):null,Yo(4,4,rg.bind(null,n,t),a)}function rf(){}function ag(t,n){var a=Ot();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&Qh(n,o[1])?o[0]:(a.memoizedState=[t,n],t)}function og(t,n){var a=Ot();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&Qh(n,o[1]))return o[0];if(o=t(),js){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[o,n],o}function sf(t,n,a){return a===void 0||(Rr&1073741824)!==0?t.memoizedState=n:(t.memoizedState=a,t=cy(),Ue.lanes|=t,Or|=t,a)}function lg(t,n,a,o){return In(a,n)?a:Ia.current!==null?(t=sf(t,a,o),In(t,n)||(Qt=!0),t):(Rr&42)===0?(Qt=!0,t.memoizedState=a):(t=cy(),Ue.lanes|=t,Or|=t,n)}function ug(t,n,a,o,h){var f=ue.p;ue.p=f!==0&&8>f?f:8;var v=G.T,E={};G.T=E,lf(t,!1,n,a);try{var N=h(),L=G.S;if(L!==null&&L(E,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var K=kE(N,o);Xo(t,n,K,On(t))}else Xo(t,n,o,On(t))}catch(Z){Xo(t,n,{then:function(){},status:"rejected",reason:Z},On())}finally{ue.p=f,G.T=v}}function qE(){}function af(t,n,a,o){if(t.tag!==5)throw Error(r(476));var h=cg(t).queue;ug(t,h,n,ve,a===null?qE:function(){return hg(t),a(o)})}function cg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:ve},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function hg(t){var n=cg(t).next.queue;Xo(t,n,{},On())}function of(){return un(dl)}function fg(){return Ot().memoizedState}function dg(){return Ot().memoizedState}function BE(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=On();t=Sr(a);var o=Ar(n,t,a);o!==null&&(Mn(o,n,a),Ho(o,n,a)),n={cache:kh()},t.payload=n;return}n=n.return}}function HE(t,n,a){var o=On();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ou(t)?pg(n,a):(a=wh(t,n,a,o),a!==null&&(Mn(a,t,o),gg(a,n,o)))}function mg(t,n,a){var o=On();Xo(t,n,a,o)}function Xo(t,n,a,o){var h={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ou(t))pg(n,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(h.hasEagerState=!0,h.eagerState=E,In(E,v))return pu(t,n,h,0),ct===null&&mu(),!1}catch{}finally{}if(a=wh(t,n,h,o),a!==null)return Mn(a,t,o),gg(a,n,o),!0}return!1}function lf(t,n,a,o){if(o={lane:2,revertLane:zf(),action:o,hasEagerState:!1,eagerState:null,next:null},Ou(t)){if(n)throw Error(r(479))}else n=wh(t,a,o,2),n!==null&&Mn(n,t,2)}function Ou(t){var n=t.alternate;return t===Ue||n!==null&&n===Ue}function pg(t,n){Ca=wu=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function gg(t,n,a){if((a&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,a|=o,n.lanes=a,Zn(t,a)}}var Mu={readContext:un,use:Cu,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},yg={readContext:un,use:Cu,useCallback:function(t,n){return En().memoizedState=[t,n===void 0?null:n],t},useContext:un,useEffect:eg,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Du(4194308,4,rg.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Du(4194308,4,t,n)},useInsertionEffect:function(t,n){Du(4,2,t,n)},useMemo:function(t,n){var a=En();n=n===void 0?null:n;var o=t();if(js){vn(!0);try{t()}finally{vn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(t,n,a){var o=En();if(a!==void 0){var h=a(n);if(js){vn(!0);try{a(n)}finally{vn(!1)}}}else h=n;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=HE.bind(null,Ue,t),[o.memoizedState,t]},useRef:function(t){var n=En();return t={current:t},n.memoizedState=t},useState:function(t){t=tf(t);var n=t.queue,a=mg.bind(null,Ue,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:rf,useDeferredValue:function(t,n){var a=En();return sf(a,t,n)},useTransition:function(){var t=tf(!1);return t=ug.bind(null,Ue,t.queue,!0,!1),En().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var o=Ue,h=En();if(Ze){if(a===void 0)throw Error(r(407));a=a()}else{if(a=n(),ct===null)throw Error(r(349));(Qe&124)!==0||jp(o,n,a)}h.memoizedState=a;var f={value:a,getSnapshot:n};return h.queue=f,eg(zp.bind(null,o,f,t),[t]),o.flags|=2048,xa(9,xu(),Lp.bind(null,o,f,a,n),null),a},useId:function(){var t=En(),n=ct.identifierPrefix;if(Ze){var a=Hi,o=Bi;a=(o&~(1<<32-te(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Iu++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=UE++,n="«"+n+"r"+a.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:of,useFormState:Xp,useActionState:Xp,useOptimistic:function(t){var n=En();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=lf.bind(null,Ue,!0,a),a.dispatch=n,[t,n]},useMemoCache:Wh,useCacheRefresh:function(){return En().memoizedState=BE.bind(null,Ue)}},_g={readContext:un,use:Cu,useCallback:ag,useContext:un,useEffect:tg,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:og,useReducer:Nu,useRef:Jp,useState:function(){return Nu(Qi)},useDebugValue:rf,useDeferredValue:function(t,n){var a=Ot();return lg(a,rt.memoizedState,t,n)},useTransition:function(){var t=Nu(Qi)[0],n=Ot().memoizedState;return[typeof t=="boolean"?t:Ko(t),n]},useSyncExternalStore:Up,useId:fg,useHostTransitionStatus:of,useFormState:$p,useActionState:$p,useOptimistic:function(t,n){var a=Ot();return Hp(a,rt,t,n)},useMemoCache:Wh,useCacheRefresh:dg},FE={readContext:un,use:Cu,useCallback:ag,useContext:un,useEffect:tg,useImperativeHandle:sg,useInsertionEffect:ng,useLayoutEffect:ig,useMemo:og,useReducer:ef,useRef:Jp,useState:function(){return ef(Qi)},useDebugValue:rf,useDeferredValue:function(t,n){var a=Ot();return rt===null?sf(a,t,n):lg(a,rt.memoizedState,t,n)},useTransition:function(){var t=ef(Qi)[0],n=Ot().memoizedState;return[typeof t=="boolean"?t:Ko(t),n]},useSyncExternalStore:Up,useId:fg,useHostTransitionStatus:of,useFormState:Wp,useActionState:Wp,useOptimistic:function(t,n){var a=Ot();return rt!==null?Hp(a,rt,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Wh,useCacheRefresh:dg},Da=null,$o=0;function Vu(t){var n=$o;return $o+=1,Da===null&&(Da=[]),Np(Da,t,n)}function Zo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Pu(t,n){throw n.$$typeof===R?Error(r(525)):(t=Object.prototype.toString.call(n),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function vg(t){var n=t._init;return n(t._payload)}function Tg(t){function n(k,O){if(t){var U=k.deletions;U===null?(k.deletions=[O],k.flags|=16):U.push(O)}}function a(k,O){if(!t)return null;for(;O!==null;)n(k,O),O=O.sibling;return null}function o(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function h(k,O){return k=qi(k,O),k.index=0,k.sibling=null,k}function f(k,O,U){return k.index=U,t?(U=k.alternate,U!==null?(U=U.index,U<O?(k.flags|=67108866,O):U):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function v(k){return t&&k.alternate===null&&(k.flags|=67108866),k}function E(k,O,U,$){return O===null||O.tag!==6?(O=Ch(U,k.mode,$),O.return=k,O):(O=h(O,U),O.return=k,O)}function N(k,O,U,$){var _e=U.type;return _e===Q?K(k,O,U.props.children,$,U.key):O!==null&&(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&vg(_e)===O.type)?(O=h(O,U.props),Zo(O,U),O.return=k,O):(O=yu(U.type,U.key,U.props,null,k.mode,$),Zo(O,U),O.return=k,O)}function L(k,O,U,$){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=Nh(U,k.mode,$),O.return=k,O):(O=h(O,U.children||[]),O.return=k,O)}function K(k,O,U,$,_e){return O===null||O.tag!==7?(O=xs(U,k.mode,$,_e),O.return=k,O):(O=h(O,U),O.return=k,O)}function Z(k,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=Ch(""+O,k.mode,U),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case M:return U=yu(O.type,O.key,O.props,null,k.mode,U),Zo(U,O),U.return=k,U;case B:return O=Nh(O,k.mode,U),O.return=k,O;case A:var $=O._init;return O=$(O._payload),Z(k,O,U)}if($e(O)||P(O))return O=xs(O,k.mode,U,null),O.return=k,O;if(typeof O.then=="function")return Z(k,Vu(O),U);if(O.$$typeof===he)return Z(k,Eu(k,O),U);Pu(k,O)}return null}function z(k,O,U,$){var _e=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return _e!==null?null:E(k,O,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case M:return U.key===_e?N(k,O,U,$):null;case B:return U.key===_e?L(k,O,U,$):null;case A:return _e=U._init,U=_e(U._payload),z(k,O,U,$)}if($e(U)||P(U))return _e!==null?null:K(k,O,U,$,null);if(typeof U.then=="function")return z(k,O,Vu(U),$);if(U.$$typeof===he)return z(k,O,Eu(k,U),$);Pu(k,U)}return null}function q(k,O,U,$,_e){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return k=k.get(U)||null,E(O,k,""+$,_e);if(typeof $=="object"&&$!==null){switch($.$$typeof){case M:return k=k.get($.key===null?U:$.key)||null,N(O,k,$,_e);case B:return k=k.get($.key===null?U:$.key)||null,L(O,k,$,_e);case A:var je=$._init;return $=je($._payload),q(k,O,U,$,_e)}if($e($)||P($))return k=k.get(U)||null,K(O,k,$,_e,null);if(typeof $.then=="function")return q(k,O,U,Vu($),_e);if($.$$typeof===he)return q(k,O,U,Eu(O,$),_e);Pu(O,$)}return null}function Ie(k,O,U,$){for(var _e=null,je=null,Te=O,Re=O=0,Yt=null;Te!==null&&Re<U.length;Re++){Te.index>Re?(Yt=Te,Te=null):Yt=Te.sibling;var Xe=z(k,Te,U[Re],$);if(Xe===null){Te===null&&(Te=Yt);break}t&&Te&&Xe.alternate===null&&n(k,Te),O=f(Xe,O,Re),je===null?_e=Xe:je.sibling=Xe,je=Xe,Te=Yt}if(Re===U.length)return a(k,Te),Ze&&Os(k,Re),_e;if(Te===null){for(;Re<U.length;Re++)Te=Z(k,U[Re],$),Te!==null&&(O=f(Te,O,Re),je===null?_e=Te:je.sibling=Te,je=Te);return Ze&&Os(k,Re),_e}for(Te=o(Te);Re<U.length;Re++)Yt=q(Te,k,Re,U[Re],$),Yt!==null&&(t&&Yt.alternate!==null&&Te.delete(Yt.key===null?Re:Yt.key),O=f(Yt,O,Re),je===null?_e=Yt:je.sibling=Yt,je=Yt);return t&&Te.forEach(function(qr){return n(k,qr)}),Ze&&Os(k,Re),_e}function Ae(k,O,U,$){if(U==null)throw Error(r(151));for(var _e=null,je=null,Te=O,Re=O=0,Yt=null,Xe=U.next();Te!==null&&!Xe.done;Re++,Xe=U.next()){Te.index>Re?(Yt=Te,Te=null):Yt=Te.sibling;var qr=z(k,Te,Xe.value,$);if(qr===null){Te===null&&(Te=Yt);break}t&&Te&&qr.alternate===null&&n(k,Te),O=f(qr,O,Re),je===null?_e=qr:je.sibling=qr,je=qr,Te=Yt}if(Xe.done)return a(k,Te),Ze&&Os(k,Re),_e;if(Te===null){for(;!Xe.done;Re++,Xe=U.next())Xe=Z(k,Xe.value,$),Xe!==null&&(O=f(Xe,O,Re),je===null?_e=Xe:je.sibling=Xe,je=Xe);return Ze&&Os(k,Re),_e}for(Te=o(Te);!Xe.done;Re++,Xe=U.next())Xe=q(Te,k,Re,Xe.value,$),Xe!==null&&(t&&Xe.alternate!==null&&Te.delete(Xe.key===null?Re:Xe.key),O=f(Xe,O,Re),je===null?_e=Xe:je.sibling=Xe,je=Xe);return t&&Te.forEach(function(Gb){return n(k,Gb)}),Ze&&Os(k,Re),_e}function at(k,O,U,$){if(typeof U=="object"&&U!==null&&U.type===Q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case M:e:{for(var _e=U.key;O!==null;){if(O.key===_e){if(_e=U.type,_e===Q){if(O.tag===7){a(k,O.sibling),$=h(O,U.props.children),$.return=k,k=$;break e}}else if(O.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===A&&vg(_e)===O.type){a(k,O.sibling),$=h(O,U.props),Zo($,U),$.return=k,k=$;break e}a(k,O);break}else n(k,O);O=O.sibling}U.type===Q?($=xs(U.props.children,k.mode,$,U.key),$.return=k,k=$):($=yu(U.type,U.key,U.props,null,k.mode,$),Zo($,U),$.return=k,k=$)}return v(k);case B:e:{for(_e=U.key;O!==null;){if(O.key===_e)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){a(k,O.sibling),$=h(O,U.children||[]),$.return=k,k=$;break e}else{a(k,O);break}else n(k,O);O=O.sibling}$=Nh(U,k.mode,$),$.return=k,k=$}return v(k);case A:return _e=U._init,U=_e(U._payload),at(k,O,U,$)}if($e(U))return Ie(k,O,U,$);if(P(U)){if(_e=P(U),typeof _e!="function")throw Error(r(150));return U=_e.call(U),Ae(k,O,U,$)}if(typeof U.then=="function")return at(k,O,Vu(U),$);if(U.$$typeof===he)return at(k,O,Eu(k,U),$);Pu(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(a(k,O.sibling),$=h(O,U),$.return=k,k=$):(a(k,O),$=Ch(U,k.mode,$),$.return=k,k=$),v(k)):a(k,O)}return function(k,O,U,$){try{$o=0;var _e=at(k,O,U,$);return Da=null,_e}catch(Te){if(Te===qo||Te===Su)throw Te;var je=Cn(29,Te,null,k.mode);return je.lanes=$,je.return=k,je}finally{}}}var Oa=Tg(!0),Eg=Tg(!1),Bn=W(null),Ei=null;function wr(t){var n=t.alternate;oe(Lt,Lt.current&1),oe(Bn,t),Ei===null&&(n===null||Ia.current!==null||n.memoizedState!==null)&&(Ei=t)}function bg(t){if(t.tag===22){if(oe(Lt,Lt.current),oe(Bn,t),Ei===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Ei=t)}}else Ir()}function Ir(){oe(Lt,Lt.current),oe(Bn,Bn.current)}function Ki(t){ce(Bn),Ei===t&&(Ei=null),ce(Lt)}var Lt=W(0);function ku(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Wf(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function uf(t,n,a,o){n=t.memoizedState,a=a(o,n),a=a==null?n:b({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var cf={enqueueSetState:function(t,n,a){t=t._reactInternals;var o=On(),h=Sr(o);h.payload=n,a!=null&&(h.callback=a),n=Ar(t,h,o),n!==null&&(Mn(n,t,o),Ho(n,t,o))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var o=On(),h=Sr(o);h.tag=1,h.payload=n,a!=null&&(h.callback=a),n=Ar(t,h,o),n!==null&&(Mn(n,t,o),Ho(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=On(),o=Sr(a);o.tag=2,n!=null&&(o.callback=n),n=Ar(t,o,a),n!==null&&(Mn(n,t,a),Ho(n,t,a))}};function Sg(t,n,a,o,h,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!Mo(a,o)||!Mo(h,f):!0}function Ag(t,n,a,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==t&&cf.enqueueReplaceState(n,n.state,null)}function Ls(t,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(t=t.defaultProps){a===n&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Uu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Rg(t){Uu(t)}function wg(t){console.error(t)}function Ig(t){Uu(t)}function ju(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Cg(t,n,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function hf(t,n,a){return a=Sr(a),a.tag=3,a.payload={element:null},a.callback=function(){ju(t,n)},a}function Ng(t){return t=Sr(t),t.tag=3,t}function xg(t,n,a,o){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=o.value;t.payload=function(){return h(f)},t.callback=function(){Cg(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Cg(n,a,o),typeof h!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function GE(t,n,a,o,h){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&jo(n,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return Ei===null?Pf():a.alternate===null&&St===0&&(St=3),a.flags&=-257,a.flags|=65536,a.lanes=h,o===Lh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Uf(t,o,h)),!1;case 22:return a.flags|=65536,o===Lh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Uf(t,o,h)),!1}throw Error(r(435,a.tag))}return Uf(t,o,h),Pf(),!1}if(Ze)return n=Bn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=h,o!==Oh&&(t=Error(r(422),{cause:o}),Uo(jn(t,a)))):(o!==Oh&&(n=Error(r(423),{cause:o}),Uo(jn(n,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=jn(o,a),h=hf(t.stateNode,o,h),Bh(t,h),St!==4&&(St=2)),!1;var f=Error(r(520),{cause:o});if(f=jn(f,a),rl===null?rl=[f]:rl.push(f),St!==4&&(St=2),n===null)return!0;o=jn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=hf(a.stateNode,o,t),Bh(a,t),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Mr===null||!Mr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ng(h),xg(h,t,a,o),Bh(a,h),!1}a=a.return}while(a!==null);return!1}var Dg=Error(r(461)),Qt=!1;function Jt(t,n,a,o){n.child=t===null?Eg(n,null,a,o):Oa(n,t.child,a,o)}function Og(t,n,a,o,h){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return ks(n),o=Kh(t,n,a,v,f,h),E=Yh(),t!==null&&!Qt?(Xh(t,n,h),Yi(t,n,h)):(Ze&&E&&xh(n),n.flags|=1,Jt(t,n,o,h),n.child)}function Mg(t,n,a,o,h){if(t===null){var f=a.type;return typeof f=="function"&&!Ih(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,Vg(t,n,f,o,h)):(t=yu(a.type,null,o,n,n.mode,h),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!vf(t,h)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Mo,a(v,o)&&t.ref===n.ref)return Yi(t,n,h)}return n.flags|=1,t=qi(f,o),t.ref=n.ref,t.return=n,n.child=t}function Vg(t,n,a,o,h){if(t!==null){var f=t.memoizedProps;if(Mo(f,o)&&t.ref===n.ref)if(Qt=!1,n.pendingProps=o=f,vf(t,h))(t.flags&131072)!==0&&(Qt=!0);else return n.lanes=t.lanes,Yi(t,n,h)}return ff(t,n,a,o,h)}function Pg(t,n,a){var o=n.pendingProps,h=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(h=n.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return kg(t,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&bu(n,f!==null?f.cachePool:null),f!==null?Vp(n,f):Fh(),bg(n);else return n.lanes=n.childLanes=536870912,kg(t,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(bu(n,f.cachePool),Vp(n,f),Ir(),n.memoizedState=null):(t!==null&&bu(n,null),Fh(),Ir());return Jt(t,n,h,a),n.child}function kg(t,n,a,o){var h=jh();return h=h===null?null:{parent:jt._currentValue,pool:h},n.memoizedState={baseLanes:a,cachePool:h},t!==null&&bu(n,null),Fh(),bg(n),t!==null&&jo(t,n,o,!0),null}function Lu(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function ff(t,n,a,o,h){return ks(n),a=Kh(t,n,a,o,void 0,h),o=Yh(),t!==null&&!Qt?(Xh(t,n,h),Yi(t,n,h)):(Ze&&o&&xh(n),n.flags|=1,Jt(t,n,a,h),n.child)}function Ug(t,n,a,o,h,f){return ks(n),n.updateQueue=null,a=kp(n,o,a,h),Pp(t),o=Yh(),t!==null&&!Qt?(Xh(t,n,f),Yi(t,n,f)):(Ze&&o&&xh(n),n.flags|=1,Jt(t,n,a,f),n.child)}function jg(t,n,a,o,h){if(ks(n),n.stateNode===null){var f=ba,v=a.contextType;typeof v=="object"&&v!==null&&(f=un(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=cf,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},zh(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?un(v):ba,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(uf(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&cf.enqueueReplaceState(f,f.state,null),Go(n,o,f,h),Fo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,N=Ls(a,E);f.props=N;var L=f.context,K=a.contextType;v=ba,typeof K=="object"&&K!==null&&(v=un(K));var Z=a.getDerivedStateFromProps;K=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Ag(n,f,o,v),br=!1;var z=n.memoizedState;f.state=z,Go(n,o,f,h),Fo(),L=n.memoizedState,E||z!==L||br?(typeof Z=="function"&&(uf(n,a,Z,o),L=n.memoizedState),(N=br||Sg(n,a,N,o,z,L,v))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=N):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,qh(t,n),v=n.memoizedProps,K=Ls(a,v),f.props=K,Z=n.pendingProps,z=f.context,L=a.contextType,N=ba,typeof L=="object"&&L!==null&&(N=un(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Z||z!==N)&&Ag(n,f,o,N),br=!1,z=n.memoizedState,f.state=z,Go(n,o,f,h),Fo();var q=n.memoizedState;v!==Z||z!==q||br||t!==null&&t.dependencies!==null&&Tu(t.dependencies)?(typeof E=="function"&&(uf(n,a,E,o),q=n.memoizedState),(K=br||Sg(n,a,K,o,z,q,N)||t!==null&&t.dependencies!==null&&Tu(t.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,q,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,q,N)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=q),f.props=o,f.state=q,f.context=N,o=K):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&z===t.memoizedState||(n.flags|=1024),o=!1)}return f=o,Lu(t,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&o?(n.child=Oa(n,t.child,null,h),n.child=Oa(n,null,a,h)):Jt(t,n,a,h),n.memoizedState=f.state,t=n.child):t=Yi(t,n,h),t}function Lg(t,n,a,o){return ko(),n.flags|=256,Jt(t,n,a,o),n.child}var df={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function mf(t){return{baseLanes:t,cachePool:wp()}}function pf(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=Hn),t}function zg(t,n,a){var o=n.pendingProps,h=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),v&&(h=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(Ze){if(h?wr(n):Ir(),Ze){var E=bt,N;if(N=E){e:{for(N=E,E=Ti;N.nodeType!==8;){if(!E){E=null;break e}if(N=ai(N.nextSibling),N===null){E=null;break e}}E=N}E!==null?(n.memoizedState={dehydrated:E,treeContext:Ds!==null?{id:Bi,overflow:Hi}:null,retryLane:536870912,hydrationErrors:null},N=Cn(18,null,null,0),N.stateNode=E,N.return=n,n.child=N,_n=n,bt=null,N=!0):N=!1}N||Vs(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return Wf(E)?n.lanes=32:n.lanes=536870912,null;Ki(n)}return E=o.children,o=o.fallback,h?(Ir(),h=n.mode,E=zu({mode:"hidden",children:E},h),o=xs(o,h,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,h=n.child,h.memoizedState=mf(a),h.childLanes=pf(t,v,a),n.memoizedState=df,o):(wr(n),gf(n,E))}if(N=t.memoizedState,N!==null&&(E=N.dehydrated,E!==null)){if(f)n.flags&256?(wr(n),n.flags&=-257,n=yf(t,n,a)):n.memoizedState!==null?(Ir(),n.child=t.child,n.flags|=128,n=null):(Ir(),h=o.fallback,E=n.mode,o=zu({mode:"visible",children:o.children},E),h=xs(h,E,a,null),h.flags|=2,o.return=n,h.return=n,o.sibling=h,n.child=o,Oa(n,t.child,null,a),o=n.child,o.memoizedState=mf(a),o.childLanes=pf(t,v,a),n.memoizedState=df,n=h);else if(wr(n),Wf(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(r(419)),o.stack="",o.digest=v,Uo({value:o,source:null,stack:null}),n=yf(t,n,a)}else if(Qt||jo(t,n,a,!1),v=(a&t.childLanes)!==0,Qt||v){if(v=ct,v!==null&&(o=a&-a,o=(o&42)!==0?1:as(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==N.retryLane))throw N.retryLane=o,Ea(t,o),Mn(v,t,o),Dg;E.data==="$?"||Pf(),n=yf(t,n,a)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=N.treeContext,bt=ai(E.nextSibling),_n=n,Ze=!0,Ms=null,Ti=!1,t!==null&&(zn[qn++]=Bi,zn[qn++]=Hi,zn[qn++]=Ds,Bi=t.id,Hi=t.overflow,Ds=n),n=gf(n,o.children),n.flags|=4096);return n}return h?(Ir(),h=o.fallback,E=n.mode,N=t.child,L=N.sibling,o=qi(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,L!==null?h=qi(L,h):(h=xs(h,E,a,null),h.flags|=2),h.return=n,o.return=n,o.sibling=h,n.child=o,o=h,h=n.child,E=t.child.memoizedState,E===null?E=mf(a):(N=E.cachePool,N!==null?(L=jt._currentValue,N=N.parent!==L?{parent:L,pool:L}:N):N=wp(),E={baseLanes:E.baseLanes|a,cachePool:N}),h.memoizedState=E,h.childLanes=pf(t,v,a),n.memoizedState=df,o):(wr(n),a=t.child,t=a.sibling,a=qi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=a,n.memoizedState=null,a)}function gf(t,n){return n=zu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function zu(t,n){return t=Cn(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function yf(t,n,a){return Oa(n,t.child,null,a),t=gf(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function qg(t,n,a){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),Vh(t.return,n,a)}function _f(t,n,a,o,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:h}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=h)}function Bg(t,n,a){var o=n.pendingProps,h=o.revealOrder,f=o.tail;if(Jt(t,n,o.children,a),o=Lt.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,a,n);else if(t.tag===19)qg(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(oe(Lt,o),h){case"forwards":for(a=n.child,h=null;a!==null;)t=a.alternate,t!==null&&ku(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=n.child,n.child=null):(h=a.sibling,a.sibling=null),_f(n,!1,h,a,f);break;case"backwards":for(a=null,h=n.child,n.child=null;h!==null;){if(t=h.alternate,t!==null&&ku(t)===null){n.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}_f(n,!0,a,null,f);break;case"together":_f(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Yi(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Or|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(jo(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(r(153));if(n.child!==null){for(t=n.child,a=qi(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=qi(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function vf(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Tu(t)))}function QE(t,n,a){switch(n.tag){case 3:me(n,n.stateNode.containerInfo),Er(n,jt,t.memoizedState.cache),ko();break;case 27:case 5:ht(n);break;case 4:me(n,n.stateNode.containerInfo);break;case 10:Er(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(wr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?zg(t,n,a):(wr(n),t=Yi(t,n,a),t!==null?t.sibling:null);wr(n);break;case 19:var h=(t.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(jo(t,n,a,!1),o=(a&n.childLanes)!==0),h){if(o)return Bg(t,n,a);n.flags|=128}if(h=n.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Lt,Lt.current),o)break;return null;case 22:case 23:return n.lanes=0,Pg(t,n,a);case 24:Er(n,jt,t.memoizedState.cache)}return Yi(t,n,a)}function Hg(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)Qt=!0;else{if(!vf(t,a)&&(n.flags&128)===0)return Qt=!1,QE(t,n,a);Qt=(t.flags&131072)!==0}else Qt=!1,Ze&&(n.flags&1048576)!==0&&vp(n,vu,n.index);switch(n.lanes=0,n.tag){case 16:e:{t=n.pendingProps;var o=n.elementType,h=o._init;if(o=h(o._payload),n.type=o,typeof o=="function")Ih(o)?(t=Ls(o,t),n.tag=1,n=jg(null,n,o,t,a)):(n.tag=0,n=ff(null,n,o,t,a));else{if(o!=null){if(h=o.$$typeof,h===Ne){n.tag=11,n=Og(null,n,o,t,a);break e}else if(h===I){n.tag=14,n=Mg(null,n,o,t,a);break e}}throw n=Je(o)||o,Error(r(306,n,""))}}return n;case 0:return ff(t,n,n.type,n.pendingProps,a);case 1:return o=n.type,h=Ls(o,n.pendingProps),jg(t,n,o,h,a);case 3:e:{if(me(n,n.stateNode.containerInfo),t===null)throw Error(r(387));o=n.pendingProps;var f=n.memoizedState;h=f.element,qh(t,n),Go(n,o,null,a);var v=n.memoizedState;if(o=v.cache,Er(n,jt,o),o!==f.cache&&Ph(n,[jt],a,!0),Fo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Lg(t,n,o,a);break e}else if(o!==h){h=jn(Error(r(424)),n),Uo(h),n=Lg(t,n,o,a);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=ai(t.firstChild),_n=n,Ze=!0,Ms=null,Ti=!0,a=Eg(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ko(),o===h){n=Yi(t,n,a);break e}Jt(t,n,o,a)}n=n.child}return n;case 26:return Lu(t,n),t===null?(a=Ky(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ze||(a=n.type,t=n.pendingProps,o=ec(se.current).createElement(a),o[ot]=n,o[Et]=t,tn(o,a,t),wt(o),n.stateNode=o):n.memoizedState=Ky(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ht(n),t===null&&Ze&&(o=n.stateNode=Fy(n.type,n.pendingProps,se.current),_n=n,Ti=!0,h=bt,kr(n.type)?(Jf=h,bt=ai(o.firstChild)):bt=h),Jt(t,n,n.pendingProps.children,a),Lu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Ze&&((h=o=bt)&&(o=Tb(o,n.type,n.pendingProps,Ti),o!==null?(n.stateNode=o,_n=n,bt=ai(o.firstChild),Ti=!1,h=!0):h=!1),h||Vs(n)),ht(n),h=n.type,f=n.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,Xf(h,f)?o=null:v!==null&&Xf(h,v)&&(n.flags|=32),n.memoizedState!==null&&(h=Kh(t,n,jE,null,null,a),dl._currentValue=h),Lu(t,n),Jt(t,n,o,a),n.child;case 6:return t===null&&Ze&&((t=a=bt)&&(a=Eb(a,n.pendingProps,Ti),a!==null?(n.stateNode=a,_n=n,bt=null,t=!0):t=!1),t||Vs(n)),null;case 13:return zg(t,n,a);case 4:return me(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Oa(n,null,o,a):Jt(t,n,o,a),n.child;case 11:return Og(t,n,n.type,n.pendingProps,a);case 7:return Jt(t,n,n.pendingProps,a),n.child;case 8:return Jt(t,n,n.pendingProps.children,a),n.child;case 12:return Jt(t,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,Er(n,n.type,o.value),Jt(t,n,o.children,a),n.child;case 9:return h=n.type._context,o=n.pendingProps.children,ks(n),h=un(h),o=o(h),n.flags|=1,Jt(t,n,o,a),n.child;case 14:return Mg(t,n,n.type,n.pendingProps,a);case 15:return Vg(t,n,n.type,n.pendingProps,a);case 19:return Bg(t,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},t===null?(a=zu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=qi(t.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Pg(t,n,a);case 24:return ks(n),o=un(jt),t===null?(h=jh(),h===null&&(h=ct,f=kh(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),n.memoizedState={parent:o,cache:h},zh(n),Er(n,jt,h)):((t.lanes&a)!==0&&(qh(t,n),Go(n,null,null,a),Fo()),h=t.memoizedState,f=n.memoizedState,h.parent!==o?(h={parent:o,cache:o},n.memoizedState=h,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=h),Er(n,jt,o)):(o=f.cache,Er(n,jt,o),o!==h.cache&&Ph(n,[jt],a,!0))),Jt(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(r(156,n.tag))}function Xi(t){t.flags|=4}function Fg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Wy(n)){if(n=Bn.current,n!==null&&((Qe&4194048)===Qe?Ei!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||n!==Ei))throw Bo=Lh,Ip;t.flags|=8192}}function qu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?$n():536870912,t.lanes|=n,ka|=n)}function Wo(t,n){if(!Ze)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function _t(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(n)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=a,n}function KE(t,n,a){var o=n.pendingProps;switch(Dh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(n),null;case 1:return _t(n),null;case 3:return a=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Gi(jt),Ye(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Po(n)?Xi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,bp())),_t(n),null;case 26:return a=n.memoizedState,t===null?(Xi(n),a!==null?(_t(n),Fg(n,a)):(_t(n),n.flags&=-16777217)):a?a!==t.memoizedState?(Xi(n),_t(n),Fg(n,a)):(_t(n),n.flags&=-16777217):(t.memoizedProps!==o&&Xi(n),_t(n),n.flags&=-16777217),null;case 27:Zt(n),a=se.current;var h=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return _t(n),null}t=de.current,Po(n)?Tp(n):(t=Fy(h,o,a),n.stateNode=t,Xi(n))}return _t(n),null;case 5:if(Zt(n),a=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(!o){if(n.stateNode===null)throw Error(r(166));return _t(n),null}if(t=de.current,Po(n))Tp(n);else{switch(h=ec(se.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?h.createElement("select",{is:o.is}):h.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?h.createElement(a,{is:o.is}):h.createElement(a)}}t[ot]=n,t[Et]=o;e:for(h=n.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}n.stateNode=t;e:switch(tn(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Xi(n)}}return _t(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&Xi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(r(166));if(t=se.current,Po(n)){if(t=n.stateNode,a=n.memoizedProps,o=null,h=_n,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[ot]=n,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Uy(t.nodeValue,a)),t||Vs(n)}else t=ec(t).createTextNode(o),t[ot]=n,n.stateNode=t}return _t(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Po(n),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=n.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[ot]=n}else ko(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;_t(n),h=!1}else h=bp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return n.flags&256?(Ki(n),n):(Ki(n),null)}if(Ki(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=n.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==h&&(o.flags|=2048)}return a!==t&&a&&(n.child.flags|=8192),qu(n,n.updateQueue),_t(n),null;case 4:return Ye(),t===null&&Ff(n.stateNode.containerInfo),_t(n),null;case 10:return Gi(n.type),_t(n),null;case 19:if(ce(Lt),h=n.memoizedState,h===null)return _t(n),null;if(o=(n.flags&128)!==0,f=h.rendering,f===null)if(o)Wo(h,!1);else{if(St!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=ku(t),f!==null){for(n.flags|=128,Wo(h,!1),t=f.updateQueue,n.updateQueue=t,qu(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)_p(a,t),a=a.sibling;return oe(Lt,Lt.current&1|2),n.child}t=t.sibling}h.tail!==null&&Wt()>Fu&&(n.flags|=128,o=!0,Wo(h,!1),n.lanes=4194304)}else{if(!o)if(t=ku(f),t!==null){if(n.flags|=128,o=!0,t=t.updateQueue,n.updateQueue=t,qu(n,t),Wo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Ze)return _t(n),null}else 2*Wt()-h.renderingStartTime>Fu&&a!==536870912&&(n.flags|=128,o=!0,Wo(h,!1),n.lanes=4194304);h.isBackwards?(f.sibling=n.child,n.child=f):(t=h.last,t!==null?t.sibling=f:n.child=f,h.last=f)}return h.tail!==null?(n=h.tail,h.rendering=n,h.tail=n.sibling,h.renderingStartTime=Wt(),n.sibling=null,t=Lt.current,oe(Lt,o?t&1|2:t&1),n):(_t(n),null);case 22:case 23:return Ki(n),Gh(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(_t(n),n.subtreeFlags&6&&(n.flags|=8192)):_t(n),a=n.updateQueue,a!==null&&qu(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),t!==null&&ce(Us),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Gi(jt),_t(n),null;case 25:return null;case 30:return null}throw Error(r(156,n.tag))}function YE(t,n){switch(Dh(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Gi(jt),Ye(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Zt(n),null;case 13:if(Ki(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(r(340));ko()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return ce(Lt),null;case 4:return Ye(),null;case 10:return Gi(n.type),null;case 22:case 23:return Ki(n),Gh(),t!==null&&ce(Us),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Gi(jt),null;case 25:return null;default:return null}}function Gg(t,n){switch(Dh(n),n.tag){case 3:Gi(jt),Ye();break;case 26:case 27:case 5:Zt(n);break;case 4:Ye();break;case 13:Ki(n);break;case 19:ce(Lt);break;case 10:Gi(n.type);break;case 22:case 23:Ki(n),Gh(),t!==null&&ce(Us);break;case 24:Gi(jt)}}function Jo(t,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var h=o.next;a=h;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==h)}}catch(E){lt(n,n.return,E)}}function Cr(t,n,a){try{var o=n.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var f=h.next;o=f;do{if((o.tag&t)===t){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,h=n;var N=a,L=E;try{L()}catch(K){lt(h,N,K)}}}o=o.next}while(o!==f)}}catch(K){lt(n,n.return,K)}}function Qg(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{Mp(n,a)}catch(o){lt(t,t.return,o)}}}function Kg(t,n,a){a.props=Ls(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){lt(t,n,o)}}function el(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(h){lt(t,n,h)}}function bi(t,n){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(h){lt(t,n,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){lt(t,n,h)}else a.current=null}function Yg(t){var n=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(h){lt(t,t.return,h)}}function Tf(t,n,a){try{var o=t.stateNode;pb(o,t.type,a,n),o[Et]=n}catch(h){lt(t,t.return,h)}}function Xg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&kr(t.type)||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&kr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bf(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Ju));else if(o!==4&&(o===27&&kr(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(bf(t,n,a),t=t.sibling;t!==null;)bf(t,n,a),t=t.sibling}function Bu(t,n,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(o!==4&&(o===27&&kr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Bu(t,n,a),t=t.sibling;t!==null;)Bu(t,n,a),t=t.sibling}function $g(t){var n=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,h=n.attributes;h.length;)n.removeAttributeNode(h[0]);tn(n,o,a),n[ot]=t,n[Et]=a}catch(f){lt(t,t.return,f)}}var $i=!1,Nt=!1,Sf=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function XE(t,n){if(t=t.containerInfo,Kf=ac,t=lp(t),Th(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var h=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,E=-1,N=-1,L=0,K=0,Z=t,z=null;t:for(;;){for(var q;Z!==a||h!==0&&Z.nodeType!==3||(E=v+h),Z!==f||o!==0&&Z.nodeType!==3||(N=v+o),Z.nodeType===3&&(v+=Z.nodeValue.length),(q=Z.firstChild)!==null;)z=Z,Z=q;for(;;){if(Z===t)break t;if(z===a&&++L===h&&(E=v),z===f&&++K===o&&(N=v),(q=Z.nextSibling)!==null)break;Z=z,z=Z.parentNode}Z=q}a=E===-1||N===-1?null:{start:E,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yf={focusedElem:t,selectionRange:a},ac=!1,Kt=n;Kt!==null;)if(n=Kt,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,Kt=t;else for(;Kt!==null;){switch(n=Kt,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=n,h=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Ie=Ls(a.type,h,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(Ie,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){lt(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Zf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=n.sibling,t!==null){t.return=n.return,Kt=t;break}Kt=n.return}}function Wg(t,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Nr(t,a),o&4&&Jo(5,a);break;case 1:if(Nr(t,a),o&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(v){lt(a,a.return,v)}else{var h=Ls(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(h,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){lt(a,a.return,v)}}o&64&&Qg(a),o&512&&el(a,a.return);break;case 3:if(Nr(t,a),o&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Mp(t,n)}catch(v){lt(a,a.return,v)}}break;case 27:n===null&&o&4&&$g(a);case 26:case 5:Nr(t,a),n===null&&o&4&&Yg(a),o&512&&el(a,a.return);break;case 12:Nr(t,a);break;case 13:Nr(t,a),o&4&&ty(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=rb.bind(null,a),bb(t,a))));break;case 22:if(o=a.memoizedState!==null||$i,!o){n=n!==null&&n.memoizedState!==null||Nt,h=$i;var f=Nt;$i=o,(Nt=n)&&!f?xr(t,a,(a.subtreeFlags&8772)!==0):Nr(t,a),$i=h,Nt=f}break;case 30:break;default:Nr(t,a)}}function Jg(t){var n=t.alternate;n!==null&&(t.alternate=null,Jg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&aa(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,bn=!1;function Zi(t,n,a){for(a=a.child;a!==null;)ey(t,n,a),a=a.sibling}function ey(t,n,a){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(hi,a)}catch{}switch(a.tag){case 26:Nt||bi(a,n),Zi(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Nt||bi(a,n);var o=pt,h=bn;kr(a.type)&&(pt=a.stateNode,bn=!1),Zi(t,n,a),ul(a.stateNode),pt=o,bn=h;break;case 5:Nt||bi(a,n);case 6:if(o=pt,h=bn,pt=null,Zi(t,n,a),pt=o,bn=h,pt!==null)if(bn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(f){lt(a,n,f)}else try{pt.removeChild(a.stateNode)}catch(f){lt(a,n,f)}break;case 18:pt!==null&&(bn?(t=pt,By(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),yl(t)):By(pt,a.stateNode));break;case 4:o=pt,h=bn,pt=a.stateNode.containerInfo,bn=!0,Zi(t,n,a),pt=o,bn=h;break;case 0:case 11:case 14:case 15:Nt||Cr(2,a,n),Nt||Cr(4,a,n),Zi(t,n,a);break;case 1:Nt||(bi(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Kg(a,n,o)),Zi(t,n,a);break;case 21:Zi(t,n,a);break;case 22:Nt=(o=Nt)||a.memoizedState!==null,Zi(t,n,a),Nt=o;break;default:Zi(t,n,a)}}function ty(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{yl(t)}catch(a){lt(n,n.return,a)}}function $E(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Zg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Zg),n;default:throw Error(r(435,t.tag))}}function Af(t,n){var a=$E(t);n.forEach(function(o){var h=sb.bind(null,t,o);a.has(o)||(a.add(o),o.then(h,h))})}function Nn(t,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var h=a[o],f=t,v=n,E=v;e:for(;E!==null;){switch(E.tag){case 27:if(kr(E.type)){pt=E.stateNode,bn=!1;break e}break;case 5:pt=E.stateNode,bn=!1;break e;case 3:case 4:pt=E.stateNode.containerInfo,bn=!0;break e}E=E.return}if(pt===null)throw Error(r(160));ey(f,v,h),pt=null,bn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ny(n,t),n=n.sibling}var si=null;function ny(t,n){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(n,t),xn(t),o&4&&(Cr(3,t,t.return),Jo(3,t),Cr(5,t,t.return));break;case 1:Nn(n,t),xn(t),o&512&&(Nt||a===null||bi(a,a.return)),o&64&&$i&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var h=si;if(Nn(n,t),xn(t),o&512&&(Nt||a===null||bi(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":f=h.getElementsByTagName("title")[0],(!f||f[hr]||f[ot]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(o),h.head.insertBefore(f,h.querySelector("head > title"))),tn(f,o,a),f[ot]=t,wt(f),o=f;break e;case"link":var v=$y("link","href",h).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break t}}f=h.createElement(o),tn(f,o,a),h.head.appendChild(f);break;case"meta":if(v=$y("meta","content",h).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break t}}f=h.createElement(o),tn(f,o,a),h.head.appendChild(f);break;default:throw Error(r(468,o))}f[ot]=t,wt(f),o=f}t.stateNode=o}else Zy(h,t.type,t.stateNode);else t.stateNode=Xy(h,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Zy(h,t.type,t.stateNode):Xy(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Tf(t,t.memoizedProps,a.memoizedProps)}break;case 27:Nn(n,t),xn(t),o&512&&(Nt||a===null||bi(a,a.return)),a!==null&&o&4&&Tf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Nn(n,t),xn(t),o&512&&(Nt||a===null||bi(a,a.return)),t.flags&32){h=t.stateNode;try{kn(h,"")}catch(q){lt(t,t.return,q)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Tf(t,h,a!==null?a.memoizedProps:h)),o&1024&&(Sf=!0);break;case 6:if(Nn(n,t),xn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(q){lt(t,t.return,q)}}break;case 3:if(ic=null,h=si,si=tc(n.containerInfo),Nn(n,t),si=h,xn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{yl(n.containerInfo)}catch(q){lt(t,t.return,q)}Sf&&(Sf=!1,iy(t));break;case 4:o=si,si=tc(t.stateNode.containerInfo),Nn(n,t),xn(t),si=o;break;case 12:Nn(n,t),xn(t);break;case 13:Nn(n,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(xf=Wt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Af(t,o)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,L=$i,K=Nt;if($i=L||h,Nt=K||N,Nn(n,t),Nt=K,$i=L,xn(t),o&8192)e:for(n=t.stateNode,n._visibility=h?n._visibility&-2:n._visibility|1,h&&(a===null||N||$i||Nt||zs(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){N=a=n;try{if(f=N.stateNode,h)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=N.stateNode;var Z=N.memoizedProps.style,z=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(q){lt(N,N.return,q)}}}else if(n.tag===6){if(a===null){N=n;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(q){lt(N,N.return,q)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Af(t,a))));break;case 19:Nn(n,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Af(t,o)));break;case 30:break;case 21:break;default:Nn(n,t),xn(t)}}function xn(t){var n=t.flags;if(n&2){try{for(var a,o=t.return;o!==null;){if(Xg(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=Ef(t);Bu(t,f,h);break;case 5:var v=a.stateNode;a.flags&32&&(kn(v,""),a.flags&=-33);var E=Ef(t);Bu(t,E,v);break;case 3:case 4:var N=a.stateNode.containerInfo,L=Ef(t);bf(t,L,N);break;default:throw Error(r(161))}}catch(K){lt(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function iy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;iy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Nr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Wg(t,n.alternate,n),n=n.sibling}function zs(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Cr(4,n,n.return),zs(n);break;case 1:bi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Kg(n,n.return,a),zs(n);break;case 27:ul(n.stateNode);case 26:case 5:bi(n,n.return),zs(n);break;case 22:n.memoizedState===null&&zs(n);break;case 30:zs(n);break;default:zs(n)}t=t.sibling}}function xr(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,h=t,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:xr(h,f,a),Jo(4,f);break;case 1:if(xr(h,f,a),o=f,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(L){lt(o,o.return,L)}if(o=f,h=o.updateQueue,h!==null){var E=o.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Op(N[h],E)}catch(L){lt(o,o.return,L)}}a&&v&64&&Qg(f),el(f,f.return);break;case 27:$g(f);case 26:case 5:xr(h,f,a),a&&o===null&&v&4&&Yg(f),el(f,f.return);break;case 12:xr(h,f,a);break;case 13:xr(h,f,a),a&&v&4&&ty(h,f);break;case 22:f.memoizedState===null&&xr(h,f,a),el(f,f.return);break;case 30:break;default:xr(h,f,a)}n=n.sibling}}function Rf(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Lo(a))}function wf(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Lo(t))}function Si(t,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ry(t,n,a,o),n=n.sibling}function ry(t,n,a,o){var h=n.flags;switch(n.tag){case 0:case 11:case 15:Si(t,n,a,o),h&2048&&Jo(9,n);break;case 1:Si(t,n,a,o);break;case 3:Si(t,n,a,o),h&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Lo(t)));break;case 12:if(h&2048){Si(t,n,a,o),t=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){lt(n,n.return,N)}}else Si(t,n,a,o);break;case 13:Si(t,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?Si(t,n,a,o):tl(t,n):f._visibility&2?Si(t,n,a,o):(f._visibility|=2,Ma(t,n,a,o,(n.subtreeFlags&10256)!==0)),h&2048&&Rf(v,n);break;case 24:Si(t,n,a,o),h&2048&&wf(n.alternate,n);break;default:Si(t,n,a,o)}}function Ma(t,n,a,o,h){for(h=h&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,v=n,E=a,N=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Ma(f,v,E,N,h),Jo(8,v);break;case 23:break;case 22:var K=v.stateNode;v.memoizedState!==null?K._visibility&2?Ma(f,v,E,N,h):tl(f,v):(K._visibility|=2,Ma(f,v,E,N,h)),h&&L&2048&&Rf(v.alternate,v);break;case 24:Ma(f,v,E,N,h),h&&L&2048&&wf(v.alternate,v);break;default:Ma(f,v,E,N,h)}n=n.sibling}}function tl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,o=n,h=o.flags;switch(o.tag){case 22:tl(a,o),h&2048&&Rf(o.alternate,o);break;case 24:tl(a,o),h&2048&&wf(o.alternate,o);break;default:tl(a,o)}n=n.sibling}}var nl=8192;function Va(t){if(t.subtreeFlags&nl)for(t=t.child;t!==null;)sy(t),t=t.sibling}function sy(t){switch(t.tag){case 26:Va(t),t.flags&nl&&t.memoizedState!==null&&Pb(si,t.memoizedState,t.memoizedProps);break;case 5:Va(t);break;case 3:case 4:var n=si;si=tc(t.stateNode.containerInfo),Va(t),si=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=nl,nl=16777216,Va(t),nl=n):Va(t));break;default:Va(t)}}function ay(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function il(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Kt=o,ly(o,t)}ay(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)oy(t),t=t.sibling}function oy(t){switch(t.tag){case 0:case 11:case 15:il(t),t.flags&2048&&Cr(9,t,t.return);break;case 3:il(t);break;case 12:il(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Hu(t)):il(t);break;default:il(t)}}function Hu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Kt=o,ly(o,t)}ay(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Cr(8,n,n.return),Hu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Hu(n));break;default:Hu(n)}t=t.sibling}}function ly(t,n){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:Cr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Lo(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Kt=o;else e:for(a=t;Kt!==null;){o=Kt;var h=o.sibling,f=o.return;if(Jg(o),o===a){Kt=null;break e}if(h!==null){h.return=f,Kt=h;break e}Kt=f}}}var ZE={getCacheForType:function(t){var n=un(jt),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a}},WE=typeof WeakMap=="function"?WeakMap:Map,tt=0,ct=null,ze=null,Qe=0,nt=0,Dn=null,Dr=!1,Pa=!1,If=!1,Wi=0,St=0,Or=0,qs=0,Cf=0,Hn=0,ka=0,rl=null,Sn=null,Nf=!1,xf=0,Fu=1/0,Gu=null,Mr=null,en=0,Vr=null,Ua=null,ja=0,Df=0,Of=null,uy=null,sl=0,Mf=null;function On(){if((tt&2)!==0&&Qe!==0)return Qe&-Qe;if(G.T!==null){var t=Ra;return t!==0?t:zf()}return ke()}function cy(){Hn===0&&(Hn=(Qe&536870912)===0||Ze?ss():536870912);var t=Bn.current;return t!==null&&(t.flags|=32),Hn}function Mn(t,n,a){(t===ct&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(La(t,0),Pr(t,Qe,Hn,!1)),gt(t,a),((tt&2)===0||t!==ct)&&(t===ct&&((tt&2)===0&&(qs|=a),St===4&&Pr(t,Qe,Hn,!1)),Ai(t))}function hy(t,n,a){if((tt&6)!==0)throw Error(r(327));var o=!a&&(n&124)===0&&(n&t.expiredLanes)===0||Yn(t,n),h=o?tb(t,n):kf(t,n,!0),f=o;do{if(h===0){Pa&&!o&&Pr(t,n,0,!1);break}else{if(a=t.current.alternate,f&&!JE(a)){h=kf(t,n,!1),f=!1;continue}if(h===2){if(f=n,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var E=t;h=rl;var N=E.current.memoizedState.isDehydrated;if(N&&(La(E,v).flags|=256),v=kf(E,v,!1),v!==2){if(If&&!N){E.errorRecoveryDisabledLanes|=f,qs|=f,h=4;break e}f=Sn,Sn=h,f!==null&&(Sn===null?Sn=f:Sn.push.apply(Sn,f))}h=v}if(f=!1,h!==2)continue}}if(h===1){La(t,0),Pr(t,n,0,!0);break}e:{switch(o=t,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((n&4194048)!==n)break;case 6:Pr(o,n,Hn,!Dr);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((n&62914560)===n&&(h=xf+300-Wt(),10<h)){if(Pr(o,n,Hn,!Dr),Ht(o,0,!0)!==0)break e;o.timeoutHandle=zy(fy.bind(null,o,a,Sn,Gu,Nf,n,Hn,qs,ka,Dr,f,2,-0,0),h);break e}fy(o,a,Sn,Gu,Nf,n,Hn,qs,ka,Dr,f,0,-0,0)}}break}while(!0);Ai(t)}function fy(t,n,a,o,h,f,v,E,N,L,K,Z,z,q){if(t.timeoutHandle=-1,Z=n.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(fl={stylesheets:null,count:0,unsuspend:Vb},sy(n),Z=kb(),Z!==null)){t.cancelPendingCommit=Z(vy.bind(null,t,n,f,a,o,h,v,E,N,K,1,z,q)),Pr(t,f,v,!L);return}vy(t,n,f,a,o,h,v,E,N)}function JE(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var h=a[o],f=h.getSnapshot;h=h.value;try{if(!In(f(),h))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Pr(t,n,a,o){n&=~Cf,n&=~qs,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var h=n;0<h;){var f=31-te(h),v=1<<f;o[f]=-1,h&=~v}a!==0&&fi(t,a,n)}function Qu(){return(tt&6)===0?(al(0),!1):!0}function Vf(){if(ze!==null){if(nt===0)var t=ze.return;else t=ze,Fi=Ps=null,$h(t),Da=null,$o=0,t=ze;for(;t!==null;)Gg(t.alternate,t),t=t.return;ze=null}}function La(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,yb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vf(),ct=t,ze=a=qi(t.current,null),Qe=n,nt=0,Dn=null,Dr=!1,Pa=Yn(t,n),If=!1,ka=Hn=Cf=qs=Or=St=0,Sn=rl=null,Nf=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var h=31-te(o),f=1<<h;n|=t[h],o&=~f}return Wi=n,mu(),a}function dy(t,n){Ue=null,G.H=Mu,n===qo||n===Su?(n=xp(),nt=3):n===Ip?(n=xp(),nt=4):nt=n===Dg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Dn=n,ze===null&&(St=1,ju(t,jn(n,t.current)))}function my(){var t=G.H;return G.H=Mu,t===null?Mu:t}function py(){var t=G.A;return G.A=ZE,t}function Pf(){St=4,Dr||(Qe&4194048)!==Qe&&Bn.current!==null||(Pa=!0),(Or&134217727)===0&&(qs&134217727)===0||ct===null||Pr(ct,Qe,Hn,!1)}function kf(t,n,a){var o=tt;tt|=2;var h=my(),f=py();(ct!==t||Qe!==n)&&(Gu=null,La(t,n)),n=!1;var v=St;e:do try{if(nt!==0&&ze!==null){var E=ze,N=Dn;switch(nt){case 8:Vf(),v=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(n=!0);var L=nt;if(nt=0,Dn=null,za(t,E,N,L),a&&Pa){v=0;break e}break;default:L=nt,nt=0,Dn=null,za(t,E,N,L)}}eb(),v=St;break}catch(K){dy(t,K)}while(!0);return n&&t.shellSuspendCounter++,Fi=Ps=null,tt=o,G.H=h,G.A=f,ze===null&&(ct=null,Qe=0,mu()),v}function eb(){for(;ze!==null;)gy(ze)}function tb(t,n){var a=tt;tt|=2;var o=my(),h=py();ct!==t||Qe!==n?(Gu=null,Fu=Wt()+500,La(t,n)):Pa=Yn(t,n);e:do try{if(nt!==0&&ze!==null){n=ze;var f=Dn;t:switch(nt){case 1:nt=0,Dn=null,za(t,n,f,1);break;case 2:case 9:if(Cp(f)){nt=0,Dn=null,yy(n);break}n=function(){nt!==2&&nt!==9||ct!==t||(nt=7),Ai(t)},f.then(n,n);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Cp(f)?(nt=0,Dn=null,yy(n)):(nt=0,Dn=null,za(t,n,f,7));break;case 5:var v=null;switch(ze.tag){case 26:v=ze.memoizedState;case 5:case 27:var E=ze;if(!v||Wy(v)){nt=0,Dn=null;var N=E.sibling;if(N!==null)ze=N;else{var L=E.return;L!==null?(ze=L,Ku(L)):ze=null}break t}}nt=0,Dn=null,za(t,n,f,5);break;case 6:nt=0,Dn=null,za(t,n,f,6);break;case 8:Vf(),St=6;break e;default:throw Error(r(462))}}nb();break}catch(K){dy(t,K)}while(!0);return Fi=Ps=null,G.H=o,G.A=h,tt=a,ze!==null?0:(ct=null,Qe=0,mu(),St)}function nb(){for(;ze!==null&&!ia();)gy(ze)}function gy(t){var n=Hg(t.alternate,t,Wi);t.memoizedProps=t.pendingProps,n===null?Ku(t):ze=n}function yy(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Ug(a,n,n.pendingProps,n.type,void 0,Qe);break;case 11:n=Ug(a,n,n.pendingProps,n.type.render,n.ref,Qe);break;case 5:$h(n);default:Gg(a,n),n=ze=_p(n,Wi),n=Hg(a,n,Wi)}t.memoizedProps=t.pendingProps,n===null?Ku(t):ze=n}function za(t,n,a,o){Fi=Ps=null,$h(n),Da=null,$o=0;var h=n.return;try{if(GE(t,h,n,a,Qe)){St=1,ju(t,jn(a,t.current)),ze=null;return}}catch(f){if(h!==null)throw ze=h,f;St=1,ju(t,jn(a,t.current)),ze=null;return}n.flags&32768?(Ze||o===1?t=!0:Pa||(Qe&536870912)!==0?t=!1:(Dr=t=!0,(o===2||o===9||o===3||o===6)&&(o=Bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),_y(n,t)):Ku(n)}function Ku(t){var n=t;do{if((n.flags&32768)!==0){_y(n,Dr);return}t=n.return;var a=KE(n.alternate,n,Wi);if(a!==null){ze=a;return}if(n=n.sibling,n!==null){ze=n;return}ze=n=t}while(n!==null);St===0&&(St=5)}function _y(t,n){do{var a=YE(t.alternate,t);if(a!==null){a.flags&=32767,ze=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){ze=t;return}ze=t=a}while(t!==null);St=6,ze=null}function vy(t,n,a,o,h,f,v,E,N){t.cancelPendingCommit=null;do Yu();while(en!==0);if((tt&6)!==0)throw Error(r(327));if(n!==null){if(n===t.current)throw Error(r(177));if(f=n.lanes|n.childLanes,f|=Rh,sa(t,a,f,v,E,N),t===ct&&(ze=ct=null,Qe=0),Ua=n,Vr=t,ja=a,Df=f,Of=h,uy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ab(Vn,function(){return Ay(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=G.T,G.T=null,h=ue.p,ue.p=2,v=tt,tt|=4;try{XE(t,n,a)}finally{tt=v,ue.p=h,G.T=o}}en=1,Ty(),Ey(),by()}}function Ty(){if(en===1){en=0;var t=Vr,n=Ua,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var o=ue.p;ue.p=2;var h=tt;tt|=4;try{ny(n,t);var f=Yf,v=lp(t.containerInfo),E=f.focusedElem,N=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&op(E.ownerDocument.documentElement,E)){if(N!==null&&Th(E)){var L=N.start,K=N.end;if(K===void 0&&(K=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(K,E.value.length);else{var Z=E.ownerDocument||document,z=Z&&Z.defaultView||window;if(z.getSelection){var q=z.getSelection(),Ie=E.textContent.length,Ae=Math.min(N.start,Ie),at=N.end===void 0?Ae:Math.min(N.end,Ie);!q.extend&&Ae>at&&(v=at,at=Ae,Ae=v);var k=ap(E,Ae),O=ap(E,at);if(k&&O&&(q.rangeCount!==1||q.anchorNode!==k.node||q.anchorOffset!==k.offset||q.focusNode!==O.node||q.focusOffset!==O.offset)){var U=Z.createRange();U.setStart(k.node,k.offset),q.removeAllRanges(),Ae>at?(q.addRange(U),q.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),q.addRange(U))}}}}for(Z=[],q=E;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Z.length;E++){var $=Z[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}ac=!!Kf,Yf=Kf=null}finally{tt=h,ue.p=o,G.T=a}}t.current=n,en=2}}function Ey(){if(en===2){en=0;var t=Vr,n=Ua,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var o=ue.p;ue.p=2;var h=tt;tt|=4;try{Wg(t,n.alternate,n)}finally{tt=h,ue.p=o,G.T=a}}en=3}}function by(){if(en===4||en===3){en=0,ur();var t=Vr,n=Ua,a=ja,o=uy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?en=5:(en=0,Ua=Vr=null,Sy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Mr=null),os(a),n=n.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(hi,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=G.T,h=ue.p,ue.p=2,G.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{G.T=n,ue.p=h}}(ja&3)!==0&&Yu(),Ai(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Mf?sl++:(sl=0,Mf=t):sl=0,al(0)}}function Sy(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Lo(n)))}function Yu(t){return Ty(),Ey(),by(),Ay()}function Ay(){if(en!==5)return!1;var t=Vr,n=Df;Df=0;var a=os(ja),o=G.T,h=ue.p;try{ue.p=32>a?32:a,G.T=null,a=Of,Of=null;var f=Vr,v=ja;if(en=0,Ua=Vr=null,ja=0,(tt&6)!==0)throw Error(r(331));var E=tt;if(tt|=4,oy(f.current),ry(f,f.current,v,a),tt=E,al(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(hi,f)}catch{}return!0}finally{ue.p=h,G.T=o,Sy(t,n)}}function Ry(t,n,a){n=jn(a,n),n=hf(t.stateNode,n,2),t=Ar(t,n,2),t!==null&&(gt(t,2),Ai(t))}function lt(t,n,a){if(t.tag===3)Ry(t,t,a);else for(;n!==null;){if(n.tag===3){Ry(n,t,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Mr===null||!Mr.has(o))){t=jn(a,t),a=Ng(2),o=Ar(n,a,2),o!==null&&(xg(a,o,n,t),gt(o,2),Ai(o));break}}n=n.return}}function Uf(t,n,a){var o=t.pingCache;if(o===null){o=t.pingCache=new WE;var h=new Set;o.set(n,h)}else h=o.get(n),h===void 0&&(h=new Set,o.set(n,h));h.has(a)||(If=!0,h.add(a),t=ib.bind(null,t,n,a),n.then(t,t))}function ib(t,n,a){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ct===t&&(Qe&a)===a&&(St===4||St===3&&(Qe&62914560)===Qe&&300>Wt()-xf?(tt&2)===0&&La(t,0):Cf|=a,ka===Qe&&(ka=0)),Ai(t)}function wy(t,n){n===0&&(n=$n()),t=Ea(t,n),t!==null&&(gt(t,n),Ai(t))}function rb(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),wy(t,a)}function sb(t,n){var a=0;switch(t.tag){case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(n),wy(t,a)}function ab(t,n){return ft(t,n)}var Xu=null,qa=null,jf=!1,$u=!1,Lf=!1,Bs=0;function Ai(t){t!==qa&&t.next===null&&(qa===null?Xu=qa=t:qa=qa.next=t),$u=!0,jf||(jf=!0,lb())}function al(t,n){if(!Lf&&$u){Lf=!0;do for(var a=!1,o=Xu;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-te(42|t)+1)-1,f&=h&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,xy(o,f))}else f=Qe,f=Ht(o,o===ct?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Yn(o,f)||(a=!0,xy(o,f));o=o.next}while(a);Lf=!1}}function ob(){Iy()}function Iy(){$u=jf=!1;var t=0;Bs!==0&&(gb()&&(t=Bs),Bs=0);for(var n=Wt(),a=null,o=Xu;o!==null;){var h=o.next,f=Cy(o,n);f===0?(o.next=null,a===null?Xu=h:a.next=h,h===null&&(qa=a)):(a=o,(t!==0||(f&3)!==0)&&($u=!0)),o=h}al(t)}function Cy(t,n){for(var a=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-te(f),E=1<<v,N=h[v];N===-1?((E&a)===0||(E&o)!==0)&&(h[v]=Xn(E,n)):N<=n&&(t.expiredLanes|=E),f&=~E}if(n=ct,a=Qe,a=Ht(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===n&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Vi(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Yn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(o!==null&&Vi(o),os(a)){case 2:case 8:a=Rt;break;case 32:a=Vn;break;case 268435456:a=rs;break;default:a=Vn}return o=Ny.bind(null,t),a=ft(a,o),t.callbackPriority=n,t.callbackNode=a,n}return o!==null&&o!==null&&Vi(o),t.callbackPriority=2,t.callbackNode=null,2}function Ny(t,n){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Yu()&&t.callbackNode!==a)return null;var o=Qe;return o=Ht(t,t===ct?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(hy(t,o,n),Cy(t,Wt()),t.callbackNode!=null&&t.callbackNode===a?Ny.bind(null,t):null)}function xy(t,n){if(Yu())return null;hy(t,n,!0)}function lb(){_b(function(){(tt&6)!==0?ft(At,ob):Iy()})}function zf(){return Bs===0&&(Bs=ss()),Bs}function Dy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ei(""+t)}function Oy(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function ub(t,n,a,o,h){if(n==="submit"&&a&&a.stateNode===h){var f=Dy((h[Et]||null).action),v=o.submitter;v&&(n=(n=v[Et]||null)?Dy(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new Es("action","action",null,o,h);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Bs!==0){var N=v?Oy(h,v):new FormData(h);af(a,{pending:!0,data:N,method:h.method,action:f},null,N)}}else typeof f=="function"&&(E.preventDefault(),N=v?Oy(h,v):new FormData(h),af(a,{pending:!0,data:N,method:h.method,action:f},f,N))},currentTarget:h}]})}}for(var qf=0;qf<Ah.length;qf++){var Bf=Ah[qf],cb=Bf.toLowerCase(),hb=Bf[0].toUpperCase()+Bf.slice(1);ri(cb,"on"+hb)}ri(hp,"onAnimationEnd"),ri(fp,"onAnimationIteration"),ri(dp,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(CE,"onTransitionRun"),ri(NE,"onTransitionStart"),ri(xE,"onTransitionCancel"),ri(mp,"onTransitionEnd"),gi("onMouseEnter",["mouseout","mouseover"]),gi("onMouseLeave",["mouseout","mouseover"]),gi("onPointerEnter",["pointerout","pointerover"]),gi("onPointerLeave",["pointerout","pointerover"]),pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pi("onBeforeInput",["compositionend","keypress","textInput","paste"]),pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function My(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],h=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],N=E.instance,L=E.currentTarget;if(E=E.listener,N!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=L;try{f(h)}catch(K){Uu(K)}h.currentTarget=null,f=N}else for(v=0;v<o.length;v++){if(E=o[v],N=E.instance,L=E.currentTarget,E=E.listener,N!==f&&h.isPropagationStopped())break e;f=E,h.currentTarget=L;try{f(h)}catch(K){Uu(K)}h.currentTarget=null,f=N}}}}function qe(t,n){var a=n[ls];a===void 0&&(a=n[ls]=new Set);var o=t+"__bubble";a.has(o)||(Vy(n,t,2,!1),a.add(o))}function Hf(t,n,a){var o=0;n&&(o|=4),Vy(a,t,o,n)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[Zu]){t[Zu]=!0,Wl.forEach(function(a){a!=="selectionchange"&&(fb.has(a)||Hf(a,!1,t),Hf(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Zu]||(n[Zu]=!0,Hf("selectionchange",!1,n))}}function Vy(t,n,a,o){switch(r_(n)){case 2:var h=Lb;break;case 8:h=zb;break;default:h=rd}a=h.bind(null,n,a,t),h=void 0,!Li||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(n,a,{capture:!0,passive:h}):t.addEventListener(n,a,!0):h!==void 0?t.addEventListener(n,a,{passive:h}):t.addEventListener(n,a,!1)}function Gf(t,n,a,o,h){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===h)break;if(v===4)for(v=o.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;E!==null;){if(v=di(E),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){o=f=v;continue e}E=E.parentNode}}o=o.return}_s(function(){var L=f,K=Ao(a),Z=[];e:{var z=pp.get(t);if(z!==void 0){var q=Es,Ie=t;switch(t){case"keypress":if(vs(a)===0)break e;case"keydown":case"keyup":q=ya;break;case"focusin":Ie="focus",q=ma;break;case"focusout":Ie="blur",q=ma;break;case"beforeblur":case"afterblur":q=ma;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ws;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=su;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Tr;break;case hp:case fp:case dp:q=wo;break;case mp:q=m;break;case"scroll":case"scrollend":q=Ss;break;case"wheel":q=S;break;case"copy":case"cut":case"paste":q=ou;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=No;break;case"toggle":case"beforetoggle":q=H}var Ae=(n&4)!==0,at=!Ae&&(t==="scroll"||t==="scrollend"),k=Ae?z!==null?z+"Capture":null:z;Ae=[];for(var O=L,U;O!==null;){var $=O;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||k===null||($=_r(O,k),$!=null&&Ae.push(ll(O,$,U))),at)break;O=O.return}0<Ae.length&&(z=new q(z,Ie,null,a,K),Z.push({event:z,listeners:Ae}))}}if((n&7)===0){e:{if(z=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",z&&a!==So&&(Ie=a.relatedTarget||a.fromElement)&&(di(Ie)||Ie[Rn]))break e;if((q||z)&&(z=K.window===K?K:(z=K.ownerDocument)?z.defaultView||z.parentWindow:window,q?(Ie=a.relatedTarget||a.toElement,q=L,Ie=Ie?di(Ie):null,Ie!==null&&(at=c(Ie),Ae=Ie.tag,Ie!==at||Ae!==5&&Ae!==27&&Ae!==6)&&(Ie=null)):(q=null,Ie=L),q!==Ie)){if(Ae=ws,$="onMouseLeave",k="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=No,$="onPointerLeave",k="onPointerEnter",O="pointer"),at=q==null?z:fr(q),U=Ie==null?z:fr(Ie),z=new Ae($,O+"leave",q,a,K),z.target=at,z.relatedTarget=U,$=null,di(K)===L&&(Ae=new Ae(k,O+"enter",Ie,a,K),Ae.target=U,Ae.relatedTarget=at,$=Ae),at=$,q&&Ie)t:{for(Ae=q,k=Ie,O=0,U=Ae;U;U=Ba(U))O++;for(U=0,$=k;$;$=Ba($))U++;for(;0<O-U;)Ae=Ba(Ae),O--;for(;0<U-O;)k=Ba(k),U--;for(;O--;){if(Ae===k||k!==null&&Ae===k.alternate)break t;Ae=Ba(Ae),k=Ba(k)}Ae=null}else Ae=null;q!==null&&Py(Z,z,q,Ae,!1),Ie!==null&&at!==null&&Py(Z,at,Ie,Ae,!0)}}e:{if(z=L?fr(L):window,q=z.nodeName&&z.nodeName.toLowerCase(),q==="select"||q==="input"&&z.type==="file")var _e=ep;else if(Wm(z))if(tp)_e=RE;else{_e=SE;var je=bE}else q=z.nodeName,!q||q.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&ha(L.elementType)&&(_e=ep):_e=AE;if(_e&&(_e=_e(t,L))){Jm(Z,_e,a,K);break e}je&&je(t,z,L),t==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&To(z,"number",z.value)}switch(je=L?fr(L):window,t){case"focusin":(Wm(je)||je.contentEditable==="true")&&(_a=je,Eh=L,Vo=null);break;case"focusout":Vo=Eh=_a=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,up(Z,a,K);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":up(Z,a,K)}var Te;if(Oe)e:{switch(t){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else ii?ti(t,a)&&(Re="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(It&&a.locale!=="ko"&&(ii||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&ii&&(Te=ru()):(Un=K,ut="value"in Un?Un.value:Un.textContent,ii=!0)),je=Wu(L,Re),0<je.length&&(Re=new Co(Re,t,null,a,K),Z.push({event:Re,listeners:je}),Te?Re.data=Te:(Te=ni(a),Te!==null&&(Re.data=Te)))),(Te=et?xo(t,a):vE(t,a))&&(Re=Wu(L,"onBeforeInput"),0<Re.length&&(je=new Co("onBeforeInput","beforeinput",null,a,K),Z.push({event:je,listeners:Re}),je.data=Te)),ub(Z,t,L,a,K)}My(Z,n)})}function ll(t,n,a){return{instance:t,listener:n,currentTarget:a}}function Wu(t,n){for(var a=n+"Capture",o=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=_r(t,a),h!=null&&o.unshift(ll(t,h,f)),h=_r(t,n),h!=null&&o.push(ll(t,h,f))),t.tag===3)return o;t=t.return}return[]}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Py(t,n,a,o,h){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,N=E.alternate,L=E.stateNode;if(E=E.tag,N!==null&&N===o)break;E!==5&&E!==26&&E!==27||L===null||(N=L,h?(L=_r(a,f),L!=null&&v.unshift(ll(a,L,N))):h||(L=_r(a,f),L!=null&&v.push(ll(a,L,N)))),a=a.return}v.length!==0&&t.push({event:n,listeners:v})}var db=/\r\n?/g,mb=/\u0000|\uFFFD/g;function ky(t){return(typeof t=="string"?t:""+t).replace(db,`
`).replace(mb,"")}function Uy(t,n){return n=ky(n),ky(t)===n}function Ju(){}function st(t,n,a,o,h,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||kn(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&kn(t,""+o);break;case"className":ds(t,"class",o);break;case"tabIndex":ds(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ds(t,a,o);break;case"style":bo(t,o,f);break;case"data":if(n!=="object"){ds(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ei(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&st(t,n,"name",h.name,h,null),st(t,n,"formEncType",h.formEncType,h,null),st(t,n,"formMethod",h.formMethod,h,null),st(t,n,"formTarget",h.formTarget,h,null)):(st(t,n,"encType",h.encType,h,null),st(t,n,"method",h.method,h,null),st(t,n,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=ei(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ju);break;case"onScroll":o!=null&&qe("scroll",t);break;case"onScrollEnd":o!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=ei(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":qe("beforetoggle",t),qe("toggle",t),fs(t,"popover",o);break;case"xlinkActuate":Pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Pn(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Pn(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Pn(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Pn(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":fs(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tu.get(a)||a,fs(t,a,o))}}function Qf(t,n,a,o,h,f){switch(a){case"style":bo(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?kn(t,o):(typeof o=="number"||typeof o=="bigint")&&kn(t,""+o);break;case"onScroll":o!=null&&qe("scroll",t);break;case"onScrollEnd":o!=null&&qe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),n=a.slice(2,h?a.length-7:void 0),f=t[Et]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(n,f,h),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,o,h);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):fs(t,a,o)}}}function tn(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var o=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:st(t,n,f,v,a,null)}}h&&st(t,n,"srcSet",a.srcSet,a,null),o&&st(t,n,"src",a.src,a,null);return;case"input":qe("invalid",t);var E=f=v=h=null,N=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var K=a[o];if(K!=null)switch(o){case"name":h=K;break;case"type":v=K;break;case"checked":N=K;break;case"defaultChecked":L=K;break;case"value":f=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,n));break;default:st(t,n,o,K,a,null)}}vo(t,f,E,N,L,v,h,!1),pr(t);return;case"select":qe("invalid",t),o=v=f=null;for(h in a)if(a.hasOwnProperty(h)&&(E=a[h],E!=null))switch(h){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:st(t,n,h,E,a,null)}n=f,a=v,t.multiple=!!o,n!=null?gr(t,!!o,n,!1):a!=null&&gr(t,!!o,a,!0);return;case"textarea":qe("invalid",t),f=h=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":h=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:st(t,n,v,E,a,null)}eu(t,o,h,f),pr(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(o=a[N],o!=null))switch(N){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:st(t,n,N,o,a,null)}return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(o=0;o<ol.length;o++)qe(ol[o],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,n));default:st(t,n,L,o,a,null)}return;default:if(ha(n)){for(K in a)a.hasOwnProperty(K)&&(o=a[K],o!==void 0&&Qf(t,n,K,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&st(t,n,E,o,a,null))}function pb(t,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,v=null,E=null,N=null,L=null,K=null;for(q in a){var Z=a[q];if(a.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":N=Z;default:o.hasOwnProperty(q)||st(t,n,q,null,o,Z)}}for(var z in o){var q=o[z];if(Z=a[z],o.hasOwnProperty(z)&&(q!=null||Z!=null))switch(z){case"type":f=q;break;case"name":h=q;break;case"checked":L=q;break;case"defaultChecked":K=q;break;case"value":v=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,n));break;default:q!==Z&&st(t,n,z,q,o,Z)}}_o(t,v,E,N,L,K,f,h);return;case"select":q=v=E=z=null;for(f in a)if(N=a[f],a.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":q=N;default:o.hasOwnProperty(f)||st(t,n,f,null,o,N)}for(h in o)if(f=o[h],N=a[h],o.hasOwnProperty(h)&&(f!=null||N!=null))switch(h){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==N&&st(t,n,h,f,o,N)}n=E,a=v,o=q,z!=null?gr(t,!!a,z,!1):!!o!=!!a&&(n!=null?gr(t,!!a,n,!0):gr(t,!!a,a?[]:"",!1));return;case"textarea":q=z=null;for(E in a)if(h=a[E],a.hasOwnProperty(E)&&h!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:st(t,n,E,null,o,h)}for(v in o)if(h=o[v],f=a[v],o.hasOwnProperty(v)&&(h!=null||f!=null))switch(v){case"value":z=h;break;case"defaultValue":q=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&st(t,n,v,h,o,f)}Jl(t,z,q);return;case"option":for(var Ie in a)if(z=a[Ie],a.hasOwnProperty(Ie)&&z!=null&&!o.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:st(t,n,Ie,null,o,z)}for(N in o)if(z=o[N],q=a[N],o.hasOwnProperty(N)&&z!==q&&(z!=null||q!=null))switch(N){case"selected":t.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:st(t,n,N,z,o,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)z=a[Ae],a.hasOwnProperty(Ae)&&z!=null&&!o.hasOwnProperty(Ae)&&st(t,n,Ae,null,o,z);for(L in o)if(z=o[L],q=a[L],o.hasOwnProperty(L)&&z!==q&&(z!=null||q!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,n));break;default:st(t,n,L,z,o,q)}return;default:if(ha(n)){for(var at in a)z=a[at],a.hasOwnProperty(at)&&z!==void 0&&!o.hasOwnProperty(at)&&Qf(t,n,at,void 0,o,z);for(K in o)z=o[K],q=a[K],!o.hasOwnProperty(K)||z===q||z===void 0&&q===void 0||Qf(t,n,K,z,o,q);return}}for(var k in a)z=a[k],a.hasOwnProperty(k)&&z!=null&&!o.hasOwnProperty(k)&&st(t,n,k,null,o,z);for(Z in o)z=o[Z],q=a[Z],!o.hasOwnProperty(Z)||z===q||z==null&&q==null||st(t,n,Z,z,o,q)}var Kf=null,Yf=null;function ec(t){return t.nodeType===9?t:t.ownerDocument}function jy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ly(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Xf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var $f=null;function gb(){var t=window.event;return t&&t.type==="popstate"?t===$f?!1:($f=t,!0):($f=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,yb=typeof clearTimeout=="function"?clearTimeout:void 0,qy=typeof Promise=="function"?Promise:void 0,_b=typeof queueMicrotask=="function"?queueMicrotask:typeof qy<"u"?function(t){return qy.resolve(null).then(t).catch(vb)}:zy;function vb(t){setTimeout(function(){throw t})}function kr(t){return t==="head"}function By(t,n){var a=n,o=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&ul(v.documentElement),a&2&&ul(v.body),a&4)for(a=v.head,ul(a),v=a.firstChild;v;){var E=v.nextSibling,N=v.nodeName;v[hr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(h===0){t.removeChild(f),yl(n);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);yl(n)}function Zf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zf(a),aa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Tb(t,n,a,o){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[hr])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ai(t.nextSibling),t===null)break}return null}function Eb(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ai(t.nextSibling),t===null))return null;return t}function Wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function bb(t,n){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ai(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var Jf=null;function Hy(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return t;n--}else a==="/$"&&n++}t=t.previousSibling}return null}function Fy(t,n,a){switch(n=ec(a),t){case"html":if(t=n.documentElement,!t)throw Error(r(452));return t;case"head":if(t=n.head,!t)throw Error(r(453));return t;case"body":if(t=n.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ul(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);aa(t)}var Fn=new Map,Gy=new Set;function tc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ji=ue.d;ue.d={f:Sb,r:Ab,D:Rb,C:wb,L:Ib,m:Cb,X:xb,S:Nb,M:Db};function Sb(){var t=Ji.f(),n=Qu();return t||n}function Ab(t){var n=mi(t);n!==null&&n.tag===5&&n.type==="form"?hg(n):Ji.r(t)}var Ha=typeof document>"u"?null:document;function Qy(t,n,a){var o=Ha;if(o&&typeof n=="string"&&n){var h=Gt(n);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Gy.has(h)||(Gy.add(h),t={rel:t,crossOrigin:a,href:n},o.querySelector(h)===null&&(n=o.createElement("link"),tn(n,"link",t),wt(n),o.head.appendChild(n)))}}function Rb(t){Ji.D(t),Qy("dns-prefetch",t,null)}function wb(t,n){Ji.C(t,n),Qy("preconnect",t,n)}function Ib(t,n,a){Ji.L(t,n,a);var o=Ha;if(o&&t&&n){var h='link[rel="preload"][as="'+Gt(n)+'"]';n==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Gt(a.imageSizes)+'"]')):h+='[href="'+Gt(t)+'"]';var f=h;switch(n){case"style":f=Fa(t);break;case"script":f=Ga(t)}Fn.has(f)||(t=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Fn.set(f,t),o.querySelector(h)!==null||n==="style"&&o.querySelector(cl(f))||n==="script"&&o.querySelector(hl(f))||(n=o.createElement("link"),tn(n,"link",t),wt(n),o.head.appendChild(n)))}}function Cb(t,n){Ji.m(t,n);var a=Ha;if(a&&t){var o=n&&typeof n.as=="string"?n.as:"script",h='link[rel="modulepreload"][as="'+Gt(o)+'"][href="'+Gt(t)+'"]',f=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Ga(t)}if(!Fn.has(f)&&(t=b({rel:"modulepreload",href:t},n),Fn.set(f,t),a.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(f)))return}o=a.createElement("link"),tn(o,"link",t),wt(o),a.head.appendChild(o)}}}function Nb(t,n,a){Ji.S(t,n,a);var o=Ha;if(o&&t){var h=dr(o).hoistableStyles,f=Fa(t);n=n||"default";var v=h.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(cl(f)))E.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Fn.get(f))&&ed(t,a);var N=v=o.createElement("link");wt(N),tn(N,"link",t),N._p=new Promise(function(L,K){N.onload=L,N.onerror=K}),N.addEventListener("load",function(){E.loading|=1}),N.addEventListener("error",function(){E.loading|=2}),E.loading|=4,nc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},h.set(f,v)}}}function xb(t,n){Ji.X(t,n);var a=Ha;if(a&&t){var o=dr(a).hoistableScripts,h=Ga(t),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(t=b({src:t,async:!0},n),(n=Fn.get(h))&&td(t,n),f=a.createElement("script"),wt(f),tn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Db(t,n){Ji.M(t,n);var a=Ha;if(a&&t){var o=dr(a).hoistableScripts,h=Ga(t),f=o.get(h);f||(f=a.querySelector(hl(h)),f||(t=b({src:t,async:!0,type:"module"},n),(n=Fn.get(h))&&td(t,n),f=a.createElement("script"),wt(f),tn(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(h,f))}}function Ky(t,n,a,o){var h=(h=se.current)?tc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Fa(a.href),a=dr(h).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Fa(a.href);var f=dr(h).hoistableStyles,v=f.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=h.querySelector(cl(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Fn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(t,a),f||Ob(h,t,a,v.state))),n&&o===null)throw Error(r(528,""));return v}if(n&&o!==null)throw Error(r(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ga(a),a=dr(h).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Fa(t){return'href="'+Gt(t)+'"'}function cl(t){return'link[rel="stylesheet"]['+t+"]"}function Yy(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function Ob(t,n,a,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),tn(n,"link",a),wt(n),t.head.appendChild(n))}function Ga(t){return'[src="'+Gt(t)+'"]'}function hl(t){return"script[async]"+t}function Xy(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Gt(a.href)+'"]');if(o)return n.instance=o,wt(o),o;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),wt(o),tn(o,"style",h),nc(o,a.precedence,t),n.instance=o;case"stylesheet":h=Fa(a.href);var f=t.querySelector(cl(h));if(f)return n.state.loading|=4,n.instance=f,wt(f),f;o=Yy(a),(h=Fn.get(h))&&ed(o,h),f=(t.ownerDocument||t).createElement("link"),wt(f);var v=f;return v._p=new Promise(function(E,N){v.onload=E,v.onerror=N}),tn(f,"link",o),n.state.loading|=4,nc(f,a.precedence,t),n.instance=f;case"script":return f=Ga(a.src),(h=t.querySelector(hl(f)))?(n.instance=h,wt(h),h):(o=a,(h=Fn.get(f))&&(o=b({},a),td(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),wt(h),tn(h,"link",o),t.head.appendChild(h),n.instance=h);case"void":return null;default:throw Error(r(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,nc(o,a.precedence,t));return n.instance}function nc(t,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,f=h,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function ed(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function td(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var ic=null;function $y(t,n,a){if(ic===null){var o=new Map,h=ic=new Map;h.set(a,o)}else h=ic,o=h.get(a),o||(o=new Map,h.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[hr]||f[ot]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=t+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function Zy(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function Mb(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Wy(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var fl=null;function Vb(){}function Pb(t,n,a){if(fl===null)throw Error(r(475));var o=fl;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Fa(a.href),f=t.querySelector(cl(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=rc.bind(o),t.then(o,o)),n.state.loading|=4,n.instance=f,wt(f);return}f=t.ownerDocument||t,a=Yy(a),(h=Fn.get(h))&&ed(a,h),f=f.createElement("link"),wt(f);var v=f;v._p=new Promise(function(E,N){v.onload=E,v.onerror=N}),tn(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=rc.bind(o),t.addEventListener("load",n),t.addEventListener("error",n))}}function kb(){if(fl===null)throw Error(r(475));var t=fl;return t.stylesheets&&t.count===0&&nd(t,t.stylesheets),0<t.count?function(n){var a=setTimeout(function(){if(t.stylesheets&&nd(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(a)}}:null}function rc(){if(this.count--,this.count===0){if(this.stylesheets)nd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var sc=null;function nd(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,sc=new Map,n.forEach(Ub,t),sc=null,rc.call(t))}function Ub(t,n){if(!(n.state.loading&4)){var a=sc.get(t);if(a)var o=a.get(null);else{a=new Map,sc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var v=h[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}h=n.instance,v=h.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,h),a.set(v,h),this.count++,o=rc.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),n.state.loading|=4}}var dl={$$typeof:he,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function jb(t,n,a,o,h,f,v,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cr(0),this.hiddenUpdates=cr(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Jy(t,n,a,o,h,f,v,E,N,L,K,Z){return t=new jb(t,n,a,v,E,N,L,Z),n=1,f===!0&&(n|=24),f=Cn(3,null,null,n),t.current=f,f.stateNode=t,n=kh(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},zh(f),t}function e_(t){return t?(t=ba,t):ba}function t_(t,n,a,o,h,f){h=e_(h),o.context===null?o.context=h:o.pendingContext=h,o=Sr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Ar(t,o,n),a!==null&&(Mn(a,t,n),Ho(a,t,n))}function n_(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function id(t,n){n_(t,n),(t=t.alternate)&&n_(t,n)}function i_(t){if(t.tag===13){var n=Ea(t,67108864);n!==null&&Mn(n,t,67108864),id(t,67108864)}}var ac=!0;function Lb(t,n,a,o){var h=G.T;G.T=null;var f=ue.p;try{ue.p=2,rd(t,n,a,o)}finally{ue.p=f,G.T=h}}function zb(t,n,a,o){var h=G.T;G.T=null;var f=ue.p;try{ue.p=8,rd(t,n,a,o)}finally{ue.p=f,G.T=h}}function rd(t,n,a,o){if(ac){var h=sd(o);if(h===null)Gf(t,n,o,oc,a),s_(t,o);else if(Bb(h,t,n,a,o))o.stopPropagation();else if(s_(t,o),n&4&&-1<qb.indexOf(t)){for(;h!==null;){var f=mi(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Tn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var N=1<<31-te(v);E.entanglements[1]|=N,v&=~N}Ai(f),(tt&6)===0&&(Fu=Wt()+500,al(0))}}break;case 13:E=Ea(f,2),E!==null&&Mn(E,f,2),Qu(),id(f,2)}if(f=sd(o),f===null&&Gf(t,n,o,oc,a),f===h)break;h=f}h!==null&&o.stopPropagation()}else Gf(t,n,o,null,a)}}function sd(t){return t=Ao(t),ad(t)}var oc=null;function ad(t){if(oc=null,t=di(t),t!==null){var n=c(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=d(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return oc=t,null}function r_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ra()){case At:return 2;case Rt:return 8;case Vn:case go:return 32;case rs:return 268435456;default:return 32}default:return 32}}var od=!1,Ur=null,jr=null,Lr=null,ml=new Map,pl=new Map,zr=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s_(t,n){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Lr=null;break;case"pointerover":case"pointerout":ml.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(n.pointerId)}}function gl(t,n,a,o,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[h]},n!==null&&(n=mi(n),n!==null&&i_(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,h!==null&&n.indexOf(h)===-1&&n.push(h),t)}function Bb(t,n,a,o,h){switch(n){case"focusin":return Ur=gl(Ur,t,n,a,o,h),!0;case"dragenter":return jr=gl(jr,t,n,a,o,h),!0;case"mouseover":return Lr=gl(Lr,t,n,a,o,h),!0;case"pointerover":var f=h.pointerId;return ml.set(f,gl(ml.get(f)||null,t,n,a,o,h)),!0;case"gotpointercapture":return f=h.pointerId,pl.set(f,gl(pl.get(f)||null,t,n,a,o,h)),!0}return!1}function a_(t){var n=di(t.target);if(n!==null){var a=c(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){t.blockedOn=n,kt(t.priority,function(){if(a.tag===13){var o=On();o=as(o);var h=Ea(a,o);h!==null&&Mn(h,a,o),id(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=sd(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);So=o,a.target.dispatchEvent(o),So=null}else return n=mi(a),n!==null&&i_(n),t.blockedOn=a,!1;n.shift()}return!0}function o_(t,n,a){lc(t)&&a.delete(n)}function Hb(){od=!1,Ur!==null&&lc(Ur)&&(Ur=null),jr!==null&&lc(jr)&&(jr=null),Lr!==null&&lc(Lr)&&(Lr=null),ml.forEach(o_),pl.forEach(o_)}function uc(t,n){t.blockedOn===n&&(t.blockedOn=null,od||(od=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Hb)))}var cc=null;function l_(t){cc!==t&&(cc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){cc===t&&(cc=null);for(var n=0;n<t.length;n+=3){var a=t[n],o=t[n+1],h=t[n+2];if(typeof o!="function"){if(ad(o||a)===null)continue;break}var f=mi(a);f!==null&&(t.splice(n,3),n-=3,af(f,{pending:!0,data:h,method:a.method,action:o},o,h))}}))}function yl(t){function n(N){return uc(N,t)}Ur!==null&&uc(Ur,t),jr!==null&&uc(jr,t),Lr!==null&&uc(Lr,t),ml.forEach(n),pl.forEach(n);for(var a=0;a<zr.length;a++){var o=zr[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<zr.length&&(a=zr[0],a.blockedOn===null);)a_(a),a.blockedOn===null&&zr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var h=a[o],f=a[o+1],v=h[Et]||null;if(typeof f=="function")v||l_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(h=f,v=f[Et]||null)E=v.formAction;else if(ad(h)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),l_(a)}}}function ld(t){this._internalRoot=t}hc.prototype.render=ld.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(r(409));var a=n.current,o=On();t_(a,o,t,n,null,null)},hc.prototype.unmount=ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;t_(t.current,2,null,t,null,null),Qu(),n[Rn]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var n=ke();t={blockedOn:null,target:t,priority:n};for(var a=0;a<zr.length&&n!==0&&n<zr[a].priority;a++);zr.splice(a,0,t),a===0&&a_(t)}};var u_=e.version;if(u_!=="19.1.1")throw Error(r(527,u_,"19.1.1"));ue.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=y(n),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var Fb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{hi=fc.inject(Fb),Bt=fc}catch{}}return vl.createRoot=function(t,n){if(!l(t))throw Error(r(299));var a=!1,o="",h=Rg,f=wg,v=Ig,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(h=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Jy(t,1,!1,null,null,a,o,h,f,v,E,null),t[Rn]=n.current,Ff(t),new ld(n)},vl.hydrateRoot=function(t,n,a){if(!l(t))throw Error(r(299));var o=!1,h="",f=Rg,v=wg,E=Ig,N=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=Jy(t,1,!0,n,a??null,o,h,f,v,E,N,L),n.context=e_(null),a=n.current,o=On(),o=as(o),h=Sr(o),h.callback=null,Ar(a,h,o),a=o,n.current.lanes=a,gt(n,a),Ai(n),t[Rn]=n.current,Ff(t),new hc(n)},vl.version="19.1.1",vl}var v_;function eS(){if(v_)return hd.exports;v_=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hd.exports=Jb(),hd.exports}var tS=eS();const nn=[];for(let s=0;s<256;++s)nn.push((s+256).toString(16).slice(1));function nS(s,e=0){return(nn[s[e+0]]+nn[s[e+1]]+nn[s[e+2]]+nn[s[e+3]]+"-"+nn[s[e+4]]+nn[s[e+5]]+"-"+nn[s[e+6]]+nn[s[e+7]]+"-"+nn[s[e+8]]+nn[s[e+9]]+"-"+nn[s[e+10]]+nn[s[e+11]]+nn[s[e+12]]+nn[s[e+13]]+nn[s[e+14]]+nn[s[e+15]]).toLowerCase()}let pd;const iS=new Uint8Array(16);function rS(){if(!pd){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");pd=crypto.getRandomValues.bind(crypto)}return pd(iS)}const sS=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T_={randomUUID:sS};function aS(s,e,i){s=s||{};const r=s.random??s.rng?.()??rS();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nS(r)}function Al(s,e,i){return T_.randomUUID&&!s?T_.randomUUID():aS(s)}var gd={exports:{}},yd,E_;function oS(){if(E_)return yd;E_=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return yd=s,yd}var _d,b_;function lS(){if(b_)return _d;b_=1;var s=oS();function e(){}function i(){}return i.resetWarningCache=e,_d=function(){function r(d,p,y,g,b,R){if(R!==s){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}r.isRequired=r;function l(){return r}var c={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:l,element:r,elementType:r,instanceOf:l,node:r,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:i,resetWarningCache:e};return c.PropTypes=c,c},_d}var S_;function uS(){return S_||(S_=1,gd.exports=lS()()),gd.exports}var cS=uS();const Y=Kv(cS),hS=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=function(s){const e=[];let i=0;for(let r=0;r<s.length;r++){let l=s.charCodeAt(r);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(l=65536+((l&1023)<<10)+(s.charCodeAt(++r)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},fS=function(s){const e=[];let i=0,r=0;for(;i<s.length;){const l=s[i++];if(l<128)e[r++]=String.fromCharCode(l);else if(l>191&&l<224){const c=s[i++];e[r++]=String.fromCharCode((l&31)<<6|c&63)}else if(l>239&&l<365){const c=s[i++],d=s[i++],p=s[i++],y=((l&7)<<18|(c&63)<<12|(d&63)<<6|p&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const c=s[i++],d=s[i++];e[r++]=String.fromCharCode((l&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Xv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let l=0;l<s.length;l+=3){const c=s[l],d=l+1<s.length,p=d?s[l+1]:0,y=l+2<s.length,g=y?s[l+2]:0,b=c>>2,R=(c&3)<<4|p>>4;let M=(p&15)<<2|g>>6,B=g&63;y||(B=64,d||(M=64)),r.push(i[b],i[R],i[M],i[B])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Yv(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let l=0;l<s.length;){const c=i[s.charAt(l++)],p=l<s.length?i[s.charAt(l)]:0;++l;const g=l<s.length?i[s.charAt(l)]:64;++l;const R=l<s.length?i[s.charAt(l)]:64;if(++l,c==null||p==null||g==null||R==null)throw new dS;const M=c<<2|p>>4;if(r.push(M),g!==64){const B=p<<4&240|g>>2;if(r.push(B),R!==64){const Q=g<<6&192|R;r.push(Q)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mS=function(s){const e=Yv(s);return Xv.encodeByteArray(e,!0)},Oc=function(s){return mS(s).replace(/\./g,"")},$v=function(s){try{return Xv.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=()=>pS().__FIREBASE_DEFAULTS__,yS=()=>{if(typeof process>"u"||typeof A_>"u")return;const s=A_.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_S=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&$v(s[1]);return e&&JSON.parse(e)},Wc=()=>{try{return hS()||gS()||yS()||_S()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Zv=s=>Wc()?.emulatorHosts?.[s],vS=s=>{const e=Zv(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),r]:[e.substring(0,i),r]},Wv=()=>Wc()?.config,Jv=s=>Wc()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,r)=>{i?this.reject(i):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},r=e||"demo-project",l=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:l,exp:l+3600,auth_time:l,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Oc(JSON.stringify(i)),Oc(JSON.stringify(d)),""].join(".")}const Rl={};function bS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Rl))Rl[e]?s.emulator.push(e):s.prod.push(e);return s}function SS(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let R_=!1;function t0(s,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||Rl[s]===e||Rl[s]||R_)return;Rl[s]=e;function i(M){return`__firebase__banner__${M}`}const r="__firebase__banner",c=bS().prod.length>0;function d(){const M=document.getElementById(r);M&&M.remove()}function p(M){M.style.display="flex",M.style.background="#7faaf0",M.style.position="fixed",M.style.bottom="5px",M.style.left="5px",M.style.padding=".5em",M.style.borderRadius="5px",M.style.alignItems="center"}function y(M,B){M.setAttribute("width","24"),M.setAttribute("id",B),M.setAttribute("height","24"),M.setAttribute("viewBox","0 0 24 24"),M.setAttribute("fill","none"),M.style.marginLeft="-6px"}function g(){const M=document.createElement("span");return M.style.cursor="pointer",M.style.marginLeft="16px",M.style.fontSize="24px",M.innerHTML=" &times;",M.onclick=()=>{R_=!0,d()},M}function b(M,B){M.setAttribute("id",B),M.innerText="Learn more",M.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",M.setAttribute("target","__blank"),M.style.paddingLeft="5px",M.style.textDecoration="underline"}function R(){const M=SS(r),B=i("text"),Q=document.getElementById(B)||document.createElement("span"),ee=i("learnmore"),X=document.getElementById(ee)||document.createElement("a"),F=i("preprendIcon"),fe=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(M.created){const he=M.element;p(he),b(X,ee);const Ne=g();y(fe,F),he.append(fe,Q,X,Ne),document.body.appendChild(he)}c?(Q.innerText="Preview backend disconnected.",fe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(fe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",R):R()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function RS(){const s=Wc()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function CS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NS(){const s=mn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function xS(){return!RS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){try{return typeof indexedDB=="object"}catch{return!1}}function OS(){return new Promise((s,e)=>{try{let i=!0;const r="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(r);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(r),s(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{e(l.error?.message||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="FirebaseError";class lr extends Error{constructor(e,i,r){super(i),this.code=e,this.customData=r,this.name=MS,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bl.prototype.create)}}class Bl{constructor(e,i,r){this.service=e,this.serviceName=i,this.errors=r}create(e,...i){const r=i[0]||{},l=`${this.service}/${e}`,c=this.errors[e],d=c?VS(c,r):"Error",p=`${this.serviceName}: ${d} (${l}).`;return new lr(l,p,r)}}function VS(s,e){return s.replace(PS,(i,r)=>{const l=e[r];return l!=null?String(l):`<${r}?>`})}const PS=/\{\$([^}]+)}/g;function kS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Ys(s,e){if(s===e)return!0;const i=Object.keys(s),r=Object.keys(e);for(const l of i){if(!r.includes(l))return!1;const c=s[l],d=e[l];if(w_(c)&&w_(d)){if(!Ys(c,d))return!1}else if(c!==d)return!1}for(const l of r)if(!i.includes(l))return!1;return!0}function w_(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(s){const e=[];for(const[i,r]of Object.entries(s))Array.isArray(r)?r.forEach(l=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function US(s,e){const i=new jS(s,e);return i.subscribe.bind(i)}class jS{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,r){let l;if(e===void 0&&i===void 0&&r===void 0)throw new Error("Missing Observer.");LS(e,["next","error","complete"])?l=e:l={next:e,error:i,complete:r},l.next===void 0&&(l.next=vd),l.error===void 0&&(l.error=vd),l.complete===void 0&&(l.complete=vd);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LS(s,e){if(typeof s!="object"||s===null)return!1;for(const i of e)if(i in s&&typeof s[i]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(s){return s&&s._delegate?s._delegate:s}class Xs{constructor(e,i,r){this.name=e,this.instanceFactory=i,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const r=new TS;if(this.instancesDeferred.set(i,r),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&r.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(r)return null;throw l}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(BS(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[i,r]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const c=this.getOrInitializeService({instanceIdentifier:l});r.resolve(c)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:r,options:i});for(const[c,d]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(c);r===p&&d.resolve(l)}return l}onInit(e,i){const r=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(r)??new Set;l.add(e),this.onInitCallbacks.set(r,l);const c=this.instances.get(r);return c&&e(c,r),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const r=this.onInitCallbacks.get(i);if(r)for(const l of r)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qS(e),options:i}),this.instances.set(e,r),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qS(s){return s===Hs?void 0:s}function BS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new zS(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Be||(Be={}));const FS={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},GS=Be.INFO,QS={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},KS=(s,e,...i)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),l=QS[e];if(l)console[l](`[${r}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=GS,this._logHandler=KS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const YS=(s,e)=>e.some(i=>s instanceof i);let I_,C_;function XS(){return I_||(I_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $S(){return C_||(C_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n0=new WeakMap,Od=new WeakMap,i0=new WeakMap,Td=new WeakMap,om=new WeakMap;function ZS(s){const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{i(Kr(s.result)),l()},d=()=>{r(s.error),l()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&n0.set(i,s)}).catch(()=>{}),om.set(e,s),e}function WS(s){if(Od.has(s))return;const e=new Promise((i,r)=>{const l=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{i(),l()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),l()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});Od.set(s,e)}let Md={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return Od.get(s);if(e==="objectStoreNames")return s.objectStoreNames||i0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Kr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function JS(s){Md=s(Md)}function eA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const r=s.call(Ed(this),e,...i);return i0.set(r,e.sort?e.sort():[e]),Kr(r)}:$S().includes(s)?function(...e){return s.apply(Ed(this),e),Kr(n0.get(this))}:function(...e){return Kr(s.apply(Ed(this),e))}}function tA(s){return typeof s=="function"?eA(s):(s instanceof IDBTransaction&&WS(s),YS(s,XS())?new Proxy(s,Md):s)}function Kr(s){if(s instanceof IDBRequest)return ZS(s);if(Td.has(s))return Td.get(s);const e=tA(s);return e!==s&&(Td.set(s,e),om.set(e,s)),e}const Ed=s=>om.get(s);function nA(s,e,{blocked:i,upgrade:r,blocking:l,terminated:c}={}){const d=indexedDB.open(s,e),p=Kr(d);return r&&d.addEventListener("upgradeneeded",y=>{r(Kr(d.result),y.oldVersion,y.newVersion,Kr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),p.then(y=>{c&&y.addEventListener("close",()=>c()),l&&y.addEventListener("versionchange",g=>l(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const iA=["get","getKey","getAll","getAllKeys","count"],rA=["put","add","delete","clear"],bd=new Map;function N_(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const i=e.replace(/FromIndex$/,""),r=e!==i,l=rA.includes(i);if(!(i in(r?IDBIndex:IDBObjectStore).prototype)||!(l||iA.includes(i)))return;const c=async function(d,...p){const y=this.transaction(d,l?"readwrite":"readonly");let g=y.store;return r&&(g=g.index(p.shift())),(await Promise.all([g[i](...p),l&&y.done]))[0]};return bd.set(e,c),c}JS(s=>({...s,get:(e,i,r)=>N_(e,i)||s.get(e,i,r),has:(e,i)=>!!N_(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(aA(i)){const r=i.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(i=>i).join(" ")}}function aA(s){return s.getComponent()?.type==="VERSION"}const Vd="@firebase/app",x_="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new am("@firebase/app"),oA="@firebase/app-compat",lA="@firebase/analytics-compat",uA="@firebase/analytics",cA="@firebase/app-check-compat",hA="@firebase/app-check",fA="@firebase/auth",dA="@firebase/auth-compat",mA="@firebase/database",pA="@firebase/data-connect",gA="@firebase/database-compat",yA="@firebase/functions",_A="@firebase/functions-compat",vA="@firebase/installations",TA="@firebase/installations-compat",EA="@firebase/messaging",bA="@firebase/messaging-compat",SA="@firebase/performance",AA="@firebase/performance-compat",RA="@firebase/remote-config",wA="@firebase/remote-config-compat",IA="@firebase/storage",CA="@firebase/storage-compat",NA="@firebase/firestore",xA="@firebase/ai",DA="@firebase/firestore-compat",OA="firebase",MA="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="[DEFAULT]",VA={[Vd]:"fire-core",[oA]:"fire-core-compat",[uA]:"fire-analytics",[lA]:"fire-analytics-compat",[hA]:"fire-app-check",[cA]:"fire-app-check-compat",[fA]:"fire-auth",[dA]:"fire-auth-compat",[mA]:"fire-rtdb",[pA]:"fire-data-connect",[gA]:"fire-rtdb-compat",[yA]:"fire-fn",[_A]:"fire-fn-compat",[vA]:"fire-iid",[TA]:"fire-iid-compat",[EA]:"fire-fcm",[bA]:"fire-fcm-compat",[SA]:"fire-perf",[AA]:"fire-perf-compat",[RA]:"fire-rc",[wA]:"fire-rc-compat",[IA]:"fire-gcs",[CA]:"fire-gcs-compat",[NA]:"fire-fst",[DA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map,PA=new Map,kd=new Map;function D_(s,e){try{s.container.addComponent(e)}catch(i){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function eo(s){const e=s.name;if(kd.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;kd.set(e,s);for(const i of Mc.values())D_(i,s);for(const i of PA.values())D_(i,s);return!0}function lm(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function oi(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new Bl("app","Firebase",kA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,i,r){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=MA;function r0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const r={name:Pd,automaticDataCollectionEnabled:!0,...e},l=r.name;if(typeof l!="string"||!l)throw Yr.create("bad-app-name",{appName:String(l)});if(i||(i=Wv()),!i)throw Yr.create("no-options");const c=Mc.get(l);if(c){if(Ys(i,c.options)&&Ys(r,c.config))return c;throw Yr.create("duplicate-app",{appName:l})}const d=new HS(l);for(const y of kd.values())d.addComponent(y);const p=new UA(i,r,d);return Mc.set(l,p),p}function s0(s=Pd){const e=Mc.get(s);if(!e&&s===Pd&&Wv())return r0();if(!e)throw Yr.create("no-app",{appName:s});return e}function Xr(s,e,i){let r=VA[s]??s;i&&(r+=`-${i}`);const l=r.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${r}" with version "${e}":`];l&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(d.join(" "));return}eo(new Xs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="firebase-heartbeat-database",LA=1,Ol="firebase-heartbeat-store";let Sd=null;function a0(){return Sd||(Sd=nA(jA,LA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Ol)}catch(i){console.warn(i)}}}}).catch(s=>{throw Yr.create("idb-open",{originalErrorMessage:s.message})})),Sd}async function zA(s){try{const i=(await a0()).transaction(Ol),r=await i.objectStore(Ol).get(o0(s));return await i.done,r}catch(e){if(e instanceof lr)rr.warn(e.message);else{const i=Yr.create("idb-get",{originalErrorMessage:e?.message});rr.warn(i.message)}}}async function O_(s,e){try{const r=(await a0()).transaction(Ol,"readwrite");await r.objectStore(Ol).put(e,o0(s)),await r.done}catch(i){if(i instanceof lr)rr.warn(i.message);else{const r=Yr.create("idb-set",{originalErrorMessage:i?.message});rr.warn(r.message)}}}function o0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=1024,BA=30;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new GA(i),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=M_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(l=>l.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>BA){const l=QA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){rr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=M_(),{heartbeatsToSend:i,unsentEntries:r}=FA(this._heartbeatsCache.heartbeats),l=Oc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(e){return rr.warn(e),""}}}function M_(){return new Date().toISOString().substring(0,10)}function FA(s,e=qA){const i=[];let r=s.slice();for(const l of s){const c=i.find(d=>d.agent===l.agent);if(c){if(c.dates.push(l.date),V_(i)>e){c.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),V_(i)>e){i.pop();break}r=r.slice(1)}return{heartbeatsToSend:i,unsentEntries:r}}class GA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return DS()?OS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await zA(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return O_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V_(s){return Oc(JSON.stringify({version:2,heartbeats:s})).length}function QA(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let r=1;r<s.length;r++)s[r].date<i&&(i=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(s){eo(new Xs("platform-logger",e=>new sA(e),"PRIVATE")),eo(new Xs("heartbeat",e=>new HA(e),"PRIVATE")),Xr(Vd,x_,s),Xr(Vd,x_,"esm2020"),Xr("fire-js","")}KA("");var YA="firebase",XA="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(YA,XA,"app");function l0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $A=l0,u0=new Bl("auth","Firebase",l0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new am("@firebase/auth");function ZA(s,...e){Vc.logLevel<=Be.WARN&&Vc.warn(`Auth (${uo}): ${s}`,...e)}function bc(s,...e){Vc.logLevel<=Be.ERROR&&Vc.error(`Auth (${uo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(s,...e){throw cm(s,...e)}function ci(s,...e){return cm(s,...e)}function um(s,e,i){const r={...$A(),[e]:i};return new Bl("auth","Firebase",r).create(e,{appName:s.name})}function Qs(s){return um(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function WA(s,e,i){const r=i;if(!(e instanceof r))throw r.name!==e.constructor.name&&Di(s,"argument-error"),um(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cm(s,...e){if(typeof s!="string"){const i=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(i,...r)}return u0.create(s,...e)}function Ce(s,e,...i){if(!s)throw cm(e,...i)}function tr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw bc(e),new Error(e)}function sr(s,e){s||tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(){return typeof self<"u"&&self.location?.href||""}function JA(){return P_()==="http:"||P_()==="https:"}function P_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JA()||IS()||"connection"in navigator)?navigator.onLine:!0}function t1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,i){this.shortDelay=e,this.longDelay=i,sr(i>e,"Short delay should be less than long delay!"),this.isMobile=AS()||CS()}get(){return e1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(s,e){sr(s.emulator,"Emulator should always be set here");const{url:i}=s.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{static initialize(e,i,r){this.fetchImpl=e,i&&(this.headersImpl=i),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],r1=new Fl(3e4,6e4);function fm(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function co(s,e,i,r,l={}){return h0(s,l,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const p=Hl({key:s.config.apiKey,...d}).slice(1),y=await s._getAdditionalHeaders();y["Content-Type"]="application/json",s.languageCode&&(y["X-Firebase-Locale"]=s.languageCode);const g={method:e,headers:y,...c};return wS()||(g.referrerPolicy="no-referrer"),s.emulatorConfig&&lo(s.emulatorConfig.host)&&(g.credentials="include"),c0.fetch()(await f0(s,s.config.apiHost,i,p),g)})}async function h0(s,e,i){s._canInitEmulator=!1;const r={...n1,...e};try{const l=new a1(s),c=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw mc(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const p=c.ok?d.errorMessage:d.error.message,[y,g]=p.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw mc(s,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw mc(s,"email-already-in-use",d);if(y==="USER_DISABLED")throw mc(s,"user-disabled",d);const b=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw um(s,b,g);Di(s,b)}}catch(l){if(l instanceof lr)throw l;Di(s,"network-request-failed",{message:String(l)})}}async function s1(s,e,i,r,l={}){const c=await co(s,e,i,r,l);return"mfaPendingCredential"in c&&Di(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function f0(s,e,i,r){const l=`${e}${i}?${r}`,c=s,d=c.config.emulator?hm(s.config,l):`${s.config.apiScheme}://${l}`;return i1.includes(i)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class a1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),r1.get())})}}function mc(s,e,i){const r={appName:s.name};i.email&&(r.email=i.email),i.phoneNumber&&(r.phoneNumber=i.phoneNumber);const l=ci(s,e,r);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o1(s,e){return co(s,"POST","/v1/accounts:delete",e)}async function Pc(s,e){return co(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function l1(s,e=!1){const i=Kn(s),r=await i.getIdToken(e),l=dm(r);Ce(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const c=typeof l.firebase=="object"?l.firebase:void 0,d=c?.sign_in_provider;return{claims:l,token:r,authTime:wl(Ad(l.auth_time)),issuedAtTime:wl(Ad(l.iat)),expirationTime:wl(Ad(l.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Ad(s){return Number(s)*1e3}function dm(s){const[e,i,r]=s.split(".");if(e===void 0||i===void 0||r===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const l=$v(i);return l?JSON.parse(l):(bc("Failed to decode base64 JWT payload"),null)}catch(l){return bc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function k_(s){const e=dm(s);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(s,e,i=!1){if(i)return e;try{return await e}catch(r){throw r instanceof lr&&u1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function u1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=wl(this.lastLoginAt),this.creationTime=wl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(s){const e=s.auth,i=await s.getIdToken(),r=await Ml(s,Pc(e,{idToken:i}));Ce(r?.users.length,e,"internal-error");const l=r.users[0];s._notifyReloadListener(l);const c=l.providerUserInfo?.length?d0(l.providerUserInfo):[],d=f1(s.providerData,c),p=s.isAnonymous,y=!(s.email&&l.passwordHash)&&!d?.length,g=p?y:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new jd(l.createdAt,l.lastLoginAt),isAnonymous:g};Object.assign(s,b)}async function h1(s){const e=Kn(s);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f1(s,e){return[...s.filter(r=>!e.some(l=>l.providerId===r.providerId)),...e]}function d0(s){return s.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(s,e){const i=await h0(s,{},async()=>{const r=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:l,apiKey:c}=s.config,d=await f0(s,l,"/v1/token",`key=${c}`),p=await s._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:p,body:r};return s.emulatorConfig&&lo(s.emulatorConfig.host)&&(y.credentials="include"),c0.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function m1(s,e){return co(s,"POST","/v2/accounts:revokeToken",fm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):k_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const i=k_(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:r,refreshToken:l,expiresIn:c}=await d1(e,i);this.updateTokensAndExpiration(r,l,Number(c))}updateTokensAndExpiration(e,i,r){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,i){const{refreshToken:r,accessToken:l,expirationTime:c}=i,d=new $a;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),l&&(Ce(typeof l=="string","internal-error",{appName:e}),d.accessToken=l),c&&(Ce(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $a,this.toJSON())}_performRefresh(){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(s,e){Ce(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class li{constructor({uid:e,auth:i,stsTokenManager:r,...l}){this.providerId="firebase",this.proactiveRefresh=new c1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new jd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const i=await Ml(this,this.stsTokenManager.getToken(this.auth,e));return Ce(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return l1(this,e)}reload(){return h1(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new li({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),i&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oi(this.auth.app))return Promise.reject(Qs(this.auth));const e=await this.getIdToken();return await Ml(this,o1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const r=i.displayName??void 0,l=i.email??void 0,c=i.phoneNumber??void 0,d=i.photoURL??void 0,p=i.tenantId??void 0,y=i._redirectEventId??void 0,g=i.createdAt??void 0,b=i.lastLoginAt??void 0,{uid:R,emailVerified:M,isAnonymous:B,providerData:Q,stsTokenManager:ee}=i;Ce(R&&ee,e,"internal-error");const X=$a.fromJSON(this.name,ee);Ce(typeof R=="string",e,"internal-error"),Br(r,e.name),Br(l,e.name),Ce(typeof M=="boolean",e,"internal-error"),Ce(typeof B=="boolean",e,"internal-error"),Br(c,e.name),Br(d,e.name),Br(p,e.name),Br(y,e.name),Br(g,e.name),Br(b,e.name);const F=new li({uid:R,auth:e,email:l,emailVerified:M,displayName:r,isAnonymous:B,photoURL:d,phoneNumber:c,tenantId:p,stsTokenManager:X,createdAt:g,lastLoginAt:b});return Q&&Array.isArray(Q)&&(F.providerData=Q.map(fe=>({...fe}))),y&&(F._redirectEventId=y),F}static async _fromIdTokenResponse(e,i,r=!1){const l=new $a;l.updateFromServerResponse(i);const c=new li({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:r});return await kc(c),c}static async _fromGetAccountInfoResponse(e,i,r){const l=i.users[0];Ce(l.localId!==void 0,"internal-error");const c=l.providerUserInfo!==void 0?d0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!c?.length,p=new $a;p.updateFromIdToken(r);const y=new li({uid:l.localId,auth:e,stsTokenManager:p,isAnonymous:d}),g={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:c,metadata:new jd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!c?.length};return Object.assign(y,g),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function nr(s){sr(s instanceof Function,"Expected a class definition");let e=U_.get(s);return e?(sr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,U_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}m0.type="NONE";const j_=m0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s,e,i){return`firebase:${s}:${e}:${i}`}class Za{constructor(e,i,r){this.persistence=e,this.auth=i,this.userKey=r;const{config:l,name:c}=this.auth;this.fullUserKey=Sc(this.userKey,l.apiKey,c),this.fullPersistenceKey=Sc("persistence",l.apiKey,c),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await Pc(this.auth,{idToken:e}).catch(()=>{});return i?li._fromGetAccountInfoResponse(this.auth,i,e):null}return li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,r="authUser"){if(!i.length)return new Za(nr(j_),e,r);const l=(await Promise.all(i.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=l[0]||nr(j_);const d=Sc(r,e.config.apiKey,e.name);let p=null;for(const g of i)try{const b=await g._get(d);if(b){let R;if(typeof b=="string"){const M=await Pc(e,{idToken:b}).catch(()=>{});if(!M)break;R=await li._fromGetAccountInfoResponse(e,M,b)}else R=li._fromJSON(e,b);g!==c&&(p=R),c=g;break}}catch{}const y=l.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!y.length?new Za(c,e,r):(c=y[0],p&&await c._set(d,p.toJSON()),await Promise.all(i.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Za(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(p0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(T0(e))return"Blackberry";if(E0(e))return"Webos";if(g0(e))return"Safari";if((e.includes("chrome/")||y0(e))&&!e.includes("edge/"))return"Chrome";if(v0(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(i);if(r?.length===2)return r[1]}return"Other"}function p0(s=mn()){return/firefox\//i.test(s)}function g0(s=mn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function y0(s=mn()){return/crios\//i.test(s)}function _0(s=mn()){return/iemobile/i.test(s)}function v0(s=mn()){return/android/i.test(s)}function T0(s=mn()){return/blackberry/i.test(s)}function E0(s=mn()){return/webos/i.test(s)}function mm(s=mn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function p1(s=mn()){return mm(s)&&!!window.navigator?.standalone}function g1(){return NS()&&document.documentMode===10}function b0(s=mn()){return mm(s)||v0(s)||E0(s)||T0(s)||/windows phone/i.test(s)||_0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(s,e=[]){let i;switch(s){case"Browser":i=L_(mn());break;case"Worker":i=`${L_(mn())}-${s}`;break;default:i=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${uo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const r=c=>new Promise((d,p)=>{try{const y=e(c);d(y)}catch(y){p(y)}});r.onAbort=i,this.queue.push(r);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(s,e={}){return co(s,"GET","/v2/passwordPolicy",fm(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=6;class T1{constructor(e){const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??v1,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const r=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;r&&(i.meetsMinPasswordLength=e.length>=r),l&&(i.meetsMaxPasswordLength=e.length<=l)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let r;for(let l=0;l<e.length;l++)r=e.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,i,r,l,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,i,r,l){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=r,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new z_(this),this.idTokenSubscription=new z_(this),this.beforeStateQueue=new y1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=nr(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await Pc(this,{idToken:e}),r=await li._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(r)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(oi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=r?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(r=p.user,l=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(r)}catch(c){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oi(this.app))return Promise.reject(Qs(this));const i=e?Kn(e):null;return i&&Ce(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oi(this.app)?Promise.reject(Qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oi(this.app)?Promise.reject(Qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _1(this),i=new T1(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bl("auth","Firebase",e())}onAuthStateChanged(e,i,r){return this.registerStateListener(this.authStateSubscription,e,i,r)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,r){return this.registerStateListener(this.idTokenSubscription,e,i,r)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(r.tenantId=this.tenantId),await m1(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,i){const r=await this.getOrInitRedirectPersistenceManager(i);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&nr(e)||this._popupRedirectResolver;Ce(i,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[nr(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,r,l){if(this._deleted)return()=>{};const c=typeof i=="function"?i:i.next.bind(i);let d=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(p,this,"internal-error"),p.then(()=>{d||c(this.currentUser)}),typeof i=="function"){const y=e.addObserver(i,r,l);return()=>{d=!0,y()}}else{const y=e.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=S0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(oi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&ZA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Jc(s){return Kn(s)}class z_{constructor(e){this.auth=e,this.observer=null,this.addObserver=US(i=>this.observer=i)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b1(s){pm=s}function S1(s){return pm.loadJS(s)}function A1(){return pm.gapiScript}function R1(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(s,e){const i=lm(s,"auth");if(i.isInitialized()){const l=i.getImmediate(),c=i.getOptions();if(Ys(c,e??{}))return l;Di(l,"already-initialized")}return i.initialize({options:e})}function I1(s,e){const i=e?.persistence||[],r=(Array.isArray(i)?i:[i]).map(nr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function C1(s,e,i){const r=Jc(s);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const l=!1,c=A0(e),{host:d,port:p}=N1(e),y=p===null?"":`:${p}`,g={url:`${c}//${d}${y}/`},b=Object.freeze({host:d,port:p,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Ys(g,r.config.emulator)&&Ys(b,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=b,r.settings.appVerificationDisabledForTesting=!0,lo(d)?(e0(`${c}//${d}${y}`),t0("Auth",!0)):x1()}function A0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function N1(s){const e=A0(s),i=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!i)return{host:"",port:null};const r=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(r);if(l){const c=l[1];return{host:c,port:q_(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:q_(d)}}}function q_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function x1(){function s(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return tr("not implemented")}_getIdTokenResponse(e){return tr("not implemented")}_linkToIdToken(e,i){return tr("not implemented")}_getReauthenticationResolver(e){return tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(s,e){return s1(s,"POST","/v1/accounts:signInWithIdp",fm(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="http://localhost";class $s extends R0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):Di("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:l,...c}=i;if(!r||!l)return null;const d=new $s(r,l);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const i=this.buildRequest();return Wa(e,i)}_linkToIdToken(e,i){const r=this.buildRequest();return r.idToken=i,Wa(e,r)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,Wa(e,i)}buildRequest(){const e={requestUri:D1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=Hl(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends gm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Gl{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return $s._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return er.credential(i,r)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends Gl{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends Gl{constructor(){super("twitter.com")}static credential(e,i){return $s._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:r}=e;if(!i||!r)return null;try{return Gr.credential(i,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,r,l=!1){const c=await li._fromIdTokenResponse(e,r,l),d=B_(r);return new to({user:c,providerId:d,_tokenResponse:r,operationType:i})}static async _forOperation(e,i,r){await e._updateTokensIfNecessary(r,!0);const l=B_(r);return new to({user:e,providerId:l,_tokenResponse:r,operationType:i})}}function B_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends lr{constructor(e,i,r,l){super(i.code,i.message),this.operationType=r,this.user=l,Object.setPrototypeOf(this,Uc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,i,r,l){return new Uc(e,i,r,l)}}function w0(s,e,i,r){return(e==="reauthenticate"?i._getReauthenticationResolver(s):i._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Uc._fromErrorAndOperation(s,c,e,r):c})}async function O1(s,e,i=!1){const r=await Ml(s,e._linkToIdToken(s.auth,await s.getIdToken()),i);return to._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(s,e,i=!1){const{auth:r}=s;if(oi(r.app))return Promise.reject(Qs(r));const l="reauthenticate";try{const c=await Ml(s,w0(r,l,e,s),i);Ce(c.idToken,r,"internal-error");const d=dm(c.idToken);Ce(d,r,"internal-error");const{sub:p}=d;return Ce(s.uid===p,r,"user-mismatch"),to._forOperation(s,l,c)}catch(c){throw c?.code==="auth/user-not-found"&&Di(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(s,e,i=!1){if(oi(s.app))return Promise.reject(Qs(s));const r="signIn",l=await w0(s,r,e),c=await to._fromIdTokenResponse(s,r,l);return i||await s._updateCurrentUser(c.user),c}function P1(s,e,i,r){return Kn(s).onIdTokenChanged(e,i,r)}function k1(s,e,i){return Kn(s).beforeAuthStateChanged(e,i)}function U1(s,e,i,r){return Kn(s).onAuthStateChanged(e,i,r)}function j1(s){return Kn(s).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1=1e3,z1=10;class C0 extends I0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=b0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const r=this.storage.getItem(i),l=this.localCache[i];r!==l&&e(i,l,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((d,p,y)=>{this.notifyListeners(d,y)});return}const r=e.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(r);!i&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);g1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(l,z1):l()}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},L1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}C0.type="LOCAL";const q1=C0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0 extends I0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}N0.type="SESSION";const x0=N0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(l=>l.isListeningto(e));if(i)return i;const r=new eh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:r,eventType:l,data:c}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:l});const p=Array.from(d).map(async g=>g(i.origin,c)),y=await B1(p);i.ports[0].postMessage({status:"done",eventId:r,eventType:l,response:y})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(s="",e=10){let i="";for(let r=0;r<e;r++)i+=Math.floor(Math.random()*10);return s+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,r=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let c,d;return new Promise((p,y)=>{const g=ym("",20);l.port1.start();const b=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:l,onMessage(R){const M=R;if(M.data.eventId===g)switch(M.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),p(M.data.response);break;default:clearTimeout(b),clearTimeout(c),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(){return window}function F1(s){wi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(){return typeof wi().WorkerGlobalScope<"u"&&typeof wi().importScripts=="function"}async function G1(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q1(){return navigator?.serviceWorker?.controller||null}function K1(){return D0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="firebaseLocalStorageDb",Y1=1,Lc="firebaseLocalStorage",M0="fbase_key";class Ql{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function th(s,e){return s.transaction([Lc],e?"readwrite":"readonly").objectStore(Lc)}function X1(){const s=indexedDB.deleteDatabase(O0);return new Ql(s).toPromise()}function Ld(){const s=indexedDB.open(O0,Y1);return new Promise((e,i)=>{s.addEventListener("error",()=>{i(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Lc,{keyPath:M0})}catch(l){i(l)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Lc)?e(r):(r.close(),await X1(),e(await Ld()))})})}async function H_(s,e,i){const r=th(s,!0).put({[M0]:e,value:i});return new Ql(r).toPromise()}async function $1(s,e){const i=th(s,!1).get(e),r=await new Ql(i).toPromise();return r===void 0?null:r.value}function F_(s,e){const i=th(s,!0).delete(e);return new Ql(i).toPromise()}const Z1=800,W1=3;class V0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ld(),this.db)}async _withRetries(e){let i=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(i++>W1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return D0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(K1()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await G1(),!this.activeServiceWorker)return;this.sender=new H1(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ld();return await H_(e,jc,"1"),await F_(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(r=>H_(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(r=>$1(r,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>F_(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(l=>{const c=th(l,!1).getAll();return new Ql(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],r=new Set;if(e.length!==0)for(const{fbase_key:l,value:c}of e)r.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(c)&&(this.notifyListeners(l,c),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!r.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(e,i){this.localCache[e]=i;const r=this.listeners[e];if(r)for(const l of Array.from(r))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Z1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}V0.type="LOCAL";const J1=V0;new Fl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s,e){return e?nr(e):(Ce(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends R0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wa(e,this._buildIdpRequest())}_linkToIdToken(e,i){return Wa(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return Wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function eR(s){return V1(s.auth,new _m(s),s.bypassAuthState)}function tR(s){const{auth:e,user:i}=s;return Ce(i,e,"internal-error"),M1(i,new _m(s),s.bypassAuthState)}async function nR(s){const{auth:e,user:i}=s;return Ce(i,e,"internal-error"),O1(i,new _m(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,i,r,l,c=!1){this.auth=e,this.resolver=r,this.user=l,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:r,postBody:l,tenantId:c,error:d,type:p}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:r,tenantId:c||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(y))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eR;case"linkViaPopup":case"linkViaRedirect":return nR;case"reauthViaPopup":case"reauthViaRedirect":return tR;default:Di(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=new Fl(2e3,1e4);async function rR(s,e,i){if(oi(s.app))return Promise.reject(ci(s,"operation-not-supported-in-this-environment"));const r=Jc(s);WA(s,e,gm);const l=P0(r,i);return new Fs(r,"signInViaPopup",e,l).executeNotNull()}class Fs extends k0{constructor(e,i,r,l,c){super(e,i,l,c),this.provider=r,this.authWindow=null,this.pollId=null,Fs.currentPopupAction&&Fs.currentPopupAction.cancel(),Fs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=ym();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iR.get())};e()}}Fs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="pendingRedirect",Ac=new Map;class aR extends k0{constructor(e,i,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,r),this.eventId=null}async execute(){let e=Ac.get(this.auth._key());if(!e){try{const r=await oR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(i){e=()=>Promise.reject(i)}Ac.set(this.auth._key(),e)}return this.bypassAuthState||Ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oR(s,e){const i=cR(e),r=uR(s);if(!await r._isAvailable())return!1;const l=await r._get(i)==="true";return await r._remove(i),l}function lR(s,e){Ac.set(s._key(),e)}function uR(s){return nr(s._redirectPersistence)}function cR(s){return Sc(sR,s.config.apiKey,s.name)}async function hR(s,e,i=!1){if(oi(s.app))return Promise.reject(Qs(s));const r=Jc(s),l=P0(r,e),d=await new aR(r,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=600*1e3;class dR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(i=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mR(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){if(e.error&&!U0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";i.onError(ci(this.auth,r))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const r=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fR&&this.cachedEventUids.clear(),this.cachedEventUids.has(G_(e))}saveEventToCache(e){this.cachedEventUids.add(G_(e)),this.lastProcessedEventTime=Date.now()}}function G_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function U0({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function mR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return U0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(s,e={}){return co(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yR=/^https?/;async function _R(s){if(s.config.emulator)return;const{authorizedDomains:e}=await pR(s);for(const i of e)try{if(vR(i))return}catch{}Di(s,"unauthorized-domain")}function vR(s){const e=Ud(),{protocol:i,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?i==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===r}if(!yR.test(i))return!1;if(gR.test(s))return r===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Fl(3e4,6e4);function Q_(){const s=wi().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let i=0;i<s.CP.length;i++)s.CP[i]=null}}function ER(s){return new Promise((e,i)=>{function r(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),i(ci(s,"network-request-failed"))},timeout:TR.get()})}if(wi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(wi().gapi?.load)r();else{const l=R1("iframefcb");return wi()[l]=()=>{gapi.load?r():i(ci(s,"network-request-failed"))},S1(`${A1()}?onload=${l}`).catch(c=>i(c))}}).catch(e=>{throw Rc=null,e})}let Rc=null;function bR(s){return Rc=Rc||ER(s),Rc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new Fl(5e3,15e3),AR="__/auth/iframe",RR="emulator/auth/iframe",wR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CR(s){const e=s.config;Ce(e.authDomain,s,"auth-domain-config-required");const i=e.emulator?hm(e,RR):`https://${s.config.authDomain}/${AR}`,r={apiKey:e.apiKey,appName:s.name,v:uo},l=IR.get(s.config.apiHost);l&&(r.eid=l);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${i}?${Hl(r).slice(1)}`}async function NR(s){const e=await bR(s),i=wi().gapi;return Ce(i,s,"internal-error"),e.open({where:document.body,url:CR(s),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wR,dontclear:!0},r=>new Promise(async(l,c)=>{await r.restyle({setHideOnLeave:!1});const d=ci(s,"network-request-failed"),p=wi().setTimeout(()=>{c(d)},SR.get());function y(){wi().clearTimeout(p),l(r)}r.ping(y).then(y,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DR=500,OR=600,MR="_blank",VR="http://localhost";class K_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(s,e,i,r=DR,l=OR){const c=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let p="";const y={...xR,width:r.toString(),height:l.toString(),top:c,left:d},g=mn().toLowerCase();i&&(p=y0(g)?MR:i),p0(g)&&(e=e||VR,y.scrollbars="yes");const b=Object.entries(y).reduce((M,[B,Q])=>`${M}${B}=${Q},`,"");if(p1(g)&&p!=="_self")return kR(e||"",p),new K_(null);const R=window.open(e||"",p,b);Ce(R,s,"popup-blocked");try{R.focus()}catch{}return new K_(R)}function kR(s,e){const i=document.createElement("a");i.href=s,i.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="__/auth/handler",jR="emulator/auth/handler",LR=encodeURIComponent("fac");async function Y_(s,e,i,r,l,c){Ce(s.config.authDomain,s,"auth-domain-config-required"),Ce(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:i,redirectUrl:r,v:uo,eventId:l};if(e instanceof gm){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",kS(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[b,R]of Object.entries({}))d[b]=R}if(e instanceof Gl){const b=e.getScopes().filter(R=>R!=="");b.length>0&&(d.scopes=b.join(","))}s.tenantId&&(d.tid=s.tenantId);const p=d;for(const b of Object.keys(p))p[b]===void 0&&delete p[b];const y=await s._getAppCheckToken(),g=y?`#${LR}=${encodeURIComponent(y)}`:"";return`${zR(s)}?${Hl(p).slice(1)}${g}`}function zR({config:s}){return s.emulator?hm(s,jR):`https://${s.authDomain}/${UR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="webStorageSupport";class qR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x0,this._completeRedirectFn=hR,this._overrideRedirectResult=lR}async _openPopup(e,i,r,l){sr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await Y_(e,i,r,Ud(),l);return PR(e,c,ym())}async _openRedirect(e,i,r,l){await this._originValidation(e);const c=await Y_(e,i,r,Ud(),l);return F1(c),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:l,promise:c}=this.eventManagers[i];return l?Promise.resolve(l):(sr(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[i]={promise:r},r.catch(()=>{delete this.eventManagers[i]}),r}async initAndGetManager(e){const i=await NR(e),r=new dR(e);return i.register("authEvent",l=>(Ce(l?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=i,r}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(Rd,{type:Rd},l=>{const c=l?.[0]?.[Rd];c!==void 0&&i(!!c),Di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=_R(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return b0()||g0()||mm()}}const BR=qR;var X_="@firebase/auth",$_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GR(s){eo(new Xs("auth",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),l=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:p}=r.options;Ce(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:p,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:S0(s)},g=new E1(r,l,c,y);return I1(g,i),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,r)=>{e.getProvider("auth-internal").initialize()})),eo(new Xs("auth-internal",e=>{const i=Jc(e.getProvider("auth").getImmediate());return(r=>new HR(r))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(X_,$_,FR(s)),Xr(X_,$_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=300,KR=Jv("authIdTokenMaxAge")||QR;let Z_=null;const YR=s=>async e=>{const i=e&&await e.getIdTokenResult(),r=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(r&&r>KR)return;const l=i?.token;Z_!==l&&(Z_=l,await fetch(s,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function XR(s=s0()){const e=lm(s,"auth");if(e.isInitialized())return e.getImmediate();const i=w1(s,{popupRedirectResolver:BR,persistence:[J1,q1,x0]}),r=Jv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=YR(c.toString());k1(i,d,()=>d(i.currentUser)),P1(i,p=>d(p))}}const l=Zv("auth");return l&&C1(i,`http://${l}`),i}function $R(){return document.getElementsByTagName("head")?.[0]??document}b1({loadJS(s){return new Promise((e,i)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=l=>{const c=ci("internal-error");c.customData=l,i(c)},r.type="text/javascript",r.charset="UTF-8",$R().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GR("Browser");var W_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $r,j0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function w(){}w.prototype=A.prototype,I.F=A.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(V,x,P){for(var C=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)C[Je-2]=arguments[Je];return A.prototype[x].apply(V,C)}}function i(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,i),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,A,w){w||(w=0);const V=Array(16);if(typeof A=="string")for(var x=0;x<16;++x)V[x]=A.charCodeAt(w++)|A.charCodeAt(w++)<<8|A.charCodeAt(w++)<<16|A.charCodeAt(w++)<<24;else for(x=0;x<16;++x)V[x]=A[w++]|A[w++]<<8|A[w++]<<16|A[w++]<<24;A=I.g[0],w=I.g[1],x=I.g[2];let P=I.g[3],C;C=A+(P^w&(x^P))+V[0]+3614090360&4294967295,A=w+(C<<7&4294967295|C>>>25),C=P+(x^A&(w^x))+V[1]+3905402710&4294967295,P=A+(C<<12&4294967295|C>>>20),C=x+(w^P&(A^w))+V[2]+606105819&4294967295,x=P+(C<<17&4294967295|C>>>15),C=w+(A^x&(P^A))+V[3]+3250441966&4294967295,w=x+(C<<22&4294967295|C>>>10),C=A+(P^w&(x^P))+V[4]+4118548399&4294967295,A=w+(C<<7&4294967295|C>>>25),C=P+(x^A&(w^x))+V[5]+1200080426&4294967295,P=A+(C<<12&4294967295|C>>>20),C=x+(w^P&(A^w))+V[6]+2821735955&4294967295,x=P+(C<<17&4294967295|C>>>15),C=w+(A^x&(P^A))+V[7]+4249261313&4294967295,w=x+(C<<22&4294967295|C>>>10),C=A+(P^w&(x^P))+V[8]+1770035416&4294967295,A=w+(C<<7&4294967295|C>>>25),C=P+(x^A&(w^x))+V[9]+2336552879&4294967295,P=A+(C<<12&4294967295|C>>>20),C=x+(w^P&(A^w))+V[10]+4294925233&4294967295,x=P+(C<<17&4294967295|C>>>15),C=w+(A^x&(P^A))+V[11]+2304563134&4294967295,w=x+(C<<22&4294967295|C>>>10),C=A+(P^w&(x^P))+V[12]+1804603682&4294967295,A=w+(C<<7&4294967295|C>>>25),C=P+(x^A&(w^x))+V[13]+4254626195&4294967295,P=A+(C<<12&4294967295|C>>>20),C=x+(w^P&(A^w))+V[14]+2792965006&4294967295,x=P+(C<<17&4294967295|C>>>15),C=w+(A^x&(P^A))+V[15]+1236535329&4294967295,w=x+(C<<22&4294967295|C>>>10),C=A+(x^P&(w^x))+V[1]+4129170786&4294967295,A=w+(C<<5&4294967295|C>>>27),C=P+(w^x&(A^w))+V[6]+3225465664&4294967295,P=A+(C<<9&4294967295|C>>>23),C=x+(A^w&(P^A))+V[11]+643717713&4294967295,x=P+(C<<14&4294967295|C>>>18),C=w+(P^A&(x^P))+V[0]+3921069994&4294967295,w=x+(C<<20&4294967295|C>>>12),C=A+(x^P&(w^x))+V[5]+3593408605&4294967295,A=w+(C<<5&4294967295|C>>>27),C=P+(w^x&(A^w))+V[10]+38016083&4294967295,P=A+(C<<9&4294967295|C>>>23),C=x+(A^w&(P^A))+V[15]+3634488961&4294967295,x=P+(C<<14&4294967295|C>>>18),C=w+(P^A&(x^P))+V[4]+3889429448&4294967295,w=x+(C<<20&4294967295|C>>>12),C=A+(x^P&(w^x))+V[9]+568446438&4294967295,A=w+(C<<5&4294967295|C>>>27),C=P+(w^x&(A^w))+V[14]+3275163606&4294967295,P=A+(C<<9&4294967295|C>>>23),C=x+(A^w&(P^A))+V[3]+4107603335&4294967295,x=P+(C<<14&4294967295|C>>>18),C=w+(P^A&(x^P))+V[8]+1163531501&4294967295,w=x+(C<<20&4294967295|C>>>12),C=A+(x^P&(w^x))+V[13]+2850285829&4294967295,A=w+(C<<5&4294967295|C>>>27),C=P+(w^x&(A^w))+V[2]+4243563512&4294967295,P=A+(C<<9&4294967295|C>>>23),C=x+(A^w&(P^A))+V[7]+1735328473&4294967295,x=P+(C<<14&4294967295|C>>>18),C=w+(P^A&(x^P))+V[12]+2368359562&4294967295,w=x+(C<<20&4294967295|C>>>12),C=A+(w^x^P)+V[5]+4294588738&4294967295,A=w+(C<<4&4294967295|C>>>28),C=P+(A^w^x)+V[8]+2272392833&4294967295,P=A+(C<<11&4294967295|C>>>21),C=x+(P^A^w)+V[11]+1839030562&4294967295,x=P+(C<<16&4294967295|C>>>16),C=w+(x^P^A)+V[14]+4259657740&4294967295,w=x+(C<<23&4294967295|C>>>9),C=A+(w^x^P)+V[1]+2763975236&4294967295,A=w+(C<<4&4294967295|C>>>28),C=P+(A^w^x)+V[4]+1272893353&4294967295,P=A+(C<<11&4294967295|C>>>21),C=x+(P^A^w)+V[7]+4139469664&4294967295,x=P+(C<<16&4294967295|C>>>16),C=w+(x^P^A)+V[10]+3200236656&4294967295,w=x+(C<<23&4294967295|C>>>9),C=A+(w^x^P)+V[13]+681279174&4294967295,A=w+(C<<4&4294967295|C>>>28),C=P+(A^w^x)+V[0]+3936430074&4294967295,P=A+(C<<11&4294967295|C>>>21),C=x+(P^A^w)+V[3]+3572445317&4294967295,x=P+(C<<16&4294967295|C>>>16),C=w+(x^P^A)+V[6]+76029189&4294967295,w=x+(C<<23&4294967295|C>>>9),C=A+(w^x^P)+V[9]+3654602809&4294967295,A=w+(C<<4&4294967295|C>>>28),C=P+(A^w^x)+V[12]+3873151461&4294967295,P=A+(C<<11&4294967295|C>>>21),C=x+(P^A^w)+V[15]+530742520&4294967295,x=P+(C<<16&4294967295|C>>>16),C=w+(x^P^A)+V[2]+3299628645&4294967295,w=x+(C<<23&4294967295|C>>>9),C=A+(x^(w|~P))+V[0]+4096336452&4294967295,A=w+(C<<6&4294967295|C>>>26),C=P+(w^(A|~x))+V[7]+1126891415&4294967295,P=A+(C<<10&4294967295|C>>>22),C=x+(A^(P|~w))+V[14]+2878612391&4294967295,x=P+(C<<15&4294967295|C>>>17),C=w+(P^(x|~A))+V[5]+4237533241&4294967295,w=x+(C<<21&4294967295|C>>>11),C=A+(x^(w|~P))+V[12]+1700485571&4294967295,A=w+(C<<6&4294967295|C>>>26),C=P+(w^(A|~x))+V[3]+2399980690&4294967295,P=A+(C<<10&4294967295|C>>>22),C=x+(A^(P|~w))+V[10]+4293915773&4294967295,x=P+(C<<15&4294967295|C>>>17),C=w+(P^(x|~A))+V[1]+2240044497&4294967295,w=x+(C<<21&4294967295|C>>>11),C=A+(x^(w|~P))+V[8]+1873313359&4294967295,A=w+(C<<6&4294967295|C>>>26),C=P+(w^(A|~x))+V[15]+4264355552&4294967295,P=A+(C<<10&4294967295|C>>>22),C=x+(A^(P|~w))+V[6]+2734768916&4294967295,x=P+(C<<15&4294967295|C>>>17),C=w+(P^(x|~A))+V[13]+1309151649&4294967295,w=x+(C<<21&4294967295|C>>>11),C=A+(x^(w|~P))+V[4]+4149444226&4294967295,A=w+(C<<6&4294967295|C>>>26),C=P+(w^(A|~x))+V[11]+3174756917&4294967295,P=A+(C<<10&4294967295|C>>>22),C=x+(A^(P|~w))+V[2]+718787259&4294967295,x=P+(C<<15&4294967295|C>>>17),C=w+(P^(x|~A))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+P&4294967295}r.prototype.v=function(I,A){A===void 0&&(A=I.length);const w=A-this.blockSize,V=this.C;let x=this.h,P=0;for(;P<A;){if(x==0)for(;P<=w;)l(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<A;)if(V[x++]=I.charCodeAt(P++),x==this.blockSize){l(this,V),x=0;break}}else for(;P<A;)if(V[x++]=I[P++],x==this.blockSize){l(this,V),x=0;break}}this.h=x,this.o+=A},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,w=0;w<4;++w)for(let V=0;V<32;V+=8)I[A++]=this.g[w]>>>V&255;return I};function c(I,A){var w=p;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=A(I)}function d(I,A){this.h=A;const w=[];let V=!0;for(let x=I.length-1;x>=0;x--){const P=I[x]|0;V&&P==A||(w[x]=P,V=!1)}this.g=w}var p={};function y(I){return-128<=I&&I<128?c(I,function(A){return new d([A|0],A<0?-1:0)}):new d([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return R;if(I<0)return X(g(-I));const A=[];let w=1;for(let V=0;I>=w;V++)A[V]=I/w|0,w*=4294967296;return new d(A,0)}function b(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return X(b(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=g(Math.pow(A,8));let V=R;for(let P=0;P<I.length;P+=8){var x=Math.min(8,I.length-P);const C=parseInt(I.substring(P,P+x),A);x<8?(x=g(Math.pow(A,x)),V=V.j(x).add(g(C))):(V=V.j(w),V=V.add(g(C)))}return V}var R=y(0),M=y(1),B=y(16777216);s=d.prototype,s.m=function(){if(ee(this))return-X(this).m();let I=0,A=1;for(let w=0;w<this.g.length;w++){const V=this.i(w);I+=(V>=0?V:4294967296+V)*A,A*=4294967296}return I},s.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(Q(this))return"0";if(ee(this))return"-"+X(this).toString(I);const A=g(Math.pow(I,6));var w=this;let V="";for(;;){const x=Ne(w,A).g;w=F(w,x.j(A));let P=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=x,Q(w))return P+V;for(;P.length<6;)P="0"+P;V=P+V}},s.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function Q(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function ee(I){return I.h==-1}s.l=function(I){return I=F(this,I),ee(I)?-1:Q(I)?0:1};function X(I){const A=I.g.length,w=[];for(let V=0;V<A;V++)w[V]=~I.g[V];return new d(w,~I.h).add(M)}s.abs=function(){return ee(this)?X(this):this},s.add=function(I){const A=Math.max(this.g.length,I.g.length),w=[];let V=0;for(let x=0;x<=A;x++){let P=V+(this.i(x)&65535)+(I.i(x)&65535),C=(P>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);V=C>>>16,P&=65535,C&=65535,w[x]=C<<16|P}return new d(w,w[w.length-1]&-2147483648?-1:0)};function F(I,A){return I.add(X(A))}s.j=function(I){if(Q(this)||Q(I))return R;if(ee(this))return ee(I)?X(this).j(X(I)):X(X(this).j(I));if(ee(I))return X(this.j(X(I)));if(this.l(B)<0&&I.l(B)<0)return g(this.m()*I.m());const A=this.g.length+I.g.length,w=[];for(var V=0;V<2*A;V++)w[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<I.g.length;x++){const P=this.i(V)>>>16,C=this.i(V)&65535,Je=I.i(x)>>>16,$e=I.i(x)&65535;w[2*V+2*x]+=C*$e,fe(w,2*V+2*x),w[2*V+2*x+1]+=P*$e,fe(w,2*V+2*x+1),w[2*V+2*x+1]+=C*Je,fe(w,2*V+2*x+1),w[2*V+2*x+2]+=P*Je,fe(w,2*V+2*x+2)}for(I=0;I<A;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=A;I<2*A;I++)w[I]=0;return new d(w,0)};function fe(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function he(I,A){this.g=I,this.h=A}function Ne(I,A){if(Q(A))throw Error("division by zero");if(Q(I))return new he(R,R);if(ee(I))return A=Ne(X(I),A),new he(X(A.g),X(A.h));if(ee(A))return A=Ne(I,X(A)),new he(X(A.g),A.h);if(I.g.length>30){if(ee(I)||ee(A))throw Error("slowDivide_ only works with positive integers.");for(var w=M,V=A;V.l(I)<=0;)w=ae(w),V=ae(V);var x=ie(w,1),P=ie(V,1);for(V=ie(V,2),w=ie(w,2);!Q(V);){var C=P.add(V);C.l(I)<=0&&(x=x.add(w),P=C),V=ie(V,1),w=ie(w,1)}return A=F(I,x.j(A)),new he(x,A)}for(x=R;I.l(A)>=0;){for(w=Math.max(1,Math.floor(I.m()/A.m())),V=Math.ceil(Math.log(w)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),P=g(w),C=P.j(A);ee(C)||C.l(I)>0;)w-=V,P=g(w),C=P.j(A);Q(P)&&(P=M),x=x.add(P),I=F(I,C)}return new he(x,I)}s.B=function(I){return Ne(this,I).h},s.and=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let V=0;V<A;V++)w[V]=this.i(V)&I.i(V);return new d(w,this.h&I.h)},s.or=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let V=0;V<A;V++)w[V]=this.i(V)|I.i(V);return new d(w,this.h|I.h)},s.xor=function(I){const A=Math.max(this.g.length,I.g.length),w=[];for(let V=0;V<A;V++)w[V]=this.i(V)^I.i(V);return new d(w,this.h^I.h)};function ae(I){const A=I.g.length+1,w=[];for(let V=0;V<A;V++)w[V]=I.i(V)<<1|I.i(V-1)>>>31;return new d(w,I.h)}function ie(I,A){const w=A>>5;A%=32;const V=I.g.length-w,x=[];for(let P=0;P<V;P++)x[P]=A>0?I.i(P+w)>>>A|I.i(P+w+1)<<32-A:I.i(P+w);return new d(x,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,j0=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=g,d.fromString=b,$r=d}).apply(typeof W_<"u"?W_:typeof self<"u"?self:typeof window<"u"?window:{});var pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L0,Tl,z0,wc,zd,q0,B0,H0;(function(){var s,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof pc=="object"&&pc];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=i(this);function l(u,m){if(m)e:{var _=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var j=u[S];if(!(j in _))break e;_=_[j]}u=u[u.length-1],S=_[u],m=m(S),m!=S&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(m){var _=[],S;for(S in m)Object.prototype.hasOwnProperty.call(m,S)&&_.push([S,m[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function y(u,m,_){return u.call.apply(u.bind,arguments)}function g(u,m,_){return g=y,g.apply(null,arguments)}function b(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function R(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,j,H){for(var le=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)le[Oe-2]=arguments[Oe];return m.prototype[j].apply(S,le)}}var M=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function B(u){const m=u.length;if(m>0){const _=Array(m);for(let S=0;S<m;S++)_[S]=u[S];return _}return[]}function Q(u,m){for(let S=1;S<arguments.length;S++){const j=arguments[S];var _=typeof j;if(_=_!="object"?_:j?Array.isArray(j)?"array":_:"null",_=="array"||_=="object"&&typeof j.length=="number"){_=u.length||0;const H=j.length||0;u.length=_+H;for(let le=0;le<H;le++)u[_+le]=j[le]}else u.push(j)}}class ee{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function X(u){d.setTimeout(()=>{throw u},0)}function F(){var u=I;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class fe{constructor(){this.h=this.g=null}add(m,_){const S=he.get();S.set(m,_),this.h?this.h.next=S:this.g=S,this.h=S}}var he=new ee(()=>new Ne,u=>u.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ie=!1,I=new fe,A=()=>{const u=Promise.resolve(void 0);ae=()=>{u.then(w)}};function w(){for(var u;u=F();){try{u.h.call(u.g)}catch(_){X(_)}var m=he;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ie=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Je(u,m){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}R(Je,x),Je.prototype.init=function(u,m){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Je.Z.h.call(this)},Je.prototype.h=function(){Je.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),G=0;function ue(u,m,_,S,j){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!S,this.ha=j,this.key=++G,this.da=this.fa=!1}function ve(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Le(u,m,_){for(const S in u)m.call(_,u[S],S,u)}function D(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function W(u){const m={};for(const _ in u)m[_]=u[_];return m}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(u,m){let _,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(_ in S)u[_]=S[_];for(let H=0;H<ce.length;H++)_=ce[H],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function de(u){this.src=u,this.g={},this.h=0}de.prototype.add=function(u,m,_,S,j){const H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);const le=se(u,m,S,j);return le>-1?(m=u[le],_||(m.fa=!1)):(m=new ue(m,this.src,H,!!S,j),m.fa=_,u.push(m)),m};function ne(u,m){const _=m.type;if(_ in u.g){var S=u.g[_],j=Array.prototype.indexOf.call(S,m,void 0),H;(H=j>=0)&&Array.prototype.splice.call(S,j,1),H&&(ve(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function se(u,m,_,S){for(let j=0;j<u.length;++j){const H=u[j];if(!H.da&&H.listener==m&&H.capture==!!_&&H.ha==S)return j}return-1}var ge="closure_lm_"+(Math.random()*1e6|0),me={};function Ye(u,m,_,S,j){if(Array.isArray(m)){for(let H=0;H<m.length;H++)Ye(u,m[H],_,S,j);return null}return _=ra(_),u&&u[$e]?u.J(m,_,p(S)?!!S.capture:!1,j):ht(u,m,_,!1,S,j)}function ht(u,m,_,S,j,H){if(!m)throw Error("Invalid event type");const le=p(j)?!!j.capture:!!j;let Oe=ur(u);if(Oe||(u[ge]=Oe=new de(u)),_=Oe.add(m,_,S,le,H),_.proxy)return _;if(S=Zt(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)P||(j=le),j===void 0&&(j=!1),u.addEventListener(m.toString(),S,j);else if(u.attachEvent)u.attachEvent(Vi(m.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Zt(){function u(_){return m.call(u.src,u.listener,_)}const m=ia;return u}function on(u,m,_,S,j){if(Array.isArray(m))for(var H=0;H<m.length;H++)on(u,m[H],_,S,j);else S=p(S)?!!S.capture:!!S,_=ra(_),u&&u[$e]?(u=u.i,H=String(m).toString(),H in u.g&&(m=u.g[H],_=se(m,_,S,j),_>-1&&(ve(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[H],u.h--)))):u&&(u=ur(u))&&(m=u.g[m.toString()],u=-1,m&&(u=se(m,_,S,j)),(_=u>-1?m[u]:null)&&ft(_))}function ft(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[$e])ne(m.i,u);else{var _=u.type,S=u.proxy;m.removeEventListener?m.removeEventListener(_,S,u.capture):m.detachEvent?m.detachEvent(Vi(_),S):m.addListener&&m.removeListener&&m.removeListener(S),(_=ur(m))?(ne(_,u),_.h==0&&(_.src=null,m[ge]=null)):ve(u)}}}function Vi(u){return u in me?me[u]:me[u]="on"+u}function ia(u,m){if(u.da)u=!0;else{m=new Je(m,this);const _=u.listener,S=u.ha||u.src;u.fa&&ft(u),u=_.call(S,m)}return u}function ur(u){return u=u[ge],u instanceof de?u:null}var Wt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ra(u){return typeof u=="function"?u:(u[Wt]||(u[Wt]=function(m){return u.handleEvent(m)}),u[Wt])}function At(){V.call(this),this.i=new de(this),this.M=this,this.G=null}R(At,V),At.prototype[$e]=!0,At.prototype.removeEventListener=function(u,m,_,S){on(this,u,m,_,S)};function Rt(u,m){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=m.type||m,typeof m=="string")m=new x(m,u);else if(m instanceof x)m.target=m.target||u;else{var j=m;m=new x(S,u),oe(m,j)}j=!0;let H,le;if(_)for(le=_.length-1;le>=0;le--)H=m.g=_[le],j=Vn(H,S,!0,m)&&j;if(H=m.g=u,j=Vn(H,S,!0,m)&&j,j=Vn(H,S,!1,m)&&j,_)for(le=0;le<_.length;le++)H=m.g=_[le],j=Vn(H,S,!1,m)&&j}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let S=0;S<_.length;S++)ve(_[S]);delete u.g[m],u.h--}}this.G=null},At.prototype.J=function(u,m,_,S){return this.i.add(String(u),m,!1,_,S)},At.prototype.K=function(u,m,_,S){return this.i.add(String(u),m,!0,_,S)};function Vn(u,m,_,S){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let j=!0;for(let H=0;H<m.length;++H){const le=m[H];if(le&&!le.da&&le.capture==_){const Oe=le.listener,dt=le.ha||le.src;le.fa&&ne(u.i,le),j=Oe.call(dt,S)!==!1&&j}}return j&&!S.defaultPrevented}function go(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:d.setTimeout(u,m||0)}function rs(u){u.g=go(()=>{u.g=null,u.i&&(u.i=!1,rs(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class yo extends V{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:rs(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pi(u){V.call(this),this.h=u,this.g={}}R(Pi,V);var hi=[];function Bt(u){Le(u.g,function(m,_){this.g.hasOwnProperty(_)&&ft(m)},u),u.g={}}Pi.prototype.N=function(){Pi.Z.N.call(this),Bt(this)},Pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=d.JSON.stringify,te=d.JSON.parse,pe=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Pe(){}function Ge(){}var xe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pt(){x.call(this,"d")}R(Pt,x);function Tn(){x.call(this,"c")}R(Tn,x);var Ht={},Yn=null;function Xn(){return Yn=Yn||new At}Ht.Ia="serverreachability";function ss(u){x.call(this,Ht.Ia,u)}R(ss,x);function $n(u){const m=Xn();Rt(m,new ss(m))}Ht.STAT_EVENT="statevent";function cr(u,m){x.call(this,Ht.STAT_EVENT,u),this.stat=m}R(cr,x);function gt(u){const m=Xn();Rt(m,new cr(m,u))}Ht.Ja="timingevent";function sa(u,m){x.call(this,Ht.Ja,u),this.size=m}R(sa,x);function fi(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function Zn(){this.g=!0}Zn.prototype.ua=function(){this.g=!1};function as(u,m,_,S,j,H){u.info(function(){if(u.g)if(H){var le="",Oe=H.split("&");for(let et=0;et<Oe.length;et++){var dt=Oe[et].split("=");if(dt.length>1){const It=dt[0];dt=dt[1];const wn=It.split("_");le=wn.length>=2&&wn[1]=="type"?le+(It+"="+dt+"&"):le+(It+"=redacted&")}}}else le=null;else le=H;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+m+`
`+_+`
`+le})}function os(u,m,_,S,j,H,le){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+m+`
`+_+`
`+H+" "+le})}function ke(u,m,_,S){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ft(u,_)+(S?" "+S:"")})}function kt(u,m){u.info(function(){return"TIMEOUT: "+m})}Zn.prototype.info=function(){};function Ft(u,m){if(!u.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(u=0;u<H.length;u++)if(Array.isArray(H[u])){var _=H[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var j=S[0];if(j!="noop"&&j!="stop"&&j!="close")for(let le=1;le<S.length;le++)S[le]=""}}}}return vn(H)}catch{return m}}var ot={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Et={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Rn;function ls(){}R(ls,Pe),ls.prototype.g=function(){return new XMLHttpRequest},Rn=new ls;function us(u){return encodeURIComponent(String(u))}function mh(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function Wn(u,m,_,S){this.j=u,this.i=m,this.l=_,this.S=S||1,this.V=new Pi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}var aa={},di={};function mi(u,m,_){u.M=1,u.A=Ui(yt(m)),u.u=_,u.R=!0,fr(u,null)}function fr(u,m){u.F=Date.now(),cs(u),u.B=yt(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),tu(_.i,"t",S),u.C=0,_=u.j.L,u.h=new hr,u.g=ga(u.j,_?m:null,!u.u),u.P>0&&(u.O=new yo(g(u.Y,u,u.g),u.P)),m=u.V,_=u.g,S=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(hi[0]=j.toString()),j=hi);for(let H=0;H<j.length;H++){const le=Ye(_,j[H],S||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=u.J?W(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),$n(),as(u.i,u.v,u.B,u.l,u.S,u.u)}Wn.prototype.ba=function(u){u=u.target;const m=this.O;m&&ln(u)==3?m.j():this.Y(u)},Wn.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=ln(this.g),dt=this.g.ya(),et=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Es(this.g)))){this.K||Oe!=4||dt==7||(dt==8||et<=0?$n(3):$n(2)),gi(this);var m=this.g.ca();this.X=m;var _=dr(this);if(this.o=m==200,os(this.i,this.v,this.B,this.l,this.S,Oe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var S,j=this.g;if((S=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(S)){var H=S;break t}}H=null}if(u=H)ke(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,oa(this,u);else{this.o=!1,this.m=3,gt(12),yi(this),hs(this);break e}}if(this.R){u=!0;let It;for(;!this.K&&this.C<_.length;)if(It=Wl(this,_),It==di){Oe==4&&(this.m=4,gt(14),u=!1),ke(this.i,this.l,null,"[Incomplete Response]");break}else if(It==aa){this.m=4,gt(15),ke(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else ke(this.i,this.l,It,null),oa(this,It);if(wt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||_.length!=0||this.h.h||(this.m=1,gt(16),u=!1),this.o=this.o&&u,!u)ke(this.i,this.l,_,"[Invalid Chunked Response]"),yi(this),hs(this);else if(_.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Io(le),le.P=!0,gt(11))}}else ke(this.i,this.l,_,null),oa(this,_);Oe==4&&yi(this),this.o&&!this.K&&(Oe==4?Co(this.j,this):(this.o=!1,cs(this)))}else bs(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),yi(this),hs(this)}}}catch{}finally{}};function dr(u){if(!wt(u))return u.g.la();const m=Es(u.g);if(m==="")return"";let _="";const S=m.length,j=ln(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yi(u),hs(u),"";u.h.i=new d.TextDecoder}for(let H=0;H<S;H++)u.h.h=!0,_+=u.h.i.decode(m[H],{stream:!(j&&H==S-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function wt(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Wl(u,m){var _=u.C,S=m.indexOf(`
`,_);return S==-1?di:(_=Number(m.substring(_,S)),isNaN(_)?aa:(S+=1,S+_>m.length?di:(m=m.slice(S,S+_),u.C=S+_,m)))}Wn.prototype.cancel=function(){this.K=!0,yi(this)};function cs(u){u.T=Date.now()+u.H,pi(u,u.H)}function pi(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=fi(g(u.aa,u),m)}function gi(u){u.D&&(d.clearTimeout(u.D),u.D=null)}Wn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(kt(this.i,this.B),this.M!=2&&($n(),gt(17)),yi(this),this.m=2,hs(this)):pi(this,this.T-u)};function hs(u){u.j.I==0||u.K||Co(u.j,u)}function yi(u){gi(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,Bt(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function oa(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ms(_.h,u))){if(!u.L&&ms(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(m)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)pa(_),_i(_);else break e;wo(_),gt(18)}}else _.xa=j[1],0<_.xa-_.K&&j[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=fi(g(_.Va,_),6e3));Pn(_.h)<=1&&_.ta&&(_.ta=void 0)}else zi(_,11)}else if((u.L||_.g==u)&&pa(_),!C(m))for(j=_.Ba.g.parse(m),m=0;m<j.length;m++){let et=j[m];const It=et[0];if(!(It<=_.K))if(_.K=It,et=et[1],_.I==2)if(et[0]=="c"){_.M=et[1],_.ba=et[2];const wn=et[3];wn!=null&&(_.ka=wn,_.j.info("VER="+_.ka));const vi=et[4];vi!=null&&(_.za=vi,_.j.info("SVER="+_.za));const ti=et[5];ti!=null&&typeof ti=="number"&&ti>0&&(S=1.5*ti,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const ni=u.g;if(ni){const ii=ni.g?ni.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var H=S.h;H.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(la(H,H.h),H.h=null))}if(S.G){const xo=ni.g?ni.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(S.wa=xo,it(S.J,S.G,xo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var le=u;if(S.na=cu(S,S.L?S.ba:null,S.W),le.L){ki(S.h,le);var Oe=le,dt=S.O;dt&&(Oe.H=dt),Oe.D&&(gi(Oe),cs(Oe)),S.g=le}else au(S);_.i.length>0&&ws(_)}else et[0]!="stop"&&et[0]!="close"||zi(_,7);else _.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?zi(_,7):As(_):et[0]!="noop"&&_.l&&_.l.qa(et),_.A=0)}}$n(4)}catch{}}var ph=class{constructor(u,m){this.g=u,this.map=m}};function fs(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ds(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Pn(u){return u.h?1:u.g?u.g.size:0}function ms(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function la(u,m){u.g?u.g.add(m):u.h=m}function ki(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}fs.prototype.cancel=function(){if(this.i=ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ua(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return B(u.i)}var ca=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gh(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let j,H=null;S>=0?(j=u[_].substring(0,S),H=u[_].substring(S+1)):j=u[_],m(j,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Jn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Jn?(this.l=u.l,mr(this,u.j),this.o=u.o,this.g=u.g,ps(this,u.u),this.h=u.h,pr(this,nu(u.i)),this.m=u.m):u&&(m=String(u).match(ca))?(this.l=!1,mr(this,m[1]||"",!0),this.o=gs(m[2]||""),this.g=gs(m[3]||"",!0),ps(this,m[4]),this.h=gs(m[5]||"",!0),pr(this,m[6]||"",!0),this.m=gs(m[7]||"")):(this.l=!1,this.i=new kn(null,this.l))}Jn.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Gt(m,vo,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Gt(m,vo,!0),"@"),u.push(us(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Gt(_,_.charAt(0)=="/"?gr:To,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Gt(_,eu)),u.join("")},Jn.prototype.resolve=function(u){const m=yt(this);let _=!!u.j;_?mr(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var S=u.h;if(_)ps(m,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var j=m.h.lastIndexOf("/");j!=-1&&(S=m.h.slice(0,j+1)+S)}if(j=S,j==".."||j==".")S="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){S=j.lastIndexOf("/",0)==0,j=j.split("/");const H=[];for(let le=0;le<j.length;){const Oe=j[le++];Oe=="."?S&&le==j.length&&H.push(""):Oe==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&le==j.length&&H.push("")):(H.push(Oe),S=!0)}S=H.join("/")}else S=j}return _?m.h=S:_=u.i.toString()!=="",_?pr(m,nu(u.i)):_=!!u.m,_&&(m.m=u.m),m};function yt(u){return new Jn(u)}function mr(u,m,_){u.j=_?gs(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ps(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function pr(u,m,_){m instanceof kn?(u.i=m,So(u.i,u.l)):(_||(m=Gt(m,Jl)),u.i=new kn(m,u.l))}function it(u,m,_){u.i.set(m,_)}function Ui(u){return it(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function gs(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gt(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,_o),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function _o(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vo=/[#\/\?@]/g,To=/[#\?:]/g,gr=/[#\?]/g,Jl=/[#\?@]/g,eu=/#/g;function kn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function ji(u){u.g||(u.g=new Map,u.h=0,u.i&&gh(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}s=kn.prototype,s.add=function(u,m){ji(this),this.i=null,u=ei(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Eo(u,m){ji(u),m=ei(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function bo(u,m){return ji(u),m=ei(u,m),u.g.has(m)}s.forEach=function(u,m){ji(this),this.g.forEach(function(_,S){_.forEach(function(j){u.call(m,j,S,this)},this)},this)};function ha(u,m){ji(u);let _=[];if(typeof m=="string")bo(u,m)&&(_=_.concat(u.g.get(ei(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}s.set=function(u,m){return ji(this),this.i=null,u=ei(this,u),bo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=ha(this,u),u.length>0?String(u[0]):m):m};function tu(u,m,_){Eo(u,m),_.length>0&&(u.i=null,u.g.set(ei(u,m),B(_)),u.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let S=0;S<m.length;S++){var _=m[S];const j=us(_);_=ha(this,_);for(let H=0;H<_.length;H++){let le=j;_[H]!==""&&(le+="="+us(_[H])),u.push(le)}}return this.i=u.join("&")};function nu(u){const m=new kn;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function ei(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function So(u,m){m&&!u.j&&(ji(u),u.i=null,u.g.forEach(function(_,S){const j=S.toLowerCase();S!=j&&(Eo(this,S),tu(this,j,_))},u)),u.j=m}function Ao(u,m){const _=new Zn;if(d.Image){const S=new Image;S.onload=b(pn,_,"TestLoadImage: loaded",!0,m,S),S.onerror=b(pn,_,"TestLoadImage: error",!1,m,S),S.onabort=b(pn,_,"TestLoadImage: abort",!1,m,S),S.ontimeout=b(pn,_,"TestLoadImage: timeout",!1,m,S),d.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else m(!1)}function yr(u,m){const _=new Zn,S=new AbortController,j=setTimeout(()=>{S.abort(),pn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:S.signal}).then(H=>{clearTimeout(j),H.ok?pn(_,"TestPingServer: ok",!0,m):pn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),pn(_,"TestPingServer: error",!1,m)})}function pn(u,m,_,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(_)}catch{}}function iu(){this.g=new pe}function ys(u){this.i=u.Sb||null,this.h=u.ab||!1}R(ys,Pe),ys.prototype.g=function(){return new _s(this.i,this.h)};function _s(u,m){At.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}R(_s,At),s=_s.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Li(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||d).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},s.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_r(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function _r(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}s.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?gn(this):Li(this),this.readyState==3&&_r(this)}},s.Oa=function(u){this.g&&(this.response=this.responseText=u,gn(this))},s.Na=function(u){this.g&&(this.response=u,gn(this))},s.ga=function(){this.g&&gn(this)};function gn(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Li(u)}s.setRequestHeader=function(u,m){this.A.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Li(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vr(u){let m="";return Le(u,function(_,S){m+=S,m+=":",m+=_,m+=`\r
`}),m}function Un(u,m,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=vr(_),typeof u=="string"?_!=null&&us(_):it(u,m,_))}function ut(u){At.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}R(ut,At);var fa=/^https?$/i,ru=["POST","PUT"];s=ut.prototype,s.Fa=function(u){this.H=u},s.ea=function(u,m,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Rn.g(),this.g.onreadystatechange=M(g(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){vs(this,H);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)_.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())_.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(ru,m,void 0)>=0)||S||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,le]of _)this.g.setRequestHeader(H,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(H){vs(this,H)}};function vs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Ts(u),Ut(u)}function Ts(u){u.A||(u.A=!0,Rt(u,"complete"),Rt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Rt(this,"complete"),Rt(this,"abort"),Ut(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),ut.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ro(this):this.Xa())},s.Xa=function(){Ro(this)};function Ro(u){if(u.h&&typeof c<"u"){if(u.v&&ln(u)==4)setTimeout(u.Ca.bind(u),0);else if(Rt(u,"readystatechange"),ln(u)==4){u.h=!1;try{const H=u.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var S;if(S=H===0){let le=String(u.D).match(ca)[1]||null;!le&&d.self&&d.self.location&&(le=d.self.location.protocol.slice(0,-1)),S=!fa.test(le?le.toLowerCase():"")}_=S}if(_)Rt(u,"complete"),Rt(u,"success");else{u.o=6;try{var j=ln(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",Ts(u)}}finally{Ut(u)}}}}function Ut(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||Rt(u,"ready");try{_.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ln(u){return u.g?u.g.readyState:0}s.ca=function(){try{return ln(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),te(m)}};function Es(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bs(u){const m={};u=(u.g&&ln(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(C(u[S]))continue;var _=mh(u[S]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const H=m[j]||[];m[j]=H,H.push(_)}D(m,function(S){return S.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ss(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function da(u){this.za=0,this.i=[],this.j=new Zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ss("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ss("baseRetryDelayMs",5e3,u),this.Za=Ss("retryDelaySeedMs",1e4,u),this.Ta=Ss("forwardChannelMaxRetries",2,u),this.va=Ss("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new fs(u&&u.concurrentRequestLimit),this.Ba=new iu,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=da.prototype,s.ka=8,s.I=1,s.connect=function(u,m,_,S){gt(0),this.W=u,this.H=m||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=cu(this,null,this.W),ws(this)};function As(u){if(Rs(u),u.I==3){var m=u.V++,_=yt(u.J);if(it(_,"SID",u.M),it(_,"RID",m),it(_,"TYPE","terminate"),Is(u,_),m=new Wn(u,u.j,m),m.M=2,m.A=Ui(yt(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.A,_=!0),_||(m.g=ga(m.j,null),m.g.ea(m.A)),m.F=Date.now(),cs(m)}uu(u)}function _i(u){u.g&&(Io(u),u.g.cancel(),u.g=null)}function Rs(u){_i(u),u.v&&(d.clearTimeout(u.v),u.v=null),pa(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function ws(u){if(!ds(u.h)&&!u.m){u.m=!0;var m=u.Ea;ae||A(),ie||(ae(),ie=!0),I.add(m,u),u.D=0}}function yh(u,m){return Pn(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=fi(g(u.Ea,u,m),lu(u,u.D)),u.D++,!0)}s.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Wn(this,this.j,u);let H=this.o;if(this.U&&(H?(H=W(H),oe(H,this.U)):H=this.U),this.u!==null||this.R||(j.J=H,H=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(m+=S,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=ma(this,j,m),_=yt(this.J),it(_,"RID",u),it(_,"CVER",22),this.G&&it(_,"X-HTTP-Session-Id",this.G),Is(this,_),H&&(this.R?m="headers="+us(vr(H))+"&"+m:this.u&&Un(_,this.u,H)),la(this.h,j),this.Ra&&it(_,"TYPE","init"),this.S?(it(_,"$req",m),it(_,"SID","null"),j.U=!0,mi(j,_,null)):mi(j,_,m),this.I=2}}else this.I==3&&(u?su(this,u):this.i.length==0||ds(this.h)||su(this))};function su(u,m){var _;m?_=m.l:_=u.V++;const S=yt(u.J);it(S,"SID",u.M),it(S,"RID",_),it(S,"AID",u.K),Is(u,S),u.u&&u.o&&Un(S,u.u,u.o),_=new Wn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=ma(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),la(u.h,_),mi(_,S,m)}function Is(u,m){u.H&&Le(u.H,function(_,S){it(m,S,_)}),u.l&&Le({},function(_,S){it(m,S,_)})}function ma(u,m,_){_=Math.min(u.i.length,_);const S=u.l?g(u.l.Ka,u.l,u):null;e:{var j=u.i;let Oe=-1;for(;;){const dt=["count="+_];Oe==-1?_>0?(Oe=j[0].g,dt.push("ofs="+Oe)):Oe=0:dt.push("ofs="+Oe);let et=!0;for(let It=0;It<_;It++){var H=j[It].g;const wn=j[It].map;if(H-=Oe,H<0)Oe=Math.max(0,j[It].g-100),et=!1;else try{H="req"+H+"_"||"";try{var le=wn instanceof Map?wn:Object.entries(wn);for(const[vi,ti]of le){let ni=ti;p(ti)&&(ni=vn(ti)),dt.push(H+vi+"="+encodeURIComponent(ni))}}catch(vi){throw dt.push(H+"type="+encodeURIComponent("_badmap")),vi}}catch{S&&S(wn)}}if(et){le=dt.join("&");break e}}le=void 0}return u=u.i.splice(0,_),m.G=u,le}function au(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ae||A(),ie||(ae(),ie=!0),I.add(m,u),u.A=0}}function wo(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=fi(g(u.Da,u),lu(u,u.A)),u.A++,!0)}s.Da=function(){if(this.v=null,ou(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=fi(g(this.Wa,this),u)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),_i(this),ou(this))};function Io(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function ou(u){u.g=new Wn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=yt(u.na);it(m,"RID","rpc"),it(m,"SID",u.M),it(m,"AID",u.K),it(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&it(m,"TO",u.ia),it(m,"TYPE","xmlhttp"),Is(u,m),u.u&&u.o&&Un(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Ui(yt(m)),_.u=null,_.R=!0,fr(_,u)}s.Va=function(){this.C!=null&&(this.C=null,_i(this),wo(this),gt(19))};function pa(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Co(u,m){var _=null;if(u.g==m){pa(u),Io(u),u.g=null;var S=2}else if(ms(u.h,m))_=m.G,ki(u.h,m),S=1;else return;if(u.I!=0){if(m.o)if(S==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var j=u.D;S=Xn(),Rt(S,new sa(S,_)),ws(u)}else au(u);else if(j=m.m,j==3||j==0&&m.X>0||!(S==1&&yh(u,m)||S==2&&wo(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),j){case 1:zi(u,5);break;case 4:zi(u,10);break;case 3:zi(u,6);break;default:zi(u,2)}}}function lu(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function zi(u,m){if(u.j.info("Error code "+m),m==2){var _=g(u.bb,u),S=u.Ua;const j=!S;S=new Jn(S||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||mr(S,"https"),Ui(S),j?Ao(S.toString(),_):yr(S.toString(),_)}else gt(2);u.I=0,u.l&&u.l.pa(m),uu(u),Rs(u)}s.bb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function uu(u){if(u.I=0,u.ja=[],u.l){const m=ua(u.h);(m.length!=0||u.i.length!=0)&&(Q(u.ja,m),Q(u.ja,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.oa()}}function cu(u,m,_){var S=_ instanceof Jn?yt(_):new Jn(_);if(S.g!="")m&&(S.g=m+"."+S.g),ps(S,S.u);else{var j=d.location;S=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;const H=new Jn(null);S&&mr(H,S),m&&(H.g=m),j&&ps(H,j),_&&(H.h=_),S=H}return _=u.G,m=u.wa,_&&m&&it(S,_,m),it(S,"VER",u.ka),Is(u,S),S}function ga(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new ut(new ys({ab:_})):new ut(u.ma),m.Fa(u.L),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function hu(){}s=hu.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function ya(){}ya.prototype.g=function(u,m){return new yn(u,m)};function yn(u,m){At.call(this),this.g=new da(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!C(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Tr(this)}R(yn,At),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){As(this.g)},yn.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=vn(u),u=_);m.i.push(new ph(m.Ya++,u)),m.I==3&&ws(m)},yn.prototype.N=function(){this.g.l=null,delete this.j,As(this.g),delete this.g,yn.Z.N.call(this)};function No(u){Pt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}R(No,Pt);function fu(){Tn.call(this),this.status=1}R(fu,Tn);function Tr(u){this.g=u}R(Tr,hu),Tr.prototype.ra=function(){Rt(this.g,"a")},Tr.prototype.qa=function(u){Rt(this.g,new No(u))},Tr.prototype.pa=function(u){Rt(this.g,new fu)},Tr.prototype.oa=function(){Rt(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,H0=function(){return new ya},B0=function(){return Xn()},q0=Ht,zd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,wc=ot,Et.COMPLETE="complete",z0=Et,Ge.EventType=xe,xe.OPEN="a",xe.CLOSE="b",xe.ERROR="c",xe.MESSAGE="d",At.prototype.listen=At.prototype.J,Tl=Ge,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,L0=ut}).apply(typeof pc<"u"?pc:typeof self<"u"?self:typeof window<"u"?window:{});const J_="@firebase/firestore",ev="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=new am("@firebase/firestore");function Qa(){return Zs.logLevel}function ye(s,...e){if(Zs.logLevel<=Be.DEBUG){const i=e.map(vm);Zs.debug(`Firestore (${ho}): ${s}`,...i)}}function ar(s,...e){if(Zs.logLevel<=Be.ERROR){const i=e.map(vm);Zs.error(`Firestore (${ho}): ${s}`,...i)}}function no(s,...e){if(Zs.logLevel<=Be.WARN){const i=e.map(vm);Zs.warn(`Firestore (${ho}): ${s}`,...i)}}function vm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(s,e,i){let r="Unexpected state";typeof e=="string"?r=e:i=e,F0(s,r,i)}function F0(s,e,i){let r=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{r+=" CONTEXT: "+JSON.stringify(i)}catch{r+=" CONTEXT: "+i}throw ar(r),new Error(r)}function We(s,e,i,r){let l="Unexpected state";typeof i=="string"?l=i:r=i,s||F0(e,l,r)}function Me(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends lr{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(fn.UNAUTHENTICATED)))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class JR{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){We(this.o===void 0,42304);let r=this.i;const l=y=>this.i!==r?(r=this.i,i(y)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable((()=>l(this.currentUser)))};const d=()=>{const y=c;e.enqueueRetryable((async()=>{await y.promise,await l(this.currentUser)}))},p=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>p(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}}),0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new G0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class ew{constructor(e,i,r){this.P=e,this.T=i,this.I=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tw{constructor(e,i,r){this.P=e,this.T=i,this.I=r}getToken(){return Promise.resolve(new ew(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nw{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,oi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){We(this.o===void 0,3512);const r=c=>{c.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>r(c)))};const l=c=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>l(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?l(c):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(We(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new tv(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let r=0;r<s;r++)i[r]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const l=iw(40);for(let c=0;c<l.length;++c)r.length<20&&l[c]<i&&(r+=e.charAt(l[c]%62))}return r}}function He(s,e){return s<e?-1:s>e?1:0}function qd(s,e){const i=Math.min(s.length,e.length);for(let r=0;r<i;r++){const l=s.charAt(r),c=e.charAt(r);if(l!==c)return wd(l)===wd(c)?He(l,c):wd(l)?1:-1}return He(s.length,e.length)}const rw=55296,sw=57343;function wd(s){const e=s.charCodeAt(0);return e>=rw&&e<=sw}function io(s,e,i){return s.length===e.length&&s.every(((r,l)=>i(r,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="__name__";class Ri{constructor(e,i,r){i===void 0?i=0:i>e.length&&we(637,{offset:i,range:e.length}),r===void 0?r=e.length-i:r>e.length-i&&we(1746,{length:r,range:e.length-i}),this.segments=e,this.offset=i,this.len=r}get length(){return this.len}isEqual(e){return Ri.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ri?e.forEach((r=>{i.push(r)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,r=this.limit();i<r;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const r=Math.min(e.length,i.length);for(let l=0;l<r;l++){const c=Ri.compareSegments(e.get(l),i.get(l));if(c!==0)return c}return He(e.length,i.length)}static compareSegments(e,i){const r=Ri.isNumericId(e),l=Ri.isNumericId(i);return r&&!l?-1:!r&&l?1:r&&l?Ri.extractNumericId(e).compare(Ri.extractNumericId(i)):qd(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $r.fromString(e.substring(4,e.length-2))}}class vt extends Ri{construct(e,i,r){return new vt(e,i,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(re.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);i.push(...r.split("/").filter((l=>l.length>0)))}return new vt(i)}static emptyPath(){return new vt([])}}const aw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class sn extends Ri{construct(e,i,r){return new sn(e,i,r)}static isValidIdentifier(e){return aw.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),sn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nv}static keyField(){return new sn([nv])}static fromServerFormat(e){const i=[];let r="",l=0;const c=()=>{if(r.length===0)throw new be(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(r),r=""};let d=!1;for(;l<e.length;){const p=e[l];if(p==="\\"){if(l+1===e.length)throw new be(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new be(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,l+=2}else p==="`"?(d=!d,l++):p!=="."||d?(r+=p,l++):(c(),l++)}if(c(),d)throw new be(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new sn(i)}static emptyPath(){return new sn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(vt.fromString(e))}static fromName(e){return new Se(vt.fromString(e).popFirst(5))}static empty(){return new Se(vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&vt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return vt.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new vt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(s,e,i){if(!i)throw new be(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function lw(s,e,i,r){if(e===!0&&r===!0)throw new be(re.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function iv(s){if(!Se.isDocumentKey(s))throw new be(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function Q0(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Em(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":we(12329,{type:typeof s})}function Vl(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new be(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Em(s);throw new be(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(s,e){const i={typeString:s};return e&&(i.value=e),i}function Kl(s,e){if(!Q0(s))throw new be(re.INVALID_ARGUMENT,"JSON must be an object");let i;for(const r in e)if(e[r]){const l=e[r].typeString,c="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){i=`JSON missing required field: '${r}'`;break}const d=s[r];if(l&&typeof d!==l){i=`JSON field '${r}' must be a ${l}.`;break}if(c!==void 0&&d!==c.value){i=`Expected '${r}' field to equal '${c.value}'`;break}}if(i)throw new be(re.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv=-62135596800,sv=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),r=Math.floor((e-1e3*i)*sv);return new mt(i,r)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new be(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<rv)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/sv}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Vt("string",mt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new mt(0,0))}static max(){return new De(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=-1;function uw(s,e){const i=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,l=De.fromTimestamp(r===1e9?new mt(i+1,0):new mt(i,r));return new Wr(l,Se.empty(),e)}function cw(s){return new Wr(s.readTime,s.key,Pl)}class Wr{constructor(e,i,r){this.readTime=e,this.documentKey=i,this.largestBatchId=r}static min(){return new Wr(De.min(),Se.empty(),Pl)}static max(){return new Wr(De.max(),Se.empty(),Pl)}}function hw(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=Se.comparator(s.documentKey,e.documentKey),i!==0?i:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==fw)throw s;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new J(((r,l)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,l)},this.catchCallback=c=>{this.wrapFailure(i,c).next(r,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof J?i:J.resolve(i)}catch(i){return J.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):J.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):J.reject(i)}static resolve(e){return new J(((i,r)=>{i(e)}))}static reject(e){return new J(((i,r)=>{r(e)}))}static waitFor(e){return new J(((i,r)=>{let l=0,c=0,d=!1;e.forEach((p=>{++l,p.next((()=>{++c,d&&c===l&&i()}),(y=>r(y)))})),d=!0,c===l&&i()}))}static or(e){let i=J.resolve(!1);for(const r of e)i=i.next((l=>l?J.resolve(l):r()));return i}static forEach(e,i){const r=[];return e.forEach(((l,c)=>{r.push(i.call(this,l,c))})),this.waitFor(r)}static mapArray(e,i){return new J(((r,l)=>{const c=e.length,d=new Array(c);let p=0;for(let y=0;y<c;y++){const g=y;i(e[g]).next((b=>{d[g]=b,++p,p===c&&r(d)}),(b=>l(b)))}}))}static doWhile(e,i){return new J(((r,l)=>{const c=()=>{e()===!0?i().next((()=>{c()}),l):r()};c()}))}}function mw(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function mo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>i.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}nh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=-1;function ih(s){return s==null}function zc(s){return s===0&&1/s==-1/0}function pw(s){return typeof s=="number"&&Number.isInteger(s)&&!zc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="";function gw(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=av(e)),e=yw(s.get(i),e);return av(e)}function yw(s,e){let i=e;const r=s.length;for(let l=0;l<r;l++){const c=s.charAt(l);switch(c){case"\0":i+="";break;case K0:i+="";break;default:i+=c}}return i}function av(s){return s+K0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Js(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function Y0(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,i){this.comparator=e,this.root=i||rn.EMPTY}insert(e,i){return new Tt(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return i.value;r<0?i=i.left:r>0&&(i=i.right)}return null}indexOf(e){let i=0,r=this.root;for(;!r.isEmpty();){const l=this.comparator(e,r.key);if(l===0)return i+r.left.size;l<0?r=r.left:(i+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,r)=>(e(i,r),!1)))}toString(){const e=[];return this.inorderTraversal(((i,r)=>(e.push(`${i}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gc(this.root,e,this.comparator,!1)}getReverseIterator(){return new gc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gc(this.root,e,this.comparator,!0)}}class gc{constructor(e,i,r,l){this.isReverse=l,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=i?r(e.key,i):1,i&&l&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rn{constructor(e,i,r,l,c){this.key=e,this.value=i,this.color=r??rn.RED,this.left=l??rn.EMPTY,this.right=c??rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,r,l,c){return new rn(e??this.key,i??this.value,r??this.color,l??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let l=this;const c=r(e,l.key);return l=c<0?l.copy(null,null,null,l.left.insert(e,i,r),null):c===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,r)),l.fixUp()}removeMin(){if(this.left.isEmpty())return rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let r,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return rn.EMPTY;r=l.right.min(),l=l.copy(r.key,r.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,i,r,l,c){return this}insert(e,i,r){return new rn(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,r)=>(e(i),!1)))}forEachInRange(e,i){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const l=r.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let r;for(r=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new lv(this.data.getIterator())}getIteratorFrom(e){return new lv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((r=>{i=i.add(r)})),i}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const i=this.data.getIterator(),r=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(this.comparator(l,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new qt(this.comparator);return i.data=e,i}}class lv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.fields=e,e.sort(sn.comparator)}static empty(){return new ui([])}unionWith(e){let i=new qt(sn.comparator);for(const r of this.fields)i=i.add(r);for(const r of e)i=i.add(r);return new ui(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return io(this.fields,e.fields,((i,r)=>i.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new X0("Invalid base64 string: "+c):c}})(e);return new an(i)}static fromUint8Array(e){const i=(function(l){let c="";for(let d=0;d<l.length;++d)c+=String.fromCharCode(l[d]);return c})(e);return new an(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const r=new Uint8Array(i.length);for(let l=0;l<i.length;l++)r[l]=i.charCodeAt(l);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(s){if(We(!!s,39018),typeof s=="string"){let e=0;const i=_w.exec(s);if(We(!!i,46558,{timestamp:s}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(s.seconds),nanos:xt(s.nanos)}}function xt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function es(s){return typeof s=="string"?an.fromBase64String(s):an.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="server_timestamp",Z0="__type__",W0="__previous_value__",J0="__local_write_time__";function Sm(s){return(s?.mapValue?.fields||{})[Z0]?.stringValue===$0}function rh(s){const e=s.mapValue.fields[W0];return Sm(e)?rh(e):e}function kl(s){const e=Jr(s.mapValue.fields[J0].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,i,r,l,c,d,p,y,g,b){this.databaseId=e,this.appId=i,this.persistenceKey=r,this.host=l,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=p,this.longPollingOptions=y,this.useFetchStreams=g,this.isUsingEmulator=b}}const qc="(default)";class Ul{constructor(e,i){this.projectId=e,this.database=i||qc}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="__type__",Tw="__max__",yc={mapValue:{}},tT="__vector__",Bc="value";function ts(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Sm(s)?4:bw(s)?9007199254740991:Ew(s)?10:11:we(28295,{value:s})}function Oi(s,e){if(s===e)return!0;const i=ts(s);if(i!==ts(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return kl(s).isEqual(kl(e));case 3:return(function(l,c){if(typeof l.timestampValue=="string"&&typeof c.timestampValue=="string"&&l.timestampValue.length===c.timestampValue.length)return l.timestampValue===c.timestampValue;const d=Jr(l.timestampValue),p=Jr(c.timestampValue);return d.seconds===p.seconds&&d.nanos===p.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(l,c){return es(l.bytesValue).isEqual(es(c.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(l,c){return xt(l.geoPointValue.latitude)===xt(c.geoPointValue.latitude)&&xt(l.geoPointValue.longitude)===xt(c.geoPointValue.longitude)})(s,e);case 2:return(function(l,c){if("integerValue"in l&&"integerValue"in c)return xt(l.integerValue)===xt(c.integerValue);if("doubleValue"in l&&"doubleValue"in c){const d=xt(l.doubleValue),p=xt(c.doubleValue);return d===p?zc(d)===zc(p):isNaN(d)&&isNaN(p)}return!1})(s,e);case 9:return io(s.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(l,c){const d=l.mapValue.fields||{},p=c.mapValue.fields||{};if(ov(d)!==ov(p))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(p[y]===void 0||!Oi(d[y],p[y])))return!1;return!0})(s,e);default:return we(52216,{left:s})}}function jl(s,e){return(s.values||[]).find((i=>Oi(i,e)))!==void 0}function ro(s,e){if(s===e)return 0;const i=ts(s),r=ts(e);if(i!==r)return He(i,r);switch(i){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return(function(c,d){const p=xt(c.integerValue||c.doubleValue),y=xt(d.integerValue||d.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1})(s,e);case 3:return uv(s.timestampValue,e.timestampValue);case 4:return uv(kl(s),kl(e));case 5:return qd(s.stringValue,e.stringValue);case 6:return(function(c,d){const p=es(c),y=es(d);return p.compareTo(y)})(s.bytesValue,e.bytesValue);case 7:return(function(c,d){const p=c.split("/"),y=d.split("/");for(let g=0;g<p.length&&g<y.length;g++){const b=He(p[g],y[g]);if(b!==0)return b}return He(p.length,y.length)})(s.referenceValue,e.referenceValue);case 8:return(function(c,d){const p=He(xt(c.latitude),xt(d.latitude));return p!==0?p:He(xt(c.longitude),xt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return cv(s.arrayValue,e.arrayValue);case 10:return(function(c,d){const p=c.fields||{},y=d.fields||{},g=p[Bc]?.arrayValue,b=y[Bc]?.arrayValue,R=He(g?.values?.length||0,b?.values?.length||0);return R!==0?R:cv(g,b)})(s.mapValue,e.mapValue);case 11:return(function(c,d){if(c===yc.mapValue&&d===yc.mapValue)return 0;if(c===yc.mapValue)return 1;if(d===yc.mapValue)return-1;const p=c.fields||{},y=Object.keys(p),g=d.fields||{},b=Object.keys(g);y.sort(),b.sort();for(let R=0;R<y.length&&R<b.length;++R){const M=qd(y[R],b[R]);if(M!==0)return M;const B=ro(p[y[R]],g[b[R]]);if(B!==0)return B}return He(y.length,b.length)})(s.mapValue,e.mapValue);default:throw we(23264,{he:i})}}function uv(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const i=Jr(s),r=Jr(e),l=He(i.seconds,r.seconds);return l!==0?l:He(i.nanos,r.nanos)}function cv(s,e){const i=s.values||[],r=e.values||[];for(let l=0;l<i.length&&l<r.length;++l){const c=ro(i[l],r[l]);if(c)return c}return He(i.length,r.length)}function so(s){return Bd(s)}function Bd(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(i){const r=Jr(i);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(i){return es(i).toBase64()})(s.bytesValue):"referenceValue"in s?(function(i){return Se.fromName(i).toString()})(s.referenceValue):"geoPointValue"in s?(function(i){return`geo(${i.latitude},${i.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(i){let r="[",l=!0;for(const c of i.values||[])l?l=!1:r+=",",r+=Bd(c);return r+"]"})(s.arrayValue):"mapValue"in s?(function(i){const r=Object.keys(i.fields||{}).sort();let l="{",c=!0;for(const d of r)c?c=!1:l+=",",l+=`${d}:${Bd(i.fields[d])}`;return l+"}"})(s.mapValue):we(61005,{value:s})}function Ic(s){switch(ts(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(s);return e?16+Ic(e):16;case 5:return 2*s.stringValue.length;case 6:return es(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((l,c)=>l+Ic(c)),0)})(s.arrayValue);case 10:case 11:return(function(r){let l=0;return Js(r.fields,((c,d)=>{l+=c.length+Ic(d)})),l})(s.mapValue);default:throw we(13486,{value:s})}}function Hd(s){return!!s&&"integerValue"in s}function Am(s){return!!s&&"arrayValue"in s}function hv(s){return!!s&&"nullValue"in s}function fv(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Cc(s){return!!s&&"mapValue"in s}function Ew(s){return(s?.mapValue?.fields||{})[eT]?.stringValue===tT}function Il(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return Js(s.mapValue.fields,((i,r)=>e.mapValue.fields[i]=Il(r))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Il(s.arrayValue.values[i]);return e}return{...s}}function bw(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Tw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let r=0;r<e.length-1;++r)if(i=(i.mapValue.fields||{})[e.get(r)],!Cc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(i)}setAll(e){let i=sn.emptyPath(),r={},l=[];e.forEach(((d,p)=>{if(!i.isImmediateParentOf(p)){const y=this.getFieldsMap(i);this.applyChanges(y,r,l),r={},l=[],i=p.popLast()}d?r[p.lastSegment()]=Il(d):l.push(p.lastSegment())}));const c=this.getFieldsMap(i);this.applyChanges(c,r,l)}delete(e){const i=this.field(e.popLast());Cc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let r=0;r<e.length;++r){let l=i.mapValue.fields[e.get(r)];Cc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(r)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,r){Js(i,((l,c)=>e[l]=c));for(const l of r)delete e[l]}clone(){return new Gn(Il(this.value))}}function nT(s){const e=[];return Js(s.fields,((i,r)=>{const l=new sn([i]);if(Cc(r)){const c=nT(r.mapValue).fields;if(c.length===0)e.push(l);else for(const d of c)e.push(l.child(d))}else e.push(l)})),new ui(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,i,r,l,c,d,p){this.key=e,this.documentType=i,this.version=r,this.readTime=l,this.createTime=c,this.data=d,this.documentState=p}static newInvalidDocument(e){return new dn(e,0,De.min(),De.min(),De.min(),Gn.empty(),0)}static newFoundDocument(e,i,r,l){return new dn(e,1,i,De.min(),r,l,0)}static newNoDocument(e,i){return new dn(e,2,i,De.min(),De.min(),Gn.empty(),0)}static newUnknownDocument(e,i){return new dn(e,3,i,De.min(),De.min(),Gn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,i){this.position=e,this.inclusive=i}}function dv(s,e,i){let r=0;for(let l=0;l<s.position.length;l++){const c=e[l],d=s.position[l];if(c.field.isKeyField()?r=Se.comparator(Se.fromName(d.referenceValue),i.key):r=ro(d,i.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function mv(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!Oi(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,i="asc"){this.field=e,this.dir=i}}function Sw(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{}class zt extends iT{constructor(e,i,r){super(),this.field=e,this.op=i,this.value=r}static create(e,i,r){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,r):new Rw(e,i,r):i==="array-contains"?new Cw(e,r):i==="in"?new Nw(e,r):i==="not-in"?new xw(e,r):i==="array-contains-any"?new Dw(e,r):new zt(e,i,r)}static createKeyFieldInFilter(e,i,r){return i==="in"?new ww(e,r):new Iw(e,r)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ro(i,this.value)):i!==null&&ts(this.value)===ts(i)&&this.matchesComparison(ro(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends iT{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new Mi(e,i)}matches(e){return rT(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rT(s){return s.op==="and"}function sT(s){return Aw(s)&&rT(s)}function Aw(s){for(const e of s.filters)if(e instanceof Mi)return!1;return!0}function Fd(s){if(s instanceof zt)return s.field.canonicalString()+s.op.toString()+so(s.value);if(sT(s))return s.filters.map((e=>Fd(e))).join(",");{const e=s.filters.map((i=>Fd(i))).join(",");return`${s.op}(${e})`}}function aT(s,e){return s instanceof zt?(function(r,l){return l instanceof zt&&r.op===l.op&&r.field.isEqual(l.field)&&Oi(r.value,l.value)})(s,e):s instanceof Mi?(function(r,l){return l instanceof Mi&&r.op===l.op&&r.filters.length===l.filters.length?r.filters.reduce(((c,d,p)=>c&&aT(d,l.filters[p])),!0):!1})(s,e):void we(19439)}function oT(s){return s instanceof zt?(function(i){return`${i.field.canonicalString()} ${i.op} ${so(i.value)}`})(s):s instanceof Mi?(function(i){return i.op.toString()+" {"+i.getFilters().map(oT).join(" ,")+"}"})(s):"Filter"}class Rw extends zt{constructor(e,i,r){super(e,i,r),this.key=Se.fromName(r.referenceValue)}matches(e){const i=Se.comparator(e.key,this.key);return this.matchesComparison(i)}}class ww extends zt{constructor(e,i){super(e,"in",i),this.keys=lT("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class Iw extends zt{constructor(e,i){super(e,"not-in",i),this.keys=lT("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function lT(s,e){return(e.arrayValue?.values||[]).map((i=>Se.fromName(i.referenceValue)))}class Cw extends zt{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Am(i)&&jl(i.arrayValue,this.value)}}class Nw extends zt{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&jl(this.value.arrayValue,i)}}class xw extends zt{constructor(e,i){super(e,"not-in",i)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!jl(this.value.arrayValue,i)}}class Dw extends zt{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Am(i)||!i.arrayValue.values)&&i.arrayValue.values.some((r=>jl(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,i=null,r=[],l=[],c=null,d=null,p=null){this.path=e,this.collectionGroup=i,this.orderBy=r,this.filters=l,this.limit=c,this.startAt=d,this.endAt=p,this.Te=null}}function pv(s,e=null,i=[],r=[],l=null,c=null,d=null){return new Ow(s,e,i,r,l,c,d)}function Rm(s){const e=Me(s);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((r=>Fd(r))).join(","),i+="|ob:",i+=e.orderBy.map((r=>(function(c){return c.field.canonicalString()+c.dir})(r))).join(","),ih(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((r=>so(r))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((r=>so(r))).join(",")),e.Te=i}return e.Te}function wm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!Sw(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!aT(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!mv(s.startAt,e.startAt)&&mv(s.endAt,e.endAt)}function Gd(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,i=null,r=[],l=[],c=null,d="F",p=null,y=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=r,this.filters=l,this.limit=c,this.limitType=d,this.startAt=p,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Mw(s,e,i,r,l,c,d,p){return new sh(s,e,i,r,l,c,d,p)}function Im(s){return new sh(s)}function gv(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Vw(s){return s.collectionGroup!==null}function Cl(s){const e=Me(s);if(e.Ie===null){e.Ie=[];const i=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),i.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let p=new qt(sn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((c=>{i.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new Fc(c,r))})),i.has(sn.keyField().canonicalString())||e.Ie.push(new Fc(sn.keyField(),r))}return e.Ie}function Ii(s){const e=Me(s);return e.Ee||(e.Ee=Pw(e,Cl(s))),e.Ee}function Pw(s,e){if(s.limitType==="F")return pv(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((l=>{const c=l.dir==="desc"?"asc":"desc";return new Fc(l.field,c)}));const i=s.endAt?new Hc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Hc(s.startAt.position,s.startAt.inclusive):null;return pv(s.path,s.collectionGroup,e,s.filters,s.limit,i,r)}}function Qd(s,e,i){return new sh(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function ah(s,e){return wm(Ii(s),Ii(e))&&s.limitType===e.limitType}function uT(s){return`${Rm(Ii(s))}|lt:${s.limitType}`}function Ka(s){return`Query(target=${(function(i){let r=i.path.canonicalString();return i.collectionGroup!==null&&(r+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(r+=`, filters: [${i.filters.map((l=>oT(l))).join(", ")}]`),ih(i.limit)||(r+=", limit: "+i.limit),i.orderBy.length>0&&(r+=`, orderBy: [${i.orderBy.map((l=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(l))).join(", ")}]`),i.startAt&&(r+=", startAt: ",r+=i.startAt.inclusive?"b:":"a:",r+=i.startAt.position.map((l=>so(l))).join(",")),i.endAt&&(r+=", endAt: ",r+=i.endAt.inclusive?"a:":"b:",r+=i.endAt.position.map((l=>so(l))).join(",")),`Target(${r})`})(Ii(s))}; limitType=${s.limitType})`}function oh(s,e){return e.isFoundDocument()&&(function(r,l){const c=l.key.path;return r.collectionGroup!==null?l.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):Se.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)})(s,e)&&(function(r,l){for(const c of Cl(r))if(!c.field.isKeyField()&&l.data.field(c.field)===null)return!1;return!0})(s,e)&&(function(r,l){for(const c of r.filters)if(!c.matches(l))return!1;return!0})(s,e)&&(function(r,l){return!(r.startAt&&!(function(d,p,y){const g=dv(d,p,y);return d.inclusive?g<=0:g<0})(r.startAt,Cl(r),l)||r.endAt&&!(function(d,p,y){const g=dv(d,p,y);return d.inclusive?g>=0:g>0})(r.endAt,Cl(r),l))})(s,e)}function kw(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function cT(s){return(e,i)=>{let r=!1;for(const l of Cl(s)){const c=Uw(l,e,i);if(c!==0)return c;r=r||l.field.isKeyField()}return 0}}function Uw(s,e,i){const r=s.field.isKeyField()?Se.comparator(e.key,i.key):(function(c,d,p){const y=d.data.field(c),g=p.data.field(c);return y!==null&&g!==null?ro(y,g):we(42886)})(s.field,e,i);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r!==void 0){for(const[l,c]of r)if(this.equalsFn(l,e))return c}}has(e){return this.get(e)!==void 0}set(e,i){const r=this.mapKeyFn(e),l=this.inner[r];if(l===void 0)return this.inner[r]=[[e,i]],void this.innerSize++;for(let c=0;c<l.length;c++)if(this.equalsFn(l[c][0],e))return void(l[c]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return!1;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return r.length===1?delete this.inner[i]:r.splice(l,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((i,r)=>{for(const[l,c]of r)e(l,c)}))}isEmpty(){return Y0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw=new Tt(Se.comparator);function or(){return jw}const hT=new Tt(Se.comparator);function El(...s){let e=hT;for(const i of s)e=e.insert(i.key,i);return e}function fT(s){let e=hT;return s.forEach(((i,r)=>e=e.insert(i,r.overlayedDocument))),e}function Gs(){return Nl()}function dT(){return Nl()}function Nl(){return new ea((s=>s.toString()),((s,e)=>s.isEqual(e)))}const Lw=new Tt(Se.comparator),zw=new qt(Se.comparator);function Fe(...s){let e=zw;for(const i of s)e=e.add(i);return e}const qw=new qt(He);function Bw(){return qw}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function mT(s){return{integerValue:""+s}}function Hw(s,e){return pw(e)?mT(e):Cm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function Fw(s,e,i){return s instanceof Gc?(function(l,c){const d={fields:{[Z0]:{stringValue:$0},[J0]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return c&&Sm(c)&&(c=rh(c)),c&&(d.fields[W0]=c),{mapValue:d}})(i,e):s instanceof Ll?gT(s,e):s instanceof zl?yT(s,e):(function(l,c){const d=pT(l,c),p=yv(d)+yv(l.Ae);return Hd(d)&&Hd(l.Ae)?mT(p):Cm(l.serializer,p)})(s,e)}function Gw(s,e,i){return s instanceof Ll?gT(s,e):s instanceof zl?yT(s,e):i}function pT(s,e){return s instanceof Qc?(function(r){return Hd(r)||(function(c){return!!c&&"doubleValue"in c})(r)})(e)?e:{integerValue:0}:null}class Gc extends lh{}class Ll extends lh{constructor(e){super(),this.elements=e}}function gT(s,e){const i=_T(e);for(const r of s.elements)i.some((l=>Oi(l,r)))||i.push(r);return{arrayValue:{values:i}}}class zl extends lh{constructor(e){super(),this.elements=e}}function yT(s,e){let i=_T(e);for(const r of s.elements)i=i.filter((l=>!Oi(l,r)));return{arrayValue:{values:i}}}class Qc extends lh{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function yv(s){return xt(s.integerValue||s.doubleValue)}function _T(s){return Am(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function Qw(s,e){return s.field.isEqual(e.field)&&(function(r,l){return r instanceof Ll&&l instanceof Ll||r instanceof zl&&l instanceof zl?io(r.elements,l.elements,Oi):r instanceof Qc&&l instanceof Qc?Oi(r.Ae,l.Ae):r instanceof Gc&&l instanceof Gc})(s.transform,e.transform)}class Kw{constructor(e,i){this.version=e,this.transformResults=i}}class ir{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class uh{}function vT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new ET(s.key,ir.none()):new Yl(s.key,s.data,ir.none());{const i=s.data,r=Gn.empty();let l=new qt(sn.comparator);for(let c of e.fields)if(!l.has(c)){let d=i.field(c);d===null&&c.length>1&&(c=c.popLast(),d=i.field(c)),d===null?r.delete(c):r.set(c,d),l=l.add(c)}return new ta(s.key,r,new ui(l.toArray()),ir.none())}}function Yw(s,e,i){s instanceof Yl?(function(l,c,d){const p=l.value.clone(),y=vv(l.fieldTransforms,c,d.transformResults);p.setAll(y),c.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,i):s instanceof ta?(function(l,c,d){if(!Nc(l.precondition,c))return void c.convertToUnknownDocument(d.version);const p=vv(l.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(TT(l)),y.setAll(p),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(s,e,i):(function(l,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,i)}function xl(s,e,i,r){return s instanceof Yl?(function(c,d,p,y){if(!Nc(c.precondition,d))return p;const g=c.value.clone(),b=Tv(c.fieldTransforms,y,d);return g.setAll(b),d.convertToFoundDocument(d.version,g).setHasLocalMutations(),null})(s,e,i,r):s instanceof ta?(function(c,d,p,y){if(!Nc(c.precondition,d))return p;const g=Tv(c.fieldTransforms,y,d),b=d.data;return b.setAll(TT(c)),b.setAll(g),d.convertToFoundDocument(d.version,b).setHasLocalMutations(),p===null?null:p.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((R=>R.field)))})(s,e,i,r):(function(c,d,p){return Nc(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):p})(s,e,i)}function Xw(s,e){let i=null;for(const r of s.fieldTransforms){const l=e.data.field(r.field),c=pT(r.transform,l||null);c!=null&&(i===null&&(i=Gn.empty()),i.set(r.field,c))}return i||null}function _v(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(r,l){return r===void 0&&l===void 0||!(!r||!l)&&io(r,l,((c,d)=>Qw(c,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Yl extends uh{constructor(e,i,r,l=[]){super(),this.key=e,this.value=i,this.precondition=r,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class ta extends uh{constructor(e,i,r,l,c=[]){super(),this.key=e,this.data=i,this.fieldMask=r,this.precondition=l,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TT(s){const e=new Map;return s.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const r=s.data.field(i);e.set(i,r)}})),e}function vv(s,e,i){const r=new Map;We(s.length===i.length,32656,{Re:i.length,Ve:s.length});for(let l=0;l<i.length;l++){const c=s[l],d=c.transform,p=e.data.field(c.field);r.set(c.field,Gw(d,p,i[l]))}return r}function Tv(s,e,i){const r=new Map;for(const l of s){const c=l.transform,d=i.data.field(l.field);r.set(l.field,Fw(c,d,e))}return r}class ET extends uh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $w extends uh{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e,i,r,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=r,this.mutations=l}applyToRemoteDocument(e,i){const r=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const c=this.mutations[l];c.key.isEqual(e.key)&&Yw(c,e,r[l])}}applyToLocalView(e,i){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(i=xl(r,e,i,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(i=xl(r,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const r=dT();return this.mutations.forEach((l=>{const c=e.get(l.key),d=c.overlayedDocument;let p=this.applyToLocalView(d,c.mutatedFields);p=i.has(l.key)?null:p;const y=vT(d,p);y!==null&&r.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(De.min())})),r}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&io(this.mutations,e.mutations,((i,r)=>_v(i,r)))&&io(this.baseMutations,e.baseMutations,((i,r)=>_v(i,r)))}}class Nm{constructor(e,i,r,l){this.batch=e,this.commitVersion=i,this.mutationResults=r,this.docVersions=l}static from(e,i,r){We(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let l=(function(){return Lw})();const c=e.mutations;for(let d=0;d<c.length;d++)l=l.insert(c[d].key,r[d].version);return new Nm(e,i,r,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Ke;function eI(s){switch(s){case re.OK:return we(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return we(15467,{code:s})}}function bT(s){if(s===void 0)return ar("GRPC error has no .code"),re.UNKNOWN;switch(s){case Mt.OK:return re.OK;case Mt.CANCELLED:return re.CANCELLED;case Mt.UNKNOWN:return re.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return re.INTERNAL;case Mt.UNAVAILABLE:return re.UNAVAILABLE;case Mt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Mt.NOT_FOUND:return re.NOT_FOUND;case Mt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Mt.ABORTED:return re.ABORTED;case Mt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Mt.DATA_LOSS:return re.DATA_LOSS;default:return we(39323,{code:s})}}(Ke=Mt||(Mt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=new $r([4294967295,4294967295],0);function Ev(s){const e=tI().encode(s),i=new j0;return i.update(e),new Uint8Array(i.digest())}function bv(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),r=e.getUint32(4,!0),l=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new $r([i,r],0),new $r([l,c],0)]}class xm{constructor(e,i,r){if(this.bitmap=e,this.padding=i,this.hashCount=r,i<0||i>=8)throw new bl(`Invalid padding: ${i}`);if(r<0)throw new bl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bl(`Invalid hash count: ${r}`);if(e.length===0&&i!==0)throw new bl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=$r.fromNumber(this.ge)}ye(e,i,r){let l=e.add(i.multiply($r.fromNumber(r)));return l.compare(nI)===1&&(l=new $r([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=Ev(e),[r,l]=bv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);if(!this.we(d))return!1}return!0}static create(e,i,r){const l=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new xm(c,l,i);return r.forEach((p=>d.insert(p))),d}insert(e){if(this.ge===0)return;const i=Ev(e),[r,l]=bv(i);for(let c=0;c<this.hashCount;c++){const d=this.ye(r,l,c);this.Se(d)}}Se(e){const i=Math.floor(e/8),r=e%8;this.bitmap[i]|=1<<r}}class bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,i,r,l,c){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=r,this.documentUpdates=l,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,i,r){const l=new Map;return l.set(e,Xl.createSynthesizedTargetChangeForCurrentChange(e,i,r)),new ch(De.min(),l,new Tt(He),or(),Fe())}}class Xl{constructor(e,i,r,l,c){this.resumeToken=e,this.current=i,this.addedDocuments=r,this.modifiedDocuments=l,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,i,r){return new Xl(r,i,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,i,r,l){this.be=e,this.removedTargetIds=i,this.key=r,this.De=l}}class ST{constructor(e,i){this.targetId=e,this.Ce=i}}class AT{constructor(e,i,r=an.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=r,this.cause=l}}class Sv{constructor(){this.ve=0,this.Fe=Av(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),i=Fe(),r=Fe();return this.Fe.forEach(((l,c)=>{switch(c){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:r=r.add(l);break;default:we(38017,{changeType:c})}})),new Xl(this.Me,this.xe,e,i,r)}qe(){this.Oe=!1,this.Fe=Av()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iI{constructor(e){this.Ge=e,this.ze=new Map,this.je=or(),this.Je=_c(),this.He=_c(),this.Ye=new Tt(He)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const r=this.nt(i);switch(e.state){case 0:this.rt(i)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((r,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,r=e.Ce.count,l=this.ot(i);if(l){const c=l.target;if(Gd(c))if(r===0){const d=new Se(c.path);this.et(i,d,dn.newNoDocument(d,De.min()))}else We(r===1,20013,{expectedCount:r});else{const d=this._t(i);if(d!==r){const p=this.ut(e),y=p?this.ct(p,e,d):1;if(y!==0){this.it(i);const g=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,g)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:r="",padding:l=0},hashCount:c=0}=i;let d,p;try{d=es(r).toUint8Array()}catch(y){if(y instanceof X0)return no("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{p=new xm(d,l,c)}catch(y){return no(y instanceof bl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return p.ge===0?null:p}ct(e,i,r){return i.Ce.count===r-this.Pt(e,i.targetId)?0:2}Pt(e,i){const r=this.Ge.getRemoteKeysForTarget(i);let l=0;return r.forEach((c=>{const d=this.Ge.ht(),p=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(p)||(this.et(i,c,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((c,d)=>{const p=this.ot(d);if(p){if(c.current&&Gd(p.target)){const y=new Se(p.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,dn.newNoDocument(y,e))}c.Be&&(i.set(d,c.ke()),c.qe())}}));let r=Fe();this.He.forEach(((c,d)=>{let p=!0;d.forEachWhile((y=>{const g=this.ot(y);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(r=r.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const l=new ch(e,i,this.Ye,this.je,r);return this.je=or(),this.Je=_c(),this.He=_c(),this.Ye=new Tt(He),l}Xe(e,i){if(!this.rt(e))return;const r=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,r),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,r){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),r&&(this.je=this.je.insert(i,r))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new Sv,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new qt(He),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new qt(He),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||ye("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Sv),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function _c(){return new Tt(Se.comparator)}function Av(){return new Tt(Se.comparator)}const rI={asc:"ASCENDING",desc:"DESCENDING"},sI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aI={and:"AND",or:"OR"};class oI{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Kd(s,e){return s.useProto3Json||ih(e)?e:{value:e}}function Kc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lI(s,e){return Kc(s,e.toTimestamp())}function Ci(s){return We(!!s,49232),De.fromTimestamp((function(i){const r=Jr(i);return new mt(r.seconds,r.nanos)})(s))}function Dm(s,e){return Yd(s,e).canonicalString()}function Yd(s,e){const i=(function(l){return new vt(["projects",l.projectId,"databases",l.database])})(s).child("documents");return e===void 0?i:i.child(e)}function wT(s){const e=vt.fromString(s);return We(DT(e),10190,{key:e.toString()}),e}function Xd(s,e){return Dm(s.databaseId,e.path)}function Id(s,e){const i=wT(e);if(i.get(1)!==s.databaseId.projectId)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new be(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new Se(CT(i))}function IT(s,e){return Dm(s.databaseId,e)}function uI(s){const e=wT(s);return e.length===4?vt.emptyPath():CT(e)}function $d(s){return new vt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function CT(s){return We(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function Rv(s,e,i){return{name:Xd(s,e),fields:i.value.mapValue.fields}}function cI(s,e){let i;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],c=(function(g,b){return g.useProto3Json?(We(b===void 0||typeof b=="string",58123),an.fromBase64String(b||"")):(We(b===void 0||b instanceof Buffer||b instanceof Uint8Array,16193),an.fromUint8Array(b||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,p=d&&(function(g){const b=g.code===void 0?re.UNKNOWN:bT(g.code);return new be(b,g.message||"")})(d);i=new AT(r,l,c,p||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const l=Id(s,r.document.name),c=Ci(r.document.updateTime),d=r.document.createTime?Ci(r.document.createTime):De.min(),p=new Gn({mapValue:{fields:r.document.fields}}),y=dn.newFoundDocument(l,c,d,p),g=r.targetIds||[],b=r.removedTargetIds||[];i=new xc(g,b,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const l=Id(s,r.document),c=r.readTime?Ci(r.readTime):De.min(),d=dn.newNoDocument(l,c),p=r.removedTargetIds||[];i=new xc([],p,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const l=Id(s,r.document),c=r.removedTargetIds||[];i=new xc([],c,l,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:l=0,unchangedNames:c}=r,d=new Jw(l,c),p=r.targetId;i=new ST(p,d)}}return i}function hI(s,e){let i;if(e instanceof Yl)i={update:Rv(s,e.key,e.value)};else if(e instanceof ET)i={delete:Xd(s,e.key)};else if(e instanceof ta)i={update:Rv(s,e.key,e.data),updateMask:TI(e.fieldMask)};else{if(!(e instanceof $w))return we(16599,{Vt:e.type});i={verify:Xd(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((r=>(function(c,d){const p=d.transform;if(p instanceof Gc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ll)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof zl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Qc)return{fieldPath:d.field.canonicalString(),increment:p.Ae};throw we(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(i.currentDocument=(function(l,c){return c.updateTime!==void 0?{updateTime:lI(l,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:we(27497)})(s,e.precondition)),i}function fI(s,e){return s&&s.length>0?(We(e!==void 0,14353),s.map((i=>(function(l,c){let d=l.updateTime?Ci(l.updateTime):Ci(c);return d.isEqual(De.min())&&(d=Ci(c)),new Kw(d,l.transformResults||[])})(i,e)))):[]}function dI(s,e){return{documents:[IT(s,e.path)]}}function mI(s,e){const i={structuredQuery:{}},r=e.path;let l;e.collectionGroup!==null?(l=r,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=r.popLast(),i.structuredQuery.from=[{collectionId:r.lastSegment()}]),i.parent=IT(s,l);const c=(function(g){if(g.length!==0)return xT(Mi.create(g,"and"))})(e.filters);c&&(i.structuredQuery.where=c);const d=(function(g){if(g.length!==0)return g.map((b=>(function(M){return{field:Ya(M.field),direction:yI(M.dir)}})(b)))})(e.orderBy);d&&(i.structuredQuery.orderBy=d);const p=Kd(s,e.limit);return p!==null&&(i.structuredQuery.limit=p),e.startAt&&(i.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:i,parent:l}}function pI(s){let e=uI(s.parent);const i=s.structuredQuery,r=i.from?i.from.length:0;let l=null;if(r>0){We(r===1,65062);const b=i.from[0];b.allDescendants?l=b.collectionId:e=e.child(b.collectionId)}let c=[];i.where&&(c=(function(R){const M=NT(R);return M instanceof Mi&&sT(M)?M.getFilters():[M]})(i.where));let d=[];i.orderBy&&(d=(function(R){return R.map((M=>(function(Q){return new Fc(Xa(Q.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Q.direction))})(M)))})(i.orderBy));let p=null;i.limit&&(p=(function(R){let M;return M=typeof R=="object"?R.value:R,ih(M)?null:M})(i.limit));let y=null;i.startAt&&(y=(function(R){const M=!!R.before,B=R.values||[];return new Hc(B,M)})(i.startAt));let g=null;return i.endAt&&(g=(function(R){const M=!R.before,B=R.values||[];return new Hc(B,M)})(i.endAt)),Mw(e,l,d,c,p,"F",y,g)}function gI(s,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function NT(s){return s.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const r=Xa(i.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const l=Xa(i.unaryFilter.field);return zt.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Xa(i.unaryFilter.field);return zt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Xa(i.unaryFilter.field);return zt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(s):s.fieldFilter!==void 0?(function(i){return zt.create(Xa(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(i){return Mi.create(i.compositeFilter.filters.map((r=>NT(r))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(i.compositeFilter.op))})(s):we(30097,{filter:s})}function yI(s){return rI[s]}function _I(s){return sI[s]}function vI(s){return aI[s]}function Ya(s){return{fieldPath:s.canonicalString()}}function Xa(s){return sn.fromServerFormat(s.fieldPath)}function xT(s){return s instanceof zt?(function(i){if(i.op==="=="){if(fv(i.value))return{unaryFilter:{field:Ya(i.field),op:"IS_NAN"}};if(hv(i.value))return{unaryFilter:{field:Ya(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(fv(i.value))return{unaryFilter:{field:Ya(i.field),op:"IS_NOT_NAN"}};if(hv(i.value))return{unaryFilter:{field:Ya(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ya(i.field),op:_I(i.op),value:i.value}}})(s):s instanceof Mi?(function(i){const r=i.getFilters().map((l=>xT(l)));return r.length===1?r[0]:{compositeFilter:{op:vI(i.op),filters:r}}})(s):we(54877,{filter:s})}function TI(s){const e=[];return s.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function DT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,i,r,l,c=De.min(),d=De.min(),p=an.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=i,this.purpose=r,this.sequenceNumber=l,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=p,this.expectedCount=y}withSequenceNumber(e){return new Qr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.yt=e}}function bI(s){const e=pI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Qd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.Cn=new AI}addToCollectionParentIndex(e,i){return this.Cn.add(i),J.resolve()}getCollectionParents(e,i){return J.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return J.resolve()}deleteFieldIndex(e,i){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,i){return J.resolve()}getDocumentsMatchingTarget(e,i){return J.resolve(null)}getIndexType(e,i){return J.resolve(0)}getFieldIndexes(e,i){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,i){return J.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,i){return J.resolve(Wr.min())}updateCollectionGroup(e,i,r){return J.resolve()}updateIndexEntries(e,i){return J.resolve()}}class AI{constructor(){this.index={}}add(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i]||new qt(vt.comparator),c=!l.has(r);return this.index[i]=l.add(r),c}has(e){const i=e.lastSegment(),r=e.popLast(),l=this.index[i];return l&&l.has(r)}getEntries(e){return(this.index[e]||new qt(vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},OT=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(OT,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="LruGarbageCollector",RI=1048576;function Cv([s,e],[i,r]){const l=He(s,i);return l===0?He(e,r):l}class wI{constructor(e){this.Ir=e,this.buffer=new qt(Cv),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const r=this.buffer.last();Cv(i,r)<0&&(this.buffer=this.buffer.delete(r).add(i))}}get maxValue(){return this.buffer.last()[0]}}class II{constructor(e,i,r){this.garbageCollector=e,this.asyncQueue=i,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(Iv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){mo(i)?ye(Iv,"Ignoring IndexedDB error during garbage collection: ",i):await fo(i)}await this.Vr(3e5)}))}}class CI{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((r=>Math.floor(i/100*r)))}nthSequenceNumber(e,i){if(i===0)return J.resolve(nh.ce);const r=new wI(i);return this.mr.forEachTarget(e,(l=>r.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>r.Ar(l))))).next((()=>r.maxValue))}removeTargets(e,i,r){return this.mr.removeTargets(e,i,r)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(wv)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let r,l,c,d,p,y,g;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((R=>(R>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),l=this.params.maximumSequenceNumbersToCollect):l=R,d=Date.now(),this.nthSequenceNumber(e,l)))).next((R=>(r=R,p=Date.now(),this.removeTargets(e,r,i)))).next((R=>(c=R,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((R=>(g=Date.now(),Qa()<=Be.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-b}ms
	Determined least recently used ${l} in `+(p-d)+`ms
	Removed ${c} targets in `+(y-p)+`ms
	Removed ${R} documents in `+(g-y)+`ms
Total Duration: ${g-b}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:c,documentsRemoved:R}))))}}function NI(s,e){return new CI(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.changes=new ea((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const r=this.changes.get(i);return r!==void 0?J.resolve(r):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,i,r,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=r,this.indexManager=l}getDocument(e,i){let r=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(r=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(r!==null&&xl(r.mutation,l,ui.empty(),mt.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.getLocalViewOfDocuments(e,r,Fe()).next((()=>r))))}getLocalViewOfDocuments(e,i,r=Fe()){const l=Gs();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,r).next((c=>{let d=El();return c.forEach(((p,y)=>{d=d.insert(p,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,i){const r=Gs();return this.populateOverlays(e,r,i).next((()=>this.computeViews(e,i,r,Fe())))}populateOverlays(e,i,r){const l=[];return r.forEach((c=>{i.has(c)||l.push(c)})),this.documentOverlayCache.getOverlays(e,l).next((c=>{c.forEach(((d,p)=>{i.set(d,p)}))}))}computeViews(e,i,r,l){let c=or();const d=Nl(),p=(function(){return Nl()})();return i.forEach(((y,g)=>{const b=r.get(g.key);l.has(g.key)&&(b===void 0||b.mutation instanceof ta)?c=c.insert(g.key,g):b!==void 0?(d.set(g.key,b.mutation.getFieldMask()),xl(b.mutation,g,b.mutation.getFieldMask(),mt.now())):d.set(g.key,ui.empty())})),this.recalculateAndSaveOverlays(e,c).next((y=>(y.forEach(((g,b)=>d.set(g,b))),i.forEach(((g,b)=>p.set(g,new DI(b,d.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,i){const r=Nl();let l=new Tt(((d,p)=>d-p)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((d=>{for(const p of d)p.keys().forEach((y=>{const g=i.get(y);if(g===null)return;let b=r.get(y)||ui.empty();b=p.applyToLocalView(g,b),r.set(y,b);const R=(l.get(p.batchId)||Fe()).add(y);l=l.insert(p.batchId,R)}))})).next((()=>{const d=[],p=l.getReverseIterator();for(;p.hasNext();){const y=p.getNext(),g=y.key,b=y.value,R=dT();b.forEach((M=>{if(!c.has(M)){const B=vT(i.get(M),r.get(M));B!==null&&R.set(M,B),c=c.add(M)}})),d.push(this.documentOverlayCache.saveOverlays(e,g,R))}return J.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,i,r,l){return(function(d){return Se.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):Vw(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,r,l):this.getDocumentsMatchingCollectionQuery(e,i,r,l)}getNextDocuments(e,i,r,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,r,l).next((c=>{const d=l-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,r.largestBatchId,l-c.size):J.resolve(Gs());let p=Pl,y=c;return d.next((g=>J.forEach(g,((b,R)=>(p<R.largestBatchId&&(p=R.largestBatchId),c.get(b)?J.resolve():this.remoteDocumentCache.getEntry(e,b).next((M=>{y=y.insert(b,M)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,y,g,Fe()))).next((b=>({batchId:p,changes:fT(b)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Se(i)).next((r=>{let l=El();return r.isFoundDocument()&&(l=l.insert(r.key,r)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,r,l){const c=i.collectionGroup;let d=El();return this.indexManager.getCollectionParents(e,c).next((p=>J.forEach(p,(y=>{const g=(function(R,M){return new sh(M,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)})(i,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,r,l).next((b=>{b.forEach(((R,M)=>{d=d.insert(R,M)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,i,r,l){let c;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,r.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,r,c,l)))).next((d=>{c.forEach(((y,g)=>{const b=g.getKey();d.get(b)===null&&(d=d.insert(b,dn.newInvalidDocument(b)))}));let p=El();return d.forEach(((y,g)=>{const b=c.get(y);b!==void 0&&xl(b.mutation,g,ui.empty(),mt.now()),oh(i,g)&&(p=p.insert(y,g))})),p}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return J.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ci(l.createTime)}})(i)),J.resolve()}getNamedQuery(e,i){return J.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:bI(l.bundledQuery),readTime:Ci(l.readTime)}})(i)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.overlays=new Tt(Se.comparator),this.qr=new Map}getOverlay(e,i){return J.resolve(this.overlays.get(i))}getOverlays(e,i){const r=Gs();return J.forEach(i,(l=>this.getOverlay(e,l).next((c=>{c!==null&&r.set(l,c)})))).next((()=>r))}saveOverlays(e,i,r){return r.forEach(((l,c)=>{this.St(e,i,c)})),J.resolve()}removeOverlaysForBatchId(e,i,r){const l=this.qr.get(r);return l!==void 0&&(l.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,i,r){const l=Gs(),c=i.length+1,d=new Se(i.child("")),p=this.overlays.getIteratorFrom(d);for(;p.hasNext();){const y=p.getNext().value,g=y.getKey();if(!i.isPrefixOf(g.path))break;g.path.length===c&&y.largestBatchId>r&&l.set(y.getKey(),y)}return J.resolve(l)}getOverlaysForCollectionGroup(e,i,r,l){let c=new Tt(((g,b)=>g-b));const d=this.overlays.getIterator();for(;d.hasNext();){const g=d.getNext().value;if(g.getKey().getCollectionGroup()===i&&g.largestBatchId>r){let b=c.get(g.largestBatchId);b===null&&(b=Gs(),c=c.insert(g.largestBatchId,b)),b.set(g.getKey(),g)}}const p=Gs(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((g,b)=>p.set(g,b))),!(p.size()>=l)););return J.resolve(p)}St(e,i,r){const l=this.overlays.get(r.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(r.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Ww(i,r));let c=this.qr.get(i);c===void 0&&(c=Fe(),this.qr.set(i,c)),this.qr.set(i,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.Qr=new qt(Xt.$r),this.Ur=new qt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const r=new Xt(e,i);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,i){e.forEach((r=>this.addReference(r,i)))}removeReference(e,i){this.Gr(new Xt(e,i))}zr(e,i){e.forEach((r=>this.removeReference(r,i)))}jr(e){const i=new Se(new vt([])),r=new Xt(i,e),l=new Xt(i,e+1),c=[];return this.Ur.forEachInRange([r,l],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Se(new vt([])),r=new Xt(i,e),l=new Xt(i,e+1);let c=Fe();return this.Ur.forEachInRange([r,l],(d=>{c=c.add(d.key)})),c}containsKey(e){const i=new Xt(e,0),r=this.Qr.firstAfterOrEqual(i);return r!==null&&e.isEqual(r.key)}}class Xt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Se.comparator(e.key,i.key)||He(e.Yr,i.Yr)}static Kr(e,i){return He(e.Yr,i.Yr)||Se.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Xt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,r,l){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Zw(c,i,r,l);this.mutationQueue.push(d);for(const p of l)this.Zr=this.Zr.add(new Xt(p.key,c)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,i){return J.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const r=i+1,l=this.ei(r),c=l<0?0:l;return J.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?bm:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const r=new Xt(i,0),l=new Xt(i,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([r,l],(d=>{const p=this.Xr(d.Yr);c.push(p)})),J.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,i){let r=new qt(He);return i.forEach((l=>{const c=new Xt(l,0),d=new Xt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(p=>{r=r.add(p.Yr)}))})),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,i){const r=i.path,l=r.length+1;let c=r;Se.isDocumentKey(c)||(c=c.child(""));const d=new Xt(new Se(c),0);let p=new qt(He);return this.Zr.forEachWhile((y=>{const g=y.key.path;return!!r.isPrefixOf(g)&&(g.length===l&&(p=p.add(y.Yr)),!0)}),d),J.resolve(this.ti(p))}ti(e){const i=[];return e.forEach((r=>{const l=this.Xr(r);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){We(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(i.mutations,(l=>{const c=new Xt(l.key,i.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,i){const r=new Xt(i,0),l=this.Zr.firstAfterOrEqual(r);return J.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const r=i.key,l=this.docs.get(r),c=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(r,{document:i.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const r=this.docs.get(i);return J.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(i))}getEntries(e,i){let r=or();return i.forEach((l=>{const c=this.docs.get(l);r=r.insert(l,c?c.document.mutableCopy():dn.newInvalidDocument(l))})),J.resolve(r)}getDocumentsMatchingQuery(e,i,r,l){let c=or();const d=i.path,p=new Se(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(p);for(;y.hasNext();){const{key:g,value:{document:b}}=y.getNext();if(!d.isPrefixOf(g.path))break;g.path.length>d.length+1||hw(cw(b),r)<=0||(l.has(b.key)||oh(i,b))&&(c=c.insert(b.key,b.mutableCopy()))}return J.resolve(c)}getAllFromCollectionGroup(e,i,r,l){we(9500)}ii(e,i){return J.forEach(this.docs,(r=>i(r)))}newChangeBuffer(e){return new jI(this)}getSize(e){return J.resolve(this.size)}}class jI extends xI{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((r,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(r)})),J.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this.persistence=e,this.si=new ea((i=>Rm(i)),wm),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Om,this.targetCount=0,this.ai=ao.ur()}forEachTarget(e,i){return this.si.forEach(((r,l)=>i(l))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,i,r){return r&&(this.lastRemoteSnapshotVersion=r),i>this.oi&&(this.oi=i),J.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new ao(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,J.resolve()}updateTargetData(e,i){return this.Pr(i),J.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,i,r){let l=0;const c=[];return this.si.forEach(((d,p)=>{p.sequenceNumber<=i&&r.get(p.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,p.targetId)),l++)})),J.waitFor(c).next((()=>l))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,i){const r=this.si.get(i)||null;return J.resolve(r)}addMatchingKeys(e,i,r){return this._i.Wr(i,r),J.resolve()}removeMatchingKeys(e,i,r){this._i.zr(i,r);const l=this.persistence.referenceDelegate,c=[];return l&&i.forEach((d=>{c.push(l.markPotentiallyOrphaned(e,d))})),J.waitFor(c)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),J.resolve()}getMatchingKeysForTargetId(e,i){const r=this._i.Hr(i);return J.resolve(r)}containsKey(e,i){return J.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,i){this.ui={},this.overlays={},this.ci=new nh(0),this.li=!1,this.li=!0,this.hi=new PI,this.referenceDelegate=e(this),this.Pi=new LI(this),this.indexManager=new SI,this.remoteDocumentCache=(function(l){return new UI(l)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new EI(i),this.Ii=new MI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new VI,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let r=this.ui[e.toKey()];return r||(r=new kI(i,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,r){ye("MemoryPersistence","Starting transaction:",e);const l=new zI(this.ci.next());return this.referenceDelegate.Ei(),r(l).next((c=>this.referenceDelegate.di(l).next((()=>c)))).toPromise().then((c=>(l.raiseOnCommittedEvent(),c)))}Ai(e,i){return J.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,i))))}}class zI extends dw{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Ri=new Om,this.Vi=null}static mi(e){return new Mm(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,i,r){return this.Ri.addReference(r,i),this.fi.delete(r.toString()),J.resolve()}removeReference(e,i,r){return this.Ri.removeReference(r,i),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),J.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((c=>this.fi.add(c.toString())))})).next((()=>r.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(r=>{const l=Se.fromPath(r);return this.gi(e,l).next((c=>{c||i.removeEntry(l,De.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((r=>{r?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return J.or([()=>J.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class Yc{constructor(e,i){this.persistence=e,this.pi=new ea((r=>gw(r.path)),((r,l)=>r.isEqual(l))),this.garbageCollector=NI(this,i)}static mi(e,i){return new Yc(e,i)}Ei(){}di(e){return J.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>i.next((l=>r+l))))}wr(e){let i=0;return this.pr(e,(r=>{i++})).next((()=>i))}pr(e,i){return J.forEach(this.pi,((r,l)=>this.br(e,r,l).next((c=>c?J.resolve():i(l)))))}removeTargets(e,i,r){return this.persistence.getTargetCache().removeTargets(e,i,r)}removeOrphanedDocuments(e,i){let r=0;const l=this.persistence.getRemoteDocumentCache(),c=l.newChangeBuffer();return l.ii(e,(d=>this.br(e,d,i).next((p=>{p||(r++,c.removeEntry(d,De.min()))})))).next((()=>c.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),J.resolve()}removeTarget(e,i){const r=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,i,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),J.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Ic(e.data.value)),i}br(e,i,r){return J.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return J.resolve(l!==void 0&&l>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,i,r,l){this.targetId=e,this.fromCache=i,this.Es=r,this.ds=l}static As(e,i){let r=Fe(),l=Fe();for(const c of i.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:l=l.add(c.doc.key)}return new Vm(e,i.fromCache,r,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xS()?8:mw(mn())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,r,l){const c={result:null};return this.ys(e,i).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,i,l,r).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new qI;return this.Ss(e,i,d).next((p=>{if(c.result=p,this.Vs)return this.bs(e,i,d,p.size)}))})).next((()=>c.result))}bs(e,i,r,l){return r.documentReadCount<this.fs?(Qa()<=Be.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ka(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(Qa()<=Be.DEBUG&&ye("QueryEngine","Query:",Ka(i),"scans",r.documentReadCount,"local documents and returns",l,"documents as results."),r.documentReadCount>this.gs*l?(Qa()<=Be.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ka(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(i))):J.resolve())}ys(e,i){if(gv(i))return J.resolve(null);let r=Ii(i);return this.indexManager.getIndexType(e,r).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Qd(i,null,"F"),r=Ii(i)),this.indexManager.getDocumentsMatchingTarget(e,r).next((c=>{const d=Fe(...c);return this.ps.getDocuments(e,d).next((p=>this.indexManager.getMinOffset(e,r).next((y=>{const g=this.Ds(i,p);return this.Cs(i,g,d,y.readTime)?this.ys(e,Qd(i,null,"F")):this.vs(e,g,i,y)}))))})))))}ws(e,i,r,l){return gv(i)||l.isEqual(De.min())?J.resolve(null):this.ps.getDocuments(e,r).next((c=>{const d=this.Ds(i,c);return this.Cs(i,d,r,l)?J.resolve(null):(Qa()<=Be.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ka(i)),this.vs(e,d,i,uw(l,Pl)).next((p=>p)))}))}Ds(e,i){let r=new qt(cT(e));return i.forEach(((l,c)=>{oh(e,c)&&(r=r.add(c))})),r}Cs(e,i,r,l){if(e.limit===null)return!1;if(r.size!==i.size)return!0;const c=e.limitType==="F"?i.last():i.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(l)>0)}Ss(e,i,r){return Qa()<=Be.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ka(i)),this.ps.getDocumentsMatchingQuery(e,i,Wr.min(),r)}vs(e,i,r,l){return this.ps.getDocumentsMatchingQuery(e,r,l).next((c=>(i.forEach((d=>{c=c.insert(d.key,d)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="LocalStore",HI=3e8;class FI{constructor(e,i,r,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new Tt(He),this.xs=new ea((c=>Rm(c)),wm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function GI(s,e,i,r){return new FI(s,e,i,r)}async function VT(s,e){const i=Me(s);return await i.persistence.runTransaction("Handle user change","readonly",(r=>{let l;return i.mutationQueue.getAllMutationBatches(r).next((c=>(l=c,i.Bs(e),i.mutationQueue.getAllMutationBatches(r)))).next((c=>{const d=[],p=[];let y=Fe();for(const g of l){d.push(g.batchId);for(const b of g.mutations)y=y.add(b.key)}for(const g of c){p.push(g.batchId);for(const b of g.mutations)y=y.add(b.key)}return i.localDocuments.getDocuments(r,y).next((g=>({Ls:g,removedBatchIds:d,addedBatchIds:p})))}))}))}function QI(s,e){const i=Me(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const l=e.batch.keys(),c=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(p,y,g,b){const R=g.batch,M=R.keys();let B=J.resolve();return M.forEach((Q=>{B=B.next((()=>b.getEntry(y,Q))).next((ee=>{const X=g.docVersions.get(Q);We(X!==null,48541),ee.version.compareTo(X)<0&&(R.applyToRemoteDocument(ee,g),ee.isValidDocument()&&(ee.setReadTime(g.commitVersion),b.addEntry(ee)))}))})),B.next((()=>p.mutationQueue.removeMutationBatch(y,R)))})(i,r,e,c).next((()=>c.apply(r))).next((()=>i.mutationQueue.performConsistencyCheck(r))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(r,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(p){let y=Fe();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(y=y.add(p.batch.mutations[g].key));return y})(e)))).next((()=>i.localDocuments.getDocuments(r,l)))}))}function PT(s){const e=Me(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function KI(s,e){const i=Me(s),r=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const p=[];e.targetChanges.forEach(((b,R)=>{const M=l.get(R);if(!M)return;p.push(i.Pi.removeMatchingKeys(c,b.removedDocuments,R).next((()=>i.Pi.addMatchingKeys(c,b.addedDocuments,R))));let B=M.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(R)!==null?B=B.withResumeToken(an.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):b.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(b.resumeToken,r)),l=l.insert(R,B),(function(ee,X,F){return ee.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=HI?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(M,B,b)&&p.push(i.Pi.updateTargetData(c,B))}));let y=or(),g=Fe();if(e.documentUpdates.forEach((b=>{e.resolvedLimboDocuments.has(b)&&p.push(i.persistence.referenceDelegate.updateLimboDocument(c,b))})),p.push(YI(c,d,e.documentUpdates).next((b=>{y=b.ks,g=b.qs}))),!r.isEqual(De.min())){const b=i.Pi.getLastRemoteSnapshotVersion(c).next((R=>i.Pi.setTargetsMetadata(c,c.currentSequenceNumber,r)));p.push(b)}return J.waitFor(p).next((()=>d.apply(c))).next((()=>i.localDocuments.getLocalViewOfDocuments(c,y,g))).next((()=>y))})).then((c=>(i.Ms=l,c)))}function YI(s,e,i){let r=Fe(),l=Fe();return i.forEach((c=>r=r.add(c))),e.getEntries(s,r).next((c=>{let d=or();return i.forEach(((p,y)=>{const g=c.get(p);y.isFoundDocument()!==g.isFoundDocument()&&(l=l.add(p)),y.isNoDocument()&&y.version.isEqual(De.min())?(e.removeEntry(p,y.readTime),d=d.insert(p,y)):!g.isValidDocument()||y.version.compareTo(g.version)>0||y.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(y),d=d.insert(p,y)):ye(Pm,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",y.version)})),{ks:d,qs:l}}))}function XI(s,e){const i=Me(s);return i.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bm),i.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $I(s,e){const i=Me(s);return i.persistence.runTransaction("Allocate target","readwrite",(r=>{let l;return i.Pi.getTargetData(r,e).next((c=>c?(l=c,J.resolve(l)):i.Pi.allocateTargetId(r).next((d=>(l=new Qr(e,d,"TargetPurposeListen",r.currentSequenceNumber),i.Pi.addTargetData(r,l).next((()=>l)))))))})).then((r=>{const l=i.Ms.get(r.targetId);return(l===null||r.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(r.targetId,r),i.xs.set(e,r.targetId)),r}))}async function Zd(s,e,i){const r=Me(s),l=r.Ms.get(e),c=i?"readwrite":"readwrite-primary";try{i||await r.persistence.runTransaction("Release target",c,(d=>r.persistence.referenceDelegate.removeTarget(d,l)))}catch(d){if(!mo(d))throw d;ye(Pm,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(l.target)}function Nv(s,e,i){const r=Me(s);let l=De.min(),c=Fe();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,g,b){const R=Me(y),M=R.xs.get(b);return M!==void 0?J.resolve(R.Ms.get(M)):R.Pi.getTargetData(g,b)})(r,d,Ii(e)).next((p=>{if(p)return l=p.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,p.targetId).next((y=>{c=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,i?l:De.min(),i?c:Fe()))).next((p=>(ZI(r,kw(e),p),{documents:p,Qs:c})))))}function ZI(s,e,i){let r=s.Os.get(e)||De.min();i.forEach(((l,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)})),s.Os.set(e,r)}class xv{constructor(){this.activeTargetIds=Bw()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WI{constructor(){this.Mo=new xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,r){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,r){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xv,Promise.resolve()}handleUserChange(e,i,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(Dv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(Dv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vc=null;function Wd(){return vc===null?vc=(function(){return 268435456+Math.round(2147483648*Math.random())})():vc++,"0x"+vc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="RestConnection",eC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${r}/databases/${l}`,this.Wo=this.databaseId.database===qc?`project_id=${r}`:`project_id=${r}&database_id=${l}`}Go(e,i,r,l,c){const d=Wd(),p=this.zo(e,i.toUriEncodedString());ye(Cd,`Sending RPC '${e}' ${d}:`,p,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,c);const{host:g}=new URL(p),b=lo(g);return this.Jo(e,p,y,r,b).then((R=>(ye(Cd,`Received RPC '${e}' ${d}: `,R),R)),(R=>{throw no(Cd,`RPC '${e}' ${d} failed with error: `,R,"url: ",p,"request:",r),R}))}Ho(e,i,r,l,c,d){return this.Go(e,i,r,l,c)}jo(e,i,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,c)=>e[c]=l)),r&&r.headers.forEach(((l,c)=>e[c]=l))}zo(e,i){const r=eC[e];return`${this.Uo}/v1/${i}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection";class iC extends tC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,r,l,c){const d=Wd();return new Promise(((p,y)=>{const g=new L0;g.setWithCredentials(!0),g.listenOnce(z0.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case wc.NO_ERROR:const R=g.getResponseJson();ye(hn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(R)),p(R);break;case wc.TIMEOUT:ye(hn,`RPC '${e}' ${d} timed out`),y(new be(re.DEADLINE_EXCEEDED,"Request time out"));break;case wc.HTTP_ERROR:const M=g.getStatus();if(ye(hn,`RPC '${e}' ${d} failed with status:`,M,"response text:",g.getResponseText()),M>0){let B=g.getResponseJson();Array.isArray(B)&&(B=B[0]);const Q=B?.error;if(Q&&Q.status&&Q.message){const ee=(function(F){const fe=F.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(fe)>=0?fe:re.UNKNOWN})(Q.status);y(new be(ee,Q.message))}else y(new be(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else y(new be(re.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:d,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ye(hn,`RPC '${e}' ${d} completed.`)}}));const b=JSON.stringify(l);ye(hn,`RPC '${e}' ${d} sending request:`,l),g.send(i,"POST",b,r,15)}))}T_(e,i,r){const l=Wd(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=H0(),p=B0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(y.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,r),y.encodeInitMessageHeaders=!0;const b=c.join("");ye(hn,`Creating RPC '${e}' stream ${l}: ${b}`,y);const R=d.createWebChannel(b,y);this.I_(R);let M=!1,B=!1;const Q=new nC({Yo:X=>{B?ye(hn,`Not sending because RPC '${e}' stream ${l} is closed:`,X):(M||(ye(hn,`Opening RPC '${e}' stream ${l} transport.`),R.open(),M=!0),ye(hn,`RPC '${e}' stream ${l} sending:`,X),R.send(X))},Zo:()=>R.close()}),ee=(X,F,fe)=>{X.listen(F,(he=>{try{fe(he)}catch(Ne){setTimeout((()=>{throw Ne}),0)}}))};return ee(R,Tl.EventType.OPEN,(()=>{B||(ye(hn,`RPC '${e}' stream ${l} transport opened.`),Q.o_())})),ee(R,Tl.EventType.CLOSE,(()=>{B||(B=!0,ye(hn,`RPC '${e}' stream ${l} transport closed`),Q.a_(),this.E_(R))})),ee(R,Tl.EventType.ERROR,(X=>{B||(B=!0,no(hn,`RPC '${e}' stream ${l} transport errored. Name:`,X.name,"Message:",X.message),Q.a_(new be(re.UNAVAILABLE,"The operation could not be completed")))})),ee(R,Tl.EventType.MESSAGE,(X=>{if(!B){const F=X.data[0];We(!!F,16349);const fe=F,he=fe?.error||fe[0]?.error;if(he){ye(hn,`RPC '${e}' stream ${l} received error:`,he);const Ne=he.status;let ae=(function(A){const w=Mt[A];if(w!==void 0)return bT(w)})(Ne),ie=he.message;ae===void 0&&(ae=re.INTERNAL,ie="Unknown error status: "+Ne+" with message "+he.message),B=!0,Q.a_(new be(ae,ie)),R.close()}else ye(hn,`RPC '${e}' stream ${l} received:`,F),Q.u_(F)}})),ee(p,q0.STAT_EVENT,(X=>{X.stat===zd.PROXY?ye(hn,`RPC '${e}' stream ${l} detected buffering proxy`):X.stat===zd.NOPROXY&&ye(hn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{Q.__()}),0),Q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function Nd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(s){return new oI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,i,r=1e3,l=1.5,c=6e4){this.Mi=e,this.timerId=i,this.d_=r,this.A_=l,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-r);l>0&&ye("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="PersistentStream";class UT{constructor(e,i,r,l,c,d,p,y){this.Mi=e,this.S_=r,this.b_=l,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=p,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new kT(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===re.RESOURCE_EXHAUSTED?(ar(i.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,l])=>{this.D_===i&&this.G_(r,l)}),(r=>{e((()=>{const l=new be(re.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(l)}))}))}G_(e,i){const r=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{r((()=>this.z_(l)))})),this.stream.onMessage((l=>{r((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(Mv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(ye(Mv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rC extends UT{constructor(e,i,r,l,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=cI(this.serializer,e),r=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Ci(d.readTime):De.min()})(e);return this.listener.H_(i,r)}Y_(e){const i={};i.database=$d(this.serializer),i.addTarget=(function(c,d){let p;const y=d.target;if(p=Gd(y)?{documents:dI(c,y)}:{query:mI(c,y).ft},p.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){p.resumeToken=RT(c,d.resumeToken);const g=Kd(c,d.expectedCount);g!==null&&(p.expectedCount=g)}else if(d.snapshotVersion.compareTo(De.min())>0){p.readTime=Kc(c,d.snapshotVersion.toTimestamp());const g=Kd(c,d.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const r=gI(this.serializer,e);r&&(i.labels=r),this.q_(i)}Z_(e){const i={};i.database=$d(this.serializer),i.removeTarget=e,this.q_(i)}}class sC extends UT{constructor(e,i,r,l,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,l,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=fI(e.writeResults,e.commitTime),r=Ci(e.commitTime);return this.listener.na(r,i)}ra(){const e={};e.database=$d(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((r=>hI(this.serializer,r)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{}class oC extends aC{constructor(e,i,r,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=r,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,Yd(i,r),l,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new be(re.UNKNOWN,c.toString())}))}Ho(e,i,r,l,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,p])=>this.connection.Ho(e,Yd(i,r),l,d,p,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class lC{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(i),this.aa=!1):ye("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="RemoteStore";class uC{constructor(e,i,r,l,c){this.localStore=e,this.datastore=i,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{na(this)&&(ye(Ws,"Restarting streams for network reachability change."),await(async function(y){const g=Me(y);g.Ea.add(4),await $l(g),g.Ra.set("Unknown"),g.Ea.delete(4),await fh(g)})(this))}))})),this.Ra=new lC(r,l)}}async function fh(s){if(na(s))for(const e of s.da)await e(!0)}async function $l(s){for(const e of s.da)await e(!1)}function jT(s,e){const i=Me(s);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),Lm(i)?jm(i):po(i).O_()&&Um(i,e))}function km(s,e){const i=Me(s),r=po(i);i.Ia.delete(e),r.O_()&&LT(i,e),i.Ia.size===0&&(r.O_()?r.L_():na(i)&&i.Ra.set("Unknown"))}function Um(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}po(s).Y_(e)}function LT(s,e){s.Va.Ue(e),po(s).Z_(e)}function jm(s){s.Va=new iI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),po(s).start(),s.Ra.ua()}function Lm(s){return na(s)&&!po(s).x_()&&s.Ia.size>0}function na(s){return Me(s).Ea.size===0}function zT(s){s.Va=void 0}async function cC(s){s.Ra.set("Online")}async function hC(s){s.Ia.forEach(((e,i)=>{Um(s,e)}))}async function fC(s,e){zT(s),Lm(s)?(s.Ra.ha(e),jm(s)):s.Ra.set("Unknown")}async function dC(s,e,i){if(s.Ra.set("Online"),e instanceof AT&&e.state===2&&e.cause)try{await(async function(l,c){const d=c.cause;for(const p of c.targetIds)l.Ia.has(p)&&(await l.remoteSyncer.rejectListen(p,d),l.Ia.delete(p),l.Va.removeTarget(p))})(s,e)}catch(r){ye(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xc(s,r)}else if(e instanceof xc?s.Va.Ze(e):e instanceof ST?s.Va.st(e):s.Va.tt(e),!i.isEqual(De.min()))try{const r=await PT(s.localStore);i.compareTo(r)>=0&&await(function(c,d){const p=c.Va.Tt(d);return p.targetChanges.forEach(((y,g)=>{if(y.resumeToken.approximateByteSize()>0){const b=c.Ia.get(g);b&&c.Ia.set(g,b.withResumeToken(y.resumeToken,d))}})),p.targetMismatches.forEach(((y,g)=>{const b=c.Ia.get(y);if(!b)return;c.Ia.set(y,b.withResumeToken(an.EMPTY_BYTE_STRING,b.snapshotVersion)),LT(c,y);const R=new Qr(b.target,y,g,b.sequenceNumber);Um(c,R)})),c.remoteSyncer.applyRemoteEvent(p)})(s,i)}catch(r){ye(Ws,"Failed to raise snapshot:",r),await Xc(s,r)}}async function Xc(s,e,i){if(!mo(e))throw e;s.Ea.add(1),await $l(s),s.Ra.set("Offline"),i||(i=()=>PT(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ye(Ws,"Retrying IndexedDB access"),await i(),s.Ea.delete(1),await fh(s)}))}function qT(s,e){return e().catch((i=>Xc(s,i,e)))}async function dh(s){const e=Me(s),i=ns(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bm;for(;mC(e);)try{const l=await XI(e.localStore,r);if(l===null){e.Ta.length===0&&i.L_();break}r=l.batchId,pC(e,l)}catch(l){await Xc(e,l)}BT(e)&&HT(e)}function mC(s){return na(s)&&s.Ta.length<10}function pC(s,e){s.Ta.push(e);const i=ns(s);i.O_()&&i.X_&&i.ea(e.mutations)}function BT(s){return na(s)&&!ns(s).x_()&&s.Ta.length>0}function HT(s){ns(s).start()}async function gC(s){ns(s).ra()}async function yC(s){const e=ns(s);for(const i of s.Ta)e.ea(i.mutations)}async function _C(s,e,i){const r=s.Ta.shift(),l=Nm.from(r,e,i);await qT(s,(()=>s.remoteSyncer.applySuccessfulWrite(l))),await dh(s)}async function vC(s,e){e&&ns(s).X_&&await(async function(r,l){if((function(d){return eI(d)&&d!==re.ABORTED})(l.code)){const c=r.Ta.shift();ns(r).B_(),await qT(r,(()=>r.remoteSyncer.rejectFailedWrite(c.batchId,l))),await dh(r)}})(s,e),BT(s)&&HT(s)}async function Vv(s,e){const i=Me(s);i.asyncQueue.verifyOperationInProgress(),ye(Ws,"RemoteStore received new credentials");const r=na(i);i.Ea.add(3),await $l(i),r&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await fh(i)}async function TC(s,e){const i=Me(s);e?(i.Ea.delete(2),await fh(i)):e||(i.Ea.add(2),await $l(i),i.Ra.set("Unknown"))}function po(s){return s.ma||(s.ma=(function(i,r,l){const c=Me(i);return c.sa(),new rC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:cC.bind(null,s),t_:hC.bind(null,s),r_:fC.bind(null,s),H_:dC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Lm(s)?jm(s):s.Ra.set("Unknown")):(await s.ma.stop(),zT(s))}))),s.ma}function ns(s){return s.fa||(s.fa=(function(i,r,l){const c=Me(i);return c.sa(),new sC(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,l)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:gC.bind(null,s),r_:vC.bind(null,s),ta:yC.bind(null,s),na:_C.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await dh(s)):(await s.fa.stop(),s.Ta.length>0&&(ye(Ws,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,i,r,l,c){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=r,this.op=l,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,r,l,c){const d=Date.now()+r,p=new zm(e,i,d,l,c);return p.start(r),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qm(s,e){if(ar("AsyncQueue",`${e}: ${s}`),mo(s))return new be(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{static emptySet(e){return new Ja(e.comparator)}constructor(e){this.comparator=e?(i,r)=>e(i,r)||Se.comparator(i.key,r.key):(i,r)=>Se.comparator(i.key,r.key),this.keyedMap=El(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,r)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Ja)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,c=r.getNext().key;if(!l.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const r=new Ja;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=i,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(){this.ga=new Tt(Se.comparator)}track(e){const i=e.doc.key,r=this.ga.get(i);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(i,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(i,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(i):e.type===1&&r.type===2?this.ga=this.ga.insert(i,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,r)=>{e.push(r)})),e}}class oo{constructor(e,i,r,l,c,d,p,y,g){this.query=e,this.docs=i,this.oldDocs=r,this.docChanges=l,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=p,this.excludesMetadataChanges=y,this.hasCachedResults=g}static fromInitialDocuments(e,i,r,l,c){const d=[];return i.forEach((p=>{d.push({type:0,doc:p})})),new oo(e,i,Ja.emptySet(i),d,r,l,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,r=e.docChanges;if(i.length!==r.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==r[l].type||!i[l].doc.isEqual(r[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class bC{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,r){const l=Me(i),c=l.queries;l.queries=kv(),c.forEach(((d,p)=>{for(const y of p.Sa)y.onError(r)}))})(this,new be(re.ABORTED,"Firestore shutting down"))}}function kv(){return new ea((s=>uT(s)),ah)}async function SC(s,e){const i=Me(s);let r=3;const l=e.query;let c=i.queries.get(l);c?!c.ba()&&e.Da()&&(r=2):(c=new EC,r=e.Da()?0:1);try{switch(r){case 0:c.wa=await i.onListen(l,!0);break;case 1:c.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const p=qm(d,`Initialization of query '${Ka(e.query)}' failed`);return void e.onError(p)}i.queries.set(l,c),c.Sa.push(e),e.va(i.onlineState),c.wa&&e.Fa(c.wa)&&Bm(i)}async function AC(s,e){const i=Me(s),r=e.query;let l=3;const c=i.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?l=e.Da()?0:1:!c.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(r),i.onUnlisten(r,!0);case 1:return i.queries.delete(r),i.onUnlisten(r,!1);case 2:return i.onLastRemoteStoreUnlisten(r);default:return}}function RC(s,e){const i=Me(s);let r=!1;for(const l of e){const c=l.query,d=i.queries.get(c);if(d){for(const p of d.Sa)p.Fa(l)&&(r=!0);d.wa=l}}r&&Bm(i)}function wC(s,e,i){const r=Me(s),l=r.queries.get(e);if(l)for(const c of l.Sa)c.onError(i);r.queries.delete(e)}function Bm(s){s.Ca.forEach((e=>{e.next()}))}var Jd,Uv;(Uv=Jd||(Jd={})).Ma="default",Uv.Cache="cache";class IC{constructor(e,i,r){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const l of e.docChanges)l.type!==3&&r.push(l);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const r=i!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e){this.key=e}}class GT{constructor(e){this.key=e}}class CC{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=cT(e),this.tu=new Ja(this.eu)}get nu(){return this.Ya}ru(e,i){const r=i?i.iu:new Pv,l=i?i.tu:this.tu;let c=i?i.mutatedKeys:this.mutatedKeys,d=l,p=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,g=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((b,R)=>{const M=l.get(b),B=oh(this.query,R)?R:null,Q=!!M&&this.mutatedKeys.has(M.key),ee=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let X=!1;M&&B?M.data.isEqual(B.data)?Q!==ee&&(r.track({type:3,doc:B}),X=!0):this.su(M,B)||(r.track({type:2,doc:B}),X=!0,(y&&this.eu(B,y)>0||g&&this.eu(B,g)<0)&&(p=!0)):!M&&B?(r.track({type:0,doc:B}),X=!0):M&&!B&&(r.track({type:1,doc:M}),X=!0,(y||g)&&(p=!0)),X&&(B?(d=d.add(B),c=ee?c.add(b):c.delete(b)):(d=d.delete(b),c=c.delete(b)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const b=this.query.limitType==="F"?d.last():d.first();d=d.delete(b.key),c=c.delete(b.key),r.track({type:1,doc:b})}return{tu:d,iu:r,Cs:p,mutatedKeys:c}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,r,l){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((b,R)=>(function(B,Q){const ee=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:X})}};return ee(B)-ee(Q)})(b.type,R.type)||this.eu(b.doc,R.doc))),this.ou(r),l=l??!1;const p=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,g=y!==this.Za;return this.Za=y,d.length!==0||g?{snapshot:new oo(this.query,e.tu,c,d,e.mutatedKeys,y===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Pv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const i=[];return e.forEach((r=>{this.Xa.has(r)||i.push(new GT(r))})),this.Xa.forEach((r=>{e.has(r)||i.push(new FT(r))})),i}cu(e){this.Ya=e.Qs,this.Xa=Fe();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hm="SyncEngine";class NC{constructor(e,i,r){this.query=e,this.targetId=i,this.view=r}}class xC{constructor(e){this.key=e,this.hu=!1}}class DC{constructor(e,i,r,l,c,d){this.localStore=e,this.remoteStore=i,this.eventManager=r,this.sharedClientState=l,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new ea((p=>uT(p)),ah),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Se.comparator),this.Au=new Map,this.Ru=new Om,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OC(s,e,i=!0){const r=ZT(s);let l;const c=r.Tu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),l=c.view.lu()):l=await QT(r,e,i,!0),l}async function MC(s,e){const i=ZT(s);await QT(i,e,!0,!1)}async function QT(s,e,i,r){const l=await $I(s.localStore,Ii(e)),c=l.targetId,d=s.sharedClientState.addLocalQueryTarget(c,i);let p;return r&&(p=await VC(s,e,c,d==="current",l.resumeToken)),s.isPrimaryClient&&i&&jT(s.remoteStore,l),p}async function VC(s,e,i,r,l){s.pu=(R,M,B)=>(async function(ee,X,F,fe){let he=X.view.ru(F);he.Cs&&(he=await Nv(ee.localStore,X.query,!1).then((({documents:I})=>X.view.ru(I,he))));const Ne=fe&&fe.targetChanges.get(X.targetId),ae=fe&&fe.targetMismatches.get(X.targetId)!=null,ie=X.view.applyChanges(he,ee.isPrimaryClient,Ne,ae);return Lv(ee,X.targetId,ie.au),ie.snapshot})(s,R,M,B);const c=await Nv(s.localStore,e,!0),d=new CC(e,c.Qs),p=d.ru(c.documents),y=Xl.createSynthesizedTargetChangeForCurrentChange(i,r&&s.onlineState!=="Offline",l),g=d.applyChanges(p,s.isPrimaryClient,y);Lv(s,i,g.au);const b=new NC(e,i,d);return s.Tu.set(e,b),s.Iu.has(i)?s.Iu.get(i).push(e):s.Iu.set(i,[e]),g.snapshot}async function PC(s,e,i){const r=Me(s),l=r.Tu.get(e),c=r.Iu.get(l.targetId);if(c.length>1)return r.Iu.set(l.targetId,c.filter((d=>!ah(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(l.targetId),r.sharedClientState.isActiveQueryTarget(l.targetId)||await Zd(r.localStore,l.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(l.targetId),i&&km(r.remoteStore,l.targetId),em(r,l.targetId)})).catch(fo)):(em(r,l.targetId),await Zd(r.localStore,l.targetId,!0))}async function kC(s,e){const i=Me(s),r=i.Tu.get(e),l=i.Iu.get(r.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(r.targetId),km(i.remoteStore,r.targetId))}async function UC(s,e,i){const r=FC(s);try{const l=await(function(d,p){const y=Me(d),g=mt.now(),b=p.reduce(((B,Q)=>B.add(Q.key)),Fe());let R,M;return y.persistence.runTransaction("Locally write mutations","readwrite",(B=>{let Q=or(),ee=Fe();return y.Ns.getEntries(B,b).next((X=>{Q=X,Q.forEach(((F,fe)=>{fe.isValidDocument()||(ee=ee.add(F))}))})).next((()=>y.localDocuments.getOverlayedDocuments(B,Q))).next((X=>{R=X;const F=[];for(const fe of p){const he=Xw(fe,R.get(fe.key).overlayedDocument);he!=null&&F.push(new ta(fe.key,he,nT(he.value.mapValue),ir.exists(!0)))}return y.mutationQueue.addMutationBatch(B,g,F,p)})).next((X=>{M=X;const F=X.applyToLocalDocumentSet(R,ee);return y.documentOverlayCache.saveOverlays(B,X.batchId,F)}))})).then((()=>({batchId:M.batchId,changes:fT(R)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(l.batchId),(function(d,p,y){let g=d.Vu[d.currentUser.toKey()];g||(g=new Tt(He)),g=g.insert(p,y),d.Vu[d.currentUser.toKey()]=g})(r,l.batchId,i),await Zl(r,l.changes),await dh(r.remoteStore)}catch(l){const c=qm(l,"Failed to persist write");i.reject(c)}}async function KT(s,e){const i=Me(s);try{const r=await KI(i.localStore,e);e.targetChanges.forEach(((l,c)=>{const d=i.Au.get(c);d&&(We(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?We(d.hu,14607):l.removedDocuments.size>0&&(We(d.hu,42227),d.hu=!1))})),await Zl(i,r,e)}catch(r){await fo(r)}}function jv(s,e,i){const r=Me(s);if(r.isPrimaryClient&&i===0||!r.isPrimaryClient&&i===1){const l=[];r.Tu.forEach(((c,d)=>{const p=d.view.va(e);p.snapshot&&l.push(p.snapshot)})),(function(d,p){const y=Me(d);y.onlineState=p;let g=!1;y.queries.forEach(((b,R)=>{for(const M of R.Sa)M.va(p)&&(g=!0)})),g&&Bm(y)})(r.eventManager,e),l.length&&r.Pu.H_(l),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jC(s,e,i){const r=Me(s);r.sharedClientState.updateQueryState(e,"rejected",i);const l=r.Au.get(e),c=l&&l.key;if(c){let d=new Tt(Se.comparator);d=d.insert(c,dn.newNoDocument(c,De.min()));const p=Fe().add(c),y=new ch(De.min(),new Map,new Tt(He),d,p);await KT(r,y),r.du=r.du.remove(c),r.Au.delete(e),Fm(r)}else await Zd(r.localStore,e,!1).then((()=>em(r,e,i))).catch(fo)}async function LC(s,e){const i=Me(s),r=e.batch.batchId;try{const l=await QI(i.localStore,e);XT(i,r,null),YT(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),await Zl(i,l)}catch(l){await fo(l)}}async function zC(s,e,i){const r=Me(s);try{const l=await(function(d,p){const y=Me(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let b;return y.mutationQueue.lookupMutationBatch(g,p).next((R=>(We(R!==null,37113),b=R.keys(),y.mutationQueue.removeMutationBatch(g,R)))).next((()=>y.mutationQueue.performConsistencyCheck(g))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(g,b,p))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,b))).next((()=>y.localDocuments.getDocuments(g,b)))}))})(r.localStore,e);XT(r,e,i),YT(r,e),r.sharedClientState.updateMutationState(e,"rejected",i),await Zl(r,l)}catch(l){await fo(l)}}function YT(s,e){(s.mu.get(e)||[]).forEach((i=>{i.resolve()})),s.mu.delete(e)}function XT(s,e,i){const r=Me(s);let l=r.Vu[r.currentUser.toKey()];if(l){const c=l.get(e);c&&(i?c.reject(i):c.resolve(),l=l.remove(e)),r.Vu[r.currentUser.toKey()]=l}}function em(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),i&&s.Pu.yu(r,i);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((r=>{s.Ru.containsKey(r)||$T(s,r)}))}function $T(s,e){s.Eu.delete(e.path.canonicalString());const i=s.du.get(e);i!==null&&(km(s.remoteStore,i),s.du=s.du.remove(e),s.Au.delete(i),Fm(s))}function Lv(s,e,i){for(const r of i)r instanceof FT?(s.Ru.addReference(r.key,e),qC(s,r)):r instanceof GT?(ye(Hm,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||$T(s,r.key)):we(19791,{wu:r})}function qC(s,e){const i=e.key,r=i.path.canonicalString();s.du.get(i)||s.Eu.has(r)||(ye(Hm,"New document in limbo: "+i),s.Eu.add(r),Fm(s))}function Fm(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const i=new Se(vt.fromString(e)),r=s.fu.next();s.Au.set(r,new xC(i)),s.du=s.du.insert(i,r),jT(s.remoteStore,new Qr(Ii(Im(i.path)),r,"TargetPurposeLimboResolution",nh.ce))}}async function Zl(s,e,i){const r=Me(s),l=[],c=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((p,y)=>{d.push(r.pu(y,e,i).then((g=>{if((g||i)&&r.isPrimaryClient){const b=g?!g.fromCache:i?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,b?"current":"not-current")}if(g){l.push(g);const b=Vm.As(y.targetId,g);c.push(b)}})))})),await Promise.all(d),r.Pu.H_(l),await(async function(y,g){const b=Me(y);try{await b.persistence.runTransaction("notifyLocalViewChanges","readwrite",(R=>J.forEach(g,(M=>J.forEach(M.Es,(B=>b.persistence.referenceDelegate.addReference(R,M.targetId,B))).next((()=>J.forEach(M.ds,(B=>b.persistence.referenceDelegate.removeReference(R,M.targetId,B)))))))))}catch(R){if(!mo(R))throw R;ye(Pm,"Failed to update sequence numbers: "+R)}for(const R of g){const M=R.targetId;if(!R.fromCache){const B=b.Ms.get(M),Q=B.snapshotVersion,ee=B.withLastLimboFreeSnapshotVersion(Q);b.Ms=b.Ms.insert(M,ee)}}})(r.localStore,c))}async function BC(s,e){const i=Me(s);if(!i.currentUser.isEqual(e)){ye(Hm,"User change. New user:",e.toKey());const r=await VT(i.localStore,e);i.currentUser=e,(function(c,d){c.mu.forEach((p=>{p.forEach((y=>{y.reject(new be(re.CANCELLED,d))}))})),c.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Zl(i,r.Ls)}}function HC(s,e){const i=Me(s),r=i.Au.get(e);if(r&&r.hu)return Fe().add(r.key);{let l=Fe();const c=i.Iu.get(e);if(!c)return l;for(const d of c){const p=i.Tu.get(d);l=l.unionWith(p.view.nu)}return l}}function ZT(s){const e=Me(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=KT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jC.bind(null,e),e.Pu.H_=RC.bind(null,e.eventManager),e.Pu.yu=wC.bind(null,e.eventManager),e}function FC(s){const e=Me(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zC.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return GI(this.persistence,new BI,e.initialUser,this.serializer)}Cu(e){return new MT(Mm.mi,this.serializer)}Du(e){return new WI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class GC extends $c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){We(this.persistence.referenceDelegate instanceof Yc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new II(r,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new MT((r=>Yc.mi(r,i)),this.serializer)}}class tm{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BC.bind(null,this.syncEngine),await TC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new bC})()}createDatastore(e){const i=hh(e.databaseInfo.databaseId),r=(function(c){return new iC(c)})(e.databaseInfo);return(function(c,d,p,y){return new oC(c,d,p,y)})(e.authCredentials,e.appCheckCredentials,r,i)}createRemoteStore(e){return(function(r,l,c,d,p){return new uC(r,l,c,d,p)})(this.localStore,this.datastore,e.asyncQueue,(i=>jv(this.syncEngine,i,0)),(function(){return Ov.v()?new Ov:new JI})())}createSyncEngine(e,i){return(function(l,c,d,p,y,g,b){const R=new DC(l,c,d,p,y,g);return b&&(R.gu=!0),R})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){await(async function(i){const r=Me(i);ye(Ws,"RemoteStore shutting down."),r.Ea.add(5),await $l(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}tm.provider={build:()=>new tm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="FirestoreClient";class KC{constructor(e,i,r,l,c){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=r,this.databaseInfo=l,this.user=fn.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,(async d=>{ye(is,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ye(is,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=qm(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function xd(s,e){s.asyncQueue.verifyOperationInProgress(),ye(is,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let r=i.initialUser;s.setCredentialChangeListener((async l=>{r.isEqual(l)||(await VT(e.localStore,l),r=l)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function zv(s,e){s.asyncQueue.verifyOperationInProgress();const i=await YC(s);ye(is,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener((r=>Vv(e.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,l)=>Vv(e.remoteStore,l))),s._onlineComponents=e}async function YC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ye(is,"Using user provided OfflineComponentProvider");try{await xd(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===re.FAILED_PRECONDITION||l.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;no("Error using user provided cache. Falling back to memory cache: "+i),await xd(s,new $c)}}else ye(is,"Using default OfflineComponentProvider"),await xd(s,new GC(void 0));return s._offlineComponents}async function WT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ye(is,"Using user provided OnlineComponentProvider"),await zv(s,s._uninitializedComponentsProvider._online)):(ye(is,"Using default OnlineComponentProvider"),await zv(s,new tm))),s._onlineComponents}function XC(s){return WT(s).then((e=>e.syncEngine))}async function $C(s){const e=await WT(s),i=e.eventManager;return i.onListen=OC.bind(null,e.syncEngine),i.onUnlisten=PC.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=MC.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=kC.bind(null,e.syncEngine),i}function ZC(s,e,i={}){const r=new Zr;return s.asyncQueue.enqueueAndForget((async()=>(function(c,d,p,y,g){const b=new QC({next:M=>{b.Nu(),d.enqueueAndForget((()=>AC(c,R)));const B=M.docs.has(p);!B&&M.fromCache?g.reject(new be(re.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&y&&y.source==="server"?g.reject(new be(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(M)},error:M=>g.reject(M)}),R=new IC(Im(p.path),b,{includeMetadataChanges:!0,qa:!0});return SC(c,R)})(await $C(s),s.asyncQueue,e,i,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firestore.googleapis.com",Bv=!0;class Hv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=eE,this.ssl=Bv}else this.host=e.host,this.ssl=e.ssl??Bv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=OT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RI)throw new be(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(re.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,l){return r.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gm{constructor(e,i,r,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=r,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new ZR;switch(r.type){case"firstParty":return new tw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const r=qv.get(i);r&&(ye("ComponentProvider","Removing Datastore"),qv.delete(i),r.terminate())})(this),Promise.resolve()}}function WC(s,e,i,r={}){s=Vl(s,Gm);const l=lo(e),c=s._getSettings(),d={...c,emulatorOptions:s._getEmulatorOptions()},p=`${e}:${i}`;l&&(e0(`https://${p}`),t0("Firestore",!0)),c.host!==eE&&c.host!==p&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:p,ssl:l,emulatorOptions:r};if(!Ys(y,d)&&(s._setSettings(y),r.mockUserToken)){let g,b;if(typeof r.mockUserToken=="string")g=r.mockUserToken,b=fn.MOCK_USER;else{g=ES(r.mockUserToken,s._app?.options.projectId);const R=r.mockUserToken.sub||r.mockUserToken.user_id;if(!R)throw new be(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new fn(R)}s._authCredentials=new WR(new G0(g,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,i,r){this.converter=i,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qm(this.firestore,e,this._query)}}class $t{constructor(e,i,r){this.converter=i,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ql(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,r){if(Kl(i,$t._jsonSchema))return new $t(e,r||null,new Se(vt.fromString(i.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:Vt("string",$t._jsonSchemaVersion),referencePath:Vt("string")};class ql extends Qm{constructor(e,i,r){super(e,i,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new Se(e))}withConverter(e){return new ql(this.firestore,e,this._path)}}function Tc(s,e,...i){if(s=Kn(s),arguments.length===1&&(e=Tm.newId()),ow("doc","path",e),s instanceof Gm){const r=vt.fromString(e,...i);return iv(r),new $t(s,null,new Se(r))}{if(!(s instanceof $t||s instanceof ql))throw new be(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(vt.fromString(e,...i));return iv(r),new $t(s.firestore,s instanceof ql?s.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="AsyncQueue";class Gv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new kT(this,"async_queue_retry"),this._c=()=>{const r=Nd();r&&ye(Fv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const i=Nd();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=Nd();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new Zr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mo(e))throw e;ye(Fv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",Qv(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=i,i}enqueueAfterDelay(e,i,r){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=zm.createAndSchedule(this,e,i,r,(c=>this.hc(c)));return this.tc.push(l),l}uc(){this.nc&&we(47125,{Pc:Qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,r)=>i.targetTimeMs-r.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function Qv(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Km extends Gm{constructor(e,i,r,l){super(e,i,r,l),this.type="firestore",this._queue=new Gv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gv(e),this._firestoreClient=void 0,await e}}}function JC(s,e){const i=typeof s=="object"?s:s0(),r=typeof s=="string"?s:qc,l=lm(i,"firestore").getImmediate({identifier:r});if(!l._initialized){const c=vS("firestore");c&&WC(l,...c)}return l}function tE(s){if(s._terminated)throw new be(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||e2(s),s._firestoreClient}function e2(s){const e=s._freezeSettings(),i=(function(l,c,d,p){return new vw(l,c,d,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,JT(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new KC(s._authCredentials,s._appCheckCredentials,s._queue,i,s._componentsProvider&&(function(l){const c=l?._online.build();return{_offline:l?._offline.build(c),_online:c}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(an.fromBase64String(e))}catch(i){throw new be(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Qn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:Vt("string",Qn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new be(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new sn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new be(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new be(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ni._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,Ni._jsonSchema))return new Ni(e.latitude,e.longitude)}}Ni._jsonSchemaVersion="firestore/geoPoint/1.0",Ni._jsonSchema={type:Vt("string",Ni._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,l){if(r.length!==l.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==l[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:xi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,xi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new xi(e.vectorValues);throw new be(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xi._jsonSchemaVersion="firestore/vectorValue/1.0",xi._jsonSchema={type:Vt("string",xi._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=/^__.*__$/;class n2{constructor(e,i,r){this.data=e,this.fieldMask=i,this.fieldTransforms=r}toMutation(e,i){return this.fieldMask!==null?new ta(e,this.data,this.fieldMask,i,this.fieldTransforms):new Yl(e,this.data,i,this.fieldTransforms)}}function iE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:s})}}class Xm{constructor(e,i,r,l,c,d){this.settings=e,this.databaseId=i,this.serializer=r,this.ignoreUndefinedProperties=l,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.gc(e),r}yc(e){const i=this.path?.child(e),r=this.Vc({path:i,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iE(this.Ac)&&t2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class i2{constructor(e,i,r){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=r||hh(e)}Cc(e,i,r,l=!1){return new Xm({Ac:e,methodName:i,Dc:r,path:sn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function r2(s){const e=s._freezeSettings(),i=hh(s._databaseId);return new i2(s._databaseId,!!e.ignoreUndefinedProperties,i)}function s2(s,e,i,r,l,c={}){const d=s.Cc(c.merge||c.mergeFields?2:0,e,i,l);oE("Data must be an object, but it was:",d,r);const p=sE(r,d);let y,g;if(c.merge)y=new ui(d.fieldMask),g=d.fieldTransforms;else if(c.mergeFields){const b=[];for(const R of c.mergeFields){const M=a2(e,R,i);if(!d.contains(M))throw new be(re.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);l2(b,M)||b.push(M)}y=new ui(b),g=d.fieldTransforms.filter((R=>y.covers(R.field)))}else y=null,g=d.fieldTransforms;return new n2(new Gn(p),y,g)}function rE(s,e){if(aE(s=Kn(s)))return oE("Unsupported field value:",e,s),sE(s,e);if(s instanceof nE)return(function(r,l){if(!iE(l.Ac))throw l.Sc(`${r._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(l);c&&l.fieldTransforms.push(c)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,l){const c=[];let d=0;for(const p of r){let y=rE(p,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}})(s,e)}return(function(r,l){if((r=Kn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Hw(l.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=mt.fromDate(r);return{timestampValue:Kc(l.serializer,c)}}if(r instanceof mt){const c=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kc(l.serializer,c)}}if(r instanceof Ni)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qn)return{bytesValue:RT(l.serializer,r._byteString)};if(r instanceof $t){const c=l.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Dm(r.firestore._databaseId||l.databaseId,r._key.path)}}if(r instanceof xi)return(function(d,p){return{mapValue:{fields:{[eT]:{stringValue:tT},[Bc]:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw p.Sc("VectorValues must only contain numeric values.");return Cm(p.serializer,g)}))}}}}}})(r,l);throw l.Sc(`Unsupported field value: ${Em(r)}`)})(s,e)}function sE(s,e){const i={};return Y0(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(s,((r,l)=>{const c=rE(l,e.mc(r));c!=null&&(i[r]=c)})),{mapValue:{fields:i}}}function aE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof mt||s instanceof Ni||s instanceof Qn||s instanceof $t||s instanceof nE||s instanceof xi)}function oE(s,e,i){if(!aE(i)||!Q0(i)){const r=Em(i);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function a2(s,e,i){if((e=Kn(e))instanceof Ym)return e._internalPath;if(typeof e=="string")return lE(s,e);throw Zc("Field path arguments must be of type string or ",s,!1,void 0,i)}const o2=new RegExp("[~\\*/\\[\\]]");function lE(s,e,i){if(e.search(o2)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new Ym(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function Zc(s,e,i,r,l){const c=r&&!r.isEmpty(),d=l!==void 0;let p=`Function ${e}() called with invalid data`;i&&(p+=" (via `toFirestore()`)"),p+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${r}`),d&&(y+=` in document ${l}`),y+=")"),new be(re.INVALID_ARGUMENT,p+s+y)}function l2(s,e){return s.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,i,r,l,c){this._firestore=e,this._userDataWriter=i,this._key=r,this._document=l,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new u2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(cE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class u2 extends uE{data(){return super.data()}}function cE(s,e){return typeof e=="string"?lE(s,e):e instanceof Ym?e._internalPath:e._delegate._internalPath}class c2{convertValue(e,i="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const r={};return Js(e,((l,c)=>{r[l]=this.convertValue(c,i)})),r}convertVectorValue(e){const i=e.fields?.[Bc].arrayValue?.values?.map((r=>xt(r.doubleValue)));return new xi(i)}convertGeoPoint(e){return new Ni(xt(e.latitude),xt(e.longitude))}convertArray(e,i){return(e.values||[]).map((r=>this.convertValue(r,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const r=rh(e);return r==null?null:this.convertValue(r,i);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const i=Jr(e);return new mt(i.seconds,i.nanos)}convertDocumentKey(e,i){const r=vt.fromString(e);We(DT(r),9688,{name:e});const l=new Ul(r.get(1),r.get(3)),c=new Se(r.popFirst(5));return l.isEqual(i)||ar(`Document ${c} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(s,e,i){let r;return r=s?i&&(i.merge||i.mergeFields)?s.toFirestore(e,i):s.toFirestore(e):e,r}class Sl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ks extends uE{constructor(e,i,r,l,c,d){super(e,i,r,l,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Dc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const r=this._document.data.field(cE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=Ks._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Ks._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ks._jsonSchema={type:Vt("string",Ks._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Dc extends Ks{data(e={}){return super.data(e)}}class Dl{constructor(e,i,r,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new Sl(l.hasPendingWrites,l.fromCache),this.query=r}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((r=>{e.call(i,new Dc(this._firestore,this._userDataWriter,r.key,r,new Sl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new be(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,c){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map((p=>{const y=new Dc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);return p.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((p=>c||p.type!==3)).map((p=>{const y=new Dc(l._firestore,l._userDataWriter,p.doc.key,p.doc,new Sl(l._snapshot.mutatedKeys.has(p.doc.key),l._snapshot.fromCache),l.query.converter);let g=-1,b=-1;return p.type!==0&&(g=d.indexOf(p.doc.key),d=d.delete(p.doc.key)),p.type!==1&&(d=d.add(p.doc),b=d.indexOf(p.doc.key)),{type:f2(p.type),doc:y,oldIndex:g,newIndex:b}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],r=[],l=[];return this.docs.forEach((c=>{c._document!==null&&(i.push(c._document),r.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),l.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function f2(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(s){s=Vl(s,$t);const e=Vl(s.firestore,Km);return ZC(tE(e),s._key).then((i=>g2(e,s,i)))}Dl._jsonSchemaVersion="firestore/querySnapshot/1.0",Dl._jsonSchema={type:Vt("string",Dl._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class m2 extends c2{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,i)}}function Dd(s,e,i){s=Vl(s,$t);const r=Vl(s.firestore,Km),l=h2(s.converter,e,i);return p2(r,[s2(r2(r),"setDoc",s._key,l,s.converter!==null,i).toMutation(s._key,ir.none())])}function p2(s,e){return(function(r,l){const c=new Zr;return r.asyncQueue.enqueueAndForget((async()=>UC(await XC(r),l,c))),c.promise})(tE(s),e)}function g2(s,e,i){const r=i.docs.get(e._key),l=new m2(s);return new Ks(s,l,e._key,r,new Sl(i.hasPendingWrites,i.fromCache),e.converter)}(function(e,i=!0){(function(l){ho=l})(uo),eo(new Xs("firestore",((r,{instanceIdentifier:l,options:c})=>{const d=r.getProvider("app").getImmediate(),p=new Km(new JR(r.getProvider("auth-internal")),new nw(d,r.getProvider("app-check-internal")),(function(g,b){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new be(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(g.options.projectId,b)})(d,l),d);return c={useFetchStreams:i,...c},p._setSettings(c),p}),"PUBLIC").setMultipleInstances(!0)),Xr(J_,ev,e),Xr(J_,ev,"esm2020")})();const y2={apiKey:"AIzaSyAEEPhhbnuMe7pNBNFhObUT7d-r9kMUY-M",authDomain:"split-bill-a4a7c.firebaseapp.com",projectId:"split-bill-a4a7c",storageBucket:"split-bill-a4a7c.firebasestorage.app",messagingSenderId:"666205954591",appId:"1:666205954591:web:4ef058e91091e705b52b2a"},hE=r0(y2),$m=XR(hE),_2=new er,Ec=JC(hE),v2=async()=>(await rR($m,_2)).user,T2=async()=>{await j1($m)},fE=({onUserChange:s,onProcessing:e})=>{const[i,r]=Ee.useState(!0),[l,c]=Ee.useState(null),[d,p]=Ee.useState(!1),y=Ee.useRef(null),[g,b]=Ee.useState(!1);Ee.useEffect(()=>{const B=U1($m,Q=>{r(!1),Q?(c(Q),p(!0)):(p(!1),y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{c(null),y.current=null},350)),s&&s(Q)});return()=>B()},[s]);const R=async()=>{b(!0),e&&e(!0);try{await v2()}catch(B){console.error("Sign-in error",B),alert("Could not sign in: "+B.message)}finally{b(!1),e&&e(!1)}},M=async()=>{b(!0),e&&e(!0);try{p(!1),await new Promise(B=>setTimeout(B,360)),await T2()}catch(B){console.error("Sign-out error",B),alert("Could not sign out: "+B.message)}finally{b(!1),e&&e(!1)}};return i?T.jsx("div",{className:"small",children:"Checking authentication..."}):T.jsx("div",{style:{display:"flex",gap:10,alignItems:"center"},children:l?T.jsxs("div",{className:`auth-status ${d?"show":""}`,children:[T.jsxs("div",{className:"small",style:{color:"#000"},children:["Signed in as ",l.displayName]}),T.jsx("button",{className:"btn ghost-soft auth-button",onClick:M,disabled:g,children:g?T.jsx("span",{className:"spinner","aria-hidden":"true"}):"Sign out"})]}):T.jsx("button",{className:"btn auth-button",onClick:R,disabled:g,children:g?T.jsx("span",{className:"spinner","aria-hidden":"true"}):"Sign in with Google"})})};fE.propTypes={onUserChange:Y.func,onProcessing:Y.func};const E2=Ee.createContext({theme:"light",setTheme:()=>{},motionMode:"calm",setMotionMode:()=>{}});function b2(){return Ee.useContext(E2)}function S2(){const{theme:s,setTheme:e,motionMode:i,setMotionMode:r}=b2(),l=()=>e(d=>"light"),c=()=>{r(i==="calm"?"dynamic":i==="dynamic"?"reduced":"calm")};return T.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[T.jsx("button",{className:"btn ghost-soft auth-button",onClick:c,title:`Motion: ${i}`,"aria-label":"Toggle motion",children:i==="reduced"?"⚪️":i==="calm"?"🌿":"✨"}),T.jsx("button",{className:"btn ghost auth-button",onClick:l,title:"Theme","aria-label":"Toggle theme",children:"☀️"})]})}const nm=({people:s,addPerson:e,removePerson:i,activePerson:r,setActivePerson:l})=>{const[c,d]=Ee.useState(""),p=g=>{g.preventDefault(),c.trim()&&(e(c.trim()),d(""))},y=g=>{l(g===r?null:g)};return T.jsxs("div",{className:"people-section card",children:[T.jsxs("form",{onSubmit:p,className:"add-form",children:[T.jsx("input",{value:c,onChange:g=>d(g.target.value),placeholder:"Enter name",className:"input","aria-label":"Person name"}),T.jsx("button",{type:"submit",className:"btn primary","aria-label":"Add person",disabled:!c.trim(),children:"+"})]}),s.filter(g=>g.name?.trim()).length>0?T.jsx("ul",{className:"person-list",children:s.filter(g=>g.name?.trim()).map(g=>T.jsxs("li",{className:`person-item${g.id===r?" active":""}`,onClick:()=>y(g.id),style:{display:"flex",alignItems:"center",width:"100%",padding:"0.5rem 0.75rem",borderBottom:"1px solid #e5e7eb",cursor:"pointer"},children:[T.jsx("span",{className:"person-name",style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:"1rem",fontWeight:500,color:"#111827"},children:g.name||"No Name"}),T.jsx("button",{type:"button","aria-label":`Remove ${g.name}`,onClick:b=>{b.stopPropagation(),i(g.id)},style:{background:"none",border:"none",color:"#dc2626",fontSize:"0.875rem",fontWeight:600,width:"1.75rem",height:"1.75rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"×"})]},g.id))}):T.jsx("p",{className:"empty-message",children:"No people added yet"})]})};nm.propTypes={people:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired})).isRequired,addPerson:Y.func.isRequired,removePerson:Y.func.isRequired,activePerson:Y.string,setActivePerson:Y.func.isRequired};const im=({menuItems:s,addMenuItem:e,removeMenuItem:i,restaurants:r,addRestaurant:l,removeRestaurant:c})=>{const[d,p]=Ee.useState({name:"",price:"",restaurantId:""}),[y,g]=Ee.useState(""),[b,R]=Ee.useState(""),[M,B]=Ee.useState(""),[Q,ee]=Ee.useState(r.length>0?r[0].id:""),[X,F]=Ee.useState(!1),fe=s.filter(ie=>ie.restaurantId===Q).filter(ie=>ie.name.toLowerCase().includes(b.toLowerCase())).sort((ie,I)=>ie.name.localeCompare(I.name));Ee.useEffect(()=>{r.length>0&&!d.restaurantId&&p(ie=>({...ie,restaurantId:r[0].id}))},[r]),Ee.useEffect(()=>{r.length===0?ee(""):r.find(ie=>ie.id===Q)||ee(r[0].id)},[r,Q]),Ee.useEffect(()=>{p(ie=>({...ie,restaurantId:Q}))},[Q]),Ee.useEffect(()=>{if(M&&r.length>0){const ie=r.find(I=>I.name===M);ie&&(ee(ie.id),p(I=>({...I,restaurantId:ie.id})),B(""))}},[r,M]);const he=ie=>{ie.preventDefault(),d.name.trim()&&d.price&&d.restaurantId&&(e({id:Al(),name:d.name.trim(),price:parseFloat(d.price),restaurantId:d.restaurantId}),p({name:"",price:"",restaurantId:Q}))},Ne=ie=>{if(ie.preventDefault(),y.trim()){const I=y.trim();B(I),l(I),g(""),F(!1)}},ae=ie=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(ie);return r.length>0&&d.restaurantId,T.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[T.jsx("h2",{style:{fontSize:"1.2rem",fontWeight:"600",marginBottom:"1rem"},children:"Menu Items"}),T.jsxs("div",{style:{marginBottom:"1em"},children:[T.jsxs("div",{style:{display:"flex",gap:"1em",alignItems:"flex-end",marginBottom:"0.5rem"},children:[T.jsx("div",{style:{flex:4},children:T.jsx("label",{htmlFor:"item-restaurant",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Restaurant"})}),T.jsx("button",{type:"button",onClick:()=>F(ie=>!ie),style:{flex:1,background:"rgba(102,187,106,0.12)",color:"var(--primary)",border:"1px solid var(--primary)",borderRadius:"0.375rem",cursor:"pointer",fontWeight:500,padding:"0.5rem 0.75rem",whiteSpace:"nowrap"},children:X?"Cancel":"New Restaurant"})]}),r.length>0&&!X&&T.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:"0.375rem",backgroundColor:"white",maxHeight:"200px",overflowY:"auto"},children:r.map(ie=>T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.75rem",borderBottom:"1px solid #f1f5f9",backgroundColor:Q===ie.id?"rgba(34, 197, 94, 0.1)":"transparent",cursor:"pointer",transition:"background-color 0.2s ease"},onClick:()=>ee(ie.id),onMouseEnter:I=>{Q!==ie.id&&(I.target.style.backgroundColor="#f8fafc")},onMouseLeave:I=>{Q!==ie.id&&(I.target.style.backgroundColor="transparent")},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[T.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:`2px solid ${Q===ie.id?"var(--primary, #16a34a)":"#d1d5db"}`,backgroundColor:Q===ie.id?"var(--primary, #16a34a)":"transparent",display:"flex",alignItems:"center",justifyContent:"center"},children:Q===ie.id&&T.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"white"}})}),T.jsx("span",{style:{fontWeight:Q===ie.id?600:400,color:Q===ie.id?"var(--primary, #16a34a)":"#374151"},children:ie.name})]}),T.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),window.confirm(`Are you sure you want to delete "${ie.name}" restaurant? This will also remove all menu items associated with this restaurant.`)&&c(ie.id)},style:{background:"none",border:"none",color:"#dc2626",fontSize:"1.2em",cursor:"pointer",padding:"0.25rem",borderRadius:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",transition:"background-color 0.2s ease"},onMouseEnter:I=>{I.target.style.backgroundColor="rgba(239, 68, 68, 0.1)"},onMouseLeave:I=>{I.target.style.backgroundColor="transparent"},title:`Delete ${ie.name}`,children:"🗑️"})]},ie.id))})]}),!X&&T.jsx("div",{style:{marginTop:"0.5rem",marginBottom:"0.5rem"},children:T.jsx("input",{"aria-label":"Search menu items",placeholder:"Search items...",value:b,onChange:ie=>R(ie.target.value),className:"menu-search",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})}),X&&T.jsxs("form",{onSubmit:Ne,style:{marginBottom:"1em",alignItems:"flex-end"},children:[T.jsxs("div",{style:{marginBottom:"1rem"},children:[T.jsx("label",{htmlFor:"restaurant-name",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Add Restaurant"}),T.jsx("input",{id:"restaurant-name",value:y,onChange:ie=>g(ie.target.value),placeholder:"Enter restaurant name",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),T.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"#fff",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Add"})]}),r.length===0&&!X&&T.jsxs("div",{style:{textAlign:"center",color:"#6b7280",padding:"2rem 1rem",backgroundColor:"#f9fafb",borderRadius:"0.5rem",border:"2px dashed #d1d5db",marginTop:"1rem"},children:[T.jsx("p",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",fontWeight:"500"},children:"🍽️ No restaurants yet"}),T.jsx("p",{style:{margin:0,fontSize:"0.875rem"},children:'Click "New Restaurant" to add your first restaurant and start adding menu items.'})]}),Q&&!X&&T.jsx("form",{onSubmit:he,children:T.jsxs("div",{style:{gap:"1rem",marginBottom:"2rem",alignItems:"flex-end"},children:[T.jsxs("div",{style:{marginBottom:"1rem"},children:[T.jsx("label",{htmlFor:"item-name",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Item Name"}),T.jsx("input",{id:"item-name",value:d.name,onChange:ie=>p({...d,name:ie.target.value}),placeholder:"Enter item name",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),T.jsxs("div",{style:{flex:1,marginBottom:"2rem"},children:[T.jsx("label",{htmlFor:"item-price",style:{fontSize:"0.875rem",fontWeight:"500",display:"block",marginBottom:"0.25rem"},children:"Price (Rp)"}),T.jsx("input",{id:"item-price",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:d.price,onChange:ie=>p({...d,price:ie.target.value.replace(/\D/g,"")}),placeholder:"Enter price",className:"input","aria-label":"Price",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"}})]}),T.jsx("button",{type:"submit","aria-label":"Add menu item",disabled:!d.name.trim()||!d.price,style:{padding:"0.5 rem 1rem",backgroundColor:!d.name.trim()||!d.price?"var(--surface-high)":"var(--primary)",color:"#fff",border:"none",borderRadius:"0.375rem",opacity:!d.name.trim()||!d.price?.4:1,cursor:!d.name.trim()||!d.price?"not-allowed":"pointer"},children:"+"})]})}),!X&&T.jsx("div",{className:"menu-items-container",style:{marginTop:"0.5rem"},children:fe.length>0?T.jsx("div",{children:T.jsxs("table",{className:"menu-table",style:{width:"100%",borderCollapse:"collapse",tableLayout:"fixed"},children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{style:{textAlign:"left",padding:"0.5rem 0.75rem"},children:"Item"}),T.jsx("th",{style:{textAlign:"right",padding:"0.5rem 0.75rem"},children:"Price"}),T.jsx("th",{style:{width:40}})]})}),T.jsx("tbody",{children:fe.map(ie=>{const I=r.find(A=>A.id===ie.restaurantId);return I&&I.name,T.jsxs("tr",{className:"menu-table-row",children:[T.jsx("td",{style:{padding:"0.5rem 0.75rem"},children:T.jsx("strong",{children:ie.name})}),T.jsx("td",{style:{textAlign:"right",padding:"0.5rem 0.75rem"},children:T.jsx("span",{className:"menu-item-price",children:ae(ie.price)})}),T.jsx("td",{style:{textAlign:"center",padding:"0.5rem 0.75rem"},children:T.jsx("button",{type:"button","aria-label":"Remove item",onClick:()=>i(ie.id),style:{background:"none",border:"none",color:"#e53e3e",fontSize:"1.1em",cursor:"pointer"},children:"×"})})]},ie.id)})})]})}):T.jsx("div",{style:{textAlign:"center",color:"#a0aec0",padding:"1em"},children:"No menu items yet for this restaurant."})})]})};im.propTypes={menuItems:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired,price:Y.number.isRequired})).isRequired,addMenuItem:Y.func.isRequired,removeMenuItem:Y.func.isRequired,restaurants:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired})).isRequired,addRestaurant:Y.func.isRequired,removeRestaurant:Y.func.isRequired};const dE=({people:s,menuItems:e,orders:i,addOrder:r,removeOrder:l,activePerson:c,restaurants:d,selectedRestaurant:p,setSelectedRestaurant:y})=>{const[g,b]=Ee.useState(c||""),[R,M]=Ee.useState([]);Ee.useEffect(()=>{c&&b(c)},[c]),Ee.useEffect(()=>{p&&M(ee=>ee.filter(X=>{const F=e.find(fe=>fe.id===X);return F?F.restaurantId===p:!1}))},[p,e]),Ee.useEffect(()=>{M([])},[p]);const B=ee=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(ee),Q={};return i.forEach(ee=>{Q[ee.personId]||(Q[ee.personId]=[]),Q[ee.personId].push(ee)}),g&&s.find(ee=>ee.id===g)?.name,T.jsxs("div",{children:[T.jsx("h2",{children:"Orders"}),d.length>0&&T.jsxs("div",{style:{marginBottom:"1em"},children:[T.jsx("label",{htmlFor:"restaurant-select",style:{fontWeight:500,marginRight:8},children:"Restaurant:"}),T.jsx("select",{id:"restaurant-select",value:p,onChange:ee=>y(ee.target.value),style:{padding:"0.3em 0.7em",borderRadius:6},children:d.map(ee=>T.jsx("option",{value:ee.id,children:ee.name},ee.id))})]}),s.length===0?T.jsx("div",{className:"message info",children:T.jsx("p",{children:"Please add people first"})}):T.jsxs(T.Fragment,{children:[T.jsx("h3",{children:"Current Orders"}),T.jsx("div",{className:"order-vertical-list",children:s.map(ee=>T.jsxs("div",{className:"order-person-block",children:[T.jsxs("div",{className:"order-person-header",children:[T.jsx("span",{className:"order-person-name",children:ee.name}),Q[ee.id]?.length>0&&T.jsx("span",{className:"badge",children:Q[ee.id].length})]}),T.jsx("div",{className:"person-menu-list",children:e.filter(X=>X.restaurantId===p).length===0?T.jsx("div",{className:"message info",children:T.jsx("p",{children:"No menu items available"})}):T.jsx("ul",{className:"menu-list",children:e.filter(X=>X.restaurantId===p).map(X=>T.jsx("li",{className:"menu-list-item",children:T.jsxs("button",{className:"btn small add",onClick:()=>r({id:Al(),personId:ee.id,items:[X.id]}),children:[T.jsx("span",{className:"plus-icon",children:"+"})," ",X.name]})},X.id))})}),Q[ee.id]&&Q[ee.id].filter(X=>X.items.some(F=>{const fe=e.find(he=>he.id===F);return fe&&fe.restaurantId===p})).length>0?T.jsx("ul",{className:"order-list",children:Q[ee.id].map(X=>{const F=X.items.filter(he=>{const Ne=e.find(ae=>ae.id===he);return Ne&&Ne.restaurantId===p});if(F.length===0)return null;const fe=F.reduce((he,Ne)=>{const ae=e.find(ie=>ie.id===Ne);return ae?he+ae.price:he},0);return T.jsxs("li",{className:"order-item",children:[T.jsxs("div",{className:"order-details",children:[T.jsx("p",{className:"order-items",children:F.map(he=>{const Ne=e.find(ae=>ae.id===he);return Ne?Ne.name:""}).filter(Boolean).join(", ")}),T.jsx("p",{className:"order-price",children:B(fe)})]}),T.jsx("button",{onClick:()=>l(X.id),className:"btn-icon remove","aria-label":"Remove order",style:{background:"none",border:"none",color:"#dc2626",fontSize:"1rem",fontWeight:600,width:"1.75rem",height:"1.75rem",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:1,transition:"background-color 0.2s, color 0.2s"},onMouseEnter:he=>{he.target.style.backgroundColor="#dc2626",he.target.style.color="white"},onMouseLeave:he=>{he.target.style.backgroundColor="transparent",he.target.style.color="#dc2626"},children:"×"})]},X.id)})}):T.jsx("div",{className:"message info",children:T.jsxs("p",{children:["No orders yet for ",ee.name]})})]},ee.id))})]})]})};dE.propTypes={people:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired})).isRequired,menuItems:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired,price:Y.number.isRequired})).isRequired,orders:Y.arrayOf(Y.shape({id:Y.string.isRequired,personId:Y.string.isRequired,items:Y.arrayOf(Y.string).isRequired})).isRequired,addOrder:Y.func.isRequired,removeOrder:Y.func.isRequired,activePerson:Y.string};const mE=({shippingCost:s,otherCost:e,setShippingCost:i,setOtherCost:r,shippingDistribution:l,setShippingDistribution:c,otherCostDistribution:d,setOtherCostDistribution:p})=>{const y=b=>{const R=parseFloat(b)||0;i(R)},g=b=>{const R=parseFloat(b)||0;r(R)};return T.jsx("div",{children:T.jsxs("div",{className:"card",children:[T.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Additional Costs"}),T.jsxs("div",{className:"additional-costs-grid",children:[T.jsxs("div",{className:"additional-costs-group",children:[T.jsx("label",{htmlFor:"shipping-cost",className:"additional-costs-label",children:"Shipping Cost"}),T.jsx("div",{className:"distribution-options",style:{marginBottom:"0.75rem"},children:T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"shipping-distribution",value:"equal",checked:l==="equal",onChange:b=>c(b.target.value)}),T.jsx("span",{children:"Split equally among all people"})]}),T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"shipping-distribution",value:"proportional",checked:l==="proportional",onChange:b=>c(b.target.value)}),T.jsx("span",{children:"Split proportionally based on order value"})]})]})}),T.jsxs("div",{className:"input-currency-row",children:[T.jsx("span",{className:"input-currency-prefix",children:"Rp"}),T.jsx("input",{id:"shipping-cost",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:b=>y(b.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Shipping cost"})]})]}),T.jsxs("div",{className:"additional-costs-group",children:[T.jsx("label",{htmlFor:"other-cost",className:"additional-costs-label",children:"Other Costs"}),T.jsx("div",{className:"distribution-options",style:{marginBottom:"0.75rem"},children:T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"other-distribution",value:"equal",checked:d==="equal",onChange:b=>p(b.target.value)}),T.jsx("span",{children:"Split equally among all people"})]}),T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"other-distribution",value:"proportional",checked:d==="proportional",onChange:b=>p(b.target.value)}),T.jsx("span",{children:"Split proportionally based on order value"})]})]})}),T.jsxs("div",{className:"input-currency-row",children:[T.jsx("span",{className:"input-currency-prefix",children:"Rp"}),T.jsx("input",{id:"other-cost",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:e,onChange:b=>g(b.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Other cost"})]})]})]})]})})};mE.propTypes={shippingCost:Y.number.isRequired,otherCost:Y.number.isRequired,setShippingCost:Y.func.isRequired,setOtherCost:Y.func.isRequired,shippingDistribution:Y.string.isRequired,setShippingDistribution:Y.func.isRequired,otherCostDistribution:Y.string.isRequired,setOtherCostDistribution:Y.func.isRequired};function rm(){return rm=Object.assign||function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r])}return s},rm.apply(this,arguments)}function A2(s,e){if(s==null)return{};var i=R2(s,e),r,l;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(l=0;l<c.length;l++)r=c[l],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(i[r]=s[r])}return i}function R2(s,e){if(s==null)return{};var i={},r=Object.keys(s),l,c;for(c=0;c<r.length;c++)l=r[c],!(e.indexOf(l)>=0)&&(i[l]=s[l]);return i}var Zm=Ee.forwardRef(function(s,e){var i=s.color,r=i===void 0?"currentColor":i,l=s.size,c=l===void 0?24:l,d=A2(s,["color","size"]);return dc.createElement("svg",rm({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),dc.createElement("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),dc.createElement("polyline",{points:"17 21 17 13 7 13 7 21"}),dc.createElement("polyline",{points:"7 3 7 8 15 8"}))});Zm.propTypes={color:Y.string,size:Y.oneOfType([Y.string,Y.number])};Zm.displayName="Save";const pE=({people:s,menuItems:e,orders:i,shippingCost:r,tax:l,discount:c,otherCost:d,billDate:p,excludeNoOrder:y,taxMethod:g,shippingDistribution:b,taxDistribution:R,discountDistribution:M,otherCostDistribution:B,selectedRestaurant:Q,restaurants:ee,saveOrderToHistory:X})=>{const F=ne=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(ne),fe=p?`${p.slice(8,10)}-${p.slice(5,7)}-${p.slice(0,4)}`:"",he=Q?i.filter(ne=>ne.items.some(se=>{const ge=e.find(me=>me.id===se);return ge&&ge.restaurantId===Q})):i,Ne=Q?e.filter(ne=>ne.restaurantId===Q):e,ae=y?s.filter(ne=>he.some(se=>se.personId===ne.id)):s,ie=(()=>{const ne=ae.reduce((se,ge)=>(se[ge.id]=0,se),{});return he.forEach(se=>{const ge=se.personId,me=se.items.reduce((Ye,ht)=>{const Zt=Ne.find(on=>on.id===ht);return Zt?Ye+Zt.price:Ye},0);ne[ge]=(ne[ge]||0)+me}),ne})(),I=Object.values(ie).reduce((ne,se)=>ne+se,0),A=I-c,w=d||0;let V=A;g==="after"&&(V+=r+w);const x=l>0?V*l/100:0,P=(ne,se)=>{if(se<=0)return ae.reduce((me,Ye)=>(me[Ye.id]=0,me),{});const ge={};if(M==="proportional"&&I>0)Object.keys(ne).forEach(me=>{const Ye=ne[me]/I;ge[me]=Ye*se});else{const me=ae.length>0?se/ae.length:0;Object.keys(ne).forEach(Ye=>{ge[Ye]=me})}return ge},C=ne=>{const se={};if(b==="proportional"&&I>0)Object.keys(ne).forEach(ge=>{const me=ne[ge]/I;se[ge]=me*r});else{const ge=ae.length>0?r/ae.length:0;Object.keys(ne).forEach(me=>{se[me]=ge})}return se},Je=ne=>{const se={};if(R==="proportional"&&I>0)Object.keys(ne).forEach(ge=>{const me=ne[ge]/I;se[ge]=me*x});else{const ge=ae.length>0?x/ae.length:0;Object.keys(ne).forEach(me=>{se[me]=ge})}return se},$e=ne=>{const se={};if(B==="proportional"&&I>0)Object.keys(ne).forEach(ge=>{const me=ne[ge]/I;se[ge]=me*w});else{const ge=ae.length>0?w/ae.length:0;Object.keys(ne).forEach(me=>{se[me]=ge})}return se},G=C(ie),ue=Je(ie),ve=$e(ie),Le=P(ie,c),D={};ae.forEach(ne=>{const se=ie[ne.id]||0,ge=Le[ne.id]||0,me=G[ne.id]||0,Ye=ue[ne.id]||0,ht=ve[ne.id]||0;D[ne.id]=se-ge+me+Ye+ht});const W=A+x+r+w,ce=ne=>{const se=he.filter(me=>me.personId===ne),ge=new Map;return se.forEach(me=>{me.items.forEach(Ye=>{const ht=Ne.find(Zt=>Zt.id===Ye);ht&&(ge.has(ht.id)?ge.set(ht.id,{...ht,quantity:ge.get(ht.id).quantity+1}):ge.set(ht.id,{...ht,quantity:1}))})}),Array.from(ge.values())};let oe="";if(Q&&Array.isArray(ee)&&ee.length>0){const ne=ee.find(se=>se.id===Q);ne&&(oe=ne.name)}const de=()=>{const ne=prompt("Enter a name for this order:",`${oe||"Order"} - ${fe}`);ne&&ne.trim()&&X(ne.trim())&&alert("Order saved to history successfully!")};return T.jsxs("div",{className:"summary-section",children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[T.jsxs("h2",{style:{margin:0},children:["Summary Order",oe?` ${oe}`:""]}),ae.length>0&&W>0&&T.jsxs("button",{className:"btn success",onClick:de,style:{fontSize:"0.9rem",padding:"0.5rem 1rem"},children:[T.jsx(Zm,{size:14,style:{marginRight:8}}),"Save Order"]})]}),T.jsxs("div",{className:"card summary-card",children:[T.jsx("div",{className:"card-header",children:T.jsx("h3",{children:"Bill Summary"})}),T.jsxs("div",{className:"card-body",children:[T.jsx("table",{className:"summary-table summary-total",children:T.jsxs("tbody",{children:[T.jsxs("tr",{children:[T.jsx("td",{children:"Subtotal"}),T.jsx("td",{className:"price-value",children:F(I)})]}),c>0&&T.jsxs("tr",{className:"discount-row",children:[T.jsx("td",{children:"Discount"}),T.jsxs("td",{className:"price-value",children:["-",F(c)]})]}),x>0&&T.jsxs("tr",{children:[T.jsxs("td",{children:["Tax (",l,"%)"]}),T.jsx("td",{className:"price-value",children:F(x)})]}),r>0&&T.jsxs("tr",{children:[T.jsx("td",{children:"Shipping"}),T.jsx("td",{className:"price-value",children:F(r)})]}),w>0&&T.jsxs("tr",{children:[T.jsx("td",{children:"Other Costs"}),T.jsx("td",{className:"price-value",children:F(w)})]}),T.jsxs("tr",{children:[T.jsx("td",{children:"Total Bill"}),T.jsx("td",{className:"price-value price-total amount-total",children:F(W)})]})]})}),T.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",backgroundColor:"var(--bg-subtle, #f8fafc)",borderRadius:"var(--radius-md, 8px)",border:"1px solid var(--border, #e2e8f0)"},children:[T.jsx("h4",{style:{margin:"0 0 0.75rem 0",fontSize:"0.9rem",fontWeight:600,color:"black"},children:"Distribution Methods"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem",fontSize:"0.85rem"},children:[c>0&&T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"white",borderRadius:"var(--radius-sm, 6px)",border:"1px solid var(--border-light, #f1f5f9)"},children:[T.jsx("span",{style:{color:"black",fontWeight:500},children:"Discount:"}),T.jsx("span",{style:{fontWeight:600,color:"black"},children:M==="proportional"?"📊 Proportional":"⚖️ Equal"})]}),x>0&&T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"white",borderRadius:"var(--radius-sm, 6px)",border:"1px solid var(--border-light, #f1f5f9)"},children:[T.jsx("span",{style:{color:"black",fontWeight:500},children:"Tax:"}),T.jsx("span",{style:{fontWeight:600,color:"black"},children:R==="proportional"?"📊 Proportional":"⚖️ Equal"})]}),r>0&&T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"white",borderRadius:"var(--radius-sm, 6px)",border:"1px solid var(--border-light, #f1f5f9)"},children:[T.jsx("span",{style:{color:"black",fontWeight:500},children:"Shipping:"}),T.jsx("span",{style:{fontWeight:600,color:"black"},children:b==="proportional"?"📊 Proportional":"⚖️ Equal"})]}),w>0&&T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem",backgroundColor:"white",borderRadius:"var(--radius-sm, 6px)",border:"1px solid var(--border-light, #f1f5f9)"},children:[T.jsx("span",{style:{color:"black",fontWeight:500},children:"Other Costs:"}),T.jsx("span",{style:{fontWeight:600,color:"black"},children:B==="proportional"?"📊 Proportional":"⚖️ Equal"})]})]}),T.jsx("div",{style:{marginTop:"0.75rem",fontSize:"0.75rem",color:"black",fontStyle:"italic",textAlign:"center",padding:"0.5rem",backgroundColor:"white",borderRadius:"var(--radius-sm, 6px)"},children:"📊 Proportional = Based on order value • ⚖️ Equal = Split evenly"})]})]}),T.jsx("h3",{style:{marginTop:"2em",marginBottom:"0.5em",color:"var(--primary)",fontWeight:700},children:"Individual Breakdown"}),ae.length>0&&T.jsx("div",{className:"person-breakdown-wrapper",children:T.jsx("div",{className:"person-breakdown-table-wrapper",children:T.jsxs("table",{className:"summary-table person-breakdown-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Name"}),T.jsx("th",{children:"Items"}),T.jsx("th",{children:"Subtotal"}),T.jsx("th",{children:"Discount"}),T.jsx("th",{children:"Tax"}),T.jsx("th",{children:"Shipping"}),T.jsx("th",{children:"Other"}),T.jsx("th",{children:"Total"})]})}),T.jsx("tbody",{children:ae.map(ne=>{const se=ie[ne.id]||0,ge=Le[ne.id]||0,me=G[ne.id]||0,Ye=ue[ne.id]||0,ht=ve[ne.id]||0,Zt=D[ne.id]||0,on=ce(ne.id);return T.jsxs("tr",{children:[T.jsx("td",{children:ne.name}),T.jsx("td",{children:on.length>0?on.map(ft=>T.jsxs("div",{style:{display:"block"},children:[ft.name,ft.quantity>1?` x${ft.quantity}`:""]},ft.id)):"-"}),T.jsx("td",{className:"price-value",children:F(se)}),T.jsx("td",{className:"price-value",children:ge>0?`-${F(ge)}`:ge<0?F(ge):"-"}),T.jsx("td",{className:"price-value",children:Ye>0?F(Ye):"-"}),T.jsx("td",{className:"price-value",children:me>0?F(me):"-"}),T.jsx("td",{className:"price-value",children:ht>0?F(ht):"-"}),T.jsx("td",{className:"price-value price-total amount-total",children:F(Zt)})]},ne.id)})})]})})}),ae.length===0&&T.jsx("p",{className:"empty-message",children:"Add people to see the breakdown"}),ae.length>0&&T.jsxs("div",{className:"distribution-info-mobile",style:{display:"none",marginTop:"1rem",padding:"0.75rem",backgroundColor:"var(--bg-subtle, #f8fafc)",borderRadius:"var(--radius-md, 8px)",border:"1px solid var(--border, #e2e8f0)"},children:[T.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"0.85rem",fontWeight:600,color:"black"},children:"Distribution Methods"}),T.jsxs("div",{style:{fontSize:"0.8rem",lineHeight:"1.4",color:"black"},children:[c>0&&T.jsxs("div",{style:{marginBottom:"0.25rem"},children:[T.jsx("strong",{children:"Discount:"})," ",M==="proportional"?"📊 Proportional":"⚖️ Equal"]}),x>0&&T.jsxs("div",{style:{marginBottom:"0.25rem"},children:[T.jsx("strong",{children:"Tax:"})," ",R==="proportional"?"📊 Proportional":"⚖️ Equal"]}),r>0&&T.jsxs("div",{style:{marginBottom:"0.25rem"},children:[T.jsx("strong",{children:"Shipping:"})," ",b==="proportional"?"📊 Proportional":"⚖️ Equal"]}),w>0&&T.jsxs("div",{style:{marginBottom:"0.25rem"},children:[T.jsx("strong",{children:"Other Costs:"})," ",B==="proportional"?"📊 Proportional":"⚖️ Equal"]}),T.jsx("div",{style:{marginTop:"0.5rem",fontSize:"0.7rem",color:"black",fontStyle:"italic"},children:"📊 = Based on order value • ⚖️ = Split evenly"})]})]}),T.jsx("div",{className:"person-cards",children:ae.map(ne=>{const se=ie[ne.id]||0,ge=Le[ne.id]||0,me=G[ne.id]||0,Ye=ue[ne.id]||0,ht=ve[ne.id]||0,Zt=D[ne.id]||0,on=ce(ne.id);return T.jsxs("div",{className:"person-card",children:[T.jsx("div",{className:"person-name",children:ne.name}),T.jsx("div",{className:"item-list",children:on.length>0?on.map(ft=>T.jsxs("div",{children:[ft.name,ft.quantity>1?` x${ft.quantity}`:""]},ft.id)):T.jsx("div",{className:"small",children:"-"})}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Subtotal"}),T.jsx("div",{className:"value",children:F(se)})]}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Discount"}),T.jsx("div",{className:"value",children:ge>0?`-${F(ge)}`:ge<0?F(ge):"-"})]}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Tax"}),T.jsx("div",{className:"value",children:Ye>0?F(Ye):"-"})]}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Shipping"}),T.jsx("div",{className:"value",children:me>0?F(me):"-"})]}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Other"}),T.jsx("div",{className:"value",children:ht>0?F(ht):"-"})]}),T.jsxs("div",{className:"card-row",children:[T.jsx("div",{className:"label",children:"Total"}),T.jsx("div",{className:"value amount-total",children:F(Zt)})]})]},`card-${ne.id}`)})})]})]})};pE.propTypes={people:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired})).isRequired,menuItems:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired,price:Y.number.isRequired})).isRequired,orders:Y.arrayOf(Y.shape({id:Y.string.isRequired,personId:Y.string.isRequired,items:Y.arrayOf(Y.string).isRequired})).isRequired,shippingCost:Y.number.isRequired,tax:Y.number.isRequired,discount:Y.number.isRequired,otherCost:Y.number.isRequired,excludeNoOrder:Y.bool,billDate:Y.string.isRequired,taxMethod:Y.string,shippingDistribution:Y.string.isRequired,taxDistribution:Y.string.isRequired,discountDistribution:Y.string.isRequired,otherCostDistribution:Y.string.isRequired,selectedRestaurant:Y.string,restaurants:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired})).isRequired,saveOrderToHistory:Y.func.isRequired};const gE=({discount:s,setDiscount:e,discountDistribution:i,setDiscountDistribution:r})=>{const l=c=>{const d=parseFloat(c)||0;e(d)};return T.jsxs("div",{className:"card",children:[T.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Discount"}),T.jsxs("div",{className:"discount-group",children:[T.jsx("label",{htmlFor:"discount",className:"additional-costs-label",children:"Discount"}),T.jsx("div",{className:"distribution-options",style:{marginBottom:"0.75rem"},children:T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"discount-distribution",value:"equal",checked:i==="equal",onChange:c=>r(c.target.value)}),T.jsx("span",{children:"Split equally among all people"})]}),T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"discount-distribution",value:"proportional",checked:i==="proportional",onChange:c=>r(c.target.value)}),T.jsx("span",{children:"Split proportionally based on order value"})]})]})}),T.jsxs("div",{className:"input-currency-row",children:[T.jsx("span",{className:"input-currency-prefix",children:"Rp"}),T.jsx("input",{id:"discount",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:c=>l(c.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Discount"})]})]})]})};gE.propTypes={discount:Y.number.isRequired,setDiscount:Y.func.isRequired,discountDistribution:Y.string.isRequired,setDiscountDistribution:Y.func.isRequired};const yE=({tax:s,setTax:e,taxMethod:i,setTaxMethod:r,taxDistribution:l,setTaxDistribution:c})=>{const d=p=>{let y=parseFloat(p)||0;y>100&&(y=100),y<0&&(y=0),e(y)};return T.jsxs("div",{className:"card",children:[T.jsx("h2",{className:"section-title",style:{color:"var(--primary)",marginBottom:"1rem"},children:"Tax"}),T.jsxs("div",{className:"tax-group",children:[T.jsx("label",{htmlFor:"tax",className:"additional-costs-label",children:"Tax (%)"}),T.jsx("div",{className:"distribution-options",style:{marginBottom:"0.75rem"},children:T.jsxs("div",{className:"radio-group",children:[T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"tax-distribution",value:"equal",checked:l==="equal",onChange:p=>c(p.target.value)}),T.jsx("span",{children:"Split equally among all people"})]}),T.jsxs("label",{className:"radio-option",children:[T.jsx("input",{type:"radio",name:"tax-distribution",value:"proportional",checked:l==="proportional",onChange:p=>c(p.target.value)}),T.jsx("span",{children:"Split proportionally based on order value"})]})]})}),T.jsxs("div",{className:"input-currency-row",children:[T.jsx("input",{id:"tax",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:s,onChange:p=>d(p.target.value.replace(/\D/g,"")),className:"input input-currency","aria-label":"Tax percentage",style:{maxWidth:"80px"}}),T.jsx("span",{className:"input-currency-prefix",children:"%"})]}),T.jsxs("div",{style:{marginTop:"1em"},children:[T.jsx("label",{htmlFor:"tax-method",style:{fontWeight:500,marginRight:"1em"},children:"Tax Calculation Method:"}),T.jsxs("select",{id:"tax-method",value:i,onChange:p=>r(p.target.value),children:[T.jsx("option",{value:"before",children:"Before shipping & other costs (default)"}),T.jsx("option",{value:"after",children:"After shipping & other costs"})]})]})]})]})};yE.propTypes={tax:Y.number.isRequired,setTax:Y.func.isRequired,taxMethod:Y.string.isRequired,setTaxMethod:Y.func.isRequired,taxDistribution:Y.string.isRequired,setTaxDistribution:Y.func.isRequired};const _E=({orderHistory:s,loadHistoryOrder:e,deleteHistoryOrder:i,editHistoryOrder:r})=>{const[l,c]=Ee.useState(null),[d,p]=Ee.useState(null),[y,g]=Ee.useState({name:"",billDate:""}),b=F=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(F),R=F=>F?`${F.slice(8,10)}-${F.slice(5,7)}-${F.slice(0,4)}`:"",M=F=>{c(l===F?null:F)},B=F=>{window.confirm("Loading this order will replace your current data. Continue?")&&e(F)},Q=(F,fe)=>{window.confirm(`Are you sure you want to delete "${fe}"? This action cannot be undone.`)&&i(F)},ee=()=>{y.name.trim()&&(r(d,{name:y.name.trim(),billDate:y.billDate}),p(null),g({name:"",billDate:""}))},X=()=>{p(null),g({name:"",billDate:""})};return s.length===0?T.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[T.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",color:"#0078d4"},children:"Order History"}),T.jsx("p",{className:"empty-message",style:{fontSize:"0.9rem",color:"#666"},children:"No saved orders yet"})]}):T.jsxs("div",{style:{padding:"1rem",backgroundColor:"#fff",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.12)"},children:[T.jsx("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem",color:"#0078d4"},children:"Order History"}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:s.map(F=>T.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"6px",overflow:"hidden",background:"#fff",fontSize:"0.85rem"},children:[T.jsx("div",{onClick:()=>M(F.id),style:{padding:"0.75rem",cursor:"pointer",borderBottom:l===F.id?"1px solid #f1f5f9":"none",transition:"background-color 0.2s"},onMouseEnter:fe=>fe.target.style.backgroundColor="#f8fafc",onMouseLeave:fe=>fe.target.style.backgroundColor="transparent",children:T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem",color:"#1e293b",marginBottom:"0.25rem"},children:F.name}),T.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b",marginBottom:"0.5rem"},children:[R(F.savedAt)," • ",F.restaurantName||"All"]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontWeight:600,color:"#0f766e",fontSize:"0.8rem"},children:b(F.totalBill)}),T.jsxs("div",{style:{display:"flex",gap:"0.25rem"},children:[T.jsx("button",{onClick:fe=>{fe.stopPropagation(),B(F)},style:{padding:"0.2rem 0.5rem",fontSize:"0.75rem",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Load"}),T.jsx("button",{onClick:fe=>{fe.stopPropagation(),Q(F.id,F.name)},style:{padding:"0.2rem 0.5rem",fontSize:"0.75rem",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Del"}),T.jsx("span",{style:{fontSize:"0.7rem",color:"#64748b"},children:l===F.id?"▼":"▶"})]})]})]})}),l===F.id&&T.jsxs("div",{className:"history-details",children:[T.jsx("div",{className:"history-summary",children:T.jsx("table",{className:"summary-table",children:T.jsxs("tbody",{children:[T.jsxs("tr",{children:[T.jsx("td",{children:"Bill Date:"}),T.jsx("td",{children:R(F.billDate)})]}),T.jsxs("tr",{children:[T.jsx("td",{children:"People:"}),T.jsx("td",{children:F.people.length})]}),T.jsxs("tr",{children:[T.jsx("td",{children:"Orders:"}),T.jsx("td",{children:F.orders.length})]}),T.jsxs("tr",{children:[T.jsx("td",{children:"Subtotal:"}),T.jsx("td",{className:"price-value",children:b(F.subtotal)})]}),F.discount>0&&T.jsxs("tr",{children:[T.jsx("td",{children:"Discount:"}),T.jsxs("td",{className:"price-value",children:["-",b(F.discount)]})]}),F.tax>0&&T.jsxs("tr",{children:[T.jsxs("td",{children:["Tax (",F.taxRate,"%):"]}),T.jsx("td",{className:"price-value",children:b(F.tax)})]}),F.shippingCost>0&&T.jsxs("tr",{children:[T.jsx("td",{children:"Shipping:"}),T.jsx("td",{className:"price-value",children:b(F.shippingCost)})]}),F.otherCost>0&&T.jsxs("tr",{children:[T.jsx("td",{children:"Other Costs:"}),T.jsx("td",{className:"price-value",children:b(F.otherCost)})]}),T.jsxs("tr",{className:"history-total-row",children:[T.jsx("td",{children:T.jsx("strong",{children:"Total:"})}),T.jsx("td",{className:"price-value",children:T.jsx("strong",{children:b(F.totalBill)})})]})]})})}),T.jsxs("div",{className:"history-people",children:[T.jsx("h5",{children:"People & Orders:"}),F.people.map(fe=>{const he=F.orders.filter(ae=>ae.personId===fe.id),Ne=F.finalAmounts[fe.id]||0;return T.jsxs("div",{className:"history-person",children:[T.jsxs("div",{className:"person-info",children:[T.jsx("span",{className:"person-name",children:fe.name}),T.jsx("span",{className:"person-total",children:b(Ne)})]}),he.length>0&&T.jsx("div",{className:"person-orders",children:he.map(ae=>T.jsx("div",{className:"history-order-items",children:ae.items.map(ie=>{const I=F.menuItems.find(A=>A.id===ie);return I?T.jsxs("span",{className:"history-order-item",children:[I.name," (",b(I.price),")"]},ie):null})},ae.id))})]},fe.id)})]})]})]},F.id))}),d&&T.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:T.jsxs("div",{style:{backgroundColor:"white",padding:"1.5rem",borderRadius:"8px",width:"300px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)"},children:[T.jsx("h4",{style:{marginBottom:"1rem",color:"#1e293b"},children:"Edit Order"}),T.jsxs("div",{style:{marginBottom:"1rem"},children:[T.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Order Name:"}),T.jsx("input",{type:"text",value:y.name,onChange:F=>g({...y,name:F.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.875rem",boxSizing:"border-box"},placeholder:"Enter order name"})]}),T.jsxs("div",{style:{marginBottom:"1.5rem"},children:[T.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Bill Date:"}),T.jsx("input",{type:"date",value:y.billDate,onChange:F=>g({...y,billDate:F.target.value}),style:{width:"100%",padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.875rem",boxSizing:"border-box"}})]}),T.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[T.jsx("button",{onClick:X,style:{padding:"0.5rem 1rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem"},children:"Cancel"}),T.jsx("button",{onClick:ee,style:{padding:"0.5rem 1rem",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.875rem",opacity:y.name.trim()?1:.5},disabled:!y.name.trim(),children:"Save"})]})]})})]})};_E.propTypes={orderHistory:Y.arrayOf(Y.shape({id:Y.string.isRequired,name:Y.string.isRequired,savedAt:Y.string.isRequired,billDate:Y.string.isRequired,people:Y.array.isRequired,menuItems:Y.array.isRequired,orders:Y.array.isRequired,restaurants:Y.array.isRequired,selectedRestaurant:Y.string,restaurantName:Y.string,subtotal:Y.number.isRequired,discount:Y.number.isRequired,tax:Y.number.isRequired,taxRate:Y.number.isRequired,shippingCost:Y.number.isRequired,otherCost:Y.number.isRequired,totalBill:Y.number.isRequired,finalAmounts:Y.object.isRequired})).isRequired,loadHistoryOrder:Y.func.isRequired,deleteHistoryOrder:Y.func.isRequired,editHistoryOrder:Y.func.isRequired};function w2(){const[s,e]=Ee.useState(null),i=Ee.useRef(!1),r=Ee.useRef(null),l=Ee.useRef(!1),c=async(te,pe)=>{try{const Pe=Tc(Ec,"users",te);await Dd(Pe,pe,{merge:!0}),console.log("Saved user data to Firestore")}catch(Pe){console.error("Error saving user data to Firestore",Pe)}},d=async te=>{try{const pe=Tc(Ec,"users",te),Pe=await d2(pe);return Pe.exists()?Pe.data():null}catch(pe){return console.error("Error loading user data from Firestore",pe),null}},[p,y]=Ee.useState(()=>{const te=localStorage.getItem("splitBillPeople");return te?JSON.parse(te):[]}),[g,b]=Ee.useState(()=>{const te=localStorage.getItem("splitBillRestaurants");return te?JSON.parse(te):[]}),[R,M]=Ee.useState(()=>{const te=localStorage.getItem("splitBillMenuItems");return te?JSON.parse(te):[]}),[B,Q]=Ee.useState([]),[ee,X]=Ee.useState("percentage"),[F,fe]=Ee.useState(0),[he,Ne]=Ee.useState("equal"),[ae,ie]=Ee.useState(0),[I,A]=Ee.useState("equal"),[w,V]=Ee.useState(0),[x,P]=Ee.useState("proportional"),[C,Je]=Ee.useState(0),[$e,G]=Ee.useState("equal"),[ue,ve]=Ee.useState(null),[Le,D]=Ee.useState(!0),W=()=>new Date().toISOString().slice(0,10),[ce,oe]=Ee.useState(W()),[de,ne]=Ee.useState(g[0]?.id||""),[se,ge]=Ee.useState(()=>{const te=localStorage.getItem("splitBillOrderHistory");return te?JSON.parse(te):[]}),me=Ee.useRef(""),[Ye,ht]=Ee.useState(!1),Zt=()=>{console.log("Data saved to local storage")},on=async te=>{if(!(te&&te.uid&&r.current===te.uid)&&!l.current){if(l.current=!0,te&&te.uid){r.current=te.uid,i.current=!0;const pe=await d(te.uid);if(pe){pe.people&&y(pe.people),pe.menuItems&&M(pe.menuItems),pe.restaurants&&b(pe.restaurants),pe.orderHistory&&ge(pe.orderHistory),console.log("Loaded user data from Firestore");try{me.current=JSON.stringify({people:pe.people||[],menuItems:pe.menuItems||[],restaurants:pe.restaurants||[],orderHistory:pe.orderHistory||[]})}catch{}e(te);try{await Dd(Tc(Ec,"users",te.uid),{profile:{displayName:te.displayName||null,email:te.email||null,photoURL:te.photoURL||null,lastSeen:new Date().toISOString()}},{merge:!0})}catch(Pe){console.error("Error saving user profile to Firestore",Pe)}setTimeout(()=>{i.current=!1},100)}else{const Pe={people:p,menuItems:R,restaurants:g,orderHistory:se};await c(te.uid,Pe),console.log("Migrated local data to Firestore for new user");try{me.current=JSON.stringify(Pe)}catch{}e(te),setTimeout(()=>{i.current=!1},100);try{await Dd(Tc(Ec,"users",te.uid),{profile:{displayName:te.displayName||null,email:te.email||null,photoURL:te.photoURL||null,lastSeen:new Date().toISOString()}},{merge:!0})}catch(Ge){console.error("Error saving user profile to Firestore",Ge)}}}else r.current=null,e(null);l.current=!1}},ft=Ee.useRef(null);Ee.useEffect(()=>{if(i.current)return;const te={restaurants:g,people:p,menuItems:R,orderHistory:se},pe=JSON.stringify(te);if(me.current!==pe)return ft.current&&clearTimeout(ft.current),ft.current=setTimeout(async()=>{if(s&&s.uid)try{await c(s.uid,te),me.current=pe}catch(Pe){console.error("Error saving batched user data to Firestore",Pe)}else localStorage.setItem("splitBillRestaurants",JSON.stringify(g)),localStorage.setItem("splitBillPeople",JSON.stringify(p)),localStorage.setItem("splitBillMenuItems",JSON.stringify(R)),localStorage.setItem("splitBillOrderHistory",JSON.stringify(se)),(p.length>0||R.length>0)&&Zt(),me.current=pe;ft.current=null},600),()=>{ft.current&&(clearTimeout(ft.current),ft.current=null)}},[g,p,R,se,s]);const Vi=te=>{y([...p,{id:Al(),name:te}])},ia=te=>{y(p.filter(pe=>pe.id!==te)),Q(B.filter(pe=>pe.personId!==te))},ur=te=>{M([...R,te])},Wt=te=>{M(R.filter(pe=>pe.id!==te)),Q(B.map(pe=>({...pe,items:pe.items.filter(Pe=>Pe!==te)})).filter(pe=>pe.items.length>0))},ra=te=>{Q([...B,te])},At=te=>{Q(B.filter(pe=>pe.id!==te))},Rt=te=>{b([...g,{id:Al(),name:te}])},Vn=te=>{if(b(g.filter(pe=>pe.id!==te)),M(R.filter(pe=>pe.restaurantId!==te)),Q(B.map(pe=>({...pe,items:pe.items.filter(Pe=>{const Ge=R.find(xe=>xe.id===Pe);return Ge?Ge.restaurantId!==te:!1})})).filter(pe=>pe.items.length>0)),de===te){const pe=g.filter(Pe=>Pe.id!==te);ne(pe.length>0?pe[0].id:"")}},go=te=>{const pe=de?B.filter(ke=>ke.items.some(kt=>{const Ft=R.find(ot=>ot.id===kt);return Ft&&Ft.restaurantId===de})):B,Pe=de?R.filter(ke=>ke.restaurantId===de):R,Ge=p.filter(ke=>pe.some(kt=>kt.personId===ke.id)),xe=Ge.reduce((ke,kt)=>(ke[kt.id]=0,ke),{});pe.forEach(ke=>{const kt=ke.items.reduce((Ft,ot)=>{const Et=Pe.find(Rn=>Rn.id===ot);return Et?Ft+Et.price:Ft},0);xe[ke.personId]=(xe[ke.personId]||0)+kt});const Pt=Object.values(xe).reduce((ke,kt)=>ke+kt,0),Tn=Pt-w,Ht=C||0;let Yn=Tn;ee==="after"&&(Yn+=F+Ht);const Xn=ae>0?Yn*ae/100:0,ss=Tn+Xn+F+Ht,$n={},cr=ke=>he==="proportional"&&Pt>0?ke/Pt*F:Ge.length>0?F/Ge.length:0,gt=ke=>$e==="proportional"&&Pt>0?ke/Pt*Ht:Ge.length>0?Ht/Ge.length:0,sa=ke=>I==="proportional"&&Pt>0?ke/Pt*Xn:Ge.length>0?Xn/Ge.length:0,fi=ke=>x==="proportional"&&Pt>0?ke/Pt*w:Ge.length>0?w/Ge.length:0;Ge.forEach(ke=>{const kt=xe[ke.id]||0,Ft=fi(kt),ot=cr(kt),Et=gt(kt),Rn=sa(kt);$n[ke.id]=kt-Ft+ot+Rn+Et});const Zn=g.find(ke=>ke.id===de),as=Zn?Zn.name:"",os={id:Al(),name:te,savedAt:new Date().toISOString().slice(0,10),billDate:ce,people:[...Ge],menuItems:[...Pe],orders:[...pe],restaurants:[...g],selectedRestaurant:de,restaurantName:as,subtotal:Pt,discount:w,discountDistribution:x,tax:Xn,taxRate:ae,taxMethod:ee,taxDistribution:I,shippingCost:F,shippingDistribution:he,otherCost:Ht,otherCostDistribution:$e,totalBill:ss,finalAmounts:$n};return ge(ke=>[os,...ke]),!0},rs=te=>{y(te.people),M(te.menuItems),Q(te.orders),b(te.restaurants),ne(te.selectedRestaurant||""),oe(te.billDate),V(te.discount),P(te.discountDistribution||"proportional"),ie(te.taxRate),X(te.taxMethod||"before"),A(te.taxDistribution||"equal"),fe(te.shippingCost),Ne(te.shippingDistribution||"equal"),Je(te.otherCost),G(te.otherCostDistribution||"equal")},yo=te=>{ge(pe=>pe.filter(Pe=>Pe.id!==te))},Pi=(te,pe)=>{ge(Pe=>Pe.map(Ge=>Ge.id===te?{...Ge,...pe,savedAt:new Date().toISOString()}:Ge))},hi=()=>{window.confirm("Are you sure you want to clear all data? This action cannot be undone.")&&(y([]),M([]),Q([]),b([]),fe(0),Ne("equal"),ie(0),A("equal"),V(0),P("proportional"),Je(0),G("equal"),ge([]),localStorage.removeItem("splitBillPeople"),localStorage.removeItem("splitBillMenuItems"),localStorage.removeItem("splitBillRestaurants"),localStorage.removeItem("splitBillShipping"),localStorage.removeItem("splitBillTax"),localStorage.removeItem("splitBillDiscount"),localStorage.removeItem("splitBillOtherCost"),localStorage.removeItem("splitBillOrderHistory"))},Bt=()=>{const te={people:p,menuItems:R,orders:B,shippingCost:F,tax:ae,discount:w,otherCost:C,exportDate:new Date().toISOString()},pe=JSON.stringify(te,null,2),Pe=new Blob([pe],{type:"application/json"}),Ge=URL.createObjectURL(Pe),xe=document.createElement("a");xe.href=Ge,xe.download=`split-bill-export-${new Date().toLocaleDateString().replace(/\//g,"-")}.json`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),URL.revokeObjectURL(Ge)},vn=te=>{const pe=te.target.files[0];if(!pe)return;const Pe=new FileReader;Pe.onload=Ge=>{try{const xe=JSON.parse(Ge.target.result);if(!xe.people||!xe.menuItems||!xe.orders||!Array.isArray(xe.people)||!Array.isArray(xe.menuItems)||!Array.isArray(xe.orders))throw new Error("Invalid data format");y(xe.people),M(xe.menuItems),Q(xe.orders),xe.shippingCost!==void 0&&fe(parseFloat(xe.shippingCost)),xe.tax!==void 0&&ie(parseFloat(xe.tax)),xe.discount!==void 0&&V(parseFloat(xe.discount)),xe.otherCost!==void 0&&Je(parseFloat(xe.otherCost)),te.target.value=null}catch(xe){console.error("Error importing data:",xe),alert("Invalid data format. Please select a valid export file."),te.target.value=null}},Pe.readAsText(pe)};return Ee.useEffect(()=>{de&&Q(te=>te.map(pe=>({...pe,items:pe.items.filter(Pe=>{const Ge=R.find(xe=>xe.id===Pe);return Ge&&Ge.restaurantId===de})})).filter(pe=>pe.items.length>0))},[de,R]),T.jsxs("div",{className:"container app-container",children:[T.jsxs("header",{className:"card app-header",children:[T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"8px"},children:[T.jsx("h1",{className:"app-title",children:"Split Bill App"}),T.jsx("p",{className:"small",children:"Bagi tagihan dengan teman-teman dengan mudah"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"12px",marginTop:"12px"},children:[T.jsx("button",{className:"btn btn-danger",onClick:hi,children:"🗑 Hapus Semua Data"}),T.jsx("button",{className:"btn",onClick:Bt,children:"📤 Export Data"}),T.jsxs("label",{className:"btn btn-success",children:["📥 Import Data",T.jsx("input",{type:"file",accept:".json",onChange:vn,style:{display:"none"}})]})]}),T.jsx("div",{style:{position:"absolute",right:18,top:18},children:T.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[T.jsx(S2,{}),T.jsx(fE,{onUserChange:on,onProcessing:ht})]})})]}),Ye&&T.jsx("div",{className:"overlay-spinner","aria-hidden":"true",children:T.jsx("div",{className:"spinner"})}),T.jsxs("main",{className:"grid-2",style:{marginTop:"var(--space-4)"},children:[T.jsxs("aside",{className:"sidebar card",children:[T.jsx("h2",{className:"sidebar-title",children:"People"}),T.jsx(nm,{people:p,addPerson:Vi,removePerson:ia,activePerson:ue,setActivePerson:ve}),T.jsx("div",{style:{marginTop:"var(--space-4)"},children:T.jsx(im,{menuItems:R,addMenuItem:ur,removeMenuItem:Wt,restaurants:g,addRestaurant:Rt,removeRestaurant:Vn})}),T.jsx("div",{style:{marginTop:"var(--space-4)"},children:T.jsx(_E,{orderHistory:se,loadHistoryOrder:rs,deleteHistoryOrder:yo,editHistoryOrder:Pi})})]}),T.jsxs("section",{className:"content",children:[T.jsxs("div",{className:"mobile-inline-sidebar",children:[T.jsxs("details",{className:"accordion-card",open:!0,children:[T.jsx("summary",{children:"People"}),T.jsx("div",{style:{marginTop:"var(--space-3)"},children:T.jsx(nm,{people:p,addPerson:Vi,removePerson:ia,activePerson:ue,setActivePerson:ve})})]}),T.jsxs("details",{className:"accordion-card",children:[T.jsx("summary",{children:"Menu Items"}),T.jsx("div",{style:{marginTop:"var(--space-3)"},children:T.jsx(im,{menuItems:R,addMenuItem:ur,removeMenuItem:Wt,restaurants:g,addRestaurant:Rt,removeRestaurant:Vn})})]})]}),T.jsx("div",{className:"card",children:T.jsx(dE,{people:p,menuItems:R,orders:B,addOrder:ra,removeOrder:At,activePerson:ue,restaurants:g,selectedRestaurant:de,setSelectedRestaurant:ne})}),T.jsxs("div",{className:"grid-container grid-3",style:{marginTop:"var(--space-4)",gap:"var(--space-4)"},children:[T.jsx("div",{className:"card",children:T.jsx(mE,{shippingCost:F,otherCost:C,setShippingCost:fe,setOtherCost:Je,shippingDistribution:he,setShippingDistribution:Ne,otherCostDistribution:$e,setOtherCostDistribution:G})}),T.jsx("div",{className:"card",children:T.jsx(yE,{tax:ae,setTax:ie,taxMethod:ee,setTaxMethod:X,taxDistribution:I,setTaxDistribution:A})}),T.jsx("div",{className:"card",children:T.jsx(gE,{discount:w,setDiscount:V,discountDistribution:x,setDiscountDistribution:P})})]}),T.jsxs("div",{className:"card summary-card-mobile",style:{marginTop:"var(--space-4)"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",marginBottom:"0.5em",gap:"8px"},children:[T.jsx("label",{htmlFor:"bill-date",style:{marginRight:"0.5em",fontWeight:500},children:"Bill Date:"}),T.jsx("input",{id:"bill-date",type:"date",value:ce,onChange:te=>oe(te.target.value),className:"input",max:W(),style:{width:"200px"}})]}),T.jsx(pE,{people:p,menuItems:R,orders:B,shippingCost:F,tax:ae,discount:w,otherCost:C,billDate:ce,excludeNoOrder:!0,taxMethod:ee,shippingDistribution:he,taxDistribution:I,discountDistribution:x,otherCostDistribution:$e,selectedRestaurant:de,restaurants:g,saveOrderToHistory:go})]})]})]}),T.jsx("div",{id:"notification",className:"notification"})]})}tS.createRoot(document.getElementById("root")).render(T.jsx(Ee.StrictMode,{children:T.jsx(w2,{})}));
